/*! For license information please see main.bundle.js.LICENSE.txt */
!function(t){const e=t.pl=t.pl||{};e.dictionary=Object.assign(e.dictionary||{},{"(may require <kbd>Fn</kbd>)":"(może wymagać użycia klawisza <kbd>Fn</kbd>)","%0 of %1":"%0 z %1",Accept:"Zaakceptuj","Accessibility help":"Pomoc dotycząca dostępności",Aquamarine:"Akwamaryna","Below, you can find a list of keyboard shortcuts that can be used in the editor.":"Poniżej znajdziesz listę skrótów klawiszowych, których można używać w edytorze.",Black:"Czarny",Blue:"Niebieski",Bold:"Pogrubienie","Bold text":"Pogrubia tekst",Cancel:"Anuluj",Clear:"Wyczyść","Click to edit block":"Kliknij, aby edytować blok",Close:"Zamknij","Close contextual balloons, dropdowns, and dialogs":"Zamyka podpowiedzi kontekstowe, menu rozwijane i okna dialogowe",Code:"Kod","Content editing keystrokes":"Klawisze edycji zawartości","Copy selected content":"Kopiuje zaznaczoną zawartość","Dim grey":"Ciemnoszary","Drag to move":"Przeciągnij, aby przenieść","Dropdown toolbar":"Rozwijany pasek narzędzi","Edit block":"Edytuj blok","Editor block content toolbar":"Pasek zadań treści blokowej edytora","Editor contextual toolbar":"Kontekstowy pasek zadań edytora","Editor dialog":"Okno edytora","Editor editing area: %0":"Obszar edycji edytora: %0","Editor toolbar":"Pasek narzędzi edytora","Execute the currently focused button":"Uruchamia przycisk będący aktualnie w fokusie",Green:"Zielony",Grey:"Szary","Help Contents. To close this dialog press ESC.":"Zawartość pomocy. Aby zamknąć to okno dialogowe, naciśnij klawisz ESC.",HEX:"SZESNASTKOWY","Insert a hard break (a new paragraph)":"Wstawia twardą spację (nowy akapit)","Insert a new paragraph directly after a widget":"Wstawia nowy akapit bezpośrednio po widżecie","Insert a new paragraph directly before a widget":"Wstawia nowy akapit bezpośrednio przed widżetem","Insert a soft break (a <code>&lt;br&gt;</code> element)":"Wstawia miękki enter (element <code>&lt;br&gt;</code>","Insert paragraph after block":"Wstaw akapit po bloku","Insert paragraph before block":"Wstaw akapit przed blokiem",Italic:"Kursywa","Italic text":"Zmienia tekst na kursywę","Keystrokes that can be used when a widget is selected (for example: image, table, etc.)":"Klawisze, których można używać po wybraniu widżetu (na przykład: obraz, tabela itd.)","Light blue":"Jasnoniebieski","Light green":"Jasnozielony","Light grey":"Jasnoszary","Move focus between form fields (inputs, buttons, etc.)":"Przenosi fokus pomiędzy polami formularza (polami wprowadzania, przyciskami itd.)","Move focus in and out of an active dialog window":"Przenosi fokus do i z aktywnego okna dialogowego","Move focus to the toolbar, navigate between toolbars":"Przenosi fokus na pasek narzędzi, umożliwia poruszanie się pomiędzy paskami narzędzi","Move out of an inline code style":"Przenosi zaznaczenie poza styl kodu inline","Move the caret to allow typing directly after a widget":"Przenosi kursor, aby umożliwić pisanie bezpośrednio za widżetem","Move the caret to allow typing directly before a widget":"Przenosi kursor, aby umożliwić pisanie bezpośrednio przed widżetem","Navigate through the toolbar":"Umożliwia poruszanie się po pasku narzędzi",Next:"Następny","No results found":"Nie znaleziono wyników","No searchable items":"Brak elementów do wyszukania","Open the accessibility help dialog":"Otwiera okno pomocy dotyczącej dostępności",Orange:"Pomarańczowy","Paste content":"Wkleja zawartość","Paste content as plain text":"Wkleja zawartość jako zwykły tekst","Press %0 for help.":"Naciśnij %0, aby uzyskać pomoc.","Press Enter to type after or press Shift + Enter to type before the widget":"Naciśnij Enter, aby pisać po widżecie, lub Shift + Enter, aby pisać przed widżetem",Previous:"Poprzedni",Purple:"Purpurowy",Red:"Czerwony",Redo:"Ponów","Rich Text Editor":"Edytor tekstu sformatowanego","Select all":"Zaznacz wszystko","Show more items":"Pokaż więcej",Strikethrough:"Przekreślenie","Strikethrough text":"Przekreśla tekst",Subscript:"Indeks dolny",Superscript:"Indeks górny","These keyboard shortcuts allow for quick access to content editing features.":"Te skróty klawiszowe umożliwiają szybki dostęp do funkcji edycji zawartości.",Turquoise:"Turkusowy",Underline:"Podkreślenie","Underline text":"Podkreśla tekst",Undo:"Cofnij","Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface.":"Aby łatwiej poruszać się po interfejsie użytkownika CKEditor 5, użyj następujących skrótów klawiszowych.","User interface and content navigation keystrokes":"Klawisze umożliwiające poruszanie się po interfejsie użytkownika i zawartości",White:"Biały","Widget toolbar":"Pasek widgetów",Yellow:"Żółty"}),e.getPluralForm=function(t){return 1==t?0:t%10>=2&&t%10<=4&&(t%100<12||t%100>14)?1:1!=t&&t%10>=0&&t%10<=1||t%10>=5&&t%10<=9||t%100>=12&&t%100<=14?2:3}}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),(()=>{var t={5659:(t,e,r)=>{const n=r(8156),o={};for(const t of Object.keys(n))o[n[t]]=t;const i={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};t.exports=i;for(const t of Object.keys(i)){if(!("channels"in i[t]))throw new Error("missing channels property: "+t);if(!("labels"in i[t]))throw new Error("missing channel labels property: "+t);if(i[t].labels.length!==i[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:r}=i[t];delete i[t].channels,delete i[t].labels,Object.defineProperty(i[t],"channels",{value:e}),Object.defineProperty(i[t],"labels",{value:r})}i.rgb.hsl=function(t){const e=t[0]/255,r=t[1]/255,n=t[2]/255,o=Math.min(e,r,n),i=Math.max(e,r,n),a=i-o;let c,u;i===o?c=0:e===i?c=(r-n)/a:r===i?c=2+(n-e)/a:n===i&&(c=4+(e-r)/a),c=Math.min(60*c,360),c<0&&(c+=360);const s=(o+i)/2;return u=i===o?0:s<=.5?a/(i+o):a/(2-i-o),[c,100*u,100*s]},i.rgb.hsv=function(t){let e,r,n,o,i;const a=t[0]/255,c=t[1]/255,u=t[2]/255,s=Math.max(a,c,u),l=s-Math.min(a,c,u),f=function(t){return(s-t)/6/l+.5};return 0===l?(o=0,i=0):(i=l/s,e=f(a),r=f(c),n=f(u),a===s?o=n-r:c===s?o=1/3+e-n:u===s&&(o=2/3+r-e),o<0?o+=1:o>1&&(o-=1)),[360*o,100*i,100*s]},i.rgb.hwb=function(t){const e=t[0],r=t[1];let n=t[2];const o=i.rgb.hsl(t)[0],a=1/255*Math.min(e,Math.min(r,n));return n=1-1/255*Math.max(e,Math.max(r,n)),[o,100*a,100*n]},i.rgb.cmyk=function(t){const e=t[0]/255,r=t[1]/255,n=t[2]/255,o=Math.min(1-e,1-r,1-n);return[100*((1-e-o)/(1-o)||0),100*((1-r-o)/(1-o)||0),100*((1-n-o)/(1-o)||0),100*o]},i.rgb.keyword=function(t){const e=o[t];if(e)return e;let r,i=1/0;for(const e of Object.keys(n)){const o=(c=n[e],((a=t)[0]-c[0])**2+(a[1]-c[1])**2+(a[2]-c[2])**2);o<i&&(i=o,r=e)}var a,c;return r},i.keyword.rgb=function(t){return n[t]},i.rgb.xyz=function(t){let e=t[0]/255,r=t[1]/255,n=t[2]/255;return e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92,[100*(.4124*e+.3576*r+.1805*n),100*(.2126*e+.7152*r+.0722*n),100*(.0193*e+.1192*r+.9505*n)]},i.rgb.lab=function(t){const e=i.rgb.xyz(t);let r=e[0],n=e[1],o=e[2];return r/=95.047,n/=100,o/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,o=o>.008856?o**(1/3):7.787*o+16/116,[116*n-16,500*(r-n),200*(n-o)]},i.hsl.rgb=function(t){const e=t[0]/360,r=t[1]/100,n=t[2]/100;let o,i,a;if(0===r)return a=255*n,[a,a,a];o=n<.5?n*(1+r):n+r-n*r;const c=2*n-o,u=[0,0,0];for(let t=0;t<3;t++)i=e+1/3*-(t-1),i<0&&i++,i>1&&i--,a=6*i<1?c+6*(o-c)*i:2*i<1?o:3*i<2?c+(o-c)*(2/3-i)*6:c,u[t]=255*a;return u},i.hsl.hsv=function(t){const e=t[0];let r=t[1]/100,n=t[2]/100,o=r;const i=Math.max(n,.01);return n*=2,r*=n<=1?n:2-n,o*=i<=1?i:2-i,[e,100*(0===n?2*o/(i+o):2*r/(n+r)),(n+r)/2*100]},i.hsv.rgb=function(t){const e=t[0]/60,r=t[1]/100;let n=t[2]/100;const o=Math.floor(e)%6,i=e-Math.floor(e),a=255*n*(1-r),c=255*n*(1-r*i),u=255*n*(1-r*(1-i));switch(n*=255,o){case 0:return[n,u,a];case 1:return[c,n,a];case 2:return[a,n,u];case 3:return[a,c,n];case 4:return[u,a,n];case 5:return[n,a,c]}},i.hsv.hsl=function(t){const e=t[0],r=t[1]/100,n=t[2]/100,o=Math.max(n,.01);let i,a;a=(2-r)*n;const c=(2-r)*o;return i=r*o,i/=c<=1?c:2-c,i=i||0,a/=2,[e,100*i,100*a]},i.hwb.rgb=function(t){const e=t[0]/360;let r=t[1]/100,n=t[2]/100;const o=r+n;let i;o>1&&(r/=o,n/=o);const a=Math.floor(6*e),c=1-n;i=6*e-a,1&a&&(i=1-i);const u=r+i*(c-r);let s,l,f;switch(a){default:case 6:case 0:s=c,l=u,f=r;break;case 1:s=u,l=c,f=r;break;case 2:s=r,l=c,f=u;break;case 3:s=r,l=u,f=c;break;case 4:s=u,l=r,f=c;break;case 5:s=c,l=r,f=u}return[255*s,255*l,255*f]},i.cmyk.rgb=function(t){const e=t[0]/100,r=t[1]/100,n=t[2]/100,o=t[3]/100;return[255*(1-Math.min(1,e*(1-o)+o)),255*(1-Math.min(1,r*(1-o)+o)),255*(1-Math.min(1,n*(1-o)+o))]},i.xyz.rgb=function(t){const e=t[0]/100,r=t[1]/100,n=t[2]/100;let o,i,a;return o=3.2406*e+-1.5372*r+-.4986*n,i=-.9689*e+1.8758*r+.0415*n,a=.0557*e+-.204*r+1.057*n,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i=i>.0031308?1.055*i**(1/2.4)-.055:12.92*i,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,o=Math.min(Math.max(0,o),1),i=Math.min(Math.max(0,i),1),a=Math.min(Math.max(0,a),1),[255*o,255*i,255*a]},i.xyz.lab=function(t){let e=t[0],r=t[1],n=t[2];return e/=95.047,r/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,[116*r-16,500*(e-r),200*(r-n)]},i.lab.xyz=function(t){let e,r,n;r=(t[0]+16)/116,e=t[1]/500+r,n=r-t[2]/200;const o=r**3,i=e**3,a=n**3;return r=o>.008856?o:(r-16/116)/7.787,e=i>.008856?i:(e-16/116)/7.787,n=a>.008856?a:(n-16/116)/7.787,e*=95.047,r*=100,n*=108.883,[e,r,n]},i.lab.lch=function(t){const e=t[0],r=t[1],n=t[2];let o;return o=360*Math.atan2(n,r)/2/Math.PI,o<0&&(o+=360),[e,Math.sqrt(r*r+n*n),o]},i.lch.lab=function(t){const e=t[0],r=t[1],n=t[2]/360*2*Math.PI;return[e,r*Math.cos(n),r*Math.sin(n)]},i.rgb.ansi16=function(t,e=null){const[r,n,o]=t;let a=null===e?i.rgb.hsv(t)[2]:e;if(a=Math.round(a/50),0===a)return 30;let c=30+(Math.round(o/255)<<2|Math.round(n/255)<<1|Math.round(r/255));return 2===a&&(c+=60),c},i.hsv.ansi16=function(t){return i.rgb.ansi16(i.hsv.rgb(t),t[2])},i.rgb.ansi256=function(t){const e=t[0],r=t[1],n=t[2];return e===r&&r===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(r/255*5)+Math.round(n/255*5)},i.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const r=.5*(1+~~(t>50));return[(1&e)*r*255,(e>>1&1)*r*255,(e>>2&1)*r*255]},i.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;return t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},i.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},i.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let r=e[0];3===e[0].length&&(r=r.split("").map((t=>t+t)).join(""));const n=parseInt(r,16);return[n>>16&255,n>>8&255,255&n]},i.rgb.hcg=function(t){const e=t[0]/255,r=t[1]/255,n=t[2]/255,o=Math.max(Math.max(e,r),n),i=Math.min(Math.min(e,r),n),a=o-i;let c,u;return c=a<1?i/(1-a):0,u=a<=0?0:o===e?(r-n)/a%6:o===r?2+(n-e)/a:4+(e-r)/a,u/=6,u%=1,[360*u,100*a,100*c]},i.hsl.hcg=function(t){const e=t[1]/100,r=t[2]/100,n=r<.5?2*e*r:2*e*(1-r);let o=0;return n<1&&(o=(r-.5*n)/(1-n)),[t[0],100*n,100*o]},i.hsv.hcg=function(t){const e=t[1]/100,r=t[2]/100,n=e*r;let o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},i.hcg.rgb=function(t){const e=t[0]/360,r=t[1]/100,n=t[2]/100;if(0===r)return[255*n,255*n,255*n];const o=[0,0,0],i=e%1*6,a=i%1,c=1-a;let u=0;switch(Math.floor(i)){case 0:o[0]=1,o[1]=a,o[2]=0;break;case 1:o[0]=c,o[1]=1,o[2]=0;break;case 2:o[0]=0,o[1]=1,o[2]=a;break;case 3:o[0]=0,o[1]=c,o[2]=1;break;case 4:o[0]=a,o[1]=0,o[2]=1;break;default:o[0]=1,o[1]=0,o[2]=c}return u=(1-r)*n,[255*(r*o[0]+u),255*(r*o[1]+u),255*(r*o[2]+u)]},i.hcg.hsv=function(t){const e=t[1]/100,r=e+t[2]/100*(1-e);let n=0;return r>0&&(n=e/r),[t[0],100*n,100*r]},i.hcg.hsl=function(t){const e=t[1]/100,r=t[2]/100*(1-e)+.5*e;let n=0;return r>0&&r<.5?n=e/(2*r):r>=.5&&r<1&&(n=e/(2*(1-r))),[t[0],100*n,100*r]},i.hcg.hwb=function(t){const e=t[1]/100,r=e+t[2]/100*(1-e);return[t[0],100*(r-e),100*(1-r)]},i.hwb.hcg=function(t){const e=t[1]/100,r=1-t[2]/100,n=r-e;let o=0;return n<1&&(o=(r-n)/(1-n)),[t[0],100*n,100*o]},i.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},i.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},i.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},i.gray.hsl=function(t){return[0,0,t[0]]},i.gray.hsv=i.gray.hsl,i.gray.hwb=function(t){return[0,100,t[0]]},i.gray.cmyk=function(t){return[0,0,0,t[0]]},i.gray.lab=function(t){return[t[0],0,0]},i.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),r=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(r.length)+r},i.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},734:(t,e,r)=>{const n=r(5659),o=r(8507),i={};Object.keys(n).forEach((t=>{i[t]={},Object.defineProperty(i[t],"channels",{value:n[t].channels}),Object.defineProperty(i[t],"labels",{value:n[t].labels});const e=o(t);Object.keys(e).forEach((r=>{const n=e[r];i[t][r]=function(t){const e=function(...e){const r=e[0];if(null==r)return r;r.length>1&&(e=r);const n=t(e);if("object"==typeof n)for(let t=n.length,e=0;e<t;e++)n[e]=Math.round(n[e]);return n};return"conversion"in t&&(e.conversion=t.conversion),e}(n),i[t][r].raw=function(t){const e=function(...e){const r=e[0];return null==r?r:(r.length>1&&(e=r),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(n)}))})),t.exports=i},8507:(t,e,r)=>{const n=r(5659);function o(t,e){return function(r){return e(t(r))}}function i(t,e){const r=[e[t].parent,t];let i=n[e[t].parent][t],a=e[t].parent;for(;e[a].parent;)r.unshift(e[a].parent),i=o(n[e[a].parent][a],i),a=e[a].parent;return i.conversion=r,i}t.exports=function(t){const e=function(t){const e=function(){const t={},e=Object.keys(n);for(let r=e.length,n=0;n<r;n++)t[e[n]]={distance:-1,parent:null};return t}(),r=[t];for(e[t].distance=0;r.length;){const t=r.pop(),o=Object.keys(n[t]);for(let n=o.length,i=0;i<n;i++){const n=o[i],a=e[n];-1===a.distance&&(a.distance=e[t].distance+1,a.parent=t,r.unshift(n))}}return e}(t),r={},o=Object.keys(e);for(let t=o.length,n=0;n<t;n++){const t=o[n];null!==e[t].parent&&(r[t]=i(t,e))}return r}},8156:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},7930:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck-content code{background-color:hsla(0,0%,78%,.3);border-radius:2px;padding:.15em}.ck.ck-editor__editable .ck-code_selected{background-color:hsla(0,0%,78%,.5)}",""]);const i=o},6356:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position{display:inline;pointer-events:none;position:relative}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{position:absolute;width:0}.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__selection-handle,.ck.ck-editor__editable .ck-widget:-webkit-drag>.ck-widget__type-around{display:none}.ck.ck-clipboard-drop-target-line{pointer-events:none;position:absolute}:root{--ck-clipboard-drop-target-dot-width:12px;--ck-clipboard-drop-target-dot-height:8px;--ck-clipboard-drop-target-color:var(--ck-color-focus-border)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);bottom:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);margin-left:-1px;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5)}.ck.ck-editor__editable .ck.ck-clipboard-drop-target-position span:after{border-color:var(--ck-clipboard-drop-target-color) transparent transparent transparent;border-style:solid;border-width:calc(var(--ck-clipboard-drop-target-dot-height)) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5);content:"";display:block;height:0;left:50%;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-height)*-.5);transform:translateX(-50%);width:0}.ck.ck-editor__editable .ck-widget.ck-clipboard-drop-target-range{outline:var(--ck-widget-outline-thickness) solid var(--ck-clipboard-drop-target-color)!important}.ck.ck-editor__editable .ck-widget:-webkit-drag{zoom:.6;outline:none!important}.ck.ck-clipboard-drop-target-line{background:var(--ck-clipboard-drop-target-color);border:1px solid var(--ck-clipboard-drop-target-color);height:0;margin-top:-1px}.ck.ck-clipboard-drop-target-line:before{border-style:solid;content:"";height:0;position:absolute;top:calc(var(--ck-clipboard-drop-target-dot-width)*-.5);width:0}[dir=ltr] .ck.ck-clipboard-drop-target-line:before{border-color:transparent transparent transparent var(--ck-clipboard-drop-target-color);border-width:calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0 calc(var(--ck-clipboard-drop-target-dot-width)*.5) var(--ck-clipboard-drop-target-dot-height);left:-1px}[dir=rtl] .ck.ck-clipboard-drop-target-line:before{border-color:transparent var(--ck-clipboard-drop-target-color) transparent transparent;border-width:calc(var(--ck-clipboard-drop-target-dot-width)*.5) var(--ck-clipboard-drop-target-dot-height) calc(var(--ck-clipboard-drop-target-dot-width)*.5) 0;right:-1px}',""]);const i=o},2515:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-editor{position:relative}.ck.ck-editor .ck-editor__top .ck-sticky-panel .ck-toolbar{z-index:var(--ck-z-panel)}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-editor__top .ck-sticky-panel .ck-toolbar{border-bottom-width:0}.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar{border-bottom-width:1px;border-radius:0}.ck-rounded-corners .ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar,.ck.ck-editor__top .ck-sticky-panel .ck-sticky-panel__content_sticky .ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:0}.ck.ck-editor__main>.ck-editor__editable{background:var(--ck-color-base-background);border-radius:0}.ck-rounded-corners .ck.ck-editor__main>.ck-editor__editable,.ck.ck-editor__main>.ck-editor__editable.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}.ck.ck-editor__main>.ck-editor__editable:not(.ck-focused){border-color:var(--ck-color-base-border)}",""]);const i=o},121:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck .ck-placeholder,.ck.ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{content:attr(data-placeholder);left:0;pointer-events:none;position:absolute;right:0}.ck.ck-read-only .ck-placeholder:before{display:none}.ck.ck-reset_all .ck-placeholder{position:relative}.ck .ck-placeholder:before,.ck.ck-placeholder:before{color:var(--ck-color-engine-placeholder-text);cursor:text}",""]);const i=o},8397:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-editor__editable span[data-ck-unsafe-element]{display:none}",""]);const i=o},7012:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-color-mention-background:rgba(153,0,48,.1);--ck-color-mention-text:#990030}.ck-content .mention{background:var(--ck-color-mention-background);color:var(--ck-color-mention-text)}",""]);const i=o},7790:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-mention-list-max-height:300px}.ck.ck-mentions{max-height:var(--ck-mention-list-max-height);overflow-x:hidden;overflow-y:auto;overscroll-behavior:contain}.ck.ck-mentions>.ck-list__item{flex-shrink:0;overflow:hidden}",""]);const i=o},1836:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-aria-live-announcer{left:-10000px;position:absolute;top:-10000px}",""]);const i=o},5558:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-autocomplete{position:relative}.ck.ck-autocomplete>.ck-search__results{position:absolute;z-index:var(--ck-z-panel)}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{bottom:100%}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{bottom:auto;top:100%}.ck.ck-autocomplete>.ck-search__results{border-radius:0}.ck-rounded-corners .ck.ck-autocomplete>.ck-search__results,.ck.ck-autocomplete>.ck-search__results.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-autocomplete>.ck-search__results{background:var(--ck-color-base-background);border:1px solid var(--ck-color-dropdown-panel-border);box-shadow:var(--ck-drop-shadow),0 0;max-height:200px;min-width:auto;overflow-y:auto}.ck.ck-autocomplete>.ck-search__results.ck-search__results_n{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.ck.ck-autocomplete>.ck-search__results.ck-search__results_s{border-top-left-radius:0;border-top-right-radius:0;margin-top:-1px}",""]);const i=o},5810:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-button,a.ck.ck-button{align-items:center;display:inline-flex;position:relative;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}[dir=ltr] .ck.ck-button,[dir=ltr] a.ck.ck-button{justify-content:left}[dir=rtl] .ck.ck-button,[dir=rtl] a.ck.ck-button{justify-content:right}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{display:none}.ck.ck-button.ck-button_with-text .ck-button__label,a.ck.ck-button.ck-button_with-text .ck-button__label{display:inline-block}.ck.ck-button:not(.ck-button_with-text),a.ck.ck-button:not(.ck-button_with-text){justify-content:center}.ck.ck-button,a.ck.ck-button{background:var(--ck-color-button-default-background)}.ck.ck-button:not(.ck-disabled):hover,a.ck.ck-button:not(.ck-disabled):hover{background:var(--ck-color-button-default-hover-background)}.ck.ck-button:not(.ck-disabled):active,a.ck.ck-button:not(.ck-disabled):active{background:var(--ck-color-button-default-active-background)}.ck.ck-button.ck-disabled,a.ck.ck-button.ck-disabled{background:var(--ck-color-button-default-disabled-background)}.ck.ck-button,a.ck.ck-button{border-radius:0}.ck-rounded-corners .ck.ck-button,.ck-rounded-corners a.ck.ck-button,.ck.ck-button.ck-rounded-corners,a.ck.ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-button,a.ck.ck-button{-webkit-appearance:none;border:1px solid transparent;cursor:default;font-size:inherit;line-height:1;min-height:var(--ck-ui-component-min-height);min-width:var(--ck-ui-component-min-height);padding:var(--ck-spacing-tiny);text-align:center;transition:box-shadow .2s ease-in-out,border .2s ease-in-out;vertical-align:middle;white-space:nowrap}.ck.ck-button:active,.ck.ck-button:focus,a.ck.ck-button:active,a.ck.ck-button:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-button .ck-button__icon use,.ck.ck-button .ck-button__icon use *,a.ck.ck-button .ck-button__icon use,a.ck.ck-button .ck-button__icon use *{color:inherit}.ck.ck-button .ck-button__label,a.ck.ck-button .ck-button__label{color:inherit;cursor:inherit;font-size:inherit;font-weight:inherit;vertical-align:middle}[dir=ltr] .ck.ck-button .ck-button__label,[dir=ltr] a.ck.ck-button .ck-button__label{text-align:left}[dir=rtl] .ck.ck-button .ck-button__label,[dir=rtl] a.ck.ck-button .ck-button__label{text-align:right}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{color:inherit}[dir=ltr] .ck.ck-button .ck-button__keystroke,[dir=ltr] a.ck.ck-button .ck-button__keystroke{margin-left:var(--ck-spacing-large)}[dir=rtl] .ck.ck-button .ck-button__keystroke,[dir=rtl] a.ck.ck-button .ck-button__keystroke{margin-right:var(--ck-spacing-large)}.ck.ck-button .ck-button__keystroke,a.ck.ck-button .ck-button__keystroke{font-weight:700;opacity:.7}.ck.ck-button.ck-disabled:active,.ck.ck-button.ck-disabled:focus,a.ck.ck-button.ck-disabled:active,a.ck.ck-button.ck-disabled:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-button.ck-disabled .ck-button__icon,.ck.ck-button.ck-disabled .ck-button__label,a.ck.ck-button.ck-disabled .ck-button__icon,a.ck.ck-button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-disabled .ck-button__keystroke,a.ck.ck-button.ck-disabled .ck-button__keystroke{opacity:.3}.ck.ck-button.ck-button_with-text,a.ck.ck-button.ck-button_with-text{padding:var(--ck-spacing-tiny) var(--ck-spacing-standard)}[dir=ltr] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=ltr] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:calc(var(--ck-spacing-small)*-1);margin-right:var(--ck-spacing-small)}[dir=rtl] .ck.ck-button.ck-button_with-text .ck-button__icon,[dir=rtl] a.ck.ck-button.ck-button_with-text .ck-button__icon{margin-left:var(--ck-spacing-small);margin-right:calc(var(--ck-spacing-small)*-1)}.ck.ck-button.ck-button_with-keystroke .ck-button__label,a.ck.ck-button.ck-button_with-keystroke .ck-button__label{flex-grow:1}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{background:var(--ck-color-button-on-background)}.ck.ck-button.ck-on:not(.ck-disabled):hover,a.ck.ck-button.ck-on:not(.ck-disabled):hover{background:var(--ck-color-button-on-hover-background)}.ck.ck-button.ck-on:not(.ck-disabled):active,a.ck.ck-button.ck-on:not(.ck-disabled):active{background:var(--ck-color-button-on-active-background)}.ck.ck-button.ck-on.ck-disabled,a.ck.ck-button.ck-on.ck-disabled{background:var(--ck-color-button-on-disabled-background)}.ck.ck-button.ck-on,a.ck.ck-button.ck-on{color:var(--ck-color-button-on-color)}.ck.ck-button.ck-button-save,a.ck.ck-button.ck-button-save{color:var(--ck-color-button-save)}.ck.ck-button.ck-button-cancel,a.ck.ck-button.ck-button-cancel{color:var(--ck-color-button-cancel)}.ck.ck-button-action,a.ck.ck-button-action{background:var(--ck-color-button-action-background)}.ck.ck-button-action:not(.ck-disabled):hover,a.ck.ck-button-action:not(.ck-disabled):hover{background:var(--ck-color-button-action-hover-background)}.ck.ck-button-action:not(.ck-disabled):active,a.ck.ck-button-action:not(.ck-disabled):active{background:var(--ck-color-button-action-active-background)}.ck.ck-button-action.ck-disabled,a.ck.ck-button-action.ck-disabled{background:var(--ck-color-button-action-disabled-background)}.ck.ck-button-action,a.ck.ck-button-action{color:var(--ck-color-button-action-text)}.ck.ck-button-bold,a.ck.ck-button-bold{font-weight:700}",""]);const i=o},3986:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{display:block}:root{--ck-switch-button-toggle-width:2.6153846154em;--ck-switch-button-toggle-inner-size:calc(1.07692em + 1px);--ck-switch-button-translation:calc(var(--ck-switch-button-toggle-width) - var(--ck-switch-button-toggle-inner-size) - 2px);--ck-switch-button-inner-hover-shadow:0 0 0 5px var(--ck-color-switch-button-inner-shadow)}.ck.ck-button.ck-switchbutton,.ck.ck-button.ck-switchbutton.ck-on:active,.ck.ck-button.ck-switchbutton.ck-on:focus,.ck.ck-button.ck-switchbutton.ck-on:hover,.ck.ck-button.ck-switchbutton:active,.ck.ck-button.ck-switchbutton:focus,.ck.ck-button.ck-switchbutton:hover{background:transparent;color:inherit}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__label{margin-right:calc(var(--ck-spacing-large)*2)}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__label{margin-left:calc(var(--ck-spacing-large)*2)}.ck.ck-button.ck-switchbutton .ck-button__toggle{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle,.ck.ck-button.ck-switchbutton .ck-button__toggle.ck-rounded-corners{border-radius:var(--ck-border-radius)}[dir=ltr] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-left:auto}[dir=rtl] .ck.ck-button.ck-switchbutton .ck-button__toggle{margin-right:auto}.ck.ck-button.ck-switchbutton .ck-button__toggle{background:var(--ck-color-switch-button-off-background);border:1px solid transparent;transition:background .4s ease,box-shadow .2s ease-in-out,outline .2s ease-in-out;width:var(--ck-switch-button-toggle-width)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{border-radius:0}.ck-rounded-corners .ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner,.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner.ck-rounded-corners{border-radius:var(--ck-border-radius);border-radius:calc(var(--ck-border-radius)*.5)}.ck.ck-button.ck-switchbutton .ck-button__toggle .ck-button__toggle__inner{background:var(--ck-color-switch-button-inner-background);height:var(--ck-switch-button-toggle-inner-size);transition:all .3s ease;width:var(--ck-switch-button-toggle-inner-size)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover{background:var(--ck-color-switch-button-off-hover-background)}.ck.ck-button.ck-switchbutton .ck-button__toggle:hover .ck-button__toggle__inner{box-shadow:var(--ck-switch-button-inner-hover-shadow)}.ck.ck-button.ck-switchbutton.ck-disabled .ck-button__toggle{opacity:var(--ck-disabled-opacity)}.ck.ck-button.ck-switchbutton:focus{border-color:transparent;box-shadow:none;outline:none}.ck.ck-button.ck-switchbutton:focus .ck-button__toggle{box-shadow:0 0 0 1px var(--ck-color-base-background),0 0 0 5px var(--ck-color-focus-outer-shadow);outline:var(--ck-focus-ring);outline-offset:1px}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle{background:var(--ck-color-switch-button-on-background)}.ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle:hover{background:var(--ck-color-switch-button-on-hover-background)}[dir=ltr] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(var( --ck-switch-button-translation ))}[dir=rtl] .ck.ck-button.ck-switchbutton.ck-on .ck-button__toggle .ck-button__toggle__inner{transform:translateX(calc(var( --ck-switch-button-translation )*-1))}",""]);const i=o},3476:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-collapsible.ck-collapsible_collapsed>.ck-collapsible__children{display:none}:root{--ck-collapsible-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-collapsible>.ck.ck-button{border-radius:0;color:inherit;font-weight:700;padding:var(--ck-list-button-padding);width:100%}.ck.ck-collapsible>.ck.ck-button:focus{background:transparent}.ck.ck-collapsible>.ck.ck-button:active,.ck.ck-collapsible>.ck.ck-button:hover:not(:focus),.ck.ck-collapsible>.ck.ck-button:not(:focus){background:transparent;border-color:transparent;box-shadow:none}.ck.ck-collapsible>.ck.ck-button>.ck-icon{margin-right:var(--ck-spacing-medium);width:var(--ck-collapsible-arrow-size)}.ck.ck-collapsible>.ck-collapsible__children{padding:var(--ck-spacing-medium) var(--ck-spacing-large) var(--ck-spacing-large)}.ck.ck-collapsible.ck-collapsible_collapsed>.ck.ck-button .ck-icon{transform:rotate(-90deg)}",""]);const i=o},4488:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-color-grid{display:grid}:root{--ck-color-grid-tile-size:24px;--ck-color-color-grid-check-icon:#166fd4}.ck.ck-color-grid{grid-gap:5px;padding:8px}.ck.ck-color-grid__tile{border:0;height:var(--ck-color-grid-tile-size);min-height:var(--ck-color-grid-tile-size);min-width:var(--ck-color-grid-tile-size);padding:0;transition:box-shadow .2s ease;width:var(--ck-color-grid-tile-size)}.ck.ck-color-grid__tile.ck-disabled{cursor:unset;transition:unset}.ck.ck-color-grid__tile.ck-color-selector__color-tile_bordered{box-shadow:0 0 0 1px var(--ck-color-base-border)}.ck.ck-color-grid__tile .ck.ck-icon{color:var(--ck-color-color-grid-check-icon);display:none}.ck.ck-color-grid__tile.ck-on{box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-base-text)}.ck.ck-color-grid__tile.ck-on .ck.ck-icon{display:block}.ck.ck-color-grid__tile.ck-on,.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){border:0}.ck.ck-color-grid__tile:focus:not(.ck-disabled),.ck.ck-color-grid__tile:hover:not(.ck-disabled){box-shadow:inset 0 0 0 1px var(--ck-color-base-background),0 0 0 2px var(--ck-color-focus-border)}.ck.ck-color-grid__label{padding:0 var(--ck-spacing-standard)}",""]);const i=o},3900:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".color-picker-hex-input{width:max-content}.color-picker-hex-input .ck.ck-input{min-width:unset}.ck.ck-color-picker__row{display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between;margin:var(--ck-spacing-large) 0 0;width:unset}.ck.ck-color-picker__row .ck.ck-labeled-field-view{padding-top:unset}.ck.ck-color-picker__row .ck.ck-input-text{width:unset}.ck.ck-color-picker__row .ck-color-picker__hash-view{padding-right:var(--ck-spacing-medium);padding-top:var(--ck-spacing-tiny)}",""]);const i=o},9576:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{align-items:center;display:flex}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{justify-content:flex-start}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{display:flex;flex-direction:row;justify-content:space-around}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-cancel,.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar .ck-button-save{flex:1}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker,.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__remove-color{width:100%}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker{border-bottom-left-radius:0;border-bottom-right-radius:0;padding:calc(var(--ck-spacing-standard)/2) var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker:not(:focus){border-top:1px solid var(--ck-color-base-border)}[dir=ltr] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-color-selector .ck-color-grids-fragment .ck-button.ck-color-selector__color-picker .ck.ck-icon{margin-left:var(--ck-spacing-standard)}.ck.ck-color-selector .ck-color-grids-fragment label.ck.ck-color-grid__label{font-weight:unset}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker{padding:8px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker{height:100px;min-width:180px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation){border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue){border-radius:0 0 var(--ck-border-radius) var(--ck-border-radius)}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(hue-pointer),.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-picker .hex-color-picker::part(saturation-pointer){height:15px;width:15px}.ck.ck-color-selector .ck-color-picker-fragment .ck.ck-color-selector_action-bar{padding:0 8px 8px}",""]);const i=o},8390:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-dialog-overlay{bottom:0;left:0;overscroll-behavior:none;position:fixed;right:0;top:0;user-select:none}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent{animation:none;background:none;pointer-events:none}.ck.ck-dialog{overscroll-behavior:none;position:absolute;width:fit-content}.ck.ck-dialog .ck.ck-form__header{flex-shrink:0}.ck.ck-dialog .ck.ck-form__header .ck-form__header__label{cursor:grab}.ck.ck-dialog-overlay.ck-dialog-overlay__transparent .ck.ck-dialog{pointer-events:all}:root{--ck-dialog-overlay-background-color:rgba(0,0,0,.5);--ck-dialog-drop-shadow:0px 0px 6px 2px rgba(0,0,0,.15);--ck-dialog-max-width:100vw;--ck-dialog-max-height:90vh;--ck-color-dialog-background:var(--ck-color-base-background);--ck-color-dialog-form-header-border:var(--ck-color-base-border)}.ck.ck-dialog-overlay{animation:ck-dialog-fade-in .3s;background:var(--ck-dialog-overlay-background-color);z-index:var(--ck-z-dialog)}.ck.ck-dialog{border-radius:0}.ck-rounded-corners .ck.ck-dialog,.ck.ck-dialog.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dialog{--ck-drop-shadow:var(--ck-dialog-drop-shadow);background:var(--ck-color-dialog-background);border:1px solid var(--ck-color-base-border);box-shadow:var(--ck-drop-shadow),0 0;max-height:var(--ck-dialog-max-height);max-width:var(--ck-dialog-max-width)}.ck.ck-dialog .ck.ck-form__header{border-bottom:1px solid var(--ck-color-dialog-form-header-border)}@keyframes ck-dialog-fade-in{0%{background:transparent}to{background:var(--ck-dialog-overlay-background-color)}}",""]);const i=o},6533:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-dialog .ck.ck-dialog__actions{display:flex;justify-content:flex-end;padding:var(--ck-spacing-large)}.ck.ck-dialog .ck.ck-dialog__actions>*+*{margin-left:var(--ck-spacing-large)}",""]);const i=o},6608:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-dropdown-max-width:75vw}.ck.ck-dropdown{display:inline-block;position:relative}.ck.ck-dropdown .ck-dropdown__arrow{pointer-events:none;z-index:var(--ck-z-default)}.ck.ck-dropdown .ck-button.ck-dropdown__button{width:100%}.ck.ck-dropdown .ck-dropdown__panel{display:none;max-width:var(--ck-dropdown-max-width);position:absolute;z-index:var(--ck-z-panel)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel-visible{display:inline-block}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw{bottom:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{bottom:auto;top:100%}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_ne,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_se{left:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sw{right:0}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_n,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_s{left:50%;transform:translateX(-50%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nmw,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_smw{left:75%;transform:translateX(-75%)}.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_nme,.ck.ck-dropdown .ck-dropdown__panel.ck-dropdown__panel_sme{left:25%;transform:translateX(-25%)}.ck.ck-toolbar .ck-dropdown__panel{z-index:calc(var(--ck-z-panel) + 1)}:root{--ck-dropdown-arrow-size:calc(var(--ck-icon-size)*0.5)}.ck.ck-dropdown{font-size:inherit}.ck.ck-dropdown .ck-dropdown__arrow{width:var(--ck-dropdown-arrow-size)}[dir=ltr] .ck.ck-dropdown .ck-dropdown__arrow{margin-left:var(--ck-spacing-standard);right:var(--ck-spacing-standard)}[dir=rtl] .ck.ck-dropdown .ck-dropdown__arrow{left:var(--ck-spacing-standard);margin-right:var(--ck-spacing-small)}.ck.ck-dropdown.ck-disabled .ck-dropdown__arrow{opacity:var(--ck-disabled-opacity)}[dir=ltr] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-left:var(--ck-spacing-small)}[dir=rtl] .ck.ck-dropdown .ck-button.ck-dropdown__button:not(.ck-button_with-text){padding-right:var(--ck-spacing-small)}.ck.ck-dropdown .ck-button.ck-dropdown__button .ck-button__label{overflow:hidden;text-overflow:ellipsis;width:7em}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-disabled .ck-button__label{opacity:var(--ck-disabled-opacity)}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on{border-bottom-left-radius:0;border-bottom-right-radius:0}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-dropdown__button_label-width_auto .ck-button__label{width:auto}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active{box-shadow:none}.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-off:active:focus,.ck.ck-dropdown .ck-button.ck-dropdown__button.ck-on:active:focus{box-shadow:var(--ck-focus-outer-shadow),0 0}.ck.ck-dropdown__panel{border-radius:0}.ck-rounded-corners .ck.ck-dropdown__panel,.ck.ck-dropdown__panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-dropdown__panel{background:var(--ck-color-dropdown-panel-background);border:1px solid var(--ck-color-dropdown-panel-border);bottom:0;box-shadow:var(--ck-drop-shadow),0 0;min-width:100%}.ck.ck-dropdown__panel.ck-dropdown__panel_se{border-top-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_sw{border-top-right-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_ne{border-bottom-left-radius:0}.ck.ck-dropdown__panel.ck-dropdown__panel_nw{border-bottom-right-radius:0}.ck.ck-dropdown__panel:focus{outline:none}",""]);const i=o},8424:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-dropdown .ck-dropdown__panel .ck-list{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list,.ck.ck-dropdown .ck-dropdown__panel .ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:first-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button{border-radius:0}.ck-rounded-corners .ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button,.ck.ck-dropdown .ck-dropdown__panel .ck-list .ck-list__item:last-child .ck-button.ck-rounded-corners{border-radius:var(--ck-border-radius);border-top-left-radius:0;border-top-right-radius:0}",""]);const i=o},4515:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'.ck.ck-splitbutton{font-size:inherit}.ck.ck-splitbutton .ck-splitbutton__action:focus{z-index:calc(var(--ck-z-default) + 1)}:root{--ck-color-split-button-hover-background:#ebebeb;--ck-color-split-button-hover-border:#b3b3b3}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-right-radius:unset;border-top-right-radius:unset}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__action{border-bottom-left-radius:unset;border-top-left-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow{min-width:unset}[dir=ltr] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-left-radius:unset;border-top-left-radius:unset}[dir=rtl] .ck.ck-splitbutton>.ck-splitbutton__arrow{border-bottom-right-radius:unset;border-top-right-radius:unset}.ck.ck-splitbutton>.ck-splitbutton__arrow svg{width:var(--ck-dropdown-arrow-size)}.ck.ck-splitbutton>.ck-splitbutton__arrow:not(:focus){border-bottom-width:0;border-top-width:0}.ck.ck-splitbutton.ck-splitbutton_open>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover),.ck.ck-splitbutton:hover>.ck-button:not(.ck-on):not(.ck-disabled):not(:hover){background:var(--ck-color-split-button-hover-background)}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{background-color:var(--ck-color-split-button-hover-border);content:"";height:100%;position:absolute;width:1px}.ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:focus:after,.ck.ck-splitbutton:hover>.ck-splitbutton__arrow:focus:after{--ck-color-split-button-hover-border:var(--ck-color-focus-border)}[dir=ltr] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=ltr] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{left:-1px}[dir=rtl] .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow:not(.ck-disabled):after,[dir=rtl] .ck.ck-splitbutton:hover>.ck-splitbutton__arrow:not(.ck-disabled):after{right:-1px}.ck.ck-splitbutton.ck-splitbutton_open{border-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__action,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__action{border-bottom-left-radius:0}.ck-rounded-corners .ck.ck-splitbutton.ck-splitbutton_open>.ck-splitbutton__arrow,.ck.ck-splitbutton.ck-splitbutton_open.ck-rounded-corners>.ck-splitbutton__arrow{border-bottom-right-radius:0}',""]);const i=o},4245:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-toolbar-dropdown-max-width:60vw}.ck.ck-toolbar-dropdown>.ck-dropdown__panel{max-width:var(--ck-toolbar-dropdown-max-width);width:max-content}.ck.ck-toolbar-dropdown>.ck-dropdown__panel .ck-button:focus{z-index:calc(var(--ck-z-default) + 1)}.ck.ck-toolbar-dropdown .ck-toolbar{border:0}",""]);const i=o},8020:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-accessibility-help-dialog-max-width:600px;--ck-accessibility-help-dialog-max-height:400px;--ck-accessibility-help-dialog-border-color:#ccced1;--ck-accessibility-help-dialog-code-background-color:#ededed;--ck-accessibility-help-dialog-kbd-shadow-color:#9c9c9c}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content{border:1px solid transparent;max-height:var(--ck-accessibility-help-dialog-max-height);max-width:var(--ck-accessibility-help-dialog-max-width);overflow:auto;padding:var(--ck-spacing-large);user-select:text}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content{*{white-space:normal}}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content .ck-label{display:none}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3{font-size:1.2em;font-weight:700}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4{font-size:1em;font-weight:700}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h3,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content h4,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content p,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content table{margin:1em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl{border-bottom:none;border-top:1px solid var(--ck-accessibility-help-dialog-border-color);display:grid;grid-template-columns:2fr 1fr}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{border-bottom:1px solid var(--ck-accessibility-help-dialog-border-color);padding:.4em 0}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dt{grid-column-start:1}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content dl dd{grid-column-start:2;text-align:right}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code,.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{background:var(--ck-accessibility-help-dialog-code-background-color);border-radius:2px;display:inline-block;font-size:.9em;line-height:1;padding:.4em;text-align:center;vertical-align:middle}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content code{font-family:monospace}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd{box-shadow:0 1px 1px var(--ck-accessibility-help-dialog-kbd-shadow-color);margin:0 1px;min-width:1.8em}.ck.ck-accessibility-help-dialog .ck-accessibility-help-dialog__content kbd+kbd{margin-left:2px}",""]);const i=o},6888:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-color-editable-blur-selection:#d9d9d9}.ck.ck-editor__editable:not(.ck-editor__nested-editable){border-radius:0}.ck-rounded-corners .ck.ck-editor__editable:not(.ck-editor__nested-editable),.ck.ck-editor__editable.ck-rounded-corners:not(.ck-editor__nested-editable){border-radius:var(--ck-border-radius)}.ck.ck-editor__editable.ck-focused:not(.ck-editor__nested-editable){border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck.ck-editor__editable_inline{border:1px solid transparent;overflow:auto;padding:0 var(--ck-spacing-standard)}.ck.ck-editor__editable_inline[dir=ltr]{text-align:left}.ck.ck-editor__editable_inline[dir=rtl]{text-align:right}.ck.ck-editor__editable_inline>:first-child{margin-top:var(--ck-spacing-large)}.ck.ck-editor__editable_inline>:last-child{margin-bottom:var(--ck-spacing-large)}.ck.ck-editor__editable_inline.ck-blurred ::selection{background:var(--ck-color-editable-blur-selection)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_n]:after{border-bottom-color:var(--ck-color-panel-background)}.ck.ck-balloon-panel.ck-toolbar-container[class*=arrow_s]:after{border-top-color:var(--ck-color-panel-background)}",""]);const i=o},3224:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-form__header{align-items:center;display:flex;flex-direction:row;flex-wrap:nowrap;justify-content:space-between}.ck.ck-form__header h2.ck-form__header__label{flex-grow:1}:root{--ck-form-header-height:44px}.ck.ck-form__header{border-bottom:1px solid var(--ck-color-base-border);height:var(--ck-form-header-height);line-height:var(--ck-form-header-height);padding:var(--ck-spacing-small) var(--ck-spacing-large)}[dir=ltr] .ck.ck-form__header>.ck-icon{margin-right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-form__header>.ck-icon{margin-left:var(--ck-spacing-medium)}.ck.ck-form__header .ck-form__header__label{--ck-font-size-base:15px;font-weight:700}",""]);const i=o},6580:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-highlighted-text mark{background:var(--ck-color-highlight-background);font-size:inherit;font-weight:inherit;line-height:inherit;vertical-align:initial}",""]);const i=o},6912:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-icon{vertical-align:middle}:root{--ck-icon-size:calc(var(--ck-line-height-base)*var(--ck-font-size-normal))}.ck.ck-icon{font-size:.8333350694em;height:var(--ck-icon-size);width:var(--ck-icon-size);will-change:transform}.ck.ck-icon,.ck.ck-icon *{cursor:inherit}.ck.ck-icon.ck-icon_inherit-color,.ck.ck-icon.ck-icon_inherit-color *{color:inherit}.ck.ck-icon.ck-icon_inherit-color :not([fill]){fill:currentColor}",""]);const i=o},1272:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-input-width:18em;--ck-input-text-width:var(--ck-input-width)}.ck.ck-input{border-radius:0}.ck-rounded-corners .ck.ck-input,.ck.ck-input.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-input{background:var(--ck-color-input-background);border:1px solid var(--ck-color-input-border);min-height:var(--ck-ui-component-min-height);min-width:var(--ck-input-width);padding:var(--ck-spacing-extra-tiny) var(--ck-spacing-medium);transition:box-shadow .1s ease-in-out,border .1s ease-in-out}.ck.ck-input:focus{border:var(--ck-focus-ring);box-shadow:var(--ck-focus-outer-shadow),0 0;outline:none}.ck.ck-input[readonly]{background:var(--ck-color-input-disabled-background);border:1px solid var(--ck-color-input-disabled-border);color:var(--ck-color-input-disabled-text)}.ck.ck-input[readonly]:focus{box-shadow:var(--ck-focus-disabled-outer-shadow),0 0}.ck.ck-input.ck-error{animation:ck-input-shake .3s ease both;border-color:var(--ck-color-input-error-border)}.ck.ck-input.ck-error:focus{box-shadow:var(--ck-focus-error-outer-shadow),0 0}@keyframes ck-input-shake{20%{transform:translateX(-2px)}40%{transform:translateX(2px)}60%{transform:translateX(-1px)}80%{transform:translateX(1px)}}",""]);const i=o},3756:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-label{display:block}.ck.ck-voice-label{display:none}.ck.ck-label{font-weight:700}",""]);const i=o},7883:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{display:flex;position:relative}.ck.ck-labeled-field-view .ck.ck-label{display:block;position:absolute}:root{--ck-labeled-field-view-transition:.1s cubic-bezier(0,0,0.24,0.95);--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-spacing-medium);--ck-labeled-field-label-default-position-x:var(--ck-spacing-medium);--ck-labeled-field-label-default-position-y:calc(var(--ck-font-size-base)*0.6);--ck-color-labeled-field-label-background:var(--ck-color-base-background)}.ck.ck-labeled-field-view{border-radius:0}.ck-rounded-corners .ck.ck-labeled-field-view,.ck.ck-labeled-field-view.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper{width:100%}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{top:0}[dir=ltr] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{left:0;transform:translate(var(--ck-spacing-medium),-6px) scale(.75);transform-origin:0 0}[dir=rtl] .ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{right:0;transform:translate(calc(var(--ck-spacing-medium)*-1),-6px) scale(.75);transform-origin:100% 0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:var(--ck-color-labeled-field-label-background);font-weight:400;line-height:normal;max-width:100%;overflow:hidden;padding:0 calc(var(--ck-font-size-tiny)*.5);pointer-events:none;text-overflow:ellipsis;transition:transform var(--ck-labeled-field-view-transition),padding var(--ck-labeled-field-view-transition),background var(--ck-labeled-field-view-transition)}.ck.ck-labeled-field-view.ck-error .ck-input:not([readonly])+.ck.ck-label,.ck.ck-labeled-field-view.ck-error>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view .ck-labeled-field-view__status{font-size:var(--ck-font-size-small);margin-top:var(--ck-spacing-small);white-space:normal}.ck.ck-labeled-field-view .ck-labeled-field-view__status.ck-labeled-field-view__status_error{color:var(--ck-color-base-error)}.ck.ck-labeled-field-view.ck-disabled>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{color:var(--ck-color-input-disabled-text)}[dir=ltr] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=ltr] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(var(--ck-labeled-field-label-default-position-x),var(--ck-labeled-field-label-default-position-y)) scale(1)}[dir=rtl] .ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,[dir=rtl] .ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{transform:translate(calc(var(--ck-labeled-field-label-default-position-x)*-1),var(--ck-labeled-field-label-default-position-y)) scale(1)}.ck.ck-labeled-field-view.ck-disabled.ck-labeled-field-view_empty:not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label,.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder):not(.ck-error)>.ck.ck-labeled-field-view__input-wrapper>.ck.ck-label{background:transparent;max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width));padding:0}.ck.ck-labeled-field-view>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck.ck-button{background:transparent}.ck.ck-labeled-field-view.ck-labeled-field-view_empty>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown>.ck-button>.ck-button__label{opacity:0}.ck.ck-labeled-field-view.ck-labeled-field-view_empty:not(.ck-labeled-field-view_focused):not(.ck-labeled-field-view_placeholder)>.ck.ck-labeled-field-view__input-wrapper>.ck-dropdown+.ck-label{max-width:calc(var(--ck-labeled-field-empty-unfocused-max-width) - var(--ck-dropdown-arrow-size) - var(--ck-spacing-standard))}",""]);const i=o},9118:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-list{display:flex;flex-direction:column;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-list .ck-list__item,.ck.ck-list .ck-list__separator{display:block}.ck.ck-list .ck-list__item>:focus{position:relative;z-index:var(--ck-z-default)}:root{--ck-list-button-padding:calc(var(--ck-line-height-base)*0.2*var(--ck-font-size-base)) calc(var(--ck-line-height-base)*0.4*var(--ck-font-size-base))}.ck.ck-list{border-radius:0}.ck-rounded-corners .ck.ck-list,.ck.ck-list.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-list{background:var(--ck-color-list-background);list-style-type:none}.ck.ck-list__item{cursor:default;min-width:12em}.ck.ck-list__item .ck-button{border-radius:0;min-height:unset;width:100%}[dir=ltr] .ck.ck-list__item .ck-button{text-align:left}[dir=rtl] .ck.ck-list__item .ck-button{text-align:right}.ck.ck-list__item .ck-button{padding:var(--ck-list-button-padding)}.ck.ck-list__item .ck-button .ck-button__label{line-height:calc(var(--ck-line-height-base)*1.2*var(--ck-font-size-base))}.ck.ck-list__item .ck-button:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on{background:var(--ck-color-list-button-on-background);color:var(--ck-color-list-button-on-text)}.ck.ck-list__item .ck-button.ck-on:active{box-shadow:none}.ck.ck-list__item .ck-button.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-on-background-focus)}.ck.ck-list__item .ck-button.ck-on:focus:not(.ck-switchbutton):not(.ck-disabled){border-color:var(--ck-color-base-background)}.ck.ck-list__item .ck-button:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background)}.ck.ck-list__item .ck-switchbutton.ck-on{background:var(--ck-color-list-background);color:inherit}.ck.ck-list__item .ck-switchbutton.ck-on:hover:not(.ck-disabled){background:var(--ck-color-list-button-hover-background);color:inherit}.ck-list .ck-list__group{padding-top:var(--ck-spacing-medium);:not(.ck-hidden)~&{border-top:1px solid var(--ck-color-base-border)}}.ck-list .ck-list__group>.ck-label{font-size:11px;font-weight:700;padding:var(--ck-spacing-medium) var(--ck-spacing-medium) 0 var(--ck-spacing-medium)}.ck.ck-list__separator{background:var(--ck-color-base-border);height:1px;width:100%}",""]);const i=o},3617:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,':root{--ck-balloon-panel-arrow-z-index:calc(var(--ck-z-default) - 3)}.ck.ck-balloon-panel{display:none;position:absolute;z-index:var(--ck-z-panel)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{content:"";position:absolute}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_n]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_n]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel[class*=arrow_s]:before{z-index:var(--ck-balloon-panel-arrow-z-index)}.ck.ck-balloon-panel[class*=arrow_s]:after{z-index:calc(var(--ck-balloon-panel-arrow-z-index) + 1)}.ck.ck-balloon-panel.ck-balloon-panel_visible{display:block}:root{--ck-balloon-border-width:1px;--ck-balloon-arrow-offset:2px;--ck-balloon-arrow-height:10px;--ck-balloon-arrow-half-width:8px;--ck-balloon-arrow-drop-shadow:0 2px 2px var(--ck-color-shadow-drop)}.ck.ck-balloon-panel{border-radius:0}.ck-rounded-corners .ck.ck-balloon-panel,.ck.ck-balloon-panel.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-balloon-panel{background:var(--ck-color-panel-background);border:var(--ck-balloon-border-width) solid var(--ck-color-panel-border);box-shadow:var(--ck-drop-shadow),0 0;min-height:15px}.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:after,.ck.ck-balloon-panel.ck-balloon-panel_with-arrow:before{border-style:solid;height:0;width:0}.ck.ck-balloon-panel[class*=arrow_n]:after,.ck.ck-balloon-panel[class*=arrow_n]:before{border-width:0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_n]:before{border-color:transparent transparent var(--ck-color-panel-border) transparent;margin-top:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_n]:after{border-color:transparent transparent var(--ck-color-panel-background) transparent;margin-top:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_s]:after,.ck.ck-balloon-panel[class*=arrow_s]:before{border-width:var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width)}.ck.ck-balloon-panel[class*=arrow_s]:before{border-color:var(--ck-color-panel-border) transparent transparent;filter:drop-shadow(var(--ck-balloon-arrow-drop-shadow));margin-bottom:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_s]:after{border-color:var(--ck-color-panel-background) transparent transparent transparent;margin-bottom:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_e]:after,.ck.ck-balloon-panel[class*=arrow_e]:before{border-width:var(--ck-balloon-arrow-half-width) 0 var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height)}.ck.ck-balloon-panel[class*=arrow_e]:before{border-color:transparent transparent transparent var(--ck-color-panel-border);margin-right:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_e]:after{border-color:transparent transparent transparent var(--ck-color-panel-background);margin-right:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel[class*=arrow_w]:after,.ck.ck-balloon-panel[class*=arrow_w]:before{border-width:var(--ck-balloon-arrow-half-width) var(--ck-balloon-arrow-height) var(--ck-balloon-arrow-half-width) 0}.ck.ck-balloon-panel[class*=arrow_w]:before{border-color:transparent var(--ck-color-panel-border) transparent transparent;margin-left:calc(var(--ck-balloon-border-width)*-1)}.ck.ck-balloon-panel[class*=arrow_w]:after{border-color:transparent var(--ck-color-panel-background) transparent transparent;margin-left:calc(var(--ck-balloon-arrow-offset) - var(--ck-balloon-border-width))}.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_n:before{left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nw:before{left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_ne:before{right:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_s:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:50%;margin-left:calc(var(--ck-balloon-arrow-half-width)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_se:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);right:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_sme:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_smw:before{bottom:calc(var(--ck-balloon-arrow-height)*-1);left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nme:before{margin-right:calc(var(--ck-balloon-arrow-half-width)*2);right:25%;top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_nmw:before{left:25%;margin-left:calc(var(--ck-balloon-arrow-half-width)*2);top:calc(var(--ck-balloon-arrow-height)*-1)}.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_e:before{margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);right:calc(var(--ck-balloon-arrow-height)*-1);top:50%}.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:after,.ck.ck-balloon-panel.ck-balloon-panel_arrow_w:before{left:calc(var(--ck-balloon-arrow-height)*-1);margin-top:calc(var(--ck-balloon-arrow-half-width)*-1);top:50%}',""]);const i=o},9432:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck .ck-balloon-rotator__navigation{align-items:center;display:flex;justify-content:center}.ck .ck-balloon-rotator__content .ck-toolbar{justify-content:center}.ck .ck-balloon-rotator__navigation{background:var(--ck-color-toolbar-background);border-bottom:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation>*{margin-bottom:var(--ck-spacing-small);margin-right:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck .ck-balloon-rotator__navigation .ck-balloon-rotator__counter{margin-left:var(--ck-spacing-small);margin-right:var(--ck-spacing-standard)}.ck .ck-balloon-rotator__content .ck.ck-annotation-wrapper{box-shadow:none}",""]);const i=o},3449:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck .ck-fake-panel{position:absolute;z-index:calc(var(--ck-z-panel) - 1)}.ck .ck-fake-panel div{position:absolute}.ck .ck-fake-panel div:first-child{z-index:2}.ck .ck-fake-panel div:nth-child(2){z-index:1}:root{--ck-balloon-fake-panel-offset-horizontal:6px;--ck-balloon-fake-panel-offset-vertical:6px}.ck .ck-fake-panel div{background:var(--ck-color-panel-background);border:1px solid var(--ck-color-panel-border);border-radius:var(--ck-border-radius);box-shadow:var(--ck-drop-shadow),0 0;height:100%;min-height:15px;width:100%}.ck .ck-fake-panel div:first-child{margin-left:var(--ck-balloon-fake-panel-offset-horizontal);margin-top:var(--ck-balloon-fake-panel-offset-vertical)}.ck .ck-fake-panel div:nth-child(2){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*2);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*2)}.ck .ck-fake-panel div:nth-child(3){margin-left:calc(var(--ck-balloon-fake-panel-offset-horizontal)*3);margin-top:calc(var(--ck-balloon-fake-panel-offset-vertical)*3)}.ck .ck-balloon-panel_arrow_s+.ck-fake-panel,.ck .ck-balloon-panel_arrow_se+.ck-fake-panel,.ck .ck-balloon-panel_arrow_sw+.ck-fake-panel{--ck-balloon-fake-panel-offset-vertical:-6px}",""]);const i=o},4315:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-sticky-panel .ck-sticky-panel__content_sticky{position:fixed;top:0;z-index:var(--ck-z-panel)}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky_bottom-limit{position:absolute;top:auto}.ck.ck-sticky-panel .ck-sticky-panel__content_sticky{border-top-left-radius:0;border-top-right-radius:0;border-width:0 1px 1px;box-shadow:var(--ck-drop-shadow),0 0}",""]);const i=o},610:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{position:absolute;top:50%;transform:translateY(-50%)}[dir=ltr] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{left:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view>.ck-labeled-field-view__input-wrapper>.ck-icon{right:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view .ck-search__reset{position:absolute;top:50%;transform:translateY(-50%)}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{display:block}.ck.ck-search>.ck-search__results>.ck-search__info:not(.ck-hidden)~*{display:none}:root{--ck-search-field-view-horizontal-spacing:calc(var(--ck-icon-size) + var(--ck-spacing-medium))}.ck.ck-search>.ck-labeled-field-view .ck-input{width:100%}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon{--ck-labeled-field-label-default-position-x:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon>.ck-labeled-field-view__input-wrapper>.ck-icon{opacity:.5;pointer-events:none}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input,[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-icon .ck-input:not(.ck-input-text_empty){padding-left:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset{--ck-labeled-field-empty-unfocused-max-width:100% - 2 * var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset.ck-labeled-field-view_empty{--ck-labeled-field-empty-unfocused-max-width:100% - var(--ck-search-field-view-horizontal-spacing) - var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{background:none;min-height:auto;min-width:auto;opacity:.5;padding:0}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{right:var(--ck-spacing-medium)}[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset{left:var(--ck-spacing-medium)}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-search__reset:hover{opacity:1}.ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{width:100%}[dir=ltr] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input:not(.ck-input-text_empty),[dir=rtl] .ck.ck-search>.ck-labeled-field-view.ck-search__query_with-reset .ck-input{padding-right:var(--ck-search-field-view-horizontal-spacing)}.ck.ck-search>.ck-search__results{min-width:100%}.ck.ck-search>.ck-search__results>.ck-search__info{padding:var(--ck-spacing-medium) var(--ck-spacing-large);width:100%}.ck.ck-search>.ck-search__results>.ck-search__info *{white-space:normal}.ck.ck-search>.ck-search__results>.ck-search__info>span:first-child{font-weight:700}.ck.ck-search>.ck-search__results>.ck-search__info>span:last-child{margin-top:var(--ck-spacing-medium)}",""]);const i=o},4944:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-spinner-container{display:block;position:relative}.ck.ck-spinner{left:0;margin:0 auto;position:absolute;right:0;top:50%;transform:translateY(-50%);z-index:1}:root{--ck-toolbar-spinner-size:18px}.ck.ck-spinner-container{animation:rotate 1.5s linear infinite}.ck.ck-spinner,.ck.ck-spinner-container{height:var(--ck-toolbar-spinner-size);width:var(--ck-toolbar-spinner-size)}.ck.ck-spinner{border:2px solid var(--ck-color-text);border-radius:50%;border-top:2px solid transparent}@keyframes rotate{to{transform:rotate(1turn)}}",""]);const i=o},8118:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck-textarea{overflow-x:hidden}",""]);const i=o},4893:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-block-toolbar-button{position:absolute;z-index:var(--ck-z-default)}:root{--ck-color-block-toolbar-button:var(--ck-color-text);--ck-block-toolbar-button-size:var(--ck-font-size-normal)}.ck.ck-block-toolbar-button{color:var(--ck-color-block-toolbar-button);font-size:var(--ck-block-toolbar-size)}",""]);const i=o},6808:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-toolbar{align-items:center;display:flex;flex-flow:row nowrap;-moz-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.ck.ck-toolbar>.ck-toolbar__items{align-items:center;display:flex;flex-flow:row wrap;flex-grow:1}.ck.ck-toolbar .ck.ck-toolbar__separator{display:inline-block}.ck.ck-toolbar .ck.ck-toolbar__separator:first-child,.ck.ck-toolbar .ck.ck-toolbar__separator:last-child{display:none}.ck.ck-toolbar .ck-toolbar__line-break{flex-basis:100%}.ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items{flex-direction:column}.ck.ck-toolbar.ck-toolbar_floating>.ck-toolbar__items{flex-wrap:nowrap}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck-dropdown__button .ck-dropdown__arrow{display:none}.ck.ck-toolbar{border-radius:0}.ck-rounded-corners .ck.ck-toolbar,.ck.ck-toolbar.ck-rounded-corners{border-radius:var(--ck-border-radius)}.ck.ck-toolbar{background:var(--ck-color-toolbar-background);border:1px solid var(--ck-color-toolbar-border);padding:0 var(--ck-spacing-small)}.ck.ck-toolbar .ck.ck-toolbar__separator{align-self:stretch;background:var(--ck-color-toolbar-border);margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small);min-width:1px;width:1px}.ck.ck-toolbar .ck-toolbar__line-break{height:0}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break){margin-right:var(--ck-spacing-small)}.ck.ck-toolbar>.ck-toolbar__items:empty+.ck.ck-toolbar__separator{display:none}.ck.ck-toolbar>.ck-toolbar__items>:not(.ck-toolbar__line-break),.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown{margin-bottom:var(--ck-spacing-small);margin-top:var(--ck-spacing-small)}.ck.ck-toolbar.ck-toolbar_vertical{padding:0}.ck.ck-toolbar.ck-toolbar_vertical>.ck-toolbar__items>.ck{border-radius:0;margin:0;width:100%}.ck.ck-toolbar.ck-toolbar_compact{padding:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>*{margin:0}.ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>:not(:first-child):not(:last-child){border-radius:0}.ck.ck-toolbar>.ck.ck-toolbar__grouped-dropdown>.ck.ck-button.ck-dropdown__button{padding-left:var(--ck-spacing-tiny)}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-dropdown__panel{min-width:auto}.ck.ck-toolbar .ck-toolbar__nested-toolbar-dropdown>.ck-button>.ck-button__label{max-width:7em;width:auto}.ck.ck-toolbar:focus{outline:none}.ck-toolbar-container .ck.ck-toolbar{border:0}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck{margin-right:0}.ck.ck-toolbar[dir=rtl]:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck,[dir=rtl] .ck.ck-toolbar:not(.ck-toolbar_compact)>.ck-toolbar__items>.ck{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-left:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:first-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=rtl]>.ck-toolbar__items>.ck:last-child,[dir=rtl] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=rtl]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=rtl]>.ck.ck-toolbar__separator,[dir=rtl] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=rtl] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-left:var(--ck-spacing-small)}.ck.ck-toolbar[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar>.ck-toolbar__items>.ck:last-child{margin-right:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:first-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:first-child{border-bottom-right-radius:0;border-top-right-radius:0}.ck.ck-toolbar.ck-toolbar_compact[dir=ltr]>.ck-toolbar__items>.ck:last-child,[dir=ltr] .ck.ck-toolbar.ck-toolbar_compact>.ck-toolbar__items>.ck:last-child{border-bottom-left-radius:0;border-top-left-radius:0}.ck.ck-toolbar.ck-toolbar_grouping[dir=ltr]>.ck-toolbar__items:not(:empty):not(:only-child),.ck.ck-toolbar[dir=ltr]>.ck.ck-toolbar__separator,[dir=ltr] .ck.ck-toolbar.ck-toolbar_grouping>.ck-toolbar__items:not(:empty):not(:only-child),[dir=ltr] .ck.ck-toolbar>.ck.ck-toolbar__separator{margin-right:var(--ck-spacing-small)}",""]);const i=o},2424:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck.ck-balloon-panel.ck-tooltip{--ck-balloon-border-width:0px;--ck-balloon-arrow-offset:0px;--ck-balloon-arrow-half-width:4px;--ck-balloon-arrow-height:4px;--ck-tooltip-text-padding:4px;--ck-color-panel-background:var(--ck-color-tooltip-background);padding:0 var(--ck-spacing-medium);pointer-events:none;z-index:calc(var(--ck-z-dialog) + 100)}.ck.ck-balloon-panel.ck-tooltip .ck-tooltip__text{color:var(--ck-color-tooltip-text);font-size:.9em;line-height:1.5}.ck.ck-balloon-panel.ck-tooltip.ck-tooltip_multi-line .ck-tooltip__text{display:inline-block;max-width:200px;padding:var(--ck-tooltip-text-padding) 0;white-space:break-spaces}.ck.ck-balloon-panel.ck-tooltip{box-shadow:none}.ck.ck-balloon-panel.ck-tooltip:before{display:none}",""]);const i=o},7247:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck-hidden{display:none!important}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{box-sizing:border-box;height:auto;position:static;width:auto}:root{--ck-z-default:1;--ck-z-panel:calc(var(--ck-z-default) + 999);--ck-z-dialog:9999}.ck-transitions-disabled,.ck-transitions-disabled *{transition:none!important}:root{--ck-powered-by-line-height:10px;--ck-powered-by-padding-vertical:2px;--ck-powered-by-padding-horizontal:4px;--ck-powered-by-text-color:#4f4f4f;--ck-powered-by-border-radius:var(--ck-border-radius);--ck-powered-by-background:#fff;--ck-powered-by-border-color:var(--ck-color-focus-border)}.ck.ck-balloon-panel.ck-powered-by-balloon{--ck-border-radius:var(--ck-powered-by-border-radius);background:var(--ck-powered-by-background);box-shadow:none;min-height:unset;z-index:calc(var(--ck-z-panel) - 1)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by{line-height:var(--ck-powered-by-line-height)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by a{align-items:center;cursor:pointer;display:flex;filter:grayscale(80%);line-height:var(--ck-powered-by-line-height);opacity:.66;padding:var(--ck-powered-by-padding-vertical) var(--ck-powered-by-padding-horizontal)}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-powered-by__label{color:var(--ck-powered-by-text-color);cursor:pointer;font-size:7.5px;font-weight:700;letter-spacing:-.2px;line-height:normal;margin-right:4px;padding-left:2px;text-transform:uppercase}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by .ck-icon{cursor:pointer;display:block}.ck.ck-balloon-panel.ck-powered-by-balloon .ck.ck-powered-by:hover a{filter:grayscale(0);opacity:1}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_inside]{border-color:transparent}.ck.ck-balloon-panel.ck-powered-by-balloon[class*=position_border]{border:var(--ck-focus-ring);border-color:var(--ck-powered-by-border-color)}:root{--ck-color-base-foreground:#fafafa;--ck-color-base-background:#fff;--ck-color-base-border:#ccced1;--ck-color-base-action:#53a336;--ck-color-base-focus:#6cb5f9;--ck-color-base-text:#333;--ck-color-base-active:#2977ff;--ck-color-base-active-focus:#0d65ff;--ck-color-base-error:#db3700;--ck-color-focus-border-coordinates:218,81.8%,56.9%;--ck-color-focus-border:hsl(var(--ck-color-focus-border-coordinates));--ck-color-focus-outer-shadow:#cae1fc;--ck-color-focus-disabled-shadow:rgba(119,186,248,.3);--ck-color-focus-error-shadow:rgba(255,64,31,.3);--ck-color-text:var(--ck-color-base-text);--ck-color-shadow-drop:rgba(0,0,0,.15);--ck-color-shadow-drop-active:rgba(0,0,0,.2);--ck-color-shadow-inner:rgba(0,0,0,.1);--ck-color-button-default-background:transparent;--ck-color-button-default-hover-background:#f0f0f0;--ck-color-button-default-active-background:#f0f0f0;--ck-color-button-default-disabled-background:transparent;--ck-color-button-on-background:#f0f7ff;--ck-color-button-on-hover-background:#dbecff;--ck-color-button-on-active-background:#dbecff;--ck-color-button-on-disabled-background:#f0f2f4;--ck-color-button-on-color:#2977ff;--ck-color-button-action-background:var(--ck-color-base-action);--ck-color-button-action-hover-background:#4d9d30;--ck-color-button-action-active-background:#4d9d30;--ck-color-button-action-disabled-background:#7ec365;--ck-color-button-action-text:var(--ck-color-base-background);--ck-color-button-save:#008a00;--ck-color-button-cancel:#db3700;--ck-color-switch-button-off-background:#939393;--ck-color-switch-button-off-hover-background:#7d7d7d;--ck-color-switch-button-on-background:var(--ck-color-button-action-background);--ck-color-switch-button-on-hover-background:#4d9d30;--ck-color-switch-button-inner-background:var(--ck-color-base-background);--ck-color-switch-button-inner-shadow:rgba(0,0,0,.1);--ck-color-dropdown-panel-background:var(--ck-color-base-background);--ck-color-dropdown-panel-border:var(--ck-color-base-border);--ck-color-dialog-background:var(--ck-custom-background);--ck-color-dialog-form-header-border:var(--ck-custom-border);--ck-color-input-background:var(--ck-color-base-background);--ck-color-input-border:var(--ck-color-base-border);--ck-color-input-error-border:var(--ck-color-base-error);--ck-color-input-text:var(--ck-color-base-text);--ck-color-input-disabled-background:#f2f2f2;--ck-color-input-disabled-border:var(--ck-color-base-border);--ck-color-input-disabled-text:#757575;--ck-color-list-background:var(--ck-color-base-background);--ck-color-list-button-hover-background:var(--ck-color-button-default-hover-background);--ck-color-list-button-on-background:var(--ck-color-button-on-color);--ck-color-list-button-on-background-focus:var(--ck-color-button-on-color);--ck-color-list-button-on-text:var(--ck-color-base-background);--ck-color-panel-background:var(--ck-color-base-background);--ck-color-panel-border:var(--ck-color-base-border);--ck-color-toolbar-background:var(--ck-color-base-background);--ck-color-toolbar-border:var(--ck-color-base-border);--ck-color-tooltip-background:var(--ck-color-base-text);--ck-color-tooltip-text:var(--ck-color-base-background);--ck-color-engine-placeholder-text:#707070;--ck-color-upload-bar-background:#6cb5f9;--ck-color-link-default:#0000f0;--ck-color-link-selected-background:rgba(31,176,255,.1);--ck-color-link-fake-selection:rgba(31,176,255,.3);--ck-color-highlight-background:#ff0;--ck-color-light-red:#fcc;--ck-disabled-opacity:.5;--ck-focus-outer-shadow-geometry:0 0 0 3px;--ck-focus-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-outer-shadow);--ck-focus-disabled-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-disabled-shadow);--ck-focus-error-outer-shadow:var(--ck-focus-outer-shadow-geometry) var(--ck-color-focus-error-shadow);--ck-focus-ring:1px solid var(--ck-color-focus-border);--ck-font-size-base:13px;--ck-line-height-base:1.84615;--ck-font-face:Helvetica,Arial,Tahoma,Verdana,Sans-Serif;--ck-font-size-tiny:0.7em;--ck-font-size-small:0.75em;--ck-font-size-normal:1em;--ck-font-size-big:1.4em;--ck-font-size-large:1.8em;--ck-ui-component-min-height:2.3em}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset,.ck.ck-reset_all{word-wrap:break-word;background:transparent;border:0;margin:0;padding:0;text-decoration:none;transition:none;vertical-align:middle}.ck-reset_all :not(.ck-reset_all-excluded *),.ck.ck-reset_all{border-collapse:collapse;color:var(--ck-color-text);cursor:auto;float:none;font:normal normal normal var(--ck-font-size-base)/var(--ck-line-height-base) var(--ck-font-face);text-align:left;white-space:nowrap}.ck-reset_all .ck-rtl :not(.ck-reset_all-excluded *){text-align:right}.ck-reset_all iframe:not(.ck-reset_all-excluded *){vertical-align:inherit}.ck-reset_all textarea:not(.ck-reset_all-excluded *){white-space:pre-wrap}.ck-reset_all input[type=password]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text]:not(.ck-reset_all-excluded *),.ck-reset_all textarea:not(.ck-reset_all-excluded *){cursor:text}.ck-reset_all input[type=password][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all input[type=text][disabled]:not(.ck-reset_all-excluded *),.ck-reset_all textarea[disabled]:not(.ck-reset_all-excluded *){cursor:default}.ck-reset_all fieldset:not(.ck-reset_all-excluded *){border:2px groove #dfdee3;padding:10px}.ck-reset_all button:not(.ck-reset_all-excluded *)::-moz-focus-inner{border:0;padding:0}.ck[dir=rtl],.ck[dir=rtl] .ck{text-align:right}:root{--ck-border-radius:2px;--ck-inner-shadow:2px 2px 3px var(--ck-color-shadow-inner) inset;--ck-drop-shadow:0 1px 2px 1px var(--ck-color-shadow-drop);--ck-drop-shadow-active:0 3px 6px 1px var(--ck-color-shadow-drop-active);--ck-spacing-unit:0.6em;--ck-spacing-large:calc(var(--ck-spacing-unit)*1.5);--ck-spacing-standard:var(--ck-spacing-unit);--ck-spacing-medium:calc(var(--ck-spacing-unit)*0.8);--ck-spacing-small:calc(var(--ck-spacing-unit)*0.5);--ck-spacing-tiny:calc(var(--ck-spacing-unit)*0.3);--ck-spacing-extra-tiny:calc(var(--ck-spacing-unit)*0.16)}",""]);const i=o},9974:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,":root{--ck-color-resizer:var(--ck-color-focus-border);--ck-color-resizer-tooltip-background:#262626;--ck-color-resizer-tooltip-text:#f2f2f2;--ck-resizer-border-radius:var(--ck-border-radius);--ck-resizer-tooltip-offset:10px;--ck-resizer-tooltip-height:calc(var(--ck-spacing-small)*2 + 10px)}.ck .ck-widget,.ck .ck-widget.ck-widget_with-selection-handle{position:relative}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{position:absolute}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{display:block}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{visibility:visible}.ck .ck-size-view{background:var(--ck-color-resizer-tooltip-background);border:1px solid var(--ck-color-resizer-tooltip-text);border-radius:var(--ck-resizer-border-radius);color:var(--ck-color-resizer-tooltip-text);display:block;font-size:var(--ck-font-size-tiny);height:var(--ck-resizer-tooltip-height);line-height:var(--ck-resizer-tooltip-height);padding:0 var(--ck-spacing-small)}.ck .ck-size-view.ck-orientation-above-center,.ck .ck-size-view.ck-orientation-bottom-left,.ck .ck-size-view.ck-orientation-bottom-right,.ck .ck-size-view.ck-orientation-top-left,.ck .ck-size-view.ck-orientation-top-right{position:absolute}.ck .ck-size-view.ck-orientation-top-left{left:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-top-right{right:var(--ck-resizer-tooltip-offset);top:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-right{bottom:var(--ck-resizer-tooltip-offset);right:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-bottom-left{bottom:var(--ck-resizer-tooltip-offset);left:var(--ck-resizer-tooltip-offset)}.ck .ck-size-view.ck-orientation-above-center{left:50%;top:calc(var(--ck-resizer-tooltip-height)*-1);transform:translate(-50%)}:root{--ck-widget-outline-thickness:3px;--ck-widget-handler-icon-size:16px;--ck-widget-handler-animation-duration:200ms;--ck-widget-handler-animation-curve:ease;--ck-color-widget-blurred-border:#dedede;--ck-color-widget-hover-border:#ffc83d;--ck-color-widget-editable-focus-background:var(--ck-color-base-background);--ck-color-widget-drag-handler-icon-color:var(--ck-color-base-background)}.ck .ck-widget{outline-color:transparent;outline-style:solid;outline-width:var(--ck-widget-outline-thickness);transition:outline-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_selected,.ck .ck-widget.ck-widget_selected:hover{outline:var(--ck-widget-outline-thickness) solid var(--ck-color-focus-border)}.ck .ck-widget:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-editor__nested-editable{border:1px solid transparent}.ck .ck-editor__nested-editable.ck-editor__nested-editable_focused,.ck .ck-editor__nested-editable:focus{background-color:var(--ck-color-widget-editable-focus-background);border:var(--ck-focus-ring);box-shadow:var(--ck-inner-shadow),0 0;outline:none}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{background-color:transparent;border-radius:var(--ck-border-radius) var(--ck-border-radius) 0 0;box-sizing:border-box;left:calc(0px - var(--ck-widget-outline-thickness));opacity:0;padding:4px;top:0;transform:translateY(-100%);transition:background-color var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),visibility var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon{color:var(--ck-color-widget-drag-handler-icon-color);height:var(--ck-widget-handler-icon-size);width:var(--ck-widget-handler-icon-size)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:0;transition:opacity .3s var(--ck-widget-handler-animation-curve)}.ck .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover .ck-icon .ck-icon__selected-indicator{opacity:1}.ck .ck-widget.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle{background-color:var(--ck-color-widget-hover-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{background-color:var(--ck-color-focus-border);opacity:1}.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator,.ck .ck-widget.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle .ck-icon .ck-icon__selected-indicator{opacity:1}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle{left:auto;right:calc(0px - var(--ck-widget-outline-thickness))}.ck.ck-editor__editable.ck-read-only .ck-widget{transition:none}.ck.ck-editor__editable.ck-read-only .ck-widget:not(.ck-widget_selected){--ck-widget-outline-thickness:0px}.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle,.ck.ck-editor__editable.ck-read-only .ck-widget.ck-widget_with-selection-handle .ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected:hover{outline-color:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle:hover>.ck-widget__selection-handle:hover,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle,.ck.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected.ck-widget_with-selection-handle>.ck-widget__selection-handle:hover{background:var(--ck-color-widget-blurred-border)}.ck.ck-editor__editable blockquote>.ck-widget.ck-widget_with-selection-handle:first-child,.ck.ck-editor__editable>.ck-widget.ck-widget_with-selection-handle:first-child{margin-top:calc(1em + var(--ck-widget-handler-icon-size))}",""]);const i=o},6926:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,".ck .ck-widget_with-resizer{position:relative}.ck .ck-widget__resizer{display:none;left:0;pointer-events:none;position:absolute;top:0}.ck-focused .ck-widget_with-resizer.ck-widget_selected>.ck-widget__resizer{display:block}.ck .ck-widget__resizer__handle{pointer-events:all;position:absolute}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{cursor:nwse-resize}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left,.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{cursor:nesw-resize}:root{--ck-resizer-size:10px;--ck-resizer-offset:calc(var(--ck-resizer-size)/-2 - 2px);--ck-resizer-border-width:1px}.ck .ck-widget__resizer{outline:1px solid var(--ck-color-resizer)}.ck .ck-widget__resizer__handle{background:var(--ck-color-focus-border);border:var(--ck-resizer-border-width) solid #fff;border-radius:var(--ck-resizer-border-radius);height:var(--ck-resizer-size);width:var(--ck-resizer-size)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-left{left:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-top-right{right:var(--ck-resizer-offset);top:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-right{bottom:var(--ck-resizer-offset);right:var(--ck-resizer-offset)}.ck .ck-widget__resizer__handle.ck-widget__resizer__handle-bottom-left{bottom:var(--ck-resizer-offset);left:var(--ck-resizer-offset)}",""]);const i=o},6021:(t,e,r)=>{"use strict";r.d(e,{A:()=>i});var n=r(6314),o=r.n(n)()((function(t){return t[1]}));o.push([t.id,'.ck .ck-widget .ck-widget__type-around__button{display:block;overflow:hidden;position:absolute;z-index:var(--ck-z-default)}.ck .ck-widget .ck-widget__type-around__button svg{left:50%;position:absolute;top:50%;z-index:calc(var(--ck-z-default) + 2)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_before{left:min(10%,30px);top:calc(var(--ck-widget-outline-thickness)*-.5);transform:translateY(-50%)}.ck .ck-widget .ck-widget__type-around__button.ck-widget__type-around__button_after{bottom:calc(var(--ck-widget-outline-thickness)*-.5);right:min(10%,30px);transform:translateY(50%)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{content:"";display:block;left:1px;position:absolute;top:1px;z-index:calc(var(--ck-z-default) + 1)}.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:none;left:0;position:absolute;right:0}.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__fake-caret{left:calc(var(--ck-widget-outline-thickness)*-1);right:calc(var(--ck-widget-outline-thickness)*-1)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__fake-caret{display:block;top:calc(var(--ck-widget-outline-thickness)*-1 - 1px)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__fake-caret{bottom:calc(var(--ck-widget-outline-thickness)*-1 - 1px);display:block}.ck.ck-editor__editable.ck-read-only .ck-widget__type-around,.ck.ck-editor__editable.ck-restricted-editing_mode_restricted .ck-widget__type-around,.ck.ck-editor__editable.ck-widget__type-around_disabled .ck-widget__type-around{display:none}:root{--ck-widget-type-around-button-size:20px;--ck-color-widget-type-around-button-active:var(--ck-color-focus-border);--ck-color-widget-type-around-button-hover:var(--ck-color-widget-hover-border);--ck-color-widget-type-around-button-blurred-editable:var(--ck-color-widget-blurred-border);--ck-color-widget-type-around-button-radar-start-alpha:0;--ck-color-widget-type-around-button-radar-end-alpha:.3;--ck-color-widget-type-around-button-icon:var(--ck-color-base-background)}.ck .ck-widget .ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button);border-radius:100px;height:var(--ck-widget-type-around-button-size);opacity:0;pointer-events:none;transition:opacity var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve),background var(--ck-widget-handler-animation-duration) var(--ck-widget-handler-animation-curve);width:var(--ck-widget-type-around-button-size)}.ck .ck-widget .ck-widget__type-around__button svg{height:8px;margin-top:1px;transform:translate(-50%,-50%);transition:transform .5s ease;width:10px}.ck .ck-widget .ck-widget__type-around__button svg *{stroke-dasharray:10;stroke-dashoffset:0;fill:none;stroke:var(--ck-color-widget-type-around-button-icon);stroke-width:1.5px;stroke-linecap:round;stroke-linejoin:round}.ck .ck-widget .ck-widget__type-around__button svg line{stroke-dasharray:7}.ck .ck-widget .ck-widget__type-around__button:hover{animation:ck-widget-type-around-button-sonar 1s ease infinite}.ck .ck-widget .ck-widget__type-around__button:hover svg polyline{animation:ck-widget-type-around-arrow-dash 2s linear}.ck .ck-widget .ck-widget__type-around__button:hover svg line{animation:ck-widget-type-around-arrow-tip-dash 2s linear}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:1;pointer-events:auto}.ck .ck-widget:not(.ck-widget_selected)>.ck-widget__type-around>.ck-widget__type-around__button{background:var(--ck-color-widget-type-around-button-hover)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover{background:var(--ck-color-widget-type-around-button-active)}.ck .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:after,.ck .ck-widget>.ck-widget__type-around>.ck-widget__type-around__button:hover:after{background:linear-gradient(135deg,hsla(0,0%,100%,0),hsla(0,0%,100%,.3));border-radius:100px;height:calc(var(--ck-widget-type-around-button-size) - 2px);width:calc(var(--ck-widget-type-around-button-size) - 2px)}.ck .ck-widget.ck-widget_with-selection-handle>.ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:20px}.ck .ck-widget .ck-widget__type-around__fake-caret{animation:ck-widget-type-around-fake-caret-pulse 1s linear infinite normal forwards;background:var(--ck-color-base-text);height:1px;outline:1px solid hsla(0,0%,100%,.5);pointer-events:none}.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_after,.ck .ck-widget.ck-widget_selected.ck-widget_type-around_show-fake-caret_before{outline-color:transparent}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected:hover,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected:hover{outline-color:var(--ck-color-widget-hover-border)}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after>.ck-widget__type-around>.ck-widget__type-around__button,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_after.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_selected.ck-widget_with-resizer>.ck-widget__resizer,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected:hover>.ck-widget__selection-handle,.ck .ck-widget.ck-widget_type-around_show-fake-caret_before.ck-widget_with-selection-handle.ck-widget_selected>.ck-widget__selection-handle{opacity:0}.ck[dir=rtl] .ck-widget.ck-widget_with-selection-handle .ck-widget__type-around>.ck-widget__type-around__button_before{margin-left:0;margin-right:20px}.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button,.ck-editor__nested-editable.ck-editor__editable_selected .ck-widget:hover>.ck-widget__type-around>.ck-widget__type-around__button{opacity:0;pointer-events:none}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover){background:var(--ck-color-widget-type-around-button-blurred-editable)}.ck-editor__editable.ck-blurred .ck-widget.ck-widget_selected>.ck-widget__type-around>.ck-widget__type-around__button:not(:hover) svg *{stroke:#999}@keyframes ck-widget-type-around-arrow-dash{0%{stroke-dashoffset:10}20%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-arrow-tip-dash{0%,20%{stroke-dashoffset:7}40%,to{stroke-dashoffset:0}}@keyframes ck-widget-type-around-button-sonar{0%{box-shadow:0 0 0 0 hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}50%{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-end-alpha))}to{box-shadow:0 0 0 5px hsla(var(--ck-color-focus-border-coordinates),var(--ck-color-widget-type-around-button-radar-start-alpha))}}@keyframes ck-widget-type-around-fake-caret-pulse{0%{opacity:1}49%{opacity:1}50%{opacity:0}99%{opacity:0}to{opacity:1}}',""]);const i=o},6314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=t(e);return e[2]?"@media ".concat(e[2]," {").concat(r,"}"):r})).join("")},e.i=function(t,r,n){"string"==typeof t&&(t=[[null,t,""]]);var o={};if(n)for(var i=0;i<this.length;i++){var a=this[i][0];null!=a&&(o[a]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);n&&o[u[0]]||(r&&(u[2]?u[2]="".concat(r," and ").concat(u[2]):u[2]=r),e.push(u))}},e}},5072:(t,e,r)=>{"use strict";var n,o=function(){var t={};return function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(t){r=null}t[e]=r}return t[e]}}(),i=[];function a(t){for(var e=-1,r=0;r<i.length;r++)if(i[r].identifier===t){e=r;break}return e}function c(t,e){for(var r={},n=[],o=0;o<t.length;o++){var c=t[o],u=e.base?c[0]+e.base:c[0],s=r[u]||0,l="".concat(u," ").concat(s);r[u]=s+1;var f=a(l),p={css:c[1],media:c[2],sourceMap:c[3]};-1!==f?(i[f].references++,i[f].updater(p)):i.push({identifier:l,updater:y(p,e),references:1}),n.push(l)}return n}function u(t){var e=document.createElement("style"),n=t.attributes||{};if(void 0===n.nonce){var i=r.nc;i&&(n.nonce=i)}if(Object.keys(n).forEach((function(t){e.setAttribute(t,n[t])})),"function"==typeof t.insert)t.insert(e);else{var a=o(t.insert||"head");if(!a)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");a.appendChild(e)}return e}var s,l=(s=[],function(t,e){return s[t]=e,s.filter(Boolean).join("\n")});function f(t,e,r,n){var o=r?"":n.media?"@media ".concat(n.media," {").concat(n.css,"}"):n.css;if(t.styleSheet)t.styleSheet.cssText=l(e,o);else{var i=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(i,a[e]):t.appendChild(i)}}function p(t,e,r){var n=r.css,o=r.media,i=r.sourceMap;if(o?t.setAttribute("media",o):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var d=null,h=0;function y(t,e){var r,n,o;if(e.singleton){var i=h++;r=d||(d=u(e)),n=f.bind(null,r,i,!1),o=f.bind(null,r,i,!0)}else r=u(e),n=p.bind(null,r,e),o=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(r)};return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=(void 0===n&&(n=Boolean(window&&document&&document.all&&!window.atob)),n));var r=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var n=0;n<r.length;n++){var o=a(r[n]);i[o].references--}for(var u=c(t,e),s=0;s<r.length;s++){var l=a(r[s]);0===i[l].references&&(i[l].updater(),i.splice(l,1))}r=u}}}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.nc=void 0,(()=>{"use strict";function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function e(e){var r=e.emitter,n=e.activator,o=e.callback,i=e.contextElements;r.listenTo(document,"mousedown",(function(e,r){if(n()){var a,c="function"==typeof r.composedPath?r.composedPath():[],u=function(e,r){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,r){if(e){if("string"==typeof e)return t(e,r);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?t(e,r):void 0}}(e))||r&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,c=!0,u=!1;return{s:function(){n=n.call(e)},n:function(){var t=n.next();return c=t.done,t},e:function(t){u=!0,a=t},f:function(){try{c||null==n.return||n.return()}finally{if(u)throw a}}}}("function"==typeof i?i():i);try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.contains(r.target)||c.includes(s))return}}catch(t){u.e(t)}finally{u.f()}o()}}))}var n=function(){try{return navigator.userAgent.toLowerCase()}catch(t){return""}}(),o={isMac:a(n),isWindows:function(t){return t.indexOf("windows")>-1}(n),isGecko:function(t){return!!t.match(/gecko\/\d+/)}(n),isSafari:function(t){return t.indexOf(" applewebkit/")>-1&&-1===t.indexOf("chrome")}(n),isiOS:function(t){return!!t.match(/iphone|ipad/i)||a(t)&&navigator.maxTouchPoints>0}(n),isAndroid:function(t){return t.indexOf("android")>-1}(n),isBlink:function(t){return t.indexOf("chrome/")>-1&&t.indexOf("edge/")<0}(n),features:{isRegExpUnicodePropertySupported:function(){var t=!1;try{t=0==="ć".search(new RegExp("[\\p{L}]","u"))}catch(t){}return t}()}};const i=o;function a(t){return t.indexOf("macintosh")>-1}function c(t,e,r,n){r=r||function(t,e){return t===e};var o=Array.isArray(t)?t:Array.prototype.slice.call(t),i=Array.isArray(e)?e:Array.prototype.slice.call(e),a=function(t,e,r){var n=u(t,e,r);if(-1===n)return{firstIndex:-1,lastIndexOld:-1,lastIndexNew:-1};var o=u(s(t,n),s(e,n),r);return{firstIndex:n,lastIndexOld:t.length-o,lastIndexNew:e.length-o}}(o,i,r),c=n?function(t,e){var r=t.firstIndex,n=t.lastIndexOld,o=t.lastIndexNew;if(-1===r)return Array(e).fill("equal");var i=[];return r>0&&(i=i.concat(Array(r).fill("equal"))),o-r>0&&(i=i.concat(Array(o-r).fill("insert"))),n-r>0&&(i=i.concat(Array(n-r).fill("delete"))),o<e&&(i=i.concat(Array(e-o).fill("equal"))),i}(a,i.length):function(t,e){var r=[],n=e.firstIndex,o=e.lastIndexOld,i=e.lastIndexNew;return i-n>0&&r.push({index:n,type:"insert",values:t.slice(n,i)}),o-n>0&&r.push({index:n+(i-n),type:"delete",howMany:o-n}),r}(i,a);return c}function u(t,e,r){for(var n=0;n<Math.max(t.length,e.length);n++)if(void 0===t[n]||void 0===e[n]||!r(t[n],e[n]))return n;return-1}function s(t,e){return t.slice(e).reverse()}function l(t,e,r){r=r||function(t,e){return t===e};var n,o,i=t.length,a=e.length;if(i>200||a>200||i+a>300)return l.fastDiff(t,e,r,!0);if(a<i){var c=t;t=e,e=c,n="delete",o="insert"}else n="insert",o="delete";var u=t.length,s=e.length,f=s-u,p={},d={};function h(i){var a=(void 0!==d[i-1]?d[i-1]:-1)+1,c=void 0!==d[i+1]?d[i+1]:-1,l=a>c?-1:1;p[i+l]&&(p[i]=p[i+l].slice(0)),p[i]||(p[i]=[]),p[i].push(a>c?n:o);for(var f=Math.max(a,c),h=f-i;h<u&&f<s&&r(t[h],e[f]);)h++,f++,p[i].push("equal");return f}var y,b=0;do{for(y=-b;y<f;y++)d[y]=h(y);for(y=f+b;y>f;y--)d[y]=h(y);d[f]=h(f),b++}while(d[f]!==s);return p[f].slice(1)}l.fastDiff=c;function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,h(n.key),n)}}function d(t,e,r){return e&&p(t.prototype,e),r&&p(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=function(t,e){if("object"!=f(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==f(e)?e:e+""}var y=d((function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.source=e,this.name=r,this.path=[],this.stop=function t(){t.called=!0},this.off=function t(){t.called=!0}})),b=new Array(256).fill("").map((function(t,e){return("0"+e.toString(16)).slice(-2)}));function v(){var t=4294967296*Math.random()>>>0,e=4294967296*Math.random()>>>0,r=4294967296*Math.random()>>>0,n=4294967296*Math.random()>>>0;return"e"+b[255&t]+b[t>>8&255]+b[t>>16&255]+b[t>>24&255]+b[255&e]+b[e>>8&255]+b[e>>16&255]+b[e>>24&255]+b[255&r]+b[r>>8&255]+b[r>>16&255]+b[r>>24&255]+b[255&n]+b[n>>8&255]+b[n>>16&255]+b[n>>24&255]}const m={get:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";return"number"!=typeof t?this[t]||this.normal:t},highest:1e5,high:1e3,normal:0,low:-1e3,lowest:-1e5};function g(t,e){for(var r=m.get(e.priority),n=0;n<t.length;n++)if(m.get(t[n].priority)<r)return void t.splice(n,0,e);t.push(e)}function w(t){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w(t)}function k(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function O(t){var e=function(t,e){if("object"!=w(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=w(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w(e)?e:e+""}function P(t){var e="function"==typeof Map?new Map:void 0;return P=function(t){if(null===t||!function(t){try{return-1!==Function.toString.call(t).indexOf("[native code]")}catch(e){return"function"==typeof t}}(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return function(t,e,r){if(S())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&j(o,r.prototype),o}(t,arguments,E(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),j(r,t)},P(t)}function S(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(S=function(){return!!t})()}function j(t,e){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j(t,e)}function E(t){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},E(t)}var T="https://ckeditor.com/docs/ckeditor5/latest/support/error-codes.html",A=function(t){function e(t,r,n){var o,i,a,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=this,a=e,c=[D(t,n)],a=E(a),o=function(t,e){if(e&&("object"===w(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(i,S()?Reflect.construct(a,c||[],E(i).constructor):a.apply(i,c))).name="CKEditorError",o.context=r,o.data=n,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j(t,e)}(e,t),r=e,o=[{key:"rethrowUnexpectedError",value:function(t,r){if(t.is&&t.is("CKEditorError"))throw t;var n=new e(t.message,r);throw n.stack=t.stack,n}}],(n=[{key:"is",value:function(t){return"CKEditorError"===t}}])&&_(r.prototype,n),o&&_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(P(Error));function x(t,e){var r,n;(r=console).warn.apply(r,(n=function(t,e){var r=C(t);return e?[t,e,r]:[t,r]}(t,e),function(t){if(Array.isArray(t))return k(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||function(t,e){if(t){if("string"==typeof t)return k(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(t,e):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()))}function C(t){return"\nRead more: ".concat(T,"#error-").concat(t)}function D(t,e){var r=new WeakSet;return t+(e?" ".concat(JSON.stringify(e,(function(t,e){if("object"===w(e)&&null!==e){if(r.has(e))return"[object ".concat(e.constructor.name,"]");r.add(e)}return e}))):"")+C(t)}var R=new Date(2024,2,18);if(globalThis.CKEDITOR_VERSION)throw new A("ckeditor-duplicated-modules",null);function I(t){return I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I(t)}function B(t){return function(t){if(Array.isArray(t))return L(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||M(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=M(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function M(t,e){if(t){if("string"==typeof t)return L(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L(t,e):void 0}}function L(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V(n.key),n)}}function V(t){var e=function(t,e){if("object"!=I(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=I(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I(e)?e:e+""}function z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(z=function(){return!!t})()}function $(t){return $=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$(t)}function q(t,e){return q=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},q(t,e)}globalThis.CKEDITOR_VERSION="41.2.1";var U=Symbol("listeningTo"),W=Symbol("emitterId"),G=Symbol("delegations"),K=H(Object);function H(t){if(!t)return K;var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=arguments,r=$(r=e),function(t,e){if(e&&("object"===I(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,z()?Reflect.construct(r,n||[],$(t).constructor):r.apply(t,n));var t,r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&q(t,e)}(e,t),r=e,n=[{key:"on",value:function(t,e,r){this.listenTo(this,t,e,r)}},{key:"once",value:function(t,e,r){var n=this,o=!1;this.listenTo(this,t,(function(t){if(!o){o=!0,t.off();for(var r=arguments.length,i=new Array(r>1?r-1:0),a=1;a<r;a++)i[a-1]=arguments[a];e.call.apply(e,[n,t].concat(i))}}),r)}},{key:"off",value:function(t,e){this.stopListening(this,t,e)}},{key:"listenTo",value:function(t,e,r){var n,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};this[U]||(this[U]={});var a=this[U];Y(t)||J(t);var c=Y(t);(n=a[c])||(n=a[c]={emitter:t,callbacks:{}}),(o=n.callbacks[e])||(o=n.callbacks[e]=[]),o.push(r),function(t,e,r,n,o){e._addEventListener?e._addEventListener(r,n,o):t._addEventListener.call(e,r,n,o)}(this,t,e,r,i)}},{key:"stopListening",value:function(t,e,r){var n=this[U],o=t&&Y(t),i=n&&o?n[o]:void 0,a=i&&e?i.callbacks[e]:void 0;if(!(!n||t&&!i||e&&!a))if(r)et(this,t,e,r),-1!==a.indexOf(r)&&(1===a.length?delete i.callbacks[e]:et(this,t,e,r));else if(a){for(;r=a.pop();)et(this,t,e,r);delete i.callbacks[e]}else if(i){for(e in i.callbacks)this.stopListening(t,e);delete n[o]}else{for(o in n)this.stopListening(n[o].emitter);delete this[U]}}},{key:"fire",value:function(t){try{var e=t instanceof y?t:new y(this,t),r=e.name,n=Q(this,r);e.path.push(this);for(var o=arguments.length,i=new Array(o>1?o-1:0),a=1;a<o;a++)i[a-1]=arguments[a];if(n){var c=[e].concat(i);n=Array.from(n);for(var u=0;u<n.length&&(n[u].callback.apply(this,c),e.off.called&&(delete e.off.called,this._removeEventListener(r,n[u].callback)),!e.stop.called);u++);}var s=this[G];if(s){var l=s.get(r),f=s.get("*");l&&tt(l,e,i),f&&tt(f,e,i)}return e.return}catch(t){A.rethrowUnexpectedError(t,this)}}},{key:"delegate",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return{to:function(e,n){t[G]||(t[G]=new Map),r.forEach((function(r){var o=t[G].get(r);o?o.set(e,n):t[G].set(r,new Map([[e,n]]))}))}}}},{key:"stopDelegating",value:function(t,e){if(this[G])if(t)if(e){var r=this[G].get(t);r&&r.delete(e)}else this[G].delete(t);else this[G].clear()}},{key:"_addEventListener",value:function(t,e,r){!function(t,e){var r=Z(t);if(!r[e]){for(var n=e,o=null,i=[];""!==n&&!r[n];)r[n]={callbacks:[],childEvents:[]},i.push(r[n]),o&&r[n].childEvents.push(o),o=n,n=n.substr(0,n.lastIndexOf(":"));if(""!==n){var a,c=F(i);try{for(c.s();!(a=c.n()).done;)a.value.callbacks=r[n].callbacks.slice()}catch(t){c.e(t)}finally{c.f()}r[n].childEvents.push(o)}}}(this,t);var n,o=X(this,t),i={callback:e,priority:m.get(r.priority)},a=F(o);try{for(a.s();!(n=a.n()).done;)g(n.value,i)}catch(t){a.e(t)}finally{a.f()}}},{key:"_removeEventListener",value:function(t,e){var r,n=F(X(this,t));try{for(n.s();!(r=n.n()).done;)for(var o=r.value,i=0;i<o.length;i++)o[i].callback==e&&(o.splice(i,1),i--)}catch(t){n.e(t)}finally{n.f()}}}],n&&N(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(t);return e}function J(t,e){t[W]||(t[W]=e||v())}function Y(t){return t[W]}function Z(t){return t._events||Object.defineProperty(t,"_events",{value:{}}),t._events}function X(t,e){var r=Z(t)[e];if(!r)return[];for(var n=[r.callbacks],o=0;o<r.childEvents.length;o++){var i=X(t,r.childEvents[o]);n=n.concat(i)}return n}function Q(t,e){var r;return t._events&&(r=t._events[e])&&r.callbacks.length?r.callbacks:e.indexOf(":")>-1?Q(t,e.substr(0,e.lastIndexOf(":"))):null}function tt(t,e,r){var n,o,i,a=F(t);try{for(a.s();!(n=a.n()).done;){var c=(o=n.value,i=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(o,i)||M(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),u=c[0],s=c[1];s?"function"==typeof s&&(s=s(e.name)):s=e.name;var l=new y(e.source,s);l.path=B(e.path),u.fire.apply(u,[l].concat(B(r)))}}catch(t){a.e(t)}finally{a.f()}}function et(t,e,r,n){e._removeEventListener?e._removeEventListener(r,n):t._removeEventListener.call(e,r,n)}["on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach((function(t){H[t]=K.prototype[t]}));const rt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};function nt(t){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nt(t)}function ot(t,e){if(t){if("string"==typeof t)return it(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?it(t,e):void 0}}function it(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function at(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ct(n.key),n)}}function ct(t){var e=function(t,e){if("object"!=nt(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nt(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nt(e)?e:e+""}function ut(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ut=function(){return!!t})()}function st(){return st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},st.apply(this,arguments)}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lt(t)}function ft(t,e){return ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ft(t,e)}var pt=Symbol("observableProperties"),dt=Symbol("boundObservables"),ht=Symbol("boundProperties"),yt=Symbol("decoratedMethods"),bt=Symbol("decoratedOriginal"),vt=mt(H());function mt(t){if(!t)return vt;var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=arguments,r=lt(r=e),function(t,e){if(e&&("object"===nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ut()?Reflect.construct(r,n||[],lt(t).constructor):r.apply(t,n));var t,r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ft(t,e)}(e,t),r=e,n=[{key:"set",value:function(t,e){var r=this;if(rt(t))Object.keys(t).forEach((function(e){r.set(e,t[e])}),this);else{gt(this);var n=this[pt];if(t in this&&!n.has(t))throw new A("observable-set-cannot-override",this);Object.defineProperty(this,t,{enumerable:!0,configurable:!0,get:function(){return n.get(t)},set:function(e){var r=n.get(t),o=this.fire("set:".concat(t),t,e,r);void 0===o&&(o=e),r===o&&n.has(t)||(n.set(t,o),this.fire("change:".concat(t),t,o,r))}}),this[t]=e}}},{key:"bind",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length||!_t(r))throw new A("observable-bind-wrong-properties",this);if(new Set(r).size!==r.length)throw new A("observable-bind-duplicate-properties",this);gt(this);var o=this[ht];r.forEach((function(e){if(o.has(e))throw new A("observable-bind-rebind",t)}));var i=new Map;return r.forEach((function(t){var e={property:t,to:[]};o.set(t,e),i.set(t,e)})),{to:wt,toMany:kt,_observable:this,_bindProperties:r,_to:[],_bindings:i}}},{key:"unbind",value:function(){var t=this;if(this[pt]){for(var e=this[ht],r=this[dt],n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];if(o.length){if(!_t(o))throw new A("observable-unbind-wrong-properties",this);o.forEach((function(n){var o=e.get(n);o&&(o.to.forEach((function(e){var n,i,a=(i=2,function(t){if(Array.isArray(t))return t}(n=e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,i)||ot(n,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1],s=r.get(c),l=s[u];l.delete(o),l.size||delete s[u],Object.keys(s).length||(r.delete(c),t.stopListening(c,"change"))})),e.delete(n))}))}else r.forEach((function(e,r){t.stopListening(r,"change")})),r.clear(),e.clear()}}},{key:"decorate",value:function(t){var e=this;gt(this);var r=this[t];if(!r)throw new A("observablemixin-cannot-decorate-undefined",this,{object:this,methodName:t});this.on(t,(function(t,n){t.return=r.apply(e,n)})),this[t]=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return this.fire(t,r)},this[t][bt]=r,this[yt]||(this[yt]=[]),this[yt].push(t)}},{key:"stopListening",value:function(t,r,n){if(!t&&this[yt]){var o,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ot(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this[yt]);try{for(i.s();!(o=i.n()).done;){var a=o.value;this[a]=this[a][bt]}}catch(t){i.e(t)}finally{i.f()}delete this[yt]}st(lt(e.prototype),"stopListening",this).call(this,t,r,n)}}],n&&at(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(t);return e}function gt(t){t[pt]||(Object.defineProperty(t,pt,{value:new Map}),Object.defineProperty(t,dt,{value:new Map}),Object.defineProperty(t,ht,{value:new Map}))}function wt(){var t,e,r,n=this,o=Ot.apply(void 0,arguments),i=Array.from(this._bindings.keys()),a=i.length;if(!o.callback&&o.to.length>1)throw new A("observable-bind-to-no-callback",this);if(a>1&&o.callback)throw new A("observable-bind-to-extra-callback",this);o.to.forEach((function(t){if(t.properties.length&&t.properties.length!==a)throw new A("observable-bind-to-properties-length",n);t.properties.length||(t.properties=n._bindProperties)})),this._to=o.to,o.callback&&(this._bindings.get(i[0]).callback=o.callback),t=this._observable,this._to.forEach((function(e){var r,n=t[dt];n.get(e.observable)||t.listenTo(e.observable,"change",(function(o,i){(r=n.get(e.observable)[i])&&r.forEach((function(e){Pt(t,e.property)}))}))})),(e=this)._bindings.forEach((function(t,n){e._to.forEach((function(o){r=o.properties[t.callback?0:e._bindProperties.indexOf(n)],t.to.push([o.observable,r]),function(t,e,r,n){var o=t[dt],i=o.get(r),a=i||{};a[n]||(a[n]=new Set),a[n].add(e),i||o.set(r,a)}(e._observable,t,o.observable,r)}))})),this._bindProperties.forEach((function(t){Pt(n._observable,t)}))}function kt(t,e,r){if(this._bindings.size>1)throw new A("observable-bind-to-many-not-one-binding",this);var n;this.to.apply(this,(n=function(t,e){var r=t.map((function(t){return[t,e]}));return Array.prototype.concat.apply([],r)}(t,e),function(t){if(Array.isArray(t))return it(t)}(n)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||ot(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).concat([r]))}function _t(t){return t.every((function(t){return"string"==typeof t}))}function Ot(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];if(!e.length)throw new A("observable-bind-to-parse-error",null);var n,o={to:[]};return"function"==typeof e[e.length-1]&&(o.callback=e.pop()),e.forEach((function(t){if("string"==typeof t)n.properties.push(t);else{if("object"!=nt(t))throw new A("observable-bind-to-parse-error",null);n={observable:t,properties:[]},o.to.push(n)}})),o}function Pt(t,e){var r,n=t[ht].get(e);r=n.callback?n.callback.apply(t,n.to.map((function(t){return t[0][t[1]]}))):(r=n.to[0])[0][r[1]],Object.prototype.hasOwnProperty.call(t,e)?t[e]=r:t.set(e,r)}function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function jt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Et(n.key),n)}}function Et(t){var e=function(t,e){if("object"!=St(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}["set","bind","unbind","decorate","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach((function(t){mt[t]=vt.prototype[t]}));var Tt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._replacedElements=[]},(e=[{key:"replace",value:function(t,e){this._replacedElements.push({element:t,newElement:e}),t.style.display="none",e&&t.parentNode.insertBefore(e,t.nextSibling)}},{key:"restore",value:function(){this._replacedElements.forEach((function(t){var e=t.element,r=t.newElement;e.style.display="",r&&r.remove()})),this._replacedElements=[]}}])&&jt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function At(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xt(t){var e,r=0,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return At(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?At(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{for(n.s();!(e=n.n()).done;)e.value,r++}catch(t){n.e(t)}finally{n.f()}return r}function Ct(t,e){for(var r=Math.min(t.length,e.length),n=0;n<r;n++)if(t[n]!=e[n])return n;return t.length==e.length?"same":t.length<e.length?"prefix":"extension"}function Dt(t){return!(!t||!t[Symbol.iterator])}const Rt="object"==typeof global&&global&&global.Object===Object&&global;var It="object"==typeof self&&self&&self.Object===Object&&self;const Bt=Rt||It||Function("return this")(),Ft=Bt.Symbol;var Mt=Object.prototype,Lt=Mt.hasOwnProperty,Nt=Mt.toString,Vt=Ft?Ft.toStringTag:void 0;var zt=Object.prototype.toString;var $t=Ft?Ft.toStringTag:void 0;const qt=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":$t&&$t in Object(t)?function(t){var e=Lt.call(t,Vt),r=t[Vt];try{t[Vt]=void 0;var n=!0}catch(t){}var o=Nt.call(t);return n&&(e?t[Vt]=r:delete t[Vt]),o}(t):function(t){return zt.call(t)}(t)},Ut=Array.isArray,Wt=function(t){return null!=t&&"object"==typeof t},Gt=function(t){return"string"==typeof t||!Ut(t)&&Wt(t)&&"[object String]"==qt(t)};function Kt(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ht(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],o=r&&r.xmlns,i=o?t.createElementNS(o,e):t.createElement(e);for(var a in r)i.setAttribute(a,r[a]);!Gt(n)&&Dt(n)||(n=[n]);var c,u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Kt(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Kt(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(n);try{for(u.s();!(c=u.n()).done;){var s=c.value;Gt(s)&&(s=t.createTextNode(s)),i.appendChild(s)}}catch(t){u.e(t)}finally{u.f()}return i}const Jt=function(t,e){return function(r){return t(e(r))}},Yt=Jt(Object.getPrototypeOf,Object);var Zt=Function.prototype,Xt=Object.prototype,Qt=Zt.toString,te=Xt.hasOwnProperty,ee=Qt.call(Object);const re=function(t){if(!Wt(t)||"[object Object]"!=qt(t))return!1;var e=Yt(t);if(null===e)return!0;var r=te.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Qt.call(r)==ee},ne=function(t,e){return t===e||t!=t&&e!=e},oe=function(t,e){for(var r=t.length;r--;)if(ne(t[r][0],e))return r;return-1};var ie=Array.prototype.splice;function ae(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}ae.prototype.clear=function(){this.__data__=[],this.size=0},ae.prototype.delete=function(t){var e=this.__data__,r=oe(e,t);return!(r<0||(r==e.length-1?e.pop():ie.call(e,r,1),--this.size,0))},ae.prototype.get=function(t){var e=this.__data__,r=oe(e,t);return r<0?void 0:e[r][1]},ae.prototype.has=function(t){return oe(this.__data__,t)>-1},ae.prototype.set=function(t,e){var r=this.__data__,n=oe(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const ce=ae,ue=function(t){if(!rt(t))return!1;var e=qt(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},se=Bt["__core-js_shared__"];var le=function(){var t=/[^.]+$/.exec(se&&se.keys&&se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();var fe=Function.prototype.toString;const pe=function(t){if(null!=t){try{return fe.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var de=/^\[object .+?Constructor\]$/,he=Function.prototype,ye=Object.prototype,be=he.toString,ve=ye.hasOwnProperty,me=RegExp("^"+be.call(ve).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ge=function(t){return!(!rt(t)||(e=t,le&&le in e))&&(ue(t)?me:de).test(pe(t));var e},we=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return ge(r)?r:void 0},ke=we(Bt,"Map"),_e=we(Object,"create");var Oe=Object.prototype.hasOwnProperty;var Pe=Object.prototype.hasOwnProperty;function Se(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Se.prototype.clear=function(){this.__data__=_e?_e(null):{},this.size=0},Se.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},Se.prototype.get=function(t){var e=this.__data__;if(_e){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return Oe.call(e,t)?e[t]:void 0},Se.prototype.has=function(t){var e=this.__data__;return _e?void 0!==e[t]:Pe.call(e,t)},Se.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=_e&&void 0===e?"__lodash_hash_undefined__":e,this};const je=Se,Ee=function(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map};function Te(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Te.prototype.clear=function(){this.size=0,this.__data__={hash:new je,map:new(ke||ce),string:new je}},Te.prototype.delete=function(t){var e=Ee(this,t).delete(t);return this.size-=e?1:0,e},Te.prototype.get=function(t){return Ee(this,t).get(t)},Te.prototype.has=function(t){return Ee(this,t).has(t)},Te.prototype.set=function(t,e){var r=Ee(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Ae=Te;function xe(t){var e=this.__data__=new ce(t);this.size=e.size}xe.prototype.clear=function(){this.__data__=new ce,this.size=0},xe.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},xe.prototype.get=function(t){return this.__data__.get(t)},xe.prototype.has=function(t){return this.__data__.has(t)},xe.prototype.set=function(t,e){var r=this.__data__;if(r instanceof ce){var n=r.__data__;if(!ke||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Ae(n)}return r.set(t,e),this.size=r.size,this};const Ce=xe,De=function(){try{var t=we(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Re=function(t,e,r){"__proto__"==e&&De?De(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var Ie=Object.prototype.hasOwnProperty;const Be=function(t,e,r){var n=t[e];Ie.call(t,e)&&ne(n,r)&&(void 0!==r||e in t)||Re(t,e,r)},Fe=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],u=n?n(r[c],t[c],c,r,t):void 0;void 0===u&&(u=t[c]),o?Re(r,c,u):Be(r,c,u)}return r},Me=function(t){return Wt(t)&&"[object Arguments]"==qt(t)};var Le=Object.prototype,Ne=Le.hasOwnProperty,Ve=Le.propertyIsEnumerable;const ze=Me(function(){return arguments}())?Me:function(t){return Wt(t)&&Ne.call(t,"callee")&&!Ve.call(t,"callee")};var $e="object"==typeof exports&&exports&&!exports.nodeType&&exports,qe=$e&&"object"==typeof module&&module&&!module.nodeType&&module,Ue=qe&&qe.exports===$e?Bt.Buffer:void 0;const We=(Ue?Ue.isBuffer:void 0)||function(){return!1};var Ge=/^(?:0|[1-9]\d*)$/;const Ke=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&Ge.test(t))&&t>-1&&t%1==0&&t<e},He=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Je={};Je["[object Float32Array]"]=Je["[object Float64Array]"]=Je["[object Int8Array]"]=Je["[object Int16Array]"]=Je["[object Int32Array]"]=Je["[object Uint8Array]"]=Je["[object Uint8ClampedArray]"]=Je["[object Uint16Array]"]=Je["[object Uint32Array]"]=!0,Je["[object Arguments]"]=Je["[object Array]"]=Je["[object ArrayBuffer]"]=Je["[object Boolean]"]=Je["[object DataView]"]=Je["[object Date]"]=Je["[object Error]"]=Je["[object Function]"]=Je["[object Map]"]=Je["[object Number]"]=Je["[object Object]"]=Je["[object RegExp]"]=Je["[object Set]"]=Je["[object String]"]=Je["[object WeakMap]"]=!1;const Ye=function(t){return function(e){return t(e)}};var Ze="object"==typeof exports&&exports&&!exports.nodeType&&exports,Xe=Ze&&"object"==typeof module&&module&&!module.nodeType&&module,Qe=Xe&&Xe.exports===Ze&&Rt.process;const tr=function(){try{return Xe&&Xe.require&&Xe.require("util").types||Qe&&Qe.binding&&Qe.binding("util")}catch(t){}}();var er=tr&&tr.isTypedArray;const rr=er?Ye(er):function(t){return Wt(t)&&He(t.length)&&!!Je[qt(t)]};var nr=Object.prototype.hasOwnProperty;const or=function(t,e){var r=Ut(t),n=!r&&ze(t),o=!r&&!n&&We(t),i=!r&&!n&&!o&&rr(t),a=r||n||o||i,c=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!nr.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||Ke(s,u))||c.push(s);return c};var ir=Object.prototype;const ar=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||ir)},cr=Jt(Object.keys,Object);var ur=Object.prototype.hasOwnProperty;const sr=function(t){return null!=t&&He(t.length)&&!ue(t)},lr=function(t){return sr(t)?or(t):function(t){if(!ar(t))return cr(t);var e=[];for(var r in Object(t))ur.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)};var fr=Object.prototype.hasOwnProperty;const pr=function(t){if(!rt(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=ar(t),r=[];for(var n in t)("constructor"!=n||!e&&fr.call(t,n))&&r.push(n);return r},dr=function(t){return sr(t)?or(t,!0):pr(t)};var hr="object"==typeof exports&&exports&&!exports.nodeType&&exports,yr=hr&&"object"==typeof module&&module&&!module.nodeType&&module,br=yr&&yr.exports===hr?Bt.Buffer:void 0,vr=br?br.allocUnsafe:void 0;const mr=function(t,e){if(e)return t.slice();var r=t.length,n=vr?vr(r):new t.constructor(r);return t.copy(n),n},gr=function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e},wr=function(){return[]};var kr=Object.prototype.propertyIsEnumerable,_r=Object.getOwnPropertySymbols;const Or=_r?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}(_r(t),(function(e){return kr.call(t,e)})))}:wr,Pr=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Sr=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Pr(e,Or(t)),t=Yt(t);return e}:wr,jr=function(t,e,r){var n=e(t);return Ut(t)?n:Pr(n,r(t))},Er=function(t){return jr(t,lr,Or)},Tr=function(t){return jr(t,dr,Sr)},Ar=we(Bt,"DataView"),xr=we(Bt,"Promise"),Cr=we(Bt,"Set"),Dr=we(Bt,"WeakMap");var Rr="[object Map]",Ir="[object Promise]",Br="[object Set]",Fr="[object WeakMap]",Mr="[object DataView]",Lr=pe(Ar),Nr=pe(ke),Vr=pe(xr),zr=pe(Cr),$r=pe(Dr),qr=qt;(Ar&&qr(new Ar(new ArrayBuffer(1)))!=Mr||ke&&qr(new ke)!=Rr||xr&&qr(xr.resolve())!=Ir||Cr&&qr(new Cr)!=Br||Dr&&qr(new Dr)!=Fr)&&(qr=function(t){var e=qt(t),r="[object Object]"==e?t.constructor:void 0,n=r?pe(r):"";if(n)switch(n){case Lr:return Mr;case Nr:return Rr;case Vr:return Ir;case zr:return Br;case $r:return Fr}return e});const Ur=qr;var Wr=Object.prototype.hasOwnProperty;const Gr=Bt.Uint8Array,Kr=function(t){var e=new t.constructor(t.byteLength);return new Gr(e).set(new Gr(t)),e};var Hr=/\w*$/;var Jr=Ft?Ft.prototype:void 0,Yr=Jr?Jr.valueOf:void 0;const Zr=function(t,e){var r=e?Kr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)},Xr=function(t,e,r){var n,o,i,a=t.constructor;switch(e){case"[object ArrayBuffer]":return Kr(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var r=e?Kr(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Zr(t,r);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(i=new(o=t).constructor(o.source,Hr.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return n=t,Yr?Object(Yr.call(n)):{}}};var Qr=Object.create;const tn=function(){function t(){}return function(e){if(!rt(e))return{};if(Qr)return Qr(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),en=function(t){return"function"!=typeof t.constructor||ar(t)?{}:tn(Yt(t))};var rn=tr&&tr.isMap;const nn=rn?Ye(rn):function(t){return Wt(t)&&"[object Map]"==Ur(t)};var on=tr&&tr.isSet;const an=on?Ye(on):function(t){return Wt(t)&&"[object Set]"==Ur(t)};var cn="[object Arguments]",un="[object Function]",sn="[object Object]",ln={};ln[cn]=ln["[object Array]"]=ln["[object ArrayBuffer]"]=ln["[object DataView]"]=ln["[object Boolean]"]=ln["[object Date]"]=ln["[object Float32Array]"]=ln["[object Float64Array]"]=ln["[object Int8Array]"]=ln["[object Int16Array]"]=ln["[object Int32Array]"]=ln["[object Map]"]=ln["[object Number]"]=ln[sn]=ln["[object RegExp]"]=ln["[object Set]"]=ln["[object String]"]=ln["[object Symbol]"]=ln["[object Uint8Array]"]=ln["[object Uint8ClampedArray]"]=ln["[object Uint16Array]"]=ln["[object Uint32Array]"]=!0,ln["[object Error]"]=ln[un]=ln["[object WeakMap]"]=!1;const fn=function t(e,r,n,o,i,a){var c,u=1&r,s=2&r,l=4&r;if(n&&(c=i?n(e,o,i,a):n(e)),void 0!==c)return c;if(!rt(e))return e;var f=Ut(e);if(f){if(c=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&Wr.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!u)return gr(e,c)}else{var p=Ur(e),d=p==un||"[object GeneratorFunction]"==p;if(We(e))return mr(e,u);if(p==sn||p==cn||d&&!i){if(c=s||d?{}:en(e),!u)return s?function(t,e){return Fe(t,Sr(t),e)}(e,function(t,e){return t&&Fe(e,dr(e),t)}(c,e)):function(t,e){return Fe(t,Or(t),e)}(e,function(t,e){return t&&Fe(e,lr(e),t)}(c,e))}else{if(!ln[p])return i?e:{};c=Xr(e,p,u)}}a||(a=new Ce);var h=a.get(e);if(h)return h;a.set(e,c),an(e)?e.forEach((function(o){c.add(t(o,r,n,o,e,a))})):nn(e)&&e.forEach((function(o,i){c.set(i,t(o,r,n,i,e,a))}));var y=f?void 0:(l?s?Tr:Er:s?dr:lr)(e);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(y||e,(function(o,i){y&&(o=e[i=o]),Be(c,i,t(o,r,n,i,e,a))})),c},pn=function(t,e){return fn(t,5,e="function"==typeof e?e:void 0)},dn=function(t){return Wt(t)&&1===t.nodeType&&!re(t)};function hn(t){return hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hn(t)}function yn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return bn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function bn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vn(){vn=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==hn(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(hn(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function mn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gn(n.key),n)}}function gn(t){var e=function(t,e){if("object"!=hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hn(e)?e:e+""}var wn=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._config={},r&&this.define(kn(r)),e&&this._setObjectToTarget(this._config,e)},e=[{key:"set",value:function(t,e){this._setToTarget(this._config,t,e)}},{key:"define",value:function(t,e){this._setToTarget(this._config,t,e,!0)}},{key:"get",value:function(t){return this._getFromSource(this._config,t)}},{key:"names",value:vn().mark((function t(){var e,r,n;return vn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=0,r=Object.keys(this._config);case 1:if(!(e<r.length)){t.next=8;break}return n=r[e],t.next=5,n;case 5:e++,t.next=1;break;case 8:case"end":return t.stop()}}),t,this)}))},{key:"_setToTarget",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(re(e))this._setObjectToTarget(t,e,n);else{var o=e.split(".");e=o.pop();var i,a=yn(o);try{for(a.s();!(i=a.n()).done;){var c=i.value;re(t[c])||(t[c]={}),t=t[c]}}catch(t){a.e(t)}finally{a.f()}if(re(r))return re(t[e])||(t[e]={}),t=t[e],void this._setObjectToTarget(t,r,n);n&&void 0!==t[e]||(t[e]=r)}}},{key:"_getFromSource",value:function(t,e){var r=e.split(".");e=r.pop();var n,o=yn(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;if(!re(t[i])){t=null;break}t=t[i]}}catch(t){o.e(t)}finally{o.f()}return t?kn(t[e]):void 0}},{key:"_setObjectToTarget",value:function(t,e,r){var n=this;Object.keys(e).forEach((function(o){n._setToTarget(t,o,e[o],r)}))}}],e&&mn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function kn(t){return pn(t,_n)}function _n(t){return dn(t)||"function"==typeof t?t:void 0}function On(t){if(t){if(t.defaultView)return t instanceof t.defaultView.Document;if(t.ownerDocument&&t.ownerDocument.defaultView)return t instanceof t.ownerDocument.defaultView.Node}return!1}function Pn(t){var e=Object.prototype.toString.apply(t);return"[object Window]"==e||"[object global]"==e}function Sn(t){return Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sn(t)}function jn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return En(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?En(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function En(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Tn(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function An(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cn(n.key),n)}}function xn(t,e,r){return e&&An(t.prototype,e),r&&An(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Cn(t){var e=function(t,e){if("object"!=Sn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sn(e)?e:e+""}function Dn(t,e,r){return e=Bn(e),function(t,e){if(e&&("object"===Sn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rn()?Reflect.construct(e,r||[],Bn(t).constructor):e.apply(t,r))}function Rn(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rn=function(){return!!t})()}function In(){return In="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bn(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},In.apply(this,arguments)}function Bn(t){return Bn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bn(t)}function Fn(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mn(t,e)}function Mn(t,e){return Mn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Mn(t,e)}var Ln=Nn(H());function Nn(t){if(!t)return Ln;var e=function(t){function e(){return Tn(this,e),Dn(this,e,arguments)}return Fn(e,t),xn(e,[{key:"listenTo",value:function(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(On(t)||Pn(t)){var i={capture:!!o.useCapture,passive:!!o.usePassive},a=this._getProxyEmitter(t,i)||new zn(t,i);this.listenTo(a,r,n,o)}else In(Bn(e.prototype),"listenTo",this).call(this,t,r,n,o)}},{key:"stopListening",value:function(t,r,n){if(On(t)||Pn(t)){var o,i=jn(this._getAllProxyEmitters(t));try{for(i.s();!(o=i.n()).done;){var a=o.value;this.stopListening(a,r,n)}}catch(t){i.e(t)}finally{i.f()}}else In(Bn(e.prototype),"stopListening",this).call(this,t,r,n)}},{key:"_getProxyEmitter",value:function(t,e){return this,r=$n(t,e),(n=this[U])&&n[r]?n[r].emitter:null;var r,n}},{key:"_getAllProxyEmitters",value:function(t){var e=this;return[{capture:!1,passive:!1},{capture:!1,passive:!0},{capture:!0,passive:!1},{capture:!0,passive:!0}].map((function(r){return e._getProxyEmitter(t,r)})).filter((function(t){return!!t}))}}])}(t);return e}["_getProxyEmitter","_getAllProxyEmitters","on","once","off","listenTo","stopListening","fire","delegate","stopDelegating","_addEventListener","_removeEventListener"].forEach((function(t){Nn[t]=Ln.prototype[t]}));var Vn,zn=function(t){function e(t,r){var n;return Tn(this,e),J(n=Dn(this,e),$n(t,r)),n._domNode=t,n._options=r,n}return Fn(e,t),xn(e,[{key:"attach",value:function(t){if(!this._domListeners||!this._domListeners[t]){var e=this._createDomListener(t);this._domNode.addEventListener(t,e,this._options),this._domListeners||(this._domListeners={}),this._domListeners[t]=e}}},{key:"detach",value:function(t){var e;!this._domListeners[t]||(e=this._events[t])&&e.callbacks.length||this._domListeners[t].removeListener()}},{key:"_addEventListener",value:function(t,e,r){this.attach(t),H().prototype._addEventListener.call(this,t,e,r)}},{key:"_removeEventListener",value:function(t,e){H().prototype._removeEventListener.call(this,t,e),this.detach(t)}},{key:"_createDomListener",value:function(t){var e=this,r=function(r){e.fire(t,r)};return r.removeListener=function(){e._domNode.removeEventListener(t,r,e._options),delete e._domListeners[t]},r}}])}(H());function $n(t,e){var r,n=function(t){return t["data-ck-expando"]||(t["data-ck-expando"]=v())}(t),o=jn(Object.keys(e).sort());try{for(o.s();!(r=o.n()).done;){var i=r.value;e[i]&&(n+="-"+i)}}catch(t){o.e(t)}finally{o.f()}return n}try{Vn={window,document}}catch(t){Vn={window:{},document:{}}}const qn=Vn;function Un(t){return"[object Text]"==Object.prototype.toString.call(t)}function Wn(t){return"[object Range]"==Object.prototype.toString.apply(t)}function Gn(t){var e=t.ownerDocument.defaultView.getComputedStyle(t);return{top:parseInt(e.borderTopWidth,10),right:parseInt(e.borderRightWidth,10),bottom:parseInt(e.borderBottomWidth,10),left:parseInt(e.borderLeftWidth,10)}}function Kn(t){return t&&t.parentNode?t.offsetParent===qn.document.body?null:t.offsetParent:null}function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Jn(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Yn(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Yn(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Yn(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Zn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Xn(n.key),n)}}function Xn(t){var e=function(t,e){if("object"!=Hn(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(e)?e:e+""}var Qn=["top","right","bottom","left","width","height"],to=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=Wn(e);if(Object.defineProperty(this,"_source",{value:e._source||e,writable:!0,enumerable:!1}),no(e)||r)if(r){var n=t.getDomRangeRects(e);eo(this,t.getBoundingRect(n))}else eo(this,e.getBoundingClientRect());else if(Pn(e)){var o=e.innerWidth,i=e.innerHeight;eo(this,{top:0,right:o,bottom:i,left:0,width:o,height:i})}else eo(this,e)}return e=t,n=[{key:"getDomRangeRects",value:function(e){var r=[],n=Array.from(e.getClientRects());if(n.length){var o,i=Jn(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.push(new t(a))}}catch(t){i.e(t)}finally{i.f()}}else{var c=e.startContainer;Un(c)&&(c=c.parentNode);var u=new t(c.getBoundingClientRect());u.right=u.left,u.width=0,r.push(u)}return r}},{key:"getBoundingRect",value:function(e){var r,n={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,right:Number.NEGATIVE_INFINITY,bottom:Number.NEGATIVE_INFINITY,width:0,height:0},o=0,i=Jn(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;o++,n.left=Math.min(n.left,a.left),n.top=Math.min(n.top,a.top),n.right=Math.max(n.right,a.right),n.bottom=Math.max(n.bottom,a.bottom)}}catch(t){i.e(t)}finally{i.f()}return 0==o?null:(n.width=n.right-n.left,n.height=n.bottom-n.top,new t(n))}}],(r=[{key:"clone",value:function(){return new t(this)}},{key:"moveTo",value:function(t,e){return this.top=e,this.right=t+this.width,this.bottom=e+this.height,this.left=t,this}},{key:"moveBy",value:function(t,e){return this.top+=e,this.right+=t,this.left+=t,this.bottom+=e,this}},{key:"getIntersection",value:function(e){var r={top:Math.max(this.top,e.top),right:Math.min(this.right,e.right),bottom:Math.min(this.bottom,e.bottom),left:Math.max(this.left,e.left),width:0,height:0};if(r.width=r.right-r.left,r.height=r.bottom-r.top,r.width<0||r.height<0)return null;var n=new t(r);return n._source=this._source,n}},{key:"getIntersectionArea",value:function(t){var e=this.getIntersection(t);return e?e.getArea():0}},{key:"getArea",value:function(){return this.width*this.height}},{key:"getVisible",value:function(){var e=this._source,r=this.clone();if(ro(e))return r;for(var n,o,i=e,a=e.parentNode||e.commonAncestorContainer;a&&!ro(a);){var c="visible"===((o=a)instanceof HTMLElement?o.ownerDocument.defaultView.getComputedStyle(o).overflow:"visible");i instanceof HTMLElement&&"absolute"===oo(i)&&(n=i);var u=oo(a);if(c||n&&("relative"===u&&c||"relative"!==u))i=a,a=a.parentNode;else{var s=new t(a),l=r.getIntersection(s);if(!l)return null;l.getArea()<r.getArea()&&(r=l),i=a,a=a.parentNode}}return r}},{key:"isEqual",value:function(t){for(var e=0,r=Qn;e<r.length;e++){var n=r[e];if(this[n]!==t[n])return!1}return!0}},{key:"contains",value:function(t){var e=this.getIntersection(t);return!(!e||!e.isEqual(t))}},{key:"toAbsoluteRect",value:function(){var t,e,r,n,o,i,a=qn.window,c=a.scrollX,u=a.scrollY,s=this.clone().moveBy(c,u);if(no(s._source)){var l=Kn(s._source);l&&(t=s,r=new to(e=l),n=Gn(e),o=0,i=0,o-=r.left,i-=r.top,o+=e.scrollLeft,i+=e.scrollTop,o-=n.left,i-=n.top,t.moveBy(o,i))}return s}},{key:"excludeScrollbarsAndBorders",value:function(){var t,e,r,n=this._source;if(Pn(n))t=n.innerWidth-n.document.documentElement.clientWidth,e=n.innerHeight-n.document.documentElement.clientHeight,r=n.getComputedStyle(n.document.documentElement).direction;else{var o=Gn(n);t=n.offsetWidth-n.clientWidth-o.left-o.right,e=n.offsetHeight-n.clientHeight-o.top-o.bottom,r=n.ownerDocument.defaultView.getComputedStyle(n).direction,this.left+=o.left,this.top+=o.top,this.right-=o.right,this.bottom-=o.bottom,this.width=this.right-this.left,this.height=this.bottom-this.top}return this.width-=t,"ltr"===r?this.right-=t:this.left+=t,this.height-=e,this.bottom-=e,this}}])&&Zn(e.prototype,r),n&&Zn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();function eo(t,e){var r,n=Jn(Qn);try{for(n.s();!(r=n.n()).done;){var o=r.value;t[o]=e[o]}}catch(t){n.e(t)}finally{n.f()}}function ro(t){return!!no(t)&&t===t.ownerDocument.body}function no(t){return null!==t&&"object"===Hn(t)&&1===t.nodeType&&"function"==typeof t.getBoundingClientRect}function oo(t){return t instanceof HTMLElement?t.ownerDocument.defaultView.getComputedStyle(t).position:"static"}function io(t){return io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},io(t)}function ao(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return co(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?co(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function co(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function uo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,so(n.key),n)}}function so(t){var e=function(t,e){if("object"!=io(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=io(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==io(e)?e:e+""}var lo=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._observerInstance||t._createObserver(),this._element=e,this._callback=r,t._addElementCallback(e,r),t._observerInstance.observe(e)}return e=t,n=[{key:"_addElementCallback",value:function(e,r){t._elementCallbacks||(t._elementCallbacks=new Map);var n=t._elementCallbacks.get(e);n||(n=new Set,t._elementCallbacks.set(e,n)),n.add(r)}},{key:"_deleteElementCallback",value:function(e,r){var n=t._getElementCallbacks(e);n&&(n.delete(r),n.size||(t._elementCallbacks.delete(e),t._observerInstance.unobserve(e))),t._elementCallbacks&&!t._elementCallbacks.size&&(t._observerInstance=null,t._elementCallbacks=null)}},{key:"_getElementCallbacks",value:function(e){return t._elementCallbacks?t._elementCallbacks.get(e):null}},{key:"_createObserver",value:function(){t._observerInstance=new qn.window.ResizeObserver((function(e){var r,n=ao(e);try{for(n.s();!(r=n.n()).done;){var o=r.value,i=t._getElementCallbacks(o.target);if(i){var a,c=ao(i);try{for(c.s();!(a=c.n()).done;)(0,a.value)(o)}catch(t){c.e(t)}finally{c.f()}}}}catch(t){n.e(t)}finally{n.f()}}))}}],(r=[{key:"element",get:function(){return this._element}},{key:"destroy",value:function(){t._deleteElementCallback(this._element,this._callback)}}])&&uo(e.prototype,r),n&&uo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r,n}();lo._observerInstance=null,lo._elementCallbacks=null;const fo=lo;function po(t,e){t instanceof HTMLTextAreaElement&&(t.value=e),t.innerHTML=e}function ho(t){return function(e){return e+t}}function yo(t){for(var e=0;t.previousSibling;)t=t.previousSibling,e++;return e}function bo(t,e,r){t.insertBefore(r,t.childNodes[e]||null)}function vo(t){return t&&t.nodeType===Node.COMMENT_NODE}function mo(t){return!!(t&&t.getClientRects&&t.getClientRects().length)}function go(t){return go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},go(t)}function wo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ko(n.key),n)}}function ko(t){var e=function(t,e){if("object"!=go(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=go(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==go(e)?e:e+""}function _o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Oo(t){var e=t.element,r=t.target,n=t.positions,o=t.limiter,i=t.fitInViewport,a=t.viewportOffsetConfig;ue(r)&&(r=r()),ue(o)&&(o=o());var c,u=Kn(e),s=function(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);var e=new to(qn.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e}(a),l=new to(e),f=Po(r,s);if(!f||!s.getIntersection(f))return null;var p={targetRect:f,elementRect:l,positionedElementAncestor:u,viewportRect:s};if(o||i){if(o){var d=Po(o,s);d&&(p.limiterRect=d)}c=function(t,e){var r,n=e.elementRect.getArea(),o=t.map((function(t){return new So(t,e)})).filter((function(t){return!!t.name})),i=0,a=null,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return _o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_o(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(o);try{for(c.s();!(r=c.n()).done;){var u=r.value,s=u.limiterIntersectionArea,l=u.viewportIntersectionArea;if(s===n)return u;var f=Math.pow(l,2)+Math.pow(s,2);f>i&&(i=f,a=u)}}catch(t){c.e(t)}finally{c.f()}return a}(n,p)}else c=new So(n[0],p);return c}function Po(t,e){var r=new to(t).getVisible();return r?r.getIntersection(e):null}var So=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=e(r.targetRect,r.elementRect,r.viewportRect,r.limiterRect);if(n){var o=n.left,i=n.top,a=n.name,c=n.config;this.name=a,this.config=c,this._positioningFunctionCoordinates={left:o,top:i},this._options=r}},(e=[{key:"left",get:function(){return this._absoluteRect.left}},{key:"top",get:function(){return this._absoluteRect.top}},{key:"limiterIntersectionArea",get:function(){var t=this._options.limiterRect;return t?t.getIntersectionArea(this._rect):0}},{key:"viewportIntersectionArea",get:function(){return this._options.viewportRect.getIntersectionArea(this._rect)}},{key:"_rect",get:function(){return this._cachedRect||(this._cachedRect=this._options.elementRect.clone().moveTo(this._positioningFunctionCoordinates.left,this._positioningFunctionCoordinates.top)),this._cachedRect}},{key:"_absoluteRect",get:function(){return this._cachedAbsoluteRect||(this._cachedAbsoluteRect=this._rect.toAbsoluteRect()),this._cachedAbsoluteRect}}])&&wo(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function jo(t){var e=t.parentNode;e&&e.removeChild(t)}function Eo(t){var e=t.window,r=t.rect,n=t.alignToTop,o=t.forceScroll,i=t.viewportOffset,a=r.clone().moveBy(0,i.bottom),c=r.clone().moveBy(0,-i.top),u=new to(e).excludeScrollbarsAndBorders(),s=n&&o,l=[c,a].every((function(t){return u.contains(t)})),f=e.scrollX,p=e.scrollY,d=f,h=p;s?p-=u.top-r.top+i.top:l||(xo(c,u)?p-=u.top-r.top+i.top:Ao(a,u)&&(p+=n?r.top-u.top-i.top:r.bottom-u.bottom+i.bottom)),l||(Co(r,u)?f-=u.left-r.left+i.left:Do(r,u)&&(f+=r.right-u.right+i.right)),f==d&&p===h||e.scrollTo(f,p)}function To(t){for(var e,r,n,o=t.parent,i=t.getRect,a=t.alignToTop,c=t.forceScroll,u=t.ancestorOffset,s=void 0===u?0:u,l=t.limiterElement,f=Ro(o),p=a&&c,d=l||f.document.body;o!=d;)r=i(),n=(e=new to(o).excludeScrollbarsAndBorders()).contains(r),p?o.scrollTop-=e.top-r.top+s:n||(xo(r,e)?o.scrollTop-=e.top-r.top+s:Ao(r,e)&&(o.scrollTop+=a?r.top-e.top-s:r.bottom-e.bottom+s)),n||(Co(r,e)?o.scrollLeft-=e.left-r.left+s:Do(r,e)&&(o.scrollLeft+=r.right-e.right+s)),o=o.parentNode}function Ao(t,e){return t.bottom>e.bottom}function xo(t,e){return t.top<e.top}function Co(t,e){return t.left<e.left}function Do(t,e){return t.right>e.right}function Ro(t){return Wn(t)?t.startContainer.ownerDocument.defaultView:t.ownerDocument.defaultView}function Io(t){if(Wn(t)){var e=t.commonAncestorContainer;return Un(e)&&(e=e.parentNode),e}return t.parentNode}function Bo(t,e){var r=Ro(t),n=new to(t);if(r===e)return n;for(var o=r;o!=e;){var i=o.frameElement,a=new to(i).excludeScrollbarsAndBorders();n.moveBy(a.left,a.top),o=o.parent}return n}function Fo(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||function(t,e){if(t){if("string"==typeof t)return Mo(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mo(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var Lo={ctrl:"⌃",cmd:"⌘",alt:"⌥",shift:"⇧"},No={ctrl:"Ctrl+",alt:"Alt+",shift:"Shift+"},Vo={37:"←",38:"↑",39:"→",40:"↓",9:"⇥"},zo=function(){for(var t={arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,backspace:8,delete:46,enter:13,space:32,esc:27,tab:9,ctrl:1114112,shift:2228224,alt:4456448,cmd:8912896},e=65;e<=90;e++)t[String.fromCharCode(e).toLowerCase()]=e;for(var r=48;r<=57;r++)t[r-48]=r;for(var n=112;n<=123;n++)t["f"+(n-111)]=n;return Object.assign(t,{"'":222,",":108,"-":109,".":110,"/":111,";":186,"=":187,"[":219,"\\":220,"]":221,"`":223}),t}(),$o=Object.fromEntries(Object.entries(zo).map((function(t){var e=Fo(t,2),r=e[0],n=e[1];return[n,n in Vo?Vo[n]:r.charAt(0).toUpperCase()+r.slice(1)]})));function qo(t){var e;if("string"==typeof t){if(!(e=zo[t.toLowerCase()]))throw new A("keyboard-unknown-key",null,{key:t})}else e=t.keyCode+(t.altKey?zo.alt:0)+(t.ctrlKey?zo.ctrl:0)+(t.shiftKey?zo.shift:0)+(t.metaKey?zo.cmd:0);return e}function Uo(t){return"string"==typeof t&&(t=function(t){return t.split("+").map((function(t){return t.trim()}))}(t)),t.map((function(t){return"string"==typeof t?function(t){if(t.endsWith("!"))return qo(t.slice(0,-1));var e=qo(t);return(i.isMac||i.isiOS)&&e==zo.ctrl?zo.cmd:e}(t):t})).reduce((function(t,e){return e+t}),0)}function Wo(t){var e=Uo(t);return Object.entries(i.isMac||i.isiOS?Lo:No).reduce((function(t,r){var n=Fo(r,2),o=n[0],i=n[1];return e&zo[o]&&(e&=~zo[o],t+=i),t}),"")+(e?$o[e]:"")}function Go(t,e){var r="ltr"===e;switch(t){case zo.arrowleft:return r?"left":"right";case zo.arrowright:return r?"right":"left";case zo.arrowup:return"up";case zo.arrowdown:return"down"}}function Ko(t){return Array.isArray(t)?t:[t]}const Ho=function(t,e,r){(void 0!==r&&!ne(t[e],r)||void 0===r&&!(e in t))&&Re(t,e,r)},Jo=function(t,e,r){for(var n=-1,o=Object(t),i=r(t),a=i.length;a--;){var c=i[++n];if(!1===e(o[c],c,o))break}return t},Yo=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]},Zo=function(t,e,r,n,o,i,a){var c,u=Yo(t,r),s=Yo(e,r),l=a.get(s);if(l)Ho(t,r,l);else{var f=i?i(u,s,r+"",t,e,a):void 0,p=void 0===f;if(p){var d=Ut(s),h=!d&&We(s),y=!d&&!h&&rr(s);f=s,d||h||y?Ut(u)?f=u:Wt(c=u)&&sr(c)?f=gr(u):h?(p=!1,f=mr(s,!0)):y?(p=!1,f=Zr(s,!0)):f=[]:re(s)||ze(s)?(f=u,ze(u)?f=function(t){return Fe(t,dr(t))}(u):rt(u)&&!ue(u)||(f=en(s))):p=!1}p&&(a.set(s,f),o(f,s,n,i,a),a.delete(s)),Ho(t,r,f)}},Xo=function t(e,r,n,o,i){e!==r&&Jo(r,(function(a,c){if(i||(i=new Ce),rt(a))Zo(e,r,c,n,t,o,i);else{var u=o?o(Yo(e,c),a,c+"",e,r,i):void 0;void 0===u&&(u=a),Ho(e,c,u)}}),dr)},Qo=function(t){return t};var ti=Math.max;const ei=De?function(t,e){return De(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:Qo;var ri=Date.now;const ni=function(t){var e=0,r=0;return function(){var n=ri(),o=16-(n-r);if(r=n,o>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(ei),oi=function(t,e){return ni(function(t,e,r){return e=ti(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=ti(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=n[o];return c[e]=r(a),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,c)}}(t,e,Qo),t+"")},ii=function(t){return oi((function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,a=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,a&&function(t,e,r){if(!rt(r))return!1;var n=typeof e;return!!("number"==n?sr(r)&&Ke(e,r.length):"string"==n&&e in r)&&ne(r[e],t)}(r[0],r[1],a)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var c=r[n];c&&t(e,c,n,i)}return e}))},ai=ii((function(t,e,r){Xo(t,e,r)}));qn.window.CKEDITOR_TRANSLATIONS||(qn.window.CKEDITOR_TRANSLATIONS={});var ci=["ar","ara","fa","per","fas","he","heb","ku","kur","ug","uig"];function ui(t){return ci.includes(t)?"rtl":"ltr"}function si(t){return si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(t)}function li(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fi(n.key),n)}}function fi(t){var e=function(t,e){if("object"!=si(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==si(e)?e:e+""}var pi=function(){return t=function t(){var e=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=r.uiLanguage,o=void 0===n?"en":n,i=r.contentLanguage,a=r.translations;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.uiLanguage=o,this.contentLanguage=i||this.uiLanguage,this.uiLanguageDirection=ui(this.uiLanguage),this.contentLanguageDirection=ui(this.contentLanguage),this.translations=function(t){return Array.isArray(t)?t.reduce((function(t,e){return ai(t,e)})):t}(a),this.t=function(t,r){return e._t(t,r)}},e=[{key:"language",get:function(){return console.warn("locale-deprecated-language-property: The Locale#language property has been deprecated and will be removed in the near future. Please use #uiLanguage and #contentLanguage properties instead."),this.uiLanguage}},{key:"_t",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e=Ko(e),"string"==typeof t&&(t={string:t});var r=t.plural?e[0]:1;return function(t,e){return t.replace(/%(\d+)/g,(function(t,r){return r<e.length?e[r]:t}))}(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3?arguments[3]:void 0;if("number"!=typeof r)throw new A("translation-service-quantity-not-a-number",null,{quantity:r});var o=n||qn.window.CKEDITOR_TRANSLATIONS,i=function(t){return Object.keys(t).length}(o);1===i&&(t=Object.keys(o)[0]);var a=e.id||e.string;if(0===i||!function(t,e,r){return!!r[t]&&!!r[t].dictionary[e]}(t,a,o))return 1!==r?e.plural:e.string;var c=o[t].dictionary,u=o[t].getPluralForm||function(t){return 1===t?0:1},s=c[a];return"string"==typeof s?s:s[Number(u(r))]}(this.uiLanguage,t,r,this.translations),e)}}],e&&li(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function di(t){return di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(t)}function hi(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=yi(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function yi(t,e){if(t){if("string"==typeof t)return bi(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bi(t,e):void 0}}function bi(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mi(n.key),n)}}function mi(t){var e=function(t,e){if("object"!=di(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=di(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==di(e)?e:e+""}function gi(t,e,r){return e=ki(e),function(t,e){if(e&&("object"===di(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wi()?Reflect.construct(e,r||[],ki(t).constructor):e.apply(t,r))}function wi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wi=function(){return!!t})()}function ki(t){return ki=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ki(t)}function _i(t,e){return _i=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_i(t,e)}var Oi=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=gi(this,e);var o=Dt(r);if(o||(n=r),t._items=[],t._itemMap=new Map,t._idProperty=n.idProperty||"id",t._bindToExternalToInternalMap=new WeakMap,t._bindToInternalToExternalMap=new WeakMap,t._skippedIndexesFromExternal=[],o){var i,a=hi(r);try{for(a.s();!(i=a.n()).done;){var c=i.value;t._items.push(c),t._itemMap.set(t._getItemIdBeforeAdding(c),c)}}catch(t){a.e(t)}finally{a.f()}}return t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_i(t,e)}(e,t),r=e,(n=[{key:"length",get:function(){return this._items.length}},{key:"first",get:function(){return this._items[0]||null}},{key:"last",get:function(){return this._items[this.length-1]||null}},{key:"add",value:function(t,e){return this.addMany([t],e)}},{key:"addMany",value:function(t,e){if(void 0===e)e=this._items.length;else if(e>this._items.length||e<0)throw new A("collection-add-item-invalid-index",this);var r,n=0,o=hi(t);try{for(o.s();!(r=o.n()).done;){var i=r.value,a=this._getItemIdBeforeAdding(i),c=e+n;this._items.splice(c,0,i),this._itemMap.set(a,i),this.fire("add",i,c),n++}}catch(t){o.e(t)}finally{o.f()}return this.fire("change",{added:t,removed:[],index:e}),this}},{key:"get",value:function(t){var e;if("string"==typeof t)e=this._itemMap.get(t);else{if("number"!=typeof t)throw new A("collection-get-invalid-arg",this);e=this._items[t]}return e||null}},{key:"has",value:function(t){if("string"==typeof t)return this._itemMap.has(t);var e=t[this._idProperty];return e&&this._itemMap.has(e)}},{key:"getIndex",value:function(t){var e;return(e="string"==typeof t?this._itemMap.get(t):t)?this._items.indexOf(e):-1}},{key:"remove",value:function(t){var e,r,n=(e=this._remove(t),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,r)||yi(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];return this.fire("change",{added:[],removed:[o],index:i}),o}},{key:"map",value:function(t,e){return this._items.map(t,e)}},{key:"forEach",value:function(t,e){this._items.forEach(t,e)}},{key:"find",value:function(t,e){return this._items.find(t,e)}},{key:"filter",value:function(t,e){return this._items.filter(t,e)}},{key:"clear",value:function(){this._bindToCollection&&(this.stopListening(this._bindToCollection),this._bindToCollection=null);for(var t=Array.from(this._items);this.length;)this._remove(0);this.fire("change",{added:[],removed:t,index:0})}},{key:"bindTo",value:function(t){var e=this;if(this._bindToCollection)throw new A("collection-bind-to-rebind",this);return this._bindToCollection=t,{as:function(t){e._setUpBindToBinding((function(e){return new t(e)}))},using:function(t){"function"==typeof t?e._setUpBindToBinding(t):e._setUpBindToBinding((function(e){return e[t]}))}}}},{key:"_setUpBindToBinding",value:function(t){var e,r=this,n=this._bindToCollection,o=function(e,o,i){var a=n._bindToCollection==r,c=n._bindToInternalToExternalMap.get(o);if(a&&c)r._bindToExternalToInternalMap.set(o,c),r._bindToInternalToExternalMap.set(c,o);else{var u=t(o);if(!u)return void r._skippedIndexesFromExternal.push(i);var s,l=i,f=hi(r._skippedIndexesFromExternal);try{for(f.s();!(s=f.n()).done;)i>s.value&&l--}catch(t){f.e(t)}finally{f.f()}var p,d=hi(n._skippedIndexesFromExternal);try{for(d.s();!(p=d.n()).done;)l>=p.value&&l++}catch(t){d.e(t)}finally{d.f()}r._bindToExternalToInternalMap.set(o,u),r._bindToInternalToExternalMap.set(u,o),r.add(u,l);for(var h=0;h<n._skippedIndexesFromExternal.length;h++)l<=n._skippedIndexesFromExternal[h]&&n._skippedIndexesFromExternal[h]++}},i=hi(n);try{for(i.s();!(e=i.n()).done;){var a=e.value;o(0,a,n.getIndex(a))}}catch(t){i.e(t)}finally{i.f()}this.listenTo(n,"add",o),this.listenTo(n,"remove",(function(t,e,n){var o=r._bindToExternalToInternalMap.get(e);o&&r.remove(o),r._skippedIndexesFromExternal=r._skippedIndexesFromExternal.reduce((function(t,e){return n<e&&t.push(e-1),n>e&&t.push(e),t}),[])}))}},{key:"_getItemIdBeforeAdding",value:function(t){var e,r=this._idProperty;if(r in t){if("string"!=typeof(e=t[r]))throw new A("collection-add-invalid-id",this);if(this.get(e))throw new A("collection-add-item-already-exists",this)}else t[r]=e=v();return e}},{key:"_remove",value:function(t){var e,r,n,o=!1,i=this._idProperty;if("string"==typeof t?(r=t,o=!(n=this._itemMap.get(r)),n&&(e=this._items.indexOf(n))):"number"==typeof t?(e=t,o=!(n=this._items[e]),n&&(r=n[i])):(r=(n=t)[i],o=-1==(e=this._items.indexOf(n))||!this._itemMap.get(r)),o)throw new A("collection-remove-404",this);this._items.splice(e,1),this._itemMap.delete(r);var a=this._bindToInternalToExternalMap.get(n);return this._bindToInternalToExternalMap.delete(n),this._bindToExternalToInternalMap.delete(a),this.fire("remove",n,e),[n,e]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}}])&&vi(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function Pi(t){var e=t.next();return e.done?null:e.value}function Si(t){return Si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(t)}function ji(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ei(n.key),n)}}function Ei(t){var e=function(t,e){if("object"!=Si(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Si(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Si(e)?e:e+""}function Ti(t,e,r){return e=xi(e),function(t,e){if(e&&("object"===Si(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ai()?Reflect.construct(e,r||[],xi(t).constructor):e.apply(t,r))}function Ai(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ai=function(){return!!t})()}function xi(t){return xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xi(t)}function Ci(t,e){return Ci=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ci(t,e)}var Di=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ti(this,e))._elements=new Set,t._nextEventLoopTimeout=null,t.set("isFocused",!1),t.set("focusedElement",null),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ci(t,e)}(e,t),r=e,(n=[{key:"add",value:function(t){var e=this;if(this._elements.has(t))throw new A("focustracker-add-element-already-exist",this);this.listenTo(t,"focus",(function(){return e._focus(t)}),{useCapture:!0}),this.listenTo(t,"blur",(function(){return e._blur()}),{useCapture:!0}),this._elements.add(t)}},{key:"remove",value:function(t){t===this.focusedElement&&this._blur(),this._elements.has(t)&&(this.stopListening(t),this._elements.delete(t))}},{key:"destroy",value:function(){this.stopListening()}},{key:"_focus",value:function(t){clearTimeout(this._nextEventLoopTimeout),this.focusedElement=t,this.isFocused=!0}},{key:"_blur",value:function(){var t=this;clearTimeout(this._nextEventLoopTimeout),this._nextEventLoopTimeout=setTimeout((function(){t.focusedElement=null,t.isFocused=!1}),0)}}])&&ji(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Nn(mt()));function Ri(t){return Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(t)}function Ii(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bi(n.key),n)}}function Bi(t){var e=function(t,e){if("object"!=Ri(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ri(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ri(e)?e:e+""}var Fi=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._listener=new(Nn())},e=[{key:"listenTo",value:function(t){var e=this;this._listener.listenTo(t,"keydown",(function(t,r){e._listener.fire("_keydown:"+qo(r),r)}))}},{key:"set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=Uo(t),o=r.priority;this._listener.listenTo(this._listener,"_keydown:"+n,(function(t,r){e(r,(function(){r.preventDefault(),r.stopPropagation(),t.stop()})),t.return=!0}),{priority:o})}},{key:"press",value:function(t){return!!this._listener.fire("_keydown:"+qo(t),t)}},{key:"stopListening",value:function(t){this._listener.stopListening(t)}},{key:"destroy",value:function(){this.stopListening()}}],e&&Ii(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Mi(t){return Dt(t)?new Map(t):function(t){var e=new Map;for(var r in t)e.set(r,t[r]);return e}(t)}function Li(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ni(t,e){var r;function n(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];n.cancel(),r=setTimeout((function(){return t.apply(void 0,i)}),e)}return n.cancel=function(){clearTimeout(r)},n}function Vi(t,e){return!!(r=t.charAt(e-1))&&1==r.length&&/[\ud800-\udbff]/.test(r)&&function(t){return!!t&&1==t.length&&/[\udc00-\udfff]/.test(t)}(t.charAt(e));var r}function zi(t,e){return!!(r=t.charAt(e))&&1==r.length&&/[\u0300-\u036f\u1ab0-\u1aff\u1dc0-\u1dff\u20d0-\u20ff\ufe20-\ufe2f]/.test(r);var r}var $i,qi,Ui,Wi=($i=/(?:\uD83C[\uDDE6-\uDDFF]){2}/.source,qi="(?:"+[/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])(?:\uDB40[\uDC20-\uDC7E])+(?:\uDB40\uDC7F)/,/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])\uFE0F?\u20E3/,/(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])\uFE0F/,/(?=(?:[\xA6\xA9\xAE\xB0\u0482\u058D\u058E\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u09FA\u0B70\u0BF3-\u0BF8\u0BFA\u0C7F\u0D4F\u0D79\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116\u2117\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u214A\u214C\u214D\u214F\u218A\u218B\u2195-\u2199\u219C-\u219F\u21A1\u21A2\u21A4\u21A5\u21A7-\u21AD\u21AF-\u21CD\u21D0\u21D1\u21D3\u21D5-\u21F3\u2300-\u2307\u230C-\u231F\u2322-\u2328\u232B-\u237B\u237D-\u239A\u23B4-\u23DB\u23E2-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u25B6\u25B8-\u25C0\u25C2-\u25F7\u2600-\u266E\u2670-\u2767\u2794-\u27BF\u2800-\u28FF\u2B00-\u2B2F\u2B45\u2B46\u2B4D-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA828-\uA82B\uA836\uA837\uA839\uAA77-\uAA79\uFD40-\uFD4F\uFDCF\uFDFD-\uFDFF\uFFE4\uFFE8\uFFED\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFDC\uDFE1-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838\uDD4F|\uD83B[\uDCAC\uDD2E]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFA]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]))(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26A7\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5-\uDED7\uDEDC-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDDFF\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8])(?:\uD83C[\uDFFB-\uDFFF])*/].map((function(t){return t.source})).join("|")+")",Ui="".concat($i,"|").concat(qi,"(?:‍").concat(qi,")*"),new RegExp(Ui,"ug"));function Gi(t,e){var r=String(t).matchAll(Wi);return Array.from(r).some((function(t){return t.index<e&&e<t.index+t[0].length}))}function Ki(t){return Ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ki(t)}function Hi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ji(n.key),n)}}function Ji(t){var e=function(t,e){if("object"!=Ki(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ki(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ki(e)?e:e+""}function Yi(t,e,r){return e=Xi(e),function(t,e){if(e&&("object"===Ki(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zi()?Reflect.construct(e,r||[],Xi(t).constructor):e.apply(t,r))}function Zi(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zi=function(){return!!t})()}function Xi(t){return Xi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xi(t)}function Qi(t,e){return Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qi(t,e)}var ta=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yi(this,e))._disableStack=new Set,r.editor=t,r.set("isEnabled",!0),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qi(t,e)}(e,t),r=e,o=[{key:"isContextPlugin",get:function(){return!1}}],(n=[{key:"forceDisabled",value:function(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",ea,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",ea),this.isEnabled=!0)}},{key:"destroy",value:function(){this.stopListening()}}])&&Hi(r.prototype,n),o&&Hi(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(mt());function ea(t){t.return=!1,t.stop()}function ra(t){return ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(t)}function na(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oa(n.key),n)}}function oa(t){var e=function(t,e){if("object"!=ra(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ra(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ra(e)?e:e+""}function ia(t,e,r){return e=ca(e),function(t,e){if(e&&("object"===ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aa()?Reflect.construct(e,r||[],ca(t).constructor):e.apply(t,r))}function aa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aa=function(){return!!t})()}function ca(t){return ca=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ca(t)}function ua(t,e){return ua=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ua(t,e)}var sa=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ia(this,e)).editor=t,r.set("value",void 0),r.set("isEnabled",!1),r._affectsData=!0,r._isEnabledBasedOnSelection=!0,r._disableStack=new Set,r.decorate("execute"),r.listenTo(r.editor.model.document,"change",(function(){r.refresh()})),r.listenTo(t,"change:isReadOnly",(function(){r.refresh()})),r.on("set:isEnabled",(function(e){if(r.affectsData){var n=t.model.document.selection,o=!("$graveyard"==n.getFirstPosition().root.rootName)&&t.model.canEditAt(n);(t.isReadOnly||r._isEnabledBasedOnSelection&&!o)&&(e.return=!1,e.stop())}}),{priority:"highest"}),r.on("execute",(function(t){r.isEnabled||t.stop()}),{priority:"high"}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ua(t,e)}(e,t),r=e,(n=[{key:"affectsData",get:function(){return this._affectsData},set:function(t){this._affectsData=t}},{key:"refresh",value:function(){this.isEnabled=!0}},{key:"forceDisabled",value:function(t){this._disableStack.add(t),1==this._disableStack.size&&(this.on("set:isEnabled",la,{priority:"highest"}),this.isEnabled=!1)}},{key:"clearForceDisabled",value:function(t){this._disableStack.delete(t),0==this._disableStack.size&&(this.off("set:isEnabled",la),this.refresh())}},{key:"execute",value:function(){}},{key:"destroy",value:function(){this.stopListening()}}])&&na(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function la(t){t.return=!1,t.stop()}function fa(t){return fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fa(t)}function pa(){pa=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==fa(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fa(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function da(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||ya(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ha(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ya(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ya(t,e){if(t){if("string"==typeof t)return ba(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ba(t,e):void 0}}function ba(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function va(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ma(n.key),n)}}function ma(t){var e=function(t,e){if("object"!=fa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fa(e)?e:e+""}function ga(t,e,r){return e=ka(e),function(t,e){if(e&&("object"===fa(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wa()?Reflect.construct(e,r||[],ka(t).constructor):e.apply(t,r))}function wa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wa=function(){return!!t})()}function ka(t){return ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ka(t)}function _a(t,e){return _a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_a(t,e)}var Oa=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ga(this,e))._plugins=new Map,r._context=t,r._availablePlugins=new Map;var i,a=ha(n);try{for(a.s();!(i=a.n()).done;){var c=i.value;c.pluginName&&r._availablePlugins.set(c.pluginName,c)}}catch(t){a.e(t)}finally{a.f()}r._contextPlugins=new Map;var u,s=ha(o);try{for(s.s();!(u=s.n()).done;){var l=da(u.value,2),f=l[0],p=l[1];r._contextPlugins.set(f,p),r._contextPlugins.set(p,f),f.pluginName&&r._availablePlugins.set(f.pluginName,f)}}catch(t){s.e(t)}finally{s.f()}return r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_a(t,e)}(e,t),r=e,n=[{key:Symbol.iterator,value:pa().mark((function t(){var e,r,n;return pa().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=ha(this._plugins),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=10;break}if("function"!=typeof(n=r.value)[0]){t.next=8;break}return t.next=8,n;case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),e.e(t.t0);case 15:return t.prev=15,e.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,12,15,18]])}))},{key:"get",value:function(t){var e=this._plugins.get(t);if(!e){var r=t;throw"function"==typeof t&&(r=t.pluginName||t.name),new A("plugincollection-plugin-not-loaded",this._context,{plugin:r})}return e}},{key:"has",value:function(t){return this._plugins.has(t)}},{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=this,o=this._context;!function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;e.forEach((function(e){u(e)&&(r.has(e)||(r.add(e),e.pluginName&&!n._availablePlugins.has(e.pluginName)&&n._availablePlugins.set(e.pluginName,e),e.requires&&t(e.requires,r)))}))}(t),p(t);var i,a=(i=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set;return e.map((function(t){return u(t)?t:n._availablePlugins.get(t)})).reduce((function(e,n){return r.has(n)?e:(r.add(n),n.requires&&(p(n.requires,n),t(n.requires,r).forEach((function(t){return e.add(t)}))),e.add(n))}),new Set)}(t.filter((function(t){return!l(t,e)}))),function(t){if(Array.isArray(t))return ba(t)}(i)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(i)||ya(i)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());!function(t,e){var r,o=ha(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if("function"!=typeof i)throw new A("plugincollection-replace-plugin-invalid-type",null,{pluginItem:i});var a=i.pluginName;if(!a)throw new A("plugincollection-replace-plugin-missing-name",null,{pluginItem:i});if(i.requires&&i.requires.length)throw new A("plugincollection-plugin-for-replacing-cannot-have-dependencies",null,{pluginName:a});var c=n._availablePlugins.get(a);if(!c)throw new A("plugincollection-plugin-for-replacing-not-exist",null,{pluginName:a});var u=t.indexOf(c);if(-1===u){if(n._contextPlugins.has(c))return;throw new A("plugincollection-plugin-for-replacing-not-loaded",null,{pluginName:a})}if(c.requires&&c.requires.length)throw new A("plugincollection-replaced-plugin-cannot-have-dependencies",null,{pluginName:a});t.splice(u,1,i),n._availablePlugins.set(a,i)}}catch(t){o.e(t)}finally{o.f()}}(a,r);var c=function(t){return t.map((function(t){var e=n._contextPlugins.get(t);return e=e||new t(o),n._add(t,e),e}))}(a);return d(c,"init").then((function(){return d(c,"afterInit")})).then((function(){return c}));function u(t){return"function"==typeof t}function s(t){return u(t)&&!!t.isContextPlugin}function l(t,e){return e.some((function(e){return e===t||f(t)===e||f(e)===t}))}function f(t){return u(t)?t.pluginName||t.name:t}function p(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t.map((function(t){return u(t)?t:n._availablePlugins.get(t)||t})).forEach((function(t){!function(t,e){if(!u(t)){if(e)throw new A("plugincollection-soft-required",o,{missingPlugin:t,requiredBy:f(e)});throw new A("plugincollection-plugin-not-found",o,{plugin:t})}}(t,r),function(t,e){if(s(e)&&!s(t))throw new A("plugincollection-context-required",o,{plugin:f(t),requiredBy:f(e)})}(t,r),function(t,r){if(r&&l(t,e))throw new A("plugincollection-required",o,{plugin:f(t),requiredBy:f(r)})}(t,r)}))}function d(t,e){return t.reduce((function(t,r){return r[e]?n._contextPlugins.has(r)?t:t.then(r[e].bind(r)):t}),Promise.resolve())}}},{key:"destroy",value:function(){var t,e=[],r=ha(this);try{for(r.s();!(t=r.n()).done;){var n=da(t.value,2)[1];"function"!=typeof n.destroy||this._contextPlugins.has(n)||e.push(n.destroy())}}catch(t){r.e(t)}finally{r.f()}return Promise.all(e)}},{key:"_add",value:function(t,e){this._plugins.set(t,e);var r=t.pluginName;if(r){if(this._plugins.has(r))throw new A("plugincollection-plugin-name-conflict",null,{pluginName:r,plugin1:this._plugins.get(r).constructor,plugin2:t});this._plugins.set(r,e)}}}],n&&va(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H()),Pa=["translations"];function Sa(t){return Sa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sa(t)}function ja(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Ea(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ea(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Ea(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ta(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Aa(n.key),n)}}function Aa(t){var e=function(t,e){if("object"!=Sa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sa(e)?e:e+""}var xa=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._contextOwner=null;var r=e||{},n=r.translations,o=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(r,Pa);this.config=new wn(o,this.constructor.defaultConfig);var i=this.constructor.builtinPlugins;this.config.define("plugins",i),this.plugins=new Oa(this,i);var a=this.config.get("language")||{};this.locale=new pi({uiLanguage:"string"==typeof a?a:a.ui,contentLanguage:this.config.get("language.content"),translations:n}),this.t=this.locale.t,this.editors=new Oi},r=[{key:"create",value:function(t){var e=this;return new Promise((function(r){var n=new e(t);r(n.initPlugins().then((function(){return n})))}))}}],(e=[{key:"initPlugins",value:function(){var t,e=this.config.get("plugins")||[],r=this.config.get("substitutePlugins")||[],n=ja(e.concat(r));try{for(n.s();!(t=n.n()).done;){var o=t.value;if("function"!=typeof o)throw new A("context-initplugins-constructor-only",null,{Plugin:o});if(!0!==o.isContextPlugin)throw new A("context-initplugins-invalid-plugin",null,{Plugin:o})}}catch(t){n.e(t)}finally{n.f()}return this.plugins.init(e,[],r)}},{key:"destroy",value:function(){var t=this;return Promise.all(Array.from(this.editors,(function(t){return t.destroy()}))).then((function(){return t.plugins.destroy()}))}},{key:"_addEditor",value:function(t,e){if(this._contextOwner)throw new A("context-addeditor-private-context");this.editors.add(t),e&&(this._contextOwner=t)}},{key:"_removeEditor",value:function(t){return this.editors.has(t)&&this.editors.remove(t),this._contextOwner===t?this.destroy():Promise.resolve()}},{key:"_getEditorConfig",value:function(){var t,e={},r=ja(this.config.names());try{for(r.s();!(t=r.n()).done;){var n=t.value;["plugins","removePlugins","extraPlugins"].includes(n)||(e[n]=this.config.get(n))}}catch(t){r.e(t)}finally{r.f()}return e}}])&&Ta(t.prototype,e),r&&Ta(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();mt();var Ca=r(5072),Da=r.n(Ca),Ra=r(121);function Ia(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Fa(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ba(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Fa(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Fa(t,e){if(t){if("string"==typeof t)return Ma(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ma(t,e):void 0}}function Ma(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}Da()(Ra.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),Ra.A.locals;var La=new WeakMap,Na=!1;function Va(t,e){var r,n=La.get(t),o=[],i=!1,a=Ba(n);try{for(a.s();!(r=a.n()).done;){var c=Ia(r.value,2),u=c[0],s=c[1];s.isDirectHost&&(o.push(u),za(e,u,s)&&(i=!0))}}catch(t){a.e(t)}finally{a.f()}var l,f=Ba(n);try{for(f.s();!(l=f.n()).done;){var p=Ia(l.value,2),d=p[0],h=p[1];if(!h.isDirectHost){var y=$a(d);y&&(o.includes(y)||(h.hostElement=y,za(e,d,h)&&(i=!0)))}}}catch(t){f.e(t)}finally{f.f()}return i}function za(t,e,r){var n=r.text,o=r.isDirectHost,i=r.hostElement,a=!1;return i.getAttribute("data-placeholder")!==n&&(t.setAttribute("data-placeholder",n,i),a=!0),(o||1==e.childCount)&&function(t,e){if(!t.isAttached())return!1;var r=Array.from(t.getChildren()).some((function(t){return!t.is("uiElement")}));if(r)return!1;var n=t.document,o=n.selection.anchor;return!(n.isComposing&&o&&o.parent===t||!e&&n.isFocused&&(!o||o.parent===t))}(i,r.keepOnFocus)?function(t,e){return!e.hasClass("ck-placeholder")&&(t.addClass("ck-placeholder",e),!0)}(t,i)&&(a=!0):function(t,e){return!!e.hasClass("ck-placeholder")&&(t.removeClass("ck-placeholder",e),!0)}(t,i)&&(a=!0),a}function $a(t){if(t.childCount){var e=t.getChild(0);if(e.is("element")&&!e.is("uiElement")&&!e.is("attributeElement"))return e}return null}function qa(t){return qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qa(t)}function Ua(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wa(n.key),n)}}function Wa(t){var e=function(t,e){if("object"!=qa(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qa(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qa(e)?e:e+""}var Ga=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"is",value:function(){throw new Error("is() method is abstract")}}])&&Ua(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();const Ka=function(t){return fn(t,4)};function Ha(t){return Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ha(t)}function Ja(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ya(n.key),n)}}function Ya(t){var e=function(t,e){if("object"!=Ha(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ha(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ha(e)?e:e+""}function Za(t,e,r){return e=Qa(e),function(t,e){if(e&&("object"===Ha(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xa()?Reflect.construct(e,r||[],Qa(t).constructor):e.apply(t,r))}function Xa(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xa=function(){return!!t})()}function Qa(t){return Qa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qa(t)}function tc(t,e){return tc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tc(t,e)}var ec=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Za(this,e)).document=t,r.parent=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tc(t,e)}(e,t),r=e,n=[{key:"index",get:function(){var t;if(!this.parent)return null;if(-1==(t=this.parent.getChildIndex(this)))throw new A("view-node-not-found-in-parent",this);return t}},{key:"nextSibling",get:function(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null}},{key:"previousSibling",get:function(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null}},{key:"root",get:function(){for(var t=this;t.parent;)t=t.parent;return t}},{key:"isAttached",value:function(){return this.root.is("rootElement")}},{key:"getPath",value:function(){for(var t=[],e=this;e.parent;)t.unshift(e.index),e=e.parent;return t}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=t.includeSelf?this:this.parent;r;)e[t.parentFirst?"push":"unshift"](r),r=r.parent;return e}},{key:"getCommonAncestor",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getAncestors(e),n=t.getAncestors(e),o=0;r[o]==n[o]&&r[o];)o++;return 0===o?null:r[o-1]}},{key:"isBefore",value:function(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),r=t.getPath(),n=Ct(e,r);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<r[n]}}},{key:"isAfter",value:function(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_fireChange",value:function(t,e){this.fire("change:".concat(t),e),this.parent&&this.parent._fireChange(t,e)}},{key:"toJSON",value:function(){var t=Ka(this);return delete t.parent,t}}],n&&Ja(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H(Ga));function rc(t){return rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rc(t)}function nc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oc(n.key),n)}}function oc(t){var e=function(t,e){if("object"!=rc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rc(e)?e:e+""}function ic(t,e,r){return e=cc(e),function(t,e){if(e&&("object"===rc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ac()?Reflect.construct(e,r||[],cc(t).constructor):e.apply(t,r))}function ac(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ac=function(){return!!t})()}function cc(t){return cc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cc(t)}function uc(t,e){return uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uc(t,e)}ec.prototype.is=function(t){return"node"===t||"view:node"===t};var sc=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ic(this,e,[t]))._textData=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uc(t,e)}(e,t),r=e,(n=[{key:"data",get:function(){return this._textData}},{key:"_data",get:function(){return this.data},set:function(t){this._fireChange("text",this),this._textData=t}},{key:"isSimilar",value:function(t){return t instanceof e&&(this===t||this.data===t.data)}},{key:"_clone",value:function(){return new e(this.document,this.data)}}])&&nc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ec);function lc(t){return lc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lc(t)}function fc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pc(n.key),n)}}function pc(t){var e=function(t,e){if("object"!=lc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lc(e)?e:e+""}function dc(t,e,r){return e=yc(e),function(t,e){if(e&&("object"===lc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hc()?Reflect.construct(e,r||[],yc(t).constructor):e.apply(t,r))}function hc(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hc=function(){return!!t})()}function yc(t){return yc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yc(t)}function bc(t,e){return bc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bc(t,e)}sc.prototype.is=function(t){return"$text"===t||"view:$text"===t||"text"===t||"view:text"===t||"node"===t||"view:node"===t};var vc=function(t){function e(t,r,n){var o;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=dc(this,e)).textNode=t,r<0||r>t.data.length)throw new A("view-textproxy-wrong-offsetintext",o);if(n<0||r+n>t.data.length)throw new A("view-textproxy-wrong-length",o);return o.data=t.data.substring(r,r+n),o.offsetInText=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bc(t,e)}(e,t),r=e,n=[{key:"offsetSize",get:function(){return this.data.length}},{key:"isPartial",get:function(){return this.data.length!==this.textNode.data.length}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"document",get:function(){return this.textNode.document}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=t.includeSelf?this.textNode:this.parent;null!==r;)e[t.parentFirst?"push":"unshift"](r),r=r.parent;return e}}],n&&fc(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ga);function mc(t){return mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mc(t)}function gc(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wc(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function wc(t,e){if(t){if("string"==typeof t)return kc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kc(t,e):void 0}}function kc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _c(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Oc(n.key),n)}}function Oc(t){var e=function(t,e){if("object"!=mc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mc(e)?e:e+""}vc.prototype.is=function(t){return"$textProxy"===t||"view:$textProxy"===t||"textProxy"===t||"view:textProxy"===t};var Pc=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._patterns=[],this.add.apply(this,arguments)},e=[{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];("string"==typeof i||i instanceof RegExp)&&(i={name:i}),this._patterns.push(i)}}},{key:"match",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i,a=o[n],c=gc(this._patterns);try{for(c.s();!(i=c.n()).done;){var u=i.value,s=Sc(a,u);if(s)return{element:a,pattern:u,match:s}}}catch(t){c.e(t)}finally{c.f()}}return null}},{key:"matchAll",value:function(){for(var t=[],e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];for(var o=0,i=r;o<i.length;o++){var a,c=i[o],u=gc(this._patterns);try{for(u.s();!(a=u.n()).done;){var s=a.value,l=Sc(c,s);l&&t.push({element:c,pattern:s,match:l})}}catch(t){u.e(t)}finally{u.f()}}return t.length>0?t:null}},{key:"getElementName",value:function(){if(1!==this._patterns.length)return null;var t=this._patterns[0],e=t.name;return"function"==typeof t||!e||e instanceof RegExp?null:e}}],e&&_c(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Sc(t,e){if("function"==typeof e)return e(t);var r={};return e.name&&(r.name=function(t,e){return t instanceof RegExp?!!e.match(t):t===e}(e.name,t.name),!r.name)||e.attributes&&(r.attributes=function(t,e){var r=new Set(e.getAttributeKeys());return re(t)?(void 0!==t.style&&x("matcher-pattern-deprecated-attributes-style-key",t),void 0!==t.class&&x("matcher-pattern-deprecated-attributes-class-key",t)):(r.delete("style"),r.delete("class")),jc(t,r,(function(t){return e.getAttribute(t)}))}(e.attributes,t),!r.attributes)||e.classes&&(r.classes=function(t,e){return jc(t,e.getClassNames(),(function(){}))}(e.classes,t),!r.classes)||e.styles&&(r.styles=function(t,e){return jc(t,e.getStyleNames(!0),(function(t){return e.getStyle(t)}))}(e.styles,t),!r.styles)?null:r}function jc(t,e,r){var n=function(t){return Array.isArray(t)?t.map((function(t){return re(t)?(void 0!==t.key&&void 0!==t.value||x("matcher-pattern-missing-key-or-value",t),[t.key,t.value]):[t,!0]})):re(t)?Object.entries(t):[[t,!0]]}(t),o=Array.from(e),i=[];if(n.forEach((function(t){var e,n,a=(n=2,function(t){if(Array.isArray(t))return t}(e=t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,n)||wc(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1];o.forEach((function(t){(function(t,e){return!0===t||t===e||t instanceof RegExp&&e.match(t)})(c,t)&&function(t,e,r){if(!0===t)return!0;var n=r(e);return t===n||t instanceof RegExp&&!!String(n).match(t)}(u,t,r)&&i.push(t)}))})),n.length&&!(i.length<n.length))return i}const Ec=function(t){return"symbol"==typeof t||Wt(t)&&"[object Symbol]"==qt(t)};var Tc=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ac=/^\w*$/;const xc=function(t,e){if(Ut(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Ec(t))||Ac.test(t)||!Tc.test(t)||null!=e&&t in Object(e)};function Cc(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Cc.Cache||Ae),r}Cc.Cache=Ae;var Dc,Rc,Ic=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Bc=/\\(\\)?/g;const Fc=(Dc=Cc((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ic,(function(t,r,n,o){e.push(n?o.replace(Bc,"$1"):r||t)})),e}),(function(t){return 500===Rc.size&&Rc.clear(),t})),Rc=Dc.cache,Dc);var Mc=Ft?Ft.prototype:void 0,Lc=Mc?Mc.toString:void 0;const Nc=function t(e){if("string"==typeof e)return e;if(Ut(e))return function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,t)+"";if(Ec(e))return Lc?Lc.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r},Vc=function(t){return null==t?"":Nc(t)},zc=function(t,e){return Ut(t)?t:xc(t,e)?[t]:Fc(Vc(t))},$c=function(t){if("string"==typeof t||Ec(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},qc=function(t,e){for(var r=0,n=(e=zc(e,t)).length;null!=t&&r<n;)t=t[$c(e[r++])];return r&&r==n?t:void 0},Uc=function(t,e){return e.length<2?t:qc(t,function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(e,0,-1))},Wc=function(t,e){return null==t||function(t,e){return e=zc(e,t),null==(t=Uc(t,e))||delete t[$c((r=e,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n}(t,e)},Gc=function(t,e,r){var n=null==t?void 0:qc(t,e);return void 0===n?r:n},Kc=function(t,e,r){return null==t?t:function(t,e,r,n){if(!rt(t))return t;for(var o=-1,i=(e=zc(e,t)).length,a=i-1,c=t;null!=c&&++o<i;){var u=$c(e[o]),s=r;if("__proto__"===u||"constructor"===u||"prototype"===u)return t;if(o!=a){var l=c[u];void 0===(s=n?n(l,u,c):void 0)&&(s=rt(l)?l:Ke(e[o+1])?[]:{})}Be(c,u,s),c=c[u]}return t}(t,e,r)};function Hc(t){return Hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hc(t)}function Jc(t){return function(t){if(Array.isArray(t))return Qc(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Xc(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yc(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Xc(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zc(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Xc(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Xc(t,e){if(t){if("string"==typeof t)return Qc(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Qc(t,e):void 0}}function Qc(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tu(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nu(n.key),n)}}function ru(t,e,r){return e&&eu(t.prototype,e),r&&eu(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function nu(t){var e=function(t,e){if("object"!=Hc(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hc(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hc(e)?e:e+""}var ou=function(){return ru((function t(e){tu(this,t),this._styles={},this._styleProcessor=e}),[{key:"isEmpty",get:function(){return!Object.entries(this._styles).length}},{key:"size",get:function(){return this.isEmpty?0:this.getStyleNames().length}},{key:"setTo",value:function(t){this.clear();var e,r=Zc(function(t){var e=null,r=0,n=0,o=null,i=new Map;if(""===t)return i;";"!=t.charAt(t.length-1)&&(t+=";");for(var a=0;a<t.length;a++){var c=t.charAt(a);if(null===e)switch(c){case":":o||(o=t.substr(r,a-r),n=a+1);break;case'"':case"'":e=c;break;case";":var u=t.substr(n,a-n);o&&i.set(o.trim(),u.trim()),o=null,r=a+1}else c===e&&(e=null)}return i}(t));try{for(r.s();!(e=r.n()).done;){var n=Yc(e.value,2),o=n[0],i=n[1];this._styleProcessor.toNormalizedForm(o,i,this._styles)}}catch(t){r.e(t)}finally{r.f()}}},{key:"has",value:function(t){if(this.isEmpty)return!1;var e=this._styleProcessor.getReducedForm(t,this._styles).find((function(e){return Yc(e,1)[0]===t}));return Array.isArray(e)}},{key:"set",value:function(t,e){if(rt(t))for(var r=0,n=Object.entries(t);r<n.length;r++){var o=Yc(n[r],2),i=o[0],a=o[1];this._styleProcessor.toNormalizedForm(i,a,this._styles)}else this._styleProcessor.toNormalizedForm(t,e,this._styles)}},{key:"remove",value:function(t){var e=au(t);Wc(this._styles,e),delete this._styles[t],this._cleanEmptyObjectsOnPath(e)}},{key:"getNormalized",value:function(t){return this._styleProcessor.getNormalized(t,this._styles)}},{key:"toString",value:function(){return this.isEmpty?"":this.getStylesEntries().map((function(t){return t.join(":")})).sort().join(";")+";"}},{key:"getAsString",value:function(t){if(!this.isEmpty){if(this._styles[t]&&!rt(this._styles[t]))return this._styles[t];var e=this._styleProcessor.getReducedForm(t,this._styles).find((function(e){return Yc(e,1)[0]===t}));return Array.isArray(e)?e[1]:void 0}}},{key:"getStyleNames",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.isEmpty?[]:t?this._styleProcessor.getStyleNames(this._styles):this.getStylesEntries().map((function(t){return Yc(t,1)[0]}))}},{key:"clear",value:function(){this._styles={}}},{key:"getStylesEntries",value:function(){for(var t=[],e=0,r=Object.keys(this._styles);e<r.length;e++){var n=r[e];t.push.apply(t,Jc(this._styleProcessor.getReducedForm(n,this._styles)))}return t}},{key:"_cleanEmptyObjectsOnPath",value:function(t){var e=t.split(".");if(e.length>1){var r=e.splice(0,e.length-1).join("."),n=Gc(this._styles,r);n&&!Object.keys(n).length&&this.remove(r)}}}])}(),iu=function(){return ru((function t(){tu(this,t),this._normalizers=new Map,this._extractors=new Map,this._reducers=new Map,this._consumables=new Map}),[{key:"toNormalizedForm",value:function(t,e,r){if(rt(e))cu(r,au(t),e);else if(this._normalizers.has(t)){var n=this._normalizers.get(t)(e);cu(r,n.path,n.value)}else cu(r,t,e)}},{key:"getNormalized",value:function(t,e){if(!t)return ai({},e);if(void 0!==e[t])return e[t];if(this._extractors.has(t)){var r=this._extractors.get(t);if("string"==typeof r)return Gc(e,r);var n=r(t,e);if(n)return n}return Gc(e,au(t))}},{key:"getReducedForm",value:function(t,e){var r=this.getNormalized(t,e);return void 0===r?[]:this._reducers.has(t)?this._reducers.get(t)(r):[[t,r]]}},{key:"getStyleNames",value:function(t){var e=this,r=Array.from(this._consumables.keys()).filter((function(r){var n=e.getNormalized(r,t);return n&&"object"==Hc(n)?Object.keys(n).length:n})),n=new Set([].concat(Jc(r),Jc(Object.keys(t))));return Array.from(n)}},{key:"getRelatedStyles",value:function(t){return this._consumables.get(t)||[]}},{key:"setNormalizer",value:function(t,e){this._normalizers.set(t,e)}},{key:"setExtractor",value:function(t,e){this._extractors.set(t,e)}},{key:"setReducer",value:function(t,e){this._reducers.set(t,e)}},{key:"setStyleRelation",value:function(t,e){this._mapStyleNames(t,e);var r,n=Zc(e);try{for(n.s();!(r=n.n()).done;){var o=r.value;this._mapStyleNames(o,[t])}}catch(t){n.e(t)}finally{n.f()}}},{key:"_mapStyleNames",value:function(t,e){var r;this._consumables.has(t)||this._consumables.set(t,[]),(r=this._consumables.get(t)).push.apply(r,Jc(e))}}])}();function au(t){return t.replace("-",".")}function cu(t,e,r){var n=r;rt(r)&&(n=ai({},Gc(t,e),r)),Kc(t,e,n)}function uu(t){return uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uu(t)}function su(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||fu(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lu(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=fu(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function fu(t,e){if(t){if("string"==typeof t)return pu(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pu(t,e):void 0}}function pu(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function du(){du=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==uu(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(uu(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function hu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yu(n.key),n)}}function yu(t){var e=function(t,e){if("object"!=uu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uu(e)?e:e+""}function bu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bu=function(){return!!t})()}function vu(t){return vu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vu(t)}function mu(t,e){return mu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mu(t,e)}var gu=function(t){function e(t,r,n,o){var i,a,c,u;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=this,c=e,u=[t],c=vu(c),i=function(t,e){if(e&&("object"===uu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(a,bu()?Reflect.construct(c,u||[],vu(a).constructor):c.apply(a,u)))._unsafeAttributesToRender=[],i._customProperties=new Map,i.name=r,i._attrs=function(t){var e,r=Mi(t),n=lu(r);try{for(n.s();!(e=n.n()).done;){var o=su(e.value,2),i=o[0],a=o[1];null===a?r.delete(i):"string"!=typeof a&&r.set(i,String(a))}}catch(t){n.e(t)}finally{n.f()}return r}(n),i._children=[],o&&i._insertChild(0,o),i._classes=new Set,i._attrs.has("class")){var s=i._attrs.get("class");wu(i._classes,s),i._attrs.delete("class")}return i._styles=new ou(i.document.stylesProcessor),i._attrs.has("style")&&(i._styles.setTo(i._attrs.get("style")),i._attrs.delete("style")),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mu(t,e)}(e,t),r=e,n=[{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this._children.length}},{key:"getChild",value:function(t){return this._children[t]}},{key:"getChildIndex",value:function(t){return this._children.indexOf(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getAttributeKeys",value:du().mark((function t(){return du().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(this._classes.size>0)){t.next=3;break}return t.next=3,"class";case 3:if(this._styles.isEmpty){t.next=6;break}return t.next=6,"style";case 6:return t.delegateYield(this._attrs.keys(),"t0",7);case 7:case"end":return t.stop()}}),t,this)}))},{key:"getAttributes",value:du().mark((function t(){return du().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._attrs.entries(),"t0",1);case 1:if(!(this._classes.size>0)){t.next=4;break}return t.next=4,["class",this.getAttribute("class")];case 4:if(this._styles.isEmpty){t.next=7;break}return t.next=7,["style",this.getAttribute("style")];case 7:case"end":return t.stop()}}),t,this)}))},{key:"getAttribute",value:function(t){if("class"==t)return this._classes.size>0?(e=this._classes,function(t){if(Array.isArray(t))return pu(t)}(e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||fu(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).join(" "):void 0;var e;if("style"==t){var r=this._styles.toString();return""==r?void 0:r}return this._attrs.get(t)}},{key:"hasAttribute",value:function(t){return"class"==t?this._classes.size>0:"style"==t?!this._styles.isEmpty:this._attrs.has(t)}},{key:"isSimilar",value:function(t){if(!(t instanceof e))return!1;if(this===t)return!0;if(this.name!=t.name)return!1;if(this._attrs.size!==t._attrs.size||this._classes.size!==t._classes.size||this._styles.size!==t._styles.size)return!1;var r,n=lu(this._attrs);try{for(n.s();!(r=n.n()).done;){var o=su(r.value,2),i=o[0],a=o[1];if(!t._attrs.has(i)||t._attrs.get(i)!==a)return!1}}catch(t){n.e(t)}finally{n.f()}var c,u=lu(this._classes);try{for(u.s();!(c=u.n()).done;){var s=c.value;if(!t._classes.has(s))return!1}}catch(t){u.e(t)}finally{u.f()}var l,f=lu(this._styles.getStyleNames());try{for(f.s();!(l=f.n()).done;){var p=l.value;if(!t._styles.has(p)||t._styles.getAsString(p)!==this._styles.getAsString(p))return!1}}catch(t){f.e(t)}finally{f.f()}return!0}},{key:"hasClass",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];if(!this._classes.has(i))return!1}return!0}},{key:"getClassNames",value:function(){return this._classes.keys()}},{key:"getStyle",value:function(t){return this._styles.getAsString(t)}},{key:"getNormalizedStyle",value:function(t){return this._styles.getNormalized(t)}},{key:"getStyleNames",value:function(t){return this._styles.getStyleNames(t)}},{key:"hasStyle",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=0,o=e;n<o.length;n++){var i=o[n];if(!this._styles.has(i))return!1}return!0}},{key:"findAncestor",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=function(t,e,r){if(bu())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&mu(o,r.prototype),o}(Pc,e),o=this.parent;o&&!o.is("documentFragment");){if(n.match(o))return o;o=o.parent}return null}},{key:"getCustomProperty",value:function(t){return this._customProperties.get(t)}},{key:"getCustomProperties",value:du().mark((function t(){return du().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"getIdentity",value:function(){var t=Array.from(this._classes).sort().join(","),e=this._styles.toString(),r=Array.from(this._attrs).map((function(t){return"".concat(t[0],'="').concat(t[1],'"')})).sort().join(" ");return this.name+(""==t?"":' class="'.concat(t,'"'))+(e?' style="'.concat(e,'"'):"")+(""==r?"":" ".concat(r))}},{key:"shouldRenderUnsafeAttribute",value:function(t){return this._unsafeAttributesToRender.includes(t)}},{key:"_clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=[];if(t){var r,n=lu(this.getChildren());try{for(n.s();!(r=n.n()).done;){var o=r.value;e.push(o._clone(t))}}catch(t){n.e(t)}finally{n.f()}}var i=new this.constructor(this.document,this.name,this._attrs,e);return i._classes=new Set(this._classes),i._styles.set(this._styles.getNormalized()),i._customProperties=new Map(this._customProperties),i.getFillerOffset=this.getFillerOffset,i._unsafeAttributesToRender=this._unsafeAttributesToRender,i}},{key:"_appendChild",value:function(t){return this._insertChild(this.childCount,t)}},{key:"_insertChild",value:function(t,e){this._fireChange("children",this);var r,n=0,o=function(t,e){return"string"==typeof e?[new sc(t,e)]:(Dt(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new sc(t,e):e instanceof vc?new sc(t,e.data):e})))}(this.document,e),i=lu(o);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!==a.parent&&a._remove(),a.parent=this,a.document=this.document,this._children.splice(t,0,a),t++,n++}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"_removeChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var r=t;r<t+e;r++)this._children[r].parent=null;return this._children.splice(t,e)}},{key:"_setAttribute",value:function(t,e){var r=String(e);this._fireChange("attributes",this),"class"==t?wu(this._classes,r):"style"==t?this._styles.setTo(r):this._attrs.set(t,r)}},{key:"_removeAttribute",value:function(t){return this._fireChange("attributes",this),"class"==t?this._classes.size>0&&(this._classes.clear(),!0):"style"==t?!this._styles.isEmpty&&(this._styles.clear(),!0):this._attrs.delete(t)}},{key:"_addClass",value:function(t){this._fireChange("attributes",this);var e,r=lu(Ko(t));try{for(r.s();!(e=r.n()).done;){var n=e.value;this._classes.add(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_removeClass",value:function(t){this._fireChange("attributes",this);var e,r=lu(Ko(t));try{for(r.s();!(e=r.n()).done;){var n=e.value;this._classes.delete(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_setStyle",value:function(t,e){this._fireChange("attributes",this),"string"!=typeof t?this._styles.set(t):this._styles.set(t,e)}},{key:"_removeStyle",value:function(t){this._fireChange("attributes",this);var e,r=lu(Ko(t));try{for(r.s();!(e=r.n()).done;){var n=e.value;this._styles.remove(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_setCustomProperty",value:function(t,e){this._customProperties.set(t,e)}},{key:"_removeCustomProperty",value:function(t){return this._customProperties.delete(t)}}],n&&hu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ec);function wu(t,e){var r=e.split(/\s+/);t.clear(),r.forEach((function(e){return t.add(e)}))}function ku(t){return ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ku(t)}function _u(t,e){if(t){if("string"==typeof t)return Ou(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ou(t,e):void 0}}function Ou(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pu(t,e,r){return e=ju(e),function(t,e){if(e&&("object"===ku(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Su()?Reflect.construct(e,r||[],ju(t).constructor):e.apply(t,r))}function Su(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Su=function(){return!!t})()}function ju(t){return ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ju(t)}function Eu(t,e){return Eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Eu(t,e)}gu.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"view:element"===t):"element"===t||"view:element"===t||"node"===t||"view:node"===t};var Tu=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Pu(this,e,[t,r,n,o])).getFillerOffset=Au,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eu(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(gu);function Au(){var t,e=function(t){if(Array.isArray(t))return Ou(t)}(t=this.getChildren())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),r=e[this.childCount-1];if(r&&r.is("element","br"))return this.childCount;var n,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_u(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(o.s();!(n=o.n()).done;)if(!n.value.is("uiElement"))return null}catch(t){o.e(t)}finally{o.f()}return this.childCount}function xu(t){return xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xu(t)}function Cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Du(n.key),n)}}function Du(t){var e=function(t,e){if("object"!=xu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xu(e)?e:e+""}function Ru(t,e,r){return e=Bu(e),function(t,e){if(e&&("object"===xu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Iu()?Reflect.construct(e,r||[],Bu(t).constructor):e.apply(t,r))}function Iu(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Iu=function(){return!!t})()}function Bu(t){return Bu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Bu(t)}function Fu(t,e){return Fu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Fu(t,e)}Tu.prototype.is=function(t,e){return e?e===this.name&&("containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var Mu=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Ru(this,e,[t,r,n,o])).set("isReadOnly",!1),i.set("isFocused",!1),i.set("placeholder",void 0),i.bind("isReadOnly").to(t),i.bind("isFocused").to(t,"isFocused",(function(e){return e&&t.selection.editableElement==i})),i.listenTo(t.selection,"change",(function(){i.isFocused=t.isFocused&&t.selection.editableElement==i})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fu(t,e)}(e,t),r=e,(n=[{key:"destroy",value:function(){this.stopListening()}}])&&Cu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt(Tu));function Lu(t){return Lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lu(t)}function Nu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vu(n.key),n)}}function Vu(t){var e=function(t,e){if("object"!=Lu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lu(e)?e:e+""}function zu(t,e,r){return e=qu(e),function(t,e){if(e&&("object"===Lu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$u()?Reflect.construct(e,r||[],qu(t).constructor):e.apply(t,r))}function $u(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($u=function(){return!!t})()}function qu(t){return qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qu(t)}function Uu(t,e){return Uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uu(t,e)}Mu.prototype.is=function(t,e){return e?e===this.name&&("editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var Wu=Symbol("rootName"),Gu=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zu(this,e,[t,r])).rootName="main",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uu(t,e)}(e,t),r=e,(n=[{key:"rootName",get:function(){return this.getCustomProperty(Wu)},set:function(t){this._setCustomProperty(Wu,t)}},{key:"_name",set:function(t){this.name=t}}])&&Nu(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Mu);function Ku(t){return Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ku(t)}function Hu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ju(n.key),n)}}function Ju(t){var e=function(t,e){if("object"!=Ku(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ku(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ku(e)?e:e+""}Gu.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t):"rootElement"===t||"view:rootElement"===t||"editableElement"===t||"view:editableElement"===t||"containerElement"===t||"view:containerElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var Yu=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e.boundaries&&!e.startPosition)throw new A("view-tree-walker-no-start-position",null);if(e.direction&&"forward"!=e.direction&&"backward"!=e.direction)throw new A("view-tree-walker-unknown-direction",e.startPosition,{direction:e.direction});this.boundaries=e.boundaries||null,e.startPosition?this._position=os._createAt(e.startPosition):this._position=os._createAt(e.boundaries["backward"==e.direction?"end":"start"]),this.direction=e.direction||"forward",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null},(e=[{key:Symbol.iterator,value:function(){return this}},{key:"position",get:function(){return this._position}},{key:"skip",value:function(t){var e,r;do{r=this.position,e=this.next()}while(!e.done&&t(e.value));e.done||(this._position=r)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var t,e=this.position.clone(),r=this.position,n=e.parent;if(null===n.parent&&e.offset===n.childCount)return{done:!0,value:void 0};if(n===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};if(n instanceof sc){if(e.isAtEnd)return this._position=os._createAfter(n),this._next();t=n.data[e.offset]}else t=n.getChild(e.offset);if(t instanceof gu){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e=new os(t,0);return this._position=e,this._formatReturnValue("elementStart",t,r,e,1)}if(t instanceof sc){if(this.singleCharacters)return e=new os(t,0),this._position=e,this._next();var o,i=t.data.length;return t==this._boundaryEndParent?(i=this.boundaries.end.offset,o=new vc(t,0,i),e=os._createAfter(o)):(o=new vc(t,0,t.data.length),e.offset++),this._position=e,this._formatReturnValue("text",o,r,e,i)}if("string"==typeof t){var a;a=this.singleCharacters?1:(n===this._boundaryEndParent?this.boundaries.end.offset:n.data.length)-e.offset;var c=new vc(n,e.offset,a);return e.offset+=a,this._position=e,this._formatReturnValue("text",c,r,e,a)}return e=os._createAfter(n),this._position=e,this.ignoreElementEnd?this._next():this._formatReturnValue("elementEnd",n,r,e)}},{key:"_previous",value:function(){var t,e=this.position.clone(),r=this.position,n=e.parent;if(null===n.parent&&0===e.offset)return{done:!0,value:void 0};if(n==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};if(n instanceof sc){if(e.isAtStart)return this._position=os._createBefore(n),this._previous();t=n.data[e.offset-1]}else t=n.getChild(e.offset-1);if(t instanceof gu)return this.shallow?(e.offset--,this._position=e,this._formatReturnValue("elementStart",t,r,e,1)):(e=new os(t,t.childCount),this._position=e,this.ignoreElementEnd?this._previous():this._formatReturnValue("elementEnd",t,r,e));if(t instanceof sc){if(this.singleCharacters)return e=new os(t,t.data.length),this._position=e,this._previous();var o,i=t.data.length;if(t==this._boundaryStartParent){var a=this.boundaries.start.offset;i=(o=new vc(t,a,t.data.length-a)).data.length,e=os._createBefore(o)}else o=new vc(t,0,t.data.length),e.offset--;return this._position=e,this._formatReturnValue("text",o,r,e,i)}if("string"==typeof t){var c;if(this.singleCharacters)c=1;else{var u=n===this._boundaryStartParent?this.boundaries.start.offset:0;c=e.offset-u}e.offset-=c;var s=new vc(n,e.offset,c);return this._position=e,this._formatReturnValue("text",s,r,e,c)}return e=os._createBefore(n),this._position=e,this._formatReturnValue("elementStart",n,r,e,1)}},{key:"_formatReturnValue",value:function(t,e,r,n,o){return e instanceof vc&&(e.offsetInText+e.data.length==e.textNode.data.length&&("forward"!=this.direction||this.boundaries&&this.boundaries.end.isEqual(this.position)?r=os._createAfter(e.textNode):(n=os._createAfter(e.textNode),this._position=n)),0===e.offsetInText&&("backward"!=this.direction||this.boundaries&&this.boundaries.start.isEqual(this.position)?r=os._createBefore(e.textNode):(n=os._createBefore(e.textNode),this._position=n))),{done:!1,value:{type:t,item:e,previousPosition:r,nextPosition:n,length:o}}}}])&&Hu(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Zu(t){return Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zu(t)}function Xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qu(n.key),n)}}function Qu(t){var e=function(t,e){if("object"!=Zu(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Zu(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zu(e)?e:e+""}function ts(t,e,r){return e=rs(e),function(t,e){if(e&&("object"===Zu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,es()?Reflect.construct(e,r||[],rs(t).constructor):e.apply(t,r))}function es(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(es=function(){return!!t})()}function rs(t){return rs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rs(t)}function ns(t,e){return ns=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ns(t,e)}var os=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ts(this,e)).parent=t,n.offset=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ns(t,e)}(e,t),r=e,n=[{key:"nodeAfter",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset)||null}},{key:"nodeBefore",get:function(){return this.parent.is("$text")?null:this.parent.getChild(this.offset-1)||null}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){var t=this.parent.is("$text")?this.parent.data.length:this.parent.childCount;return this.offset===t}},{key:"root",get:function(){return this.parent.root}},{key:"editableElement",get:function(){for(var t=this.parent;!(t instanceof Mu);){if(!t.parent)return null;t=t.parent}return t}},{key:"getShiftedBy",value:function(t){var r=e._createAt(this),n=r.offset+t;return r.offset=n<0?0:n,r}},{key:"getLastMatchingPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.startPosition=this;var r=new Yu(e);return r.skip(t),r.position}},{key:"getAncestors",value:function(){return this.parent.is("documentFragment")?[this.parent]:this.parent.getAncestors({includeSelf:!0})}},{key:"getCommonAncestor",value:function(t){for(var e=this.getAncestors(),r=t.getAncestors(),n=0;e[n]==r[n]&&e[n];)n++;return 0===n?null:e[n-1]}},{key:"isEqual",value:function(t){return this.parent==t.parent&&this.offset==t.offset}},{key:"isBefore",value:function(t){return"before"==this.compareWith(t)}},{key:"isAfter",value:function(t){return"after"==this.compareWith(t)}},{key:"compareWith",value:function(t){if(this.root!==t.root)return"different";if(this.isEqual(t))return"same";var e=this.parent.is("node")?this.parent.getPath():[],r=t.parent.is("node")?t.parent.getPath():[];e.push(this.offset),r.push(t.offset);var n=Ct(e,r);switch(n){case"prefix":return"before";case"extension":return"after";default:return e[n]<r[n]?"before":"after"}}},{key:"getWalker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.startPosition=this,new Yu(t)}},{key:"clone",value:function(){return new e(this.parent,this.offset)}}],o=[{key:"_createAt",value:function(t,r){if(t instanceof e)return new this(t.parent,t.offset);var n=t;if("end"==r)r=n.is("$text")?n.data.length:n.childCount;else{if("before"==r)return this._createBefore(n);if("after"==r)return this._createAfter(n);if(0!==r&&!r)throw new A("view-createpositionat-offset-required",n)}return new e(n,r)}},{key:"_createAfter",value:function(t){if(t.is("$textProxy"))return new e(t.textNode,t.offsetInText+t.data.length);if(!t.parent)throw new A("view-position-after-root",t,{root:t});return new e(t.parent,t.index+1)}},{key:"_createBefore",value:function(t){if(t.is("$textProxy"))return new e(t.textNode,t.offsetInText);if(!t.parent)throw new A("view-position-before-root",t,{root:t});return new e(t.parent,t.index)}}],n&&Xu(r.prototype,n),o&&Xu(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Ga);function is(t){return is="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},is(t)}function as(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return cs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?cs(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function cs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function us(){us=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==is(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(is(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function ss(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ls(n.key),n)}}function ls(t){var e=function(t,e){if("object"!=is(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=is(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==is(e)?e:e+""}function fs(t,e,r){return e=ds(e),function(t,e){if(e&&("object"===is(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ps()?Reflect.construct(e,r||[],ds(t).constructor):e.apply(t,r))}function ps(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ps=function(){return!!t})()}function ds(t){return ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ds(t)}function hs(t,e){return hs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hs(t,e)}os.prototype.is=function(t){return"position"===t||"view:position"===t};var ys=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=fs(this,e)).start=t.clone(),r.end=n?n.clone():t.clone(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hs(t,e)}(e,t),r=e,n=[{key:Symbol.iterator,value:us().mark((function t(){return us().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(new Yu({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return this.start.parent===this.end.parent}},{key:"root",get:function(){return this.start.root}},{key:"getEnlarged",value:function(){var t=this.start.getLastMatchingPosition(bs,{direction:"backward"}),r=this.end.getLastMatchingPosition(bs);return t.parent.is("$text")&&t.isAtStart&&(t=os._createBefore(t.parent)),r.parent.is("$text")&&r.isAtEnd&&(r=os._createAfter(r.parent)),new e(t,r)}},{key:"getTrimmed",value:function(){var t=this.start.getLastMatchingPosition(bs);if(t.isAfter(this.end)||t.isEqual(this.end))return new e(t,t);var r=this.end.getLastMatchingPosition(bs,{direction:"backward"}),n=t.nodeAfter,o=r.nodeBefore;return n&&n.is("$text")&&(t=new os(n,0)),o&&o.is("$text")&&(r=new os(o,o.data.length)),new e(t,r)}},{key:"isEqual",value:function(t){return this==t||this.start.isEqual(t.start)&&this.end.isEqual(t.end)}},{key:"containsPosition",value:function(t){return t.isAfter(this.start)&&t.isBefore(this.end)}},{key:"containsRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isCollapsed&&(e=!1);var r=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return r&&n}},{key:"getDifference",value:function(t){var r=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&r.push(new e(this.start,t.start)),this.containsPosition(t.end)&&r.push(new e(t.end,this.end))):r.push(this.clone()),r}},{key:"getIntersection",value:function(t){if(this.isIntersecting(t)){var r=this.start,n=this.end;return this.containsPosition(t.start)&&(r=t.start),this.containsPosition(t.end)&&(n=t.end),new e(r,n)}return null}},{key:"getWalker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.boundaries=this,new Yu(t)}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var t=this.start.nodeAfter,e=this.end.nodeBefore;return this.start.parent.is("$text")&&this.start.isAtEnd&&this.start.parent.nextSibling&&(t=this.start.parent.nextSibling),this.end.parent.is("$text")&&this.end.isAtStart&&this.end.parent.previousSibling&&(e=this.end.parent.previousSibling),t&&t.is("element")&&t===e?t:null}},{key:"clone",value:function(){return new e(this.start,this.end)}},{key:"getItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return us().mark((function r(){var n,o,i,a;return us().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.boundaries=t,e.ignoreElementEnd=!0,n=new Yu(e),o=as(n),r.prev=4,o.s();case 6:if((i=o.n()).done){r.next=12;break}return a=i.value,r.next=10,a.item;case 10:r.next=6;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),o.e(r.t0);case 17:return r.prev=17,o.f(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[4,14,17,20]])}))()}},{key:"getPositions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return us().mark((function r(){var n,o,i,a;return us().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.boundaries=t,n=new Yu(e),r.next=4,n.position;case 4:o=as(n),r.prev=5,o.s();case 7:if((i=o.n()).done){r.next=13;break}return a=i.value,r.next=11,a.nextPosition;case 11:r.next=7;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(5),o.e(r.t0);case 18:return r.prev=18,o.f(),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[5,15,18,21]])}))()}},{key:"isIntersecting",value:function(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}}],o=[{key:"_createFromParentsAndOffsets",value:function(t,e,r,n){return new this(new os(t,e),new os(r,n))}},{key:"_createFromPositionAndShift",value:function(t,e){var r=t,n=t.getShiftedBy(e);return e>0?new this(r,n):new this(n,r)}},{key:"_createIn",value:function(t){return this._createFromParentsAndOffsets(t,0,t,t.childCount)}},{key:"_createOn",value:function(t){var e=t.is("$textProxy")?t.offsetSize:1;return this._createFromPositionAndShift(os._createBefore(t),e)}}],n&&ss(r.prototype,n),o&&ss(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Ga);function bs(t){return!(!t.item.is("attributeElement")&&!t.item.is("uiElement"))}function vs(t){return vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vs(t)}function ms(){ms=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==vs(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(vs(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function gs(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ws(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ws(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ws(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ks(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_s(n.key),n)}}function _s(t){var e=function(t,e){if("object"!=vs(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vs(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vs(e)?e:e+""}function Os(t,e,r){return e=Ss(e),function(t,e){if(e&&("object"===vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ps()?Reflect.construct(e,r||[],Ss(t).constructor):e.apply(t,r))}function Ps(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ps=function(){return!!t})()}function Ss(t){return Ss=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ss(t)}function js(t,e){return js=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},js(t,e)}ys.prototype.is=function(t){return"range"===t||"view:range"===t};var Es=function(t){function e(){var t,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Os(this,e))._ranges=[],t._lastRangeBackward=!1,t._isFake=!1,t._fakeSelectionLabel="",arguments.length&&(r=t).setTo.apply(r,arguments),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&js(t,e)}(e,t),r=e,n=[{key:"isFake",get:function(){return this._isFake}},{key:"fakeSelectionLabel",get:function(){return this._fakeSelectionLabel}},{key:"anchor",get:function(){if(!this._ranges.length)return null;var t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.end:t.start).clone()}},{key:"focus",get:function(){if(!this._ranges.length)return null;var t=this._ranges[this._ranges.length-1];return(this._lastRangeBackward?t.start:t.end).clone()}},{key:"isCollapsed",get:function(){return 1===this.rangeCount&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"editableElement",get:function(){return this.anchor?this.anchor.editableElement:null}},{key:"getRanges",value:ms().mark((function t(){var e,r,n;return ms().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=gs(this._ranges),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=r.value,t.next=7,n.clone();case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"getFirstRange",value:function(){var t,e=null,r=gs(this._ranges);try{for(r.s();!(t=r.n()).done;){var n=t.value;e&&!n.start.isBefore(e.start)||(e=n)}}catch(t){r.e(t)}finally{r.f()}return e?e.clone():null}},{key:"getLastRange",value:function(){var t,e=null,r=gs(this._ranges);try{for(r.s();!(t=r.n()).done;){var n=t.value;e&&!n.end.isAfter(e.end)||(e=n)}}catch(t){r.e(t)}finally{r.f()}return e?e.clone():null}},{key:"getFirstPosition",value:function(){var t=this.getFirstRange();return t?t.start.clone():null}},{key:"getLastPosition",value:function(){var t=this.getLastRange();return t?t.end.clone():null}},{key:"isEqual",value:function(t){if(this.isFake!=t.isFake)return!1;if(this.isFake&&this.fakeSelectionLabel!=t.fakeSelectionLabel)return!1;if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;var e,r=gs(this._ranges);try{for(r.s();!(e=r.n()).done;){var n,o=e.value,i=!1,a=gs(t._ranges);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(o.isEqual(c)){i=!0;break}}}catch(t){a.e(t)}finally{a.f()}if(!i)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"isSimilar",value:function(t){if(this.isBackward!=t.isBackward)return!1;var e=xt(this.getRanges());if(e!=xt(t.getRanges()))return!1;if(0==e)return!0;var r,n=gs(this.getRanges());try{for(n.s();!(r=n.n()).done;){var o=r.value;o=o.getTrimmed();var i,a=!1,c=gs(t.getRanges());try{for(c.s();!(i=c.n()).done;){var u=i.value;if(u=u.getTrimmed(),o.start.isEqual(u.start)&&o.end.isEqual(u.end)){a=!0;break}}}catch(t){c.e(t)}finally{c.f()}if(!a)return!1}}catch(t){n.e(t)}finally{n.f()}return!0}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"setTo",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0],i=r[1],a=r[2];if("object"==vs(i)&&(a=i,i=void 0),null===o)this._setRanges([]),this._setFakeOptions(a);else if(o instanceof e||o instanceof Fs)this._setRanges(o.getRanges(),o.isBackward),this._setFakeOptions({fake:o.isFake,label:o.fakeSelectionLabel});else if(o instanceof ys)this._setRanges([o],a&&a.backward),this._setFakeOptions(a);else if(o instanceof os)this._setRanges([new ys(o)]),this._setFakeOptions(a);else if(o instanceof ec){var c,u=!!a&&!!a.backward;if(void 0===i)throw new A("view-selection-setto-required-second-parameter",this);c="in"==i?ys._createIn(o):"on"==i?ys._createOn(o):new ys(os._createAt(o,i)),this._setRanges([c],u),this._setFakeOptions(a)}else{if(!Dt(o))throw new A("view-selection-setto-not-selectable",this);this._setRanges(o,a&&a.backward),this._setFakeOptions(a)}this.fire("change")}},{key:"setFocus",value:function(t,e){if(null===this.anchor)throw new A("view-selection-setfocus-no-ranges",this);var r=os._createAt(t,e);if("same"!=r.compareWith(this.focus)){var n=this.anchor;this._ranges.pop(),"before"==r.compareWith(n)?this._addRange(new ys(r,n),!0):this._addRange(new ys(n,r)),this.fire("change")}}},{key:"_setRanges",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=Array.from(t),this._ranges=[];var r,n=gs(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;this._addRange(o)}}catch(t){n.e(t)}finally{n.f()}this._lastRangeBackward=!!e}},{key:"_setFakeOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._isFake=!!t.fake,this._fakeSelectionLabel=t.fake&&t.label||""}},{key:"_addRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!(t instanceof ys))throw new A("view-selection-add-range-not-range",this);this._pushRange(t),this._lastRangeBackward=!!e}},{key:"_pushRange",value:function(t){var e,r=gs(this._ranges);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(t.isIntersecting(n))throw new A("view-selection-range-intersects",this,{addedRange:t,intersectingRange:n})}}catch(t){r.e(t)}finally{r.f()}this._ranges.push(new ys(t.start,t.end))}}],n&&ks(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H(Ga));function Ts(t){return Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts(t)}function As(){As=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ts(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ts(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function xs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cs(n.key),n)}}function Cs(t){var e=function(t,e){if("object"!=Ts(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ts(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ts(e)?e:e+""}function Ds(t,e,r){return e=Is(e),function(t,e){if(e&&("object"===Ts(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rs()?Reflect.construct(e,r||[],Is(t).constructor):e.apply(t,r))}function Rs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rs=function(){return!!t})()}function Is(t){return Is=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Is(t)}function Bs(t,e){return Bs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bs(t,e)}Es.prototype.is=function(t){return"selection"===t||"view:selection"===t};var Fs=function(t){function e(){var t,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Ds(this,e))._selection=new Es,t._selection.delegate("change").to(t),arguments.length&&(r=t._selection).setTo.apply(r,arguments),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bs(t,e)}(e,t),r=e,n=[{key:"isFake",get:function(){return this._selection.isFake}},{key:"fakeSelectionLabel",get:function(){return this._selection.fakeSelectionLabel}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"editableElement",get:function(){return this._selection.editableElement}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:As().mark((function t(){return As().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._selection.getRanges(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"isEqual",value:function(t){return this._selection.isEqual(t)}},{key:"isSimilar",value:function(t){return this._selection.isSimilar(t)}},{key:"_setTo",value:function(){var t;(t=this._selection).setTo.apply(t,arguments)}},{key:"_setFocus",value:function(t,e){this._selection.setFocus(t,e)}}],n&&xs(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H(Ga));function Ms(t){return Ms="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ms(t)}function Ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ns(n.key),n)}}function Ns(t){var e=function(t,e){if("object"!=Ms(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ms(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ms(e)?e:e+""}function Vs(t,e,r){return e=$s(e),function(t,e){if(e&&("object"===Ms(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zs()?Reflect.construct(e,r||[],$s(t).constructor):e.apply(t,r))}function zs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zs=function(){return!!t})()}function $s(t){return $s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},$s(t)}function qs(t,e){return qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},qs(t,e)}Fs.prototype.is=function(t){return"selection"===t||"documentSelection"==t||"view:selection"==t||"view:documentSelection"==t};var Us=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Vs(this,e,[t,r])).startRange=n,o._eventPhase="none",o._currentTarget=null,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qs(t,e)}(e,t),r=e,(n=[{key:"eventPhase",get:function(){return this._eventPhase}},{key:"currentTarget",get:function(){return this._currentTarget}}])&&Ls(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(y);function Ws(t){return Ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ws(t)}function Gs(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Ks(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Ks(t,e){if(t){if("string"==typeof t)return Hs(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Hs(t,e):void 0}}function Hs(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Js(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ys(n.key),n)}}function Ys(t){var e=function(t,e){if("object"!=Ws(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ws(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ws(e)?e:e+""}function Zs(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zs=function(){return!!t})()}function Xs(t){return Xs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xs(t)}function Qs(t,e){return Qs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qs(t,e)}var tl=Symbol("bubbling contexts");function el(t){var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=arguments,r=Xs(r=e),function(t,e){if(e&&("object"===Ws(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zs()?Reflect.construct(r,n||[],Xs(t).constructor):r.apply(t,n));var t,r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qs(t,e)}(e,t),r=e,n=[{key:"fire",value:function(t){try{var e=t instanceof y?t:new y(this,t),r=al(this);if(!r.size)return;nl(e,"capturing",this);for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];if(ol.apply(void 0,[r,"$capture",e].concat(o)))return e.return;var a=e.startRange||this.selection.getFirstRange(),c=a?a.getContainedElement():null,u=!!c&&Boolean(il(r,c)),s=c||function(t){if(!t)return null;var e=t.start.parent,r=t.end.parent,n=e.getPath(),o=r.getPath();return n.length>o.length?e:r}(a);if(nl(e,"atTarget",s),!u){if(ol.apply(void 0,[r,"$text",e].concat(o)))return e.return;nl(e,"bubbling",s)}for(;s;){if(s.is("rootElement")){if(ol.apply(void 0,[r,"$root",e].concat(o)))return e.return}else if(s.is("element")&&ol.apply(void 0,[r,s.name,e].concat(o)))return e.return;if(ol.apply(void 0,[r,s,e].concat(o)))return e.return;nl(e,"bubbling",s=s.parent)}return nl(e,"bubbling",this),ol.apply(void 0,[r,"$document",e].concat(o)),e.return}catch(t){A.rethrowUnexpectedError(t,this)}}},{key:"_addEventListener",value:function(t,e,r){var n,o=Ko(r.context||"$document"),i=al(this),a=Gs(o);try{for(a.s();!(n=a.n()).done;){var c=n.value,u=i.get(c);u||(u=new(H()),i.set(c,u)),this.listenTo(u,t,e,r)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_removeEventListener",value:function(t,e){var r,n=Gs(al(this).values());try{for(n.s();!(r=n.n()).done;){var o=r.value;this.stopListening(o,t,e)}}catch(t){n.e(t)}finally{n.f()}}}],n&&Js(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(t);return e}var rl=el(Object);function nl(t,e,r){t instanceof Us&&(t._eventPhase=e,t._currentTarget=r)}function ol(t,e,r){var n="string"==typeof e?t.get(e):il(t,e);if(!n)return!1;for(var o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];return n.fire.apply(n,[r].concat(i)),r.stop.called}function il(t,e){var r,n,o,i=Gs(t);try{for(i.s();!(r=i.n()).done;){var a=(n=r.value,o=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,o)||Ks(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1];if("function"==typeof c&&c(e))return u}}catch(t){i.e(t)}finally{i.f()}return null}function al(t){return t[tl]||(t[tl]=new Map),t[tl]}function cl(t){return cl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(t)}function ul(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return sl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sl(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function sl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ll(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fl(n.key),n)}}function fl(t){var e=function(t,e){if("object"!=cl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=cl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cl(e)?e:e+""}function pl(t,e,r){return e=hl(e),function(t,e){if(e&&("object"===cl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dl()?Reflect.construct(e,r||[],hl(t).constructor):e.apply(t,r))}function dl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dl=function(){return!!t})()}function hl(t){return hl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hl(t)}function yl(t,e){return yl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yl(t,e)}["fire","_addEventListener","_removeEventListener"].forEach((function(t){el[t]=rl.prototype[t]}));var bl=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pl(this,e))._postFixers=new Set,r.selection=new Fs,r.roots=new Oi({idProperty:"rootName"}),r.stylesProcessor=t,r.set("isReadOnly",!1),r.set("isFocused",!1),r.set("isSelecting",!1),r.set("isComposing",!1),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yl(t,e)}(e,t),r=e,n=[{key:"getRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(t)}},{key:"registerPostFixer",value:function(t){this._postFixers.add(t)}},{key:"destroy",value:function(){this.roots.forEach((function(t){return t.destroy()})),this.stopListening()}},{key:"_callPostFixers",value:function(t){var e=!1;do{var r,n=ul(this._postFixers);try{for(n.s();!(r=n.n()).done&&!(e=(0,r.value)(t)););}catch(t){n.e(t)}finally{n.f()}}while(e)}}],n&&ll(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(el(mt()));function vl(t){return vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(t)}function ml(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gl(n.key),n)}}function gl(t){var e=function(t,e){if("object"!=vl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vl(e)?e:e+""}function wl(t,e,r){return e=Ol(e),function(t,e){if(e&&("object"===vl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kl()?Reflect.construct(e,r||[],Ol(t).constructor):e.apply(t,r))}function kl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kl=function(){return!!t})()}function _l(){return _l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ol(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},_l.apply(this,arguments)}function Ol(t){return Ol=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ol(t)}function Pl(t,e){return Pl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pl(t,e)}var Sl=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=wl(this,e,[t,r,n,o]))._priority=10,i._id=null,i._clonesGroup=null,i.getFillerOffset=El,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pl(t,e)}(e,t),r=e,n=[{key:"priority",get:function(){return this._priority}},{key:"id",get:function(){return this._id}},{key:"getElementsWithSameId",value:function(){if(null===this.id)throw new A("attribute-element-get-elements-with-same-id-no-id",this);return new Set(this._clonesGroup)}},{key:"isSimilar",value:function(t){return null!==this.id||null!==t.id?this.id===t.id:_l(Ol(e.prototype),"isSimilar",this).call(this,t)&&this.priority==t.priority}},{key:"_clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],r=_l(Ol(e.prototype),"_clone",this).call(this,t);return r._priority=this._priority,r._id=this._id,r}}],n&&ml(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(gu);Sl.DEFAULT_PRIORITY=10;const jl=Sl;function El(){if(Tl(this))return null;for(var t=this.parent;t&&t.is("attributeElement");){if(Tl(t)>1)return null;t=t.parent}return!t||Tl(t)>1?null:this.childCount}function Tl(t){return Array.from(t.getChildren()).filter((function(t){return!t.is("uiElement")})).length}function Al(t){return Al="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Al(t)}function xl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Cl(n.key),n)}}function Cl(t){var e=function(t,e){if("object"!=Al(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Al(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Al(e)?e:e+""}function Dl(t,e,r){return e=Il(e),function(t,e){if(e&&("object"===Al(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Rl()?Reflect.construct(e,r||[],Il(t).constructor):e.apply(t,r))}function Rl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Rl=function(){return!!t})()}function Il(t){return Il=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Il(t)}function Bl(t,e){return Bl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bl(t,e)}Sl.prototype.is=function(t,e){return e?e===this.name&&("attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t):"attributeElement"===t||"view:attributeElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var Fl=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Dl(this,e,[t,r,n,o])).getFillerOffset=Ml,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bl(t,e)}(e,t),r=e,(n=[{key:"_insertChild",value:function(t,e){if(e&&(e instanceof ec||Array.from(e).length>0))throw new A("view-emptyelement-cannot-add",[this,e]);return 0}}])&&xl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(gu);function Ml(){return null}function Ll(t){return Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ll(t)}function Nl(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Vl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zl(n.key),n)}}function zl(t){var e=function(t,e){if("object"!=Ll(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ll(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ll(e)?e:e+""}function $l(t,e,r){return e=Ul(e),function(t,e){if(e&&("object"===Ll(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ql()?Reflect.construct(e,r||[],Ul(t).constructor):e.apply(t,r))}function ql(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ql=function(){return!!t})()}function Ul(t){return Ul=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ul(t)}function Wl(t,e){return Wl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wl(t,e)}Fl.prototype.is=function(t,e){return e?e===this.name&&("emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t):"emptyElement"===t||"view:emptyElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var Gl=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=$l(this,e,[t,r,n,o])).getFillerOffset=Kl,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wl(t,e)}(e,t),r=e,(n=[{key:"_insertChild",value:function(t,e){if(e&&(e instanceof ec||Array.from(e).length>0))throw new A("view-uielement-cannot-add",[this,e]);return 0}},{key:"render",value:function(t,e){return this.toDomElement(t)}},{key:"toDomElement",value:function(t){var e,r=t.createElement(this.name),n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Nl(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Nl(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.getAttributeKeys());try{for(n.s();!(e=n.n()).done;){var o=e.value;r.setAttribute(o,this.getAttribute(o))}}catch(t){n.e(t)}finally{n.f()}return r}}])&&Vl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(gu);function Kl(){return null}function Hl(t){return Hl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hl(t)}function Jl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yl(n.key),n)}}function Yl(t){var e=function(t,e){if("object"!=Hl(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Hl(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hl(e)?e:e+""}function Zl(t,e,r){return e=Ql(e),function(t,e){if(e&&("object"===Hl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Xl()?Reflect.construct(e,r||[],Ql(t).constructor):e.apply(t,r))}function Xl(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Xl=function(){return!!t})()}function Ql(t){return Ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ql(t)}function tf(t,e){return tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},tf(t,e)}Gl.prototype.is=function(t,e){return e?e===this.name&&("uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t):"uiElement"===t||"view:uiElement"===t||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var ef=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Zl(this,e,[t,r,n,o])).getFillerOffset=rf,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tf(t,e)}(e,t),r=e,(n=[{key:"_insertChild",value:function(t,e){if(e&&(e instanceof ec||Array.from(e).length>0))throw new A("view-rawelement-cannot-add",[this,e]);return 0}},{key:"render",value:function(t,e){}}])&&Jl(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(gu);function rf(){return null}function nf(t){return nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nf(t)}function of(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function af(){af=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==nf(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(nf(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function cf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uf(n.key),n)}}function uf(t){var e=function(t,e){if("object"!=nf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nf(e)?e:e+""}function sf(t,e,r){return e=ff(e),function(t,e){if(e&&("object"===nf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lf()?Reflect.construct(e,r||[],ff(t).constructor):e.apply(t,r))}function lf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lf=function(){return!!t})()}function ff(t){return ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ff(t)}function pf(t,e){return pf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pf(t,e)}ef.prototype.is=function(t,e){return e?e===this.name&&("rawElement"===t||"view:rawElement"===t||"element"===t||"view:element"===t):"rawElement"===t||"view:rawElement"===t||t===this.name||t==="view:"+this.name||"element"===t||"view:element"===t||"node"===t||"view:node"===t};var df=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=sf(this,e))._children=[],n._customProperties=new Map,n.document=t,r&&n._insertChild(0,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pf(t,e)}(e,t),r=e,n=[{key:Symbol.iterator,value:function(){return this._children[Symbol.iterator]()}},{key:"childCount",get:function(){return this._children.length}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"name",get:function(){}},{key:"getFillerOffset",get:function(){}},{key:"getCustomProperty",value:function(t){return this._customProperties.get(t)}},{key:"getCustomProperties",value:af().mark((function t(){return af().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._customProperties.entries(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"_appendChild",value:function(t){return this._insertChild(this.childCount,t)}},{key:"getChild",value:function(t){return this._children[t]}},{key:"getChildIndex",value:function(t){return this._children.indexOf(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"_insertChild",value:function(t,e){this._fireChange("children",this);var r,n=0,o=function(t,e){return"string"==typeof e?[new sc(t,e)]:(Dt(e)||(e=[e]),Array.from(e).map((function(e){return"string"==typeof e?new sc(t,e):e instanceof vc?new sc(t,e.data):e})))}(this.document,e),i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return of(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?of(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(o);try{for(i.s();!(r=i.n()).done;){var a=r.value;null!==a.parent&&a._remove(),a.parent=this,this._children.splice(t,0,a),t++,n++}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"_removeChildren",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._fireChange("children",this);for(var r=t;r<t+e;r++)this._children[r].parent=null;return this._children.splice(t,e)}},{key:"_fireChange",value:function(t,e){this.fire("change:"+t,e)}},{key:"_setCustomProperty",value:function(t,e){this._customProperties.set(t,e)}},{key:"_removeCustomProperty",value:function(t){return this._customProperties.delete(t)}}],n&&cf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H(Ga));function hf(t){return hf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hf(t)}function yf(t,e,r){if(bf())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&vf(o,r.prototype),o}function bf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bf=function(){return!!t})()}function vf(t,e){return vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vf(t,e)}function mf(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wf(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function gf(t){return function(t){if(Array.isArray(t))return kf(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||wf(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wf(t,e){if(t){if("string"==typeof t)return kf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kf(t,e):void 0}}function kf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _f(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Of(n.key),n)}}function Of(t){var e=function(t,e){if("object"!=hf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hf(e)?e:e+""}df.prototype.is=function(t){return"documentFragment"===t||"view:documentFragment"===t};var Pf=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._cloneGroups=new Map,this._slotFactory=null,this.document=e},e=[{key:"setSelection",value:function(){var t;(t=this.document.selection)._setTo.apply(t,arguments)}},{key:"setSelectionFocus",value:function(t,e){this.document.selection._setFocus(t,e)}},{key:"createDocumentFragment",value:function(t){return new df(this.document,t)}},{key:"createText",value:function(t){return new sc(this.document,t)}},{key:"createAttributeElement",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new jl(this.document,t,e);return"number"==typeof n.priority&&(o._priority=n.priority),n.id&&(o._id=n.id),n.renderUnsafeAttributes&&(r=o._unsafeAttributesToRender).push.apply(r,gf(n.renderUnsafeAttributes)),o}},{key:"createContainerElement",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=null;re(r)?n=r:o=r;var i,a=new Tu(this.document,t,e,o);return n.renderUnsafeAttributes&&(i=a._unsafeAttributesToRender).push.apply(i,gf(n.renderUnsafeAttributes)),a}},{key:"createEditableElement",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new Mu(this.document,t,e);return n.renderUnsafeAttributes&&(r=o._unsafeAttributesToRender).push.apply(r,gf(n.renderUnsafeAttributes)),o}},{key:"createEmptyElement",value:function(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=new Fl(this.document,t,e);return n.renderUnsafeAttributes&&(r=o._unsafeAttributesToRender).push.apply(r,gf(n.renderUnsafeAttributes)),o}},{key:"createUIElement",value:function(t,e,r){var n=new Gl(this.document,t,e);return r&&(n.render=r),n}},{key:"createRawElement",value:function(t,e,r){var n,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=new ef(this.document,t,e);return r&&(i.render=r),o.renderUnsafeAttributes&&(n=i._unsafeAttributesToRender).push.apply(n,gf(o.renderUnsafeAttributes)),i}},{key:"setAttribute",value:function(t,e,r){r._setAttribute(t,e)}},{key:"removeAttribute",value:function(t,e){e._removeAttribute(t)}},{key:"addClass",value:function(t,e){e._addClass(t)}},{key:"removeClass",value:function(t,e){e._removeClass(t)}},{key:"setStyle",value:function(t,e,r){re(t)&&void 0===r?e._setStyle(t):r._setStyle(t,e)}},{key:"removeStyle",value:function(t,e){e._removeStyle(t)}},{key:"setCustomProperty",value:function(t,e,r){r._setCustomProperty(t,e)}},{key:"removeCustomProperty",value:function(t,e){return e._removeCustomProperty(t)}},{key:"breakAttributes",value:function(t){return t instanceof os?this._breakAttributes(t):this._breakAttributesRange(t)}},{key:"breakContainer",value:function(t){var e=t.parent;if(!e.is("containerElement"))throw new A("view-writer-break-non-container-element",this.document);if(!e.parent)throw new A("view-writer-break-root",this.document);if(t.isAtStart)return os._createBefore(e);if(!t.isAtEnd){var r=e._clone(!1);this.insert(os._createAfter(e),r);var n=new ys(t,os._createAt(e,"end")),o=new os(r,0);this.move(n,o)}return os._createAfter(e)}},{key:"mergeAttributes",value:function(t){var e=t.offset,r=t.parent;if(r.is("$text"))return t;if(r.is("attributeElement")&&0===r.childCount){var n=r.parent,o=r.index;return r._remove(),this._removeFromClonedElementsGroup(r),this.mergeAttributes(new os(n,o))}var i=r.getChild(e-1),a=r.getChild(e);if(!i||!a)return t;if(i.is("$text")&&a.is("$text"))return Tf(i,a);if(i.is("attributeElement")&&a.is("attributeElement")&&i.isSimilar(a)){var c=i.childCount;return i._appendChild(a.getChildren()),a._remove(),this._removeFromClonedElementsGroup(a),this.mergeAttributes(new os(i,c))}return t}},{key:"mergeContainers",value:function(t){var e=t.nodeBefore,r=t.nodeAfter;if(!(e&&r&&e.is("containerElement")&&r.is("containerElement")))throw new A("view-writer-merge-containers-invalid-position",this.document);var n=e.getChild(e.childCount-1),o=n instanceof sc?os._createAt(n,"end"):os._createAt(e,"end");return this.move(ys._createIn(r),os._createAt(e,"end")),this.remove(ys._createOn(r)),o}},{key:"insert",value:function(t,e){xf(e=Dt(e)?gf(e):[e],this.document);var r,n=e.reduce((function(t,e){var r=t[t.length-1],n=!e.is("uiElement");return r&&r.breakAttributes==n?r.nodes.push(e):t.push({breakAttributes:n,nodes:[e]}),t}),[]),o=null,i=t,a=mf(n);try{for(a.s();!(r=a.n()).done;){var c=r.value,u=c.nodes,s=c.breakAttributes,l=this._insertNodes(i,u,s);o||(o=l.start),i=l.end}}catch(t){a.e(t)}finally{a.f()}return o?new ys(o,i):new ys(t)}},{key:"remove",value:function(t){var e=t instanceof ys?t:ys._createOn(t);if(Df(e,this.document),e.isCollapsed)return new df(this.document);var r,n=this._breakAttributesRange(e,!0),o=n.start,i=n.end,a=o.parent,c=i.offset-o.offset,u=a._removeChildren(o.offset,c),s=mf(u);try{for(s.s();!(r=s.n()).done;){var l=r.value;this._removeFromClonedElementsGroup(l)}}catch(t){s.e(t)}finally{s.f()}var f=this.mergeAttributes(o);return e.start=f,e.end=f.clone(),new df(this.document,u)}},{key:"clear",value:function(t,e){Df(t,this.document);var r,n=mf(t.getWalker({direction:"backward",ignoreElementEnd:!0}));try{for(n.s();!(r=n.n()).done;){var o=r.value,i=o.item,a=void 0;if(i.is("element")&&e.isSimilar(i))a=ys._createOn(i);else if(!o.nextPosition.isAfter(t.start)&&i.is("$textProxy")){var c=i.getAncestors().find((function(t){return t.is("element")&&e.isSimilar(t)}));c&&(a=ys._createIn(c))}a&&(a.end.isAfter(t.end)&&(a.end=t.end),a.start.isBefore(t.start)&&(a.start=t.start),this.remove(a))}}catch(t){n.e(t)}finally{n.f()}}},{key:"move",value:function(t,e){var r;if(e.isAfter(t.end)){var n=(e=this._breakAttributes(e,!0)).parent,o=n.childCount;t=this._breakAttributesRange(t,!0),r=this.remove(t),e.offset+=n.childCount-o}else r=this.remove(t);return this.insert(e,r)}},{key:"wrap",value:function(t,e){if(!(e instanceof jl))throw new A("view-writer-wrap-invalid-attribute",this.document);if(Df(t,this.document),t.isCollapsed){var r=t.start;r.parent.is("element")&&(o=r.parent,!Array.from(o.getChildren()).some((function(t){return!t.is("uiElement")})))&&(r=r.getLastMatchingPosition((function(t){return t.item.is("uiElement")}))),r=this._wrapPosition(r,e);var n=this.document.selection;return n.isCollapsed&&n.getFirstPosition().isEqual(t.start)&&this.setSelection(r),new ys(r)}return this._wrapRange(t,e);var o}},{key:"unwrap",value:function(t,e){if(!(e instanceof jl))throw new A("view-writer-unwrap-invalid-attribute",this.document);if(Df(t,this.document),t.isCollapsed)return t;var r=this._breakAttributesRange(t,!0),n=r.start,o=r.end,i=n.parent,a=this._unwrapChildren(i,n.offset,o.offset,e),c=this.mergeAttributes(a.start);c.isEqual(a.start)||a.end.offset--;var u=this.mergeAttributes(a.end);return new ys(c,u)}},{key:"rename",value:function(t,e){var r=new Tu(this.document,t,e.getAttributes());return this.insert(os._createAfter(e),r),this.move(ys._createIn(e),os._createAt(r,0)),this.remove(ys._createOn(e)),r}},{key:"clearClonedElementsGroup",value:function(t){this._cloneGroups.delete(t)}},{key:"createPositionAt",value:function(t,e){return os._createAt(t,e)}},{key:"createPositionAfter",value:function(t){return os._createAfter(t)}},{key:"createPositionBefore",value:function(t){return os._createBefore(t)}},{key:"createRange",value:function(t,e){return new ys(t,e)}},{key:"createRangeOn",value:function(t){return ys._createOn(t)}},{key:"createRangeIn",value:function(t){return ys._createIn(t)}},{key:"createSelection",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return yf(Es,e)}},{key:"createSlot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"children";if(!this._slotFactory)throw new A("view-writer-invalid-create-slot-context",this.document);return this._slotFactory(this,t)}},{key:"_registerSlotFactory",value:function(t){this._slotFactory=t}},{key:"_clearSlotFactory",value:function(){this._slotFactory=null}},{key:"_insertNodes",value:function(t,e,r){var n,o;if(!(n=r?Sf(t):t.parent.is("$text")?t.parent.parent:t.parent))throw new A("view-writer-invalid-position-container",this.document);o=r?this._breakAttributes(t,!0):t.parent.is("$text")?Ef(t):t;var i,a=n._insertChild(o.offset,e),c=mf(e);try{for(c.s();!(i=c.n()).done;){var u=i.value;this._addToClonedElementsGroup(u)}}catch(t){c.e(t)}finally{c.f()}var s=o.getShiftedBy(a),l=this.mergeAttributes(o);l.isEqual(o)||s.offset--;var f=this.mergeAttributes(s);return new ys(l,f)}},{key:"_wrapChildren",value:function(t,e,r,n){for(var o=e,i=[];o<r;){var a=t.getChild(o),c=a.is("$text"),u=a.is("attributeElement");if(u&&this._wrapAttributeElement(n,a))i.push(new os(t,o));else if(c||!u||(f=a,(l=n).priority<f.priority||!(l.priority>f.priority)&&l.getIdentity()<f.getIdentity())){var s=n._clone();a._remove(),s._appendChild(a),t._insertChild(o,s),this._addToClonedElementsGroup(s),i.push(new os(t,o))}else this._wrapChildren(a,0,a.childCount,n);o++}for(var l,f,p=0,d=0,h=i;d<h.length;d++){var y=h[d];y.offset-=p,y.offset!=e&&(this.mergeAttributes(y).isEqual(y)||(p++,r--))}return ys._createFromParentsAndOffsets(t,e,t,r)}},{key:"_unwrapChildren",value:function(t,e,r,n){for(var o=e,i=[];o<r;){var a=t.getChild(o);if(a.is("attributeElement"))if(a.isSimilar(n)){var c=a.getChildren(),u=a.childCount;a._remove(),t._insertChild(o,c),this._removeFromClonedElementsGroup(a),i.push(new os(t,o),new os(t,o+u)),o+=u,r+=u-1}else this._unwrapAttributeElement(n,a)?(i.push(new os(t,o),new os(t,o+1)),o++):(this._unwrapChildren(a,0,a.childCount,n),o++);else o++}for(var s=0,l=0,f=i;l<f.length;l++){var p=f[l];p.offset-=s,p.offset!=e&&p.offset!=r&&(this.mergeAttributes(p).isEqual(p)||(s++,r--))}return ys._createFromParentsAndOffsets(t,e,t,r)}},{key:"_wrapRange",value:function(t,e){var r=this._breakAttributesRange(t,!0),n=r.start,o=r.end,i=n.parent,a=this._wrapChildren(i,n.offset,o.offset,e),c=this.mergeAttributes(a.start);c.isEqual(a.start)||a.end.offset--;var u=this.mergeAttributes(a.end);return new ys(c,u)}},{key:"_wrapPosition",value:function(t,e){if(e.isSimilar(t.parent))return jf(t.clone());t.parent.is("$text")&&(t=Ef(t));var r=this.createAttributeElement("_wrapPosition-fake-element");r._priority=Number.POSITIVE_INFINITY,r.isSimilar=function(){return!1},t.parent._insertChild(t.offset,r);var n=new ys(t,t.getShiftedBy(1));this.wrap(n,e);var o=new os(r.parent,r.index);r._remove();var i=o.nodeBefore,a=o.nodeAfter;return i instanceof sc&&a instanceof sc?Tf(i,a):jf(o)}},{key:"_wrapAttributeElement",value:function(t,e){if(!Rf(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;var r,n=mf(t.getAttributeKeys());try{for(n.s();!(r=n.n()).done;){var o=r.value;if("class"!==o&&"style"!==o&&e.hasAttribute(o)&&e.getAttribute(o)!==t.getAttribute(o))return!1}}catch(t){n.e(t)}finally{n.f()}var i,a=mf(t.getStyleNames());try{for(a.s();!(i=a.n()).done;){var c=i.value;if(e.hasStyle(c)&&e.getStyle(c)!==t.getStyle(c))return!1}}catch(t){a.e(t)}finally{a.f()}var u,s=mf(t.getAttributeKeys());try{for(s.s();!(u=s.n()).done;){var l=u.value;"class"!==l&&"style"!==l&&(e.hasAttribute(l)||this.setAttribute(l,t.getAttribute(l),e))}}catch(t){s.e(t)}finally{s.f()}var f,p=mf(t.getStyleNames());try{for(p.s();!(f=p.n()).done;){var d=f.value;e.hasStyle(d)||this.setStyle(d,t.getStyle(d),e)}}catch(t){p.e(t)}finally{p.f()}var h,y=mf(t.getClassNames());try{for(y.s();!(h=y.n()).done;){var b=h.value;e.hasClass(b)||this.addClass(b,e)}}catch(t){y.e(t)}finally{y.f()}return!0}},{key:"_unwrapAttributeElement",value:function(t,e){if(!Rf(t,e))return!1;if(t.name!==e.name||t.priority!==e.priority)return!1;var r,n=mf(t.getAttributeKeys());try{for(n.s();!(r=n.n()).done;){var o=r.value;if("class"!==o&&"style"!==o&&(!e.hasAttribute(o)||e.getAttribute(o)!==t.getAttribute(o)))return!1}}catch(t){n.e(t)}finally{n.f()}if(!e.hasClass.apply(e,gf(t.getClassNames())))return!1;var i,a=mf(t.getStyleNames());try{for(a.s();!(i=a.n()).done;){var c=i.value;if(!e.hasStyle(c)||e.getStyle(c)!==t.getStyle(c))return!1}}catch(t){a.e(t)}finally{a.f()}var u,s=mf(t.getAttributeKeys());try{for(s.s();!(u=s.n()).done;){var l=u.value;"class"!==l&&"style"!==l&&this.removeAttribute(l,e)}}catch(t){s.e(t)}finally{s.f()}return this.removeClass(Array.from(t.getClassNames()),e),this.removeStyle(Array.from(t.getStyleNames()),e),!0}},{key:"_breakAttributesRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.start,n=t.end;if(Df(t,this.document),t.isCollapsed){var o=this._breakAttributes(t.start,e);return new ys(o,o)}var i=this._breakAttributes(n,e),a=i.parent.childCount,c=this._breakAttributes(r,e);return i.offset+=i.parent.childCount-a,new ys(c,i)}},{key:"_breakAttributes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.offset,n=t.parent;if(t.parent.is("emptyElement"))throw new A("view-writer-cannot-break-empty-element",this.document);if(t.parent.is("uiElement"))throw new A("view-writer-cannot-break-ui-element",this.document);if(t.parent.is("rawElement"))throw new A("view-writer-cannot-break-raw-element",this.document);if(!e&&n.is("$text")&&Cf(n.parent))return t.clone();if(Cf(n))return t.clone();if(n.is("$text"))return this._breakAttributes(Ef(t),e);if(r==n.childCount){var o=new os(n.parent,n.index+1);return this._breakAttributes(o,e)}if(0===r){var i=new os(n.parent,n.index);return this._breakAttributes(i,e)}var a=n.index+1,c=n._clone();n.parent._insertChild(a,c),this._addToClonedElementsGroup(c);var u=n.childCount-r,s=n._removeChildren(r,u);c._appendChild(s);var l=new os(n.parent,a);return this._breakAttributes(l,e)}},{key:"_addToClonedElementsGroup",value:function(t){if(t.root.is("rootElement")){if(t.is("element")){var e,r=mf(t.getChildren());try{for(r.s();!(e=r.n()).done;){var n=e.value;this._addToClonedElementsGroup(n)}}catch(t){r.e(t)}finally{r.f()}}var o=t.id;if(o){var i=this._cloneGroups.get(o);i||(i=new Set,this._cloneGroups.set(o,i)),i.add(t),t._clonesGroup=i}}}},{key:"_removeFromClonedElementsGroup",value:function(t){if(t.is("element")){var e,r=mf(t.getChildren());try{for(r.s();!(e=r.n()).done;){var n=e.value;this._removeFromClonedElementsGroup(n)}}catch(t){r.e(t)}finally{r.f()}}var o=t.id;if(o){var i=this._cloneGroups.get(o);i&&i.delete(t)}}}],e&&_f(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Sf(t){for(var e=t.parent;!Cf(e);){if(!e)return;e=e.parent}return e}function jf(t){var e=t.nodeBefore;if(e&&e.is("$text"))return new os(e,e.data.length);var r=t.nodeAfter;return r&&r.is("$text")?new os(r,0):t}function Ef(t){if(t.offset==t.parent.data.length)return new os(t.parent.parent,t.parent.index+1);if(0===t.offset)return new os(t.parent.parent,t.parent.index);var e=t.parent.data.slice(t.offset);return t.parent._data=t.parent.data.slice(0,t.offset),t.parent.parent._insertChild(t.parent.index+1,new sc(t.root.document,e)),new os(t.parent.parent,t.parent.index+1)}function Tf(t,e){var r=t.data.length;return t._data+=e.data,e._remove(),new os(t,r)}var Af=[sc,jl,Tu,Fl,ef,Gl];function xf(t,e){var r,n=mf(t);try{var o=function(){var t=r.value;if(!Af.some((function(e){return t instanceof e})))throw new A("view-writer-insert-invalid-node-type",e);t.is("$text")||xf(t.getChildren(),e)};for(n.s();!(r=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}}function Cf(t){return t&&(t.is("containerElement")||t.is("documentFragment"))}function Df(t,e){var r=Sf(t.start),n=Sf(t.end);if(!r||!n||r!==n)throw new A("view-writer-invalid-range-container",e)}function Rf(t,e){return null===t.id&&null===e.id}var If=function(t){return t.createTextNode(" ")},Bf=function(t){var e=t.createElement("span");return e.dataset.ckeFiller="true",e.innerText=" ",e},Ff=function(t){var e=t.createElement("br");return e.dataset.ckeFiller="true",e},Mf=7,Lf="⁠".repeat(Mf);function Nf(t){return"string"==typeof t?t.substr(0,Mf)===Lf:Un(t)&&t.data.substr(0,Mf)===Lf}function Vf(t){return t.data.length==Mf&&Nf(t)}function zf(t){var e="string"==typeof t?t:t.data;return Nf(t)?e.slice(Mf):e}function $f(t,e){if(e.keyCode==zo.arrowleft){var r=e.domTarget.ownerDocument.defaultView.getSelection();if(1==r.rangeCount&&r.getRangeAt(0).collapsed){var n=r.getRangeAt(0).startContainer,o=r.getRangeAt(0).startOffset;Nf(n)&&o<=Mf&&r.collapse(n,0)}}}var qf=r(8397);function Uf(t){return Uf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uf(t)}function Wf(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Gf(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gf(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Gf(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hf(n.key),n)}}function Hf(t){var e=function(t,e){if("object"!=Uf(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Uf(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Uf(e)?e:e+""}function Jf(t,e,r){return e=Zf(e),function(t,e){if(e&&("object"===Uf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Yf()?Reflect.construct(e,r||[],Zf(t).constructor):e.apply(t,r))}function Yf(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Yf=function(){return!!t})()}function Zf(t){return Zf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Zf(t)}function Xf(t,e){return Xf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xf(t,e)}Da()(qf.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),qf.A.locals;var Qf=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Jf(this,e)).domDocuments=new Set,n.markedAttributes=new Set,n.markedChildren=new Set,n.markedTexts=new Set,n._inlineFiller=null,n._fakeSelectionContainer=null,n.domConverter=t,n.selection=r,n.set("isFocused",!1),n.set("isSelecting",!1),i.isBlink&&!i.isAndroid&&n.on("change:isSelecting",(function(){n.isSelecting||n.render()})),n.set("isComposing",!1),n.on("change:isComposing",(function(){n.isComposing||n.render()})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xf(t,e)}(e,t),r=e,n=[{key:"markToSync",value:function(t,e){if("text"===t)this.domConverter.mapViewToDom(e.parent)&&this.markedTexts.add(e);else{if(!this.domConverter.mapViewToDom(e))return;if("attributes"===t)this.markedAttributes.add(e);else{if("children"!==t)throw new A("view-renderer-unknown-type",this);this.markedChildren.add(e)}}}},{key:"render",value:function(){if(!this.isComposing||i.isAndroid){var t,e=null,r=!(i.isBlink&&!i.isAndroid&&this.isSelecting),n=Wf(this.markedChildren);try{for(n.s();!(t=n.n()).done;){var o=t.value;this._updateChildrenMappings(o)}}catch(t){n.e(t)}finally{n.f()}r?(this._inlineFiller&&!this._isSelectionInInlineFiller()&&this._removeInlineFiller(),this._inlineFiller?e=this._getInlineFillerPosition():this._needsInlineFillerAtSelection()&&(e=this.selection.getFirstPosition(),this.markedChildren.add(e.parent))):this._inlineFiller&&this._inlineFiller.parentNode&&(e=this.domConverter.domPositionToView(this._inlineFiller))&&e.parent.is("$text")&&(e=os._createBefore(e.parent));var a,c=Wf(this.markedAttributes);try{for(c.s();!(a=c.n()).done;){var u=a.value;this._updateAttrs(u)}}catch(t){c.e(t)}finally{c.f()}var s,l=Wf(this.markedChildren);try{for(l.s();!(s=l.n()).done;){var f=s.value;this._updateChildren(f,{inlineFillerPosition:e})}}catch(t){l.e(t)}finally{l.f()}var p,d=Wf(this.markedTexts);try{for(d.s();!(p=d.n()).done;){var h=p.value;!this.markedChildren.has(h.parent)&&this.domConverter.mapViewToDom(h.parent)&&this._updateText(h,{inlineFillerPosition:e})}}catch(t){d.e(t)}finally{d.f()}if(r)if(e){var y=this.domConverter.viewPositionToDom(e),b=y.parent.ownerDocument;Nf(y.parent)?this._inlineFiller=y.parent:this._inlineFiller=tp(b,y.parent,y.offset)}else this._inlineFiller=null;this._updateFocus(),this._updateSelection(),this.domConverter._clearTemporaryCustomProperties(),this.markedTexts.clear(),this.markedAttributes.clear(),this.markedChildren.clear()}}},{key:"_updateChildrenMappings",value:function(t){var e=this.domConverter.mapViewToDom(t);if(e){var r=Array.from(e.childNodes),n=Array.from(this.domConverter.viewChildrenToDom(t,{withChildren:!1})),o=this._diffNodeLists(r,n),i=this._findUpdateActions(o,r,n,ep);if(-1!==i.indexOf("update")){var a,c={equal:0,insert:0,delete:0},u=Wf(i);try{for(u.s();!(a=u.n()).done;){var s=a.value;if("update"===s){var l=c.equal+c.insert,f=c.equal+c.delete,p=t.getChild(l);!p||p.is("uiElement")||p.is("rawElement")||this._updateElementMappings(p,r[f]),jo(n[l]),c.equal++}else c[s]++}}catch(t){u.e(t)}finally{u.f()}}}}},{key:"_updateElementMappings",value:function(t,e){this.domConverter.unbindDomElement(e),this.domConverter.bindElements(e,t),this.markedChildren.add(t),this.markedAttributes.add(t)}},{key:"_getInlineFillerPosition",value:function(){var t=this.selection.getFirstPosition();return t.parent.is("$text")?os._createBefore(t.parent):t}},{key:"_isSelectionInInlineFiller",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var t=this.selection.getFirstPosition(),e=this.domConverter.viewPositionToDom(t);return!!(e&&Un(e.parent)&&Nf(e.parent))}},{key:"_removeInlineFiller",value:function(){var t=this._inlineFiller;if(!Nf(t))throw new A("view-renderer-filler-was-lost",this);Vf(t)?t.remove():t.data=t.data.substr(Mf),this._inlineFiller=null}},{key:"_needsInlineFillerAtSelection",value:function(){if(1!=this.selection.rangeCount||!this.selection.isCollapsed)return!1;var t=this.selection.getFirstPosition(),e=t.parent,r=t.offset;if(!this.domConverter.mapViewToDom(e.root))return!1;if(!e.is("element"))return!1;if(!function(t){if("false"==t.getAttribute("contenteditable"))return!1;var e=t.findAncestor((function(t){return t.hasAttribute("contenteditable")}));return!e||"true"==e.getAttribute("contenteditable")}(e))return!1;if(r===e.getFillerOffset())return!1;var n=t.nodeBefore,o=t.nodeAfter;return!(n instanceof sc||o instanceof sc||i.isAndroid&&(n||o))}},{key:"_updateText",value:function(t,e){var r=this.domConverter.findCorrespondingDomText(t),n=this.domConverter.viewToDom(t).data,o=e.inlineFillerPosition;o&&o.parent==t.parent&&o.offset==t.index&&(n=Lf+n),op(r,n)}},{key:"_updateAttrs",value:function(t){var e=this.domConverter.mapViewToDom(t);if(e){var r,n=Array.from(e.attributes).map((function(t){return t.name})),o=Wf(t.getAttributeKeys());try{for(o.s();!(r=o.n()).done;){var i=r.value;this.domConverter.setDomElementAttribute(e,i,t.getAttribute(i),t)}}catch(t){o.e(t)}finally{o.f()}var a,c=Wf(n);try{for(c.s();!(a=c.n()).done;){var u=a.value;t.hasAttribute(u)||this.domConverter.removeDomElementAttribute(e,u)}}catch(t){c.e(t)}finally{c.f()}}}},{key:"_updateChildren",value:function(t,e){var r=this.domConverter.mapViewToDom(t);if(r){if(i.isAndroid)for(var n=null,o=0,a=Array.from(r.childNodes);o<a.length;o++){var c=a[o];if(n&&Un(n)&&Un(c)){r.normalize();break}n=c}var u=e.inlineFillerPosition,s=r.childNodes,l=Array.from(this.domConverter.viewChildrenToDom(t,{bind:!0}));u&&u.parent===t&&tp(r.ownerDocument,l,u.offset);var f,p=this._diffNodeLists(s,l),d=this._findUpdateActions(p,s,l,rp),h=0,y=new Set,b=Wf(d);try{for(b.s();!(f=b.n()).done;){var v=f.value;"delete"===v?(y.add(s[h]),jo(s[h])):"equal"!==v&&"update"!==v||h++}}catch(t){b.e(t)}finally{b.f()}h=0;var m,g=Wf(d);try{for(g.s();!(m=g.n()).done;){var w=m.value;"insert"===w?(bo(r,h,l[h]),h++):"update"===w?(op(s[h],l[h].data),h++):"equal"===w&&(this._markDescendantTextToSync(this.domConverter.domToView(l[h])),h++)}}catch(t){g.e(t)}finally{g.f()}var k,_=Wf(y);try{for(_.s();!(k=_.n()).done;){var O=k.value;O.parentNode||this.domConverter.unbindDomElement(O)}}catch(t){_.e(t)}finally{_.f()}}}},{key:"_diffNodeLists",value:function(t,e){return r=t,n=this._fakeSelectionContainer,l(t=0!=(o=Array.from(r)).length&&n?(o[o.length-1]==n&&o.pop(),o):o,e,np.bind(null,this.domConverter));var r,n,o}},{key:"_findUpdateActions",value:function(t,e,r,n){if(-1===t.indexOf("insert")||-1===t.indexOf("delete"))return t;var o,i=[],a=[],c=[],u={equal:0,insert:0,delete:0},s=Wf(t);try{for(s.s();!(o=s.n()).done;){var f=o.value;"insert"===f?c.push(r[u.equal+u.insert]):"delete"===f?a.push(e[u.equal+u.delete]):(i=i.concat(l(a,c,n).map((function(t){return"equal"===t?"update":t}))),i.push("equal"),a=[],c=[]),u[f]++}}catch(t){s.e(t)}finally{s.f()}return i.concat(l(a,c,n).map((function(t){return"equal"===t?"update":t})))}},{key:"_markDescendantTextToSync",value:function(t){if(t)if(t.is("$text"))this.markedTexts.add(t);else if(t.is("element")){var e,r=Wf(t.getChildren());try{for(r.s();!(e=r.n()).done;){var n=e.value;this._markDescendantTextToSync(n)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"_updateSelection",value:function(){if(!i.isBlink||i.isAndroid||!this.isSelecting||this.markedChildren.size){if(0===this.selection.rangeCount)return this._removeDomSelection(),void this._removeFakeSelection();var t=this.domConverter.mapViewToDom(this.selection.editableElement);this.isFocused&&t&&(this.selection.isFake?this._updateFakeSelection(t):this._fakeSelectionContainer&&this._fakeSelectionContainer.isConnected?(this._removeFakeSelection(),this._updateDomSelection(t)):this.isComposing&&i.isAndroid||this._updateDomSelection(t))}}},{key:"_updateFakeSelection",value:function(t){var e=t.ownerDocument;this._fakeSelectionContainer||(this._fakeSelectionContainer=function(t){var e=t.createElement("div");return e.className="ck-fake-selection-container",Object.assign(e.style,{position:"fixed",top:0,left:"-9999px",width:"42px"}),e.textContent=" ",e}(e));var r=this._fakeSelectionContainer;if(this.domConverter.bindFakeSelection(r,this.selection),this._fakeSelectionNeedsUpdate(t)){r.parentElement&&r.parentElement==t||t.appendChild(r),r.textContent=this.selection.fakeSelectionLabel||" ";var n=e.getSelection(),o=e.createRange();n.removeAllRanges(),o.selectNodeContents(r),n.addRange(o)}}},{key:"_updateDomSelection",value:function(t){var e=t.ownerDocument.defaultView.getSelection();if(this._domSelectionNeedsUpdate(e)){var r=this.domConverter.viewPositionToDom(this.selection.anchor),n=this.domConverter.viewPositionToDom(this.selection.focus);e.setBaseAndExtent(r.parent,r.offset,n.parent,n.offset),i.isGecko&&function(t,e){var r=t.parent;if(r.nodeType==Node.ELEMENT_NODE&&t.offset==r.childNodes.length-1){var n=r.childNodes[t.offset];n&&"BR"==n.tagName&&e.addRange(e.getRangeAt(0))}}(n,e)}}},{key:"_domSelectionNeedsUpdate",value:function(t){if(!this.domConverter.isDomSelectionCorrect(t))return!0;var e=t&&this.domConverter.domSelectionToView(t);return!(e&&this.selection.isEqual(e)||!this.selection.isCollapsed&&this.selection.isSimilar(e))}},{key:"_fakeSelectionNeedsUpdate",value:function(t){var e=this._fakeSelectionContainer,r=t.ownerDocument.getSelection();return!e||e.parentElement!==t||r.anchorNode!==e&&!e.contains(r.anchorNode)||e.textContent!==this.selection.fakeSelectionLabel}},{key:"_removeDomSelection",value:function(){var t,e=Wf(this.domDocuments);try{for(e.s();!(t=e.n()).done;){var r=t.value,n=r.getSelection();if(n.rangeCount){var o=r.activeElement,i=this.domConverter.mapDomToView(o);o&&i&&n.removeAllRanges()}}}catch(t){e.e(t)}finally{e.f()}}},{key:"_removeFakeSelection",value:function(){var t=this._fakeSelectionContainer;t&&t.remove()}},{key:"_updateFocus",value:function(){if(this.isFocused){var t=this.selection.editableElement;t&&this.domConverter.focus(t)}}}],n&&Kf(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function tp(t,e,r){var n=e instanceof Array?e:e.childNodes,o=n[r];if(Un(o))return o.data=Lf+o.data,o;var i=t.createTextNode(Lf);return Array.isArray(e)?n.splice(r,0,i):bo(e,r,i),i}function ep(t,e){return On(t)&&On(e)&&!Un(t)&&!Un(e)&&!vo(t)&&!vo(e)&&t.tagName.toLowerCase()===e.tagName.toLowerCase()}function rp(t,e){return On(t)&&On(e)&&Un(t)&&Un(e)}function np(t,e,r){return e===r||(Un(e)&&Un(r)?e.data===r.data:!(!t.isBlockFiller(e)||!t.isBlockFiller(r)))}function op(t,e){var r=t.data;if(r!=e){var n,o=Wf(c(r,e));try{for(o.s();!(n=o.n()).done;){var i=n.value;"insert"===i.type?t.insertData(i.index,i.values.join("")):t.deleteData(i.index,i.howMany)}}catch(t){o.e(t)}finally{o.f()}}}function ip(t){return ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ip(t)}function ap(){ap=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ip(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ip(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function cp(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=up(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function up(t,e){if(t){if("string"==typeof t)return sp(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sp(t,e):void 0}}function sp(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fp(n.key),n)}}function fp(t){var e=function(t,e){if("object"!=ip(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ip(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ip(e)?e:e+""}var pp=Ff(qn.document),dp=If(qn.document),hp=Bf(qn.document),yp="data-ck-unsafe-attribute-",bp="data-ck-unsafe-element",vp=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=r.blockFillerMode,o=r.renderingMode,i=void 0===o?"editing":o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._domToViewMapping=new WeakMap,this._viewToDomMapping=new WeakMap,this._fakeSelectionMapping=new WeakMap,this._rawContentElementMatcher=new Pc,this._inlineObjectElementMatcher=new Pc,this._elementsWithTemporaryCustomProperties=new Set,this.document=e,this.renderingMode=i,this.blockFillerMode=n||("editing"===i?"br":"nbsp"),this.preElements=["pre"],this.blockElements=["address","article","aside","blockquote","caption","center","dd","details","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","legend","li","main","menu","nav","ol","p","pre","section","summary","table","tbody","td","tfoot","th","thead","tr","ul"],this.inlineObjectElements=["object","iframe","input","button","textarea","select","option","video","embed","audio","img","canvas"],this.unsafeElements=["script","style"],this._domDocument="editing"===this.renderingMode?qn.document:qn.document.implementation.createHTMLDocument("")},e=[{key:"bindFakeSelection",value:function(t,e){this._fakeSelectionMapping.set(t,new Es(e))}},{key:"fakeSelectionToView",value:function(t){return this._fakeSelectionMapping.get(t)}},{key:"bindElements",value:function(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}},{key:"unbindDomElement",value:function(t){var e=this._domToViewMapping.get(t);if(e){this._domToViewMapping.delete(t),this._viewToDomMapping.delete(e);for(var r=0,n=Array.from(t.children);r<n.length;r++){var o=n[r];this.unbindDomElement(o)}}}},{key:"bindDocumentFragments",value:function(t,e){this._domToViewMapping.set(t,e),this._viewToDomMapping.set(e,t)}},{key:"shouldRenderAttribute",value:function(t,e,r){return"data"===this.renderingMode||!(t=t.toLowerCase()).startsWith("on")&&("srcdoc"!==t||!e.match(/\bon\S+\s*=|javascript:|<\s*\/*script/i))&&("img"===r&&("src"===t||"srcset"===t)||"source"===r&&"srcset"===t||!e.match(/^\s*(javascript:|data:(image\/svg|text\/x?html))/i))}},{key:"setContentOf",value:function(t,e){if("data"!==this.renderingMode){for(var r=(new DOMParser).parseFromString(e,"text/html"),n=r.createDocumentFragment(),o=r.body.childNodes;o.length>0;)n.appendChild(o[0]);for(var i,a=r.createTreeWalker(n,NodeFilter.SHOW_ELEMENT),c=[];i=a.nextNode();)c.push(i);for(var u=0,s=c;u<s.length;u++){var l,f=s[u],p=cp(f.getAttributeNames());try{for(p.s();!(l=p.n()).done;){var d=l.value;this.setDomElementAttribute(f,d,f.getAttribute(d))}}catch(t){p.e(t)}finally{p.f()}var h=f.tagName.toLowerCase();this._shouldRenameElement(h)&&(kp(h),f.replaceWith(this._createReplacementDomElement(h,f)))}for(;t.firstChild;)t.firstChild.remove();t.append(n)}else t.innerHTML=e}},{key:"viewToDom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(t.is("$text")){var r=this._processDataFromViewText(t);return this._domDocument.createTextNode(r)}var n,o=t;if(this.mapViewToDom(o)){if(!o.getCustomProperty("editingPipeline:doNotReuseOnce"))return this.mapViewToDom(o);this._elementsWithTemporaryCustomProperties.add(o)}if(o.is("documentFragment"))n=this._domDocument.createDocumentFragment(),e.bind&&this.bindDocumentFragments(n,o);else{if(o.is("uiElement"))return n="$comment"===o.name?this._domDocument.createComment(o.getCustomProperty("$rawContent")):o.render(this._domDocument,this),e.bind&&this.bindElements(n,o),n;this._shouldRenameElement(o.name)?(kp(o.name),n=this._createReplacementDomElement(o.name)):n=o.hasAttribute("xmlns")?this._domDocument.createElementNS(o.getAttribute("xmlns"),o.name):this._domDocument.createElement(o.name),o.is("rawElement")&&o.render(n,this),e.bind&&this.bindElements(n,o);var i,a=cp(o.getAttributeKeys());try{for(a.s();!(i=a.n()).done;){var c=i.value;this.setDomElementAttribute(n,c,o.getAttribute(c),o)}}catch(t){a.e(t)}finally{a.f()}}if(!1!==e.withChildren){var u,s=cp(this.viewChildrenToDom(o,e));try{for(s.s();!(u=s.n()).done;){var l=u.value;n.appendChild(l)}}catch(t){s.e(t)}finally{s.f()}}return n}},{key:"setDomElementAttribute",value:function(t,e,r,n){var o=this.shouldRenderAttribute(e,r,t.tagName.toLowerCase())||n&&n.shouldRenderUnsafeAttribute(e);o||x("domconverter-unsafe-attribute-detected",{domElement:t,key:e,value:r}),function(t){try{qn.document.createAttribute(t)}catch(t){return!1}return!0}(e)?(t.hasAttribute(e)&&!o?t.removeAttribute(e):t.hasAttribute(yp+e)&&o&&t.removeAttribute(yp+e),t.setAttribute(o?e:yp+e,r)):x("domconverter-invalid-attribute-detected",{domElement:t,key:e,value:r})}},{key:"removeDomElementAttribute",value:function(t,e){e!=bp&&(t.removeAttribute(e),t.removeAttribute(yp+e))}},{key:"viewChildrenToDom",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ap().mark((function n(){var o,i,a,c,u,s;return ap().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:o=t.getFillerOffset&&t.getFillerOffset(),i=0,a=cp(t.getChildren()),n.prev=3,a.s();case 5:if((c=a.n()).done){n.next=21;break}if(u=c.value,o!==i){n.next=10;break}return n.next=10,e._getBlockFiller();case 10:if(!(s=u.is("element")&&!!u.getCustomProperty("dataPipeline:transparentRendering")&&!Pi(u.getAttributes()))||"data"!=e.renderingMode){n.next=15;break}return n.delegateYield(e.viewChildrenToDom(u,r),"t0",13);case 13:n.next=18;break;case 15:return s&&x("domconverter-transparent-rendering-unsupported-in-editing-pipeline",{viewElement:u}),n.next=18,e.viewToDom(u,r);case 18:i++;case 19:n.next=5;break;case 21:n.next=26;break;case 23:n.prev=23,n.t1=n.catch(3),a.e(n.t1);case 26:return n.prev=26,a.f(),n.finish(26);case 29:if(o!==i){n.next=32;break}return n.next=32,e._getBlockFiller();case 32:case"end":return n.stop()}}),n,null,[[3,23,26,29]])}))()}},{key:"viewRangeToDom",value:function(t){var e=this.viewPositionToDom(t.start),r=this.viewPositionToDom(t.end),n=this._domDocument.createRange();return n.setStart(e.parent,e.offset),n.setEnd(r.parent,r.offset),n}},{key:"viewPositionToDom",value:function(t){var e,r,n,o=t.parent;if(o.is("$text")){var i=this.findCorrespondingDomText(o);if(!i)return null;var a=t.offset;return Nf(i)&&(a+=Mf),{parent:i,offset:a}}if(0===t.offset){if(!(e=this.mapViewToDom(o)))return null;n=e.childNodes[0]}else{var c=t.nodeBefore;if(!(r=c.is("$text")?this.findCorrespondingDomText(c):this.mapViewToDom(c)))return null;e=r.parentNode,n=r.nextSibling}return Un(n)&&Nf(n)?{parent:n,offset:Mf}:{parent:e,offset:r?yo(r)+1:0}}},{key:"domToView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=[],n=this._domToView(t,e,r),o=n.next().value;return o?(n.next(),this._processDomInlineNodes(null,r,e),o.is("$text")&&0==o.data.length?null:o):null}},{key:"domChildrenToView",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return ap().mark((function o(){var i,a,c,u;return ap().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:i=0;case 1:if(!(i<t.childNodes.length)){o.next=13;break}if(a=t.childNodes[i],c=e._domToView(a,r,n),null===(u=c.next().value)){o.next=10;break}return e._isBlockViewElement(u)&&e._processDomInlineNodes(t,n,r),o.next=9,u;case 9:c.next();case 10:i++,o.next=1;break;case 13:e._processDomInlineNodes(t,n,r);case 14:case"end":return o.stop()}}),o)}))()}},{key:"domSelectionToView",value:function(t){if(function(t){if(!i.isGecko)return!1;if(!t.rangeCount)return!1;var e=t.getRangeAt(0).startContainer;try{Object.prototype.toString.call(e)}catch(t){return!0}return!1}(t))return new Es([]);if(1===t.rangeCount){var e=t.getRangeAt(0).startContainer;Un(e)&&(e=e.parentNode);var r=this.fakeSelectionToView(e);if(r)return r}for(var n=this.isDomSelectionBackward(t),o=[],a=0;a<t.rangeCount;a++){var c=t.getRangeAt(a),u=this.domRangeToView(c);u&&o.push(u)}return new Es(o,{backward:n})}},{key:"domRangeToView",value:function(t){var e=this.domPositionToView(t.startContainer,t.startOffset),r=this.domPositionToView(t.endContainer,t.endOffset);return e&&r?new ys(e,r):null}},{key:"domPositionToView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(this.isBlockFiller(t))return this.domPositionToView(t.parentNode,yo(t));var r=this.mapDomToView(t);if(r&&(r.is("uiElement")||r.is("rawElement")))return os._createBefore(r);if(Un(t)){if(Vf(t))return this.domPositionToView(t.parentNode,yo(t));var n=this.findCorrespondingViewText(t),o=e;return n?(Nf(t)&&(o=(o-=Mf)<0?0:o),new os(n,o)):null}if(0===e){var i=this.mapDomToView(t);if(i)return new os(i,0)}else{var a=t.childNodes[e-1];if(Un(a)&&Vf(a)||a&&this.isBlockFiller(a))return this.domPositionToView(a.parentNode,yo(a));var c=Un(a)?this.findCorrespondingViewText(a):this.mapDomToView(a);if(c&&c.parent)return new os(c.parent,c.index+1)}return null}},{key:"mapDomToView",value:function(t){return this.getHostViewElement(t)||this._domToViewMapping.get(t)}},{key:"findCorrespondingViewText",value:function(t){if(Vf(t))return null;var e=this.getHostViewElement(t);if(e)return e;var r=t.previousSibling;if(r){if(!this.isElement(r))return null;var n=this.mapDomToView(r);if(n){var o=n.nextSibling;return o instanceof sc?o:null}}else{var i=this.mapDomToView(t.parentNode);if(i){var a=i.getChild(0);return a instanceof sc?a:null}}return null}},{key:"mapViewToDom",value:function(t){return this._viewToDomMapping.get(t)}},{key:"findCorrespondingDomText",value:function(t){var e=t.previousSibling;return e&&this.mapViewToDom(e)?this.mapViewToDom(e).nextSibling:!e&&t.parent&&this.mapViewToDom(t.parent)?this.mapViewToDom(t.parent).childNodes[0]:null}},{key:"focus",value:function(t){var e=this.mapViewToDom(t);if(e&&e.ownerDocument.activeElement!==e){var r=qn.window,n=r.scrollX,o=r.scrollY,i=[];gp(e,(function(t){var e=t.scrollLeft,r=t.scrollTop;i.push([e,r])})),e.focus(),gp(e,(function(t){var e,r,n=(e=i.shift(),r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,r)||up(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];t.scrollLeft=o,t.scrollTop=a})),qn.window.scrollTo(n,o)}}},{key:"_clearDomSelection",value:function(){var t=this.mapViewToDom(this.document.selection.editableElement);if(t){var e=t.ownerDocument.defaultView.getSelection(),r=this.domSelectionToView(e);r&&r.rangeCount>0&&e.removeAllRanges()}}},{key:"isElement",value:function(t){return t&&t.nodeType==Node.ELEMENT_NODE}},{key:"isDocumentFragment",value:function(t){return t&&t.nodeType==Node.DOCUMENT_FRAGMENT_NODE}},{key:"isBlockFiller",value:function(t){return"br"==this.blockFillerMode?t.isEqualNode(pp):!("BR"!==t.tagName||!wp(t,this.blockElements)||1!==t.parentNode.childNodes.length)||t.isEqualNode(hp)||function(t,e){return t.isEqualNode(dp)&&wp(t,e)&&1===t.parentNode.childNodes.length}(t,this.blockElements)}},{key:"isDomSelectionBackward",value:function(t){if(t.isCollapsed)return!1;var e=this._domDocument.createRange();try{e.setStart(t.anchorNode,t.anchorOffset),e.setEnd(t.focusNode,t.focusOffset)}catch(t){return!1}var r=e.collapsed;return e.detach(),r}},{key:"getHostViewElement",value:function(t){var e=function(t){for(var e=[],r=t;r&&r.nodeType!=Node.DOCUMENT_NODE;)e.unshift(r),r=r.parentNode;return e}(t);for(e.pop();e.length;){var r=e.pop(),n=this._domToViewMapping.get(r);if(n&&(n.is("uiElement")||n.is("rawElement")))return n}return null}},{key:"isDomSelectionCorrect",value:function(t){return this._isDomSelectionPositionCorrect(t.anchorNode,t.anchorOffset)&&this._isDomSelectionPositionCorrect(t.focusNode,t.focusOffset)}},{key:"registerRawContentMatcher",value:function(t){this._rawContentElementMatcher.add(t)}},{key:"registerInlineObjectMatcher",value:function(t){this._inlineObjectElementMatcher.add(t)}},{key:"_clearTemporaryCustomProperties",value:function(){var t,e=cp(this._elementsWithTemporaryCustomProperties);try{for(e.s();!(t=e.n()).done;)t.value._removeCustomProperty("editingPipeline:doNotReuseOnce")}catch(t){e.e(t)}finally{e.f()}this._elementsWithTemporaryCustomProperties.clear()}},{key:"_getBlockFiller",value:function(){switch(this.blockFillerMode){case"nbsp":return If(this._domDocument);case"markedNbsp":return Bf(this._domDocument);case"br":return Ff(this._domDocument)}}},{key:"_isDomSelectionPositionCorrect",value:function(t,e){if(Un(t)&&Nf(t)&&e<Mf)return!1;if(this.isElement(t)&&Nf(t.childNodes[e]))return!1;var r=this.mapDomToView(t);return!r||!r.is("uiElement")&&!r.is("rawElement")}},{key:"_domToView",value:ap().mark((function t(e,r,n){var o,i,a,c,u,s,l,f,p,d,h,y,b,v;return ap().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.isBlockFiller(e)){t.next=2;break}return t.abrupt("return",null);case 2:if(!(o=this.getHostViewElement(e))){t.next=5;break}return t.abrupt("return",o);case 5:if(!vo(e)||!r.skipComments){t.next=7;break}return t.abrupt("return",null);case 7:if(!Un(e)){t.next=20;break}if(!Vf(e)){t.next=12;break}return t.abrupt("return",null);case 12:if(""!==(i=e.data)){t.next=15;break}return t.abrupt("return",null);case 15:return a=new sc(this.document,i),n.push(a),t.abrupt("return",a);case 18:t.next=45;break;case 20:if(!(c=this.mapDomToView(e))){t.next=24;break}return this._isInlineObjectElement(c)&&n.push(c),t.abrupt("return",c);case 24:if(!this.isDocumentFragment(e)){t.next=29;break}c=new df(this.document),r.bind&&this.bindDocumentFragments(e,c),t.next=40;break;case 29:if(c=this._createViewElement(e,r),r.bind&&this.bindElements(e,c),u=e.attributes)for(s=u.length,l=0;l<s;l++)c._setAttribute(u[l].name,u[l].value);if(!this._isViewElementWithRawContent(c,r)){t.next=37;break}return c._setCustomProperty("$rawContent",e.innerHTML),this._isBlockViewElement(c)||n.push(c),t.abrupt("return",c);case 37:if(!vo(e)){t.next=40;break}return c._setCustomProperty("$rawContent",e.data),t.abrupt("return",c);case 40:return t.next=42,c;case 42:if(f=[],!1!==r.withChildren){p=cp(this.domChildrenToView(e,r,f));try{for(p.s();!(d=p.n()).done;)h=d.value,c._appendChild(h)}catch(t){p.e(t)}finally{p.f()}}if(this._isInlineObjectElement(c))n.push(c);else{y=cp(f);try{for(y.s();!(b=y.n()).done;)v=b.value,n.push(v)}catch(t){y.e(t)}finally{y.f()}}case 45:case"end":return t.stop()}}),t,this)}))},{key:"_processDomInlineNodes",value:function(t,e,r){if(e.length&&(!t||this.isDocumentFragment(t)||this._isBlockDomElement(t))){for(var n=!1,o=0;o<e.length;o++){var i=e[o];if(i.is("$text")){var a=void 0,c=!1;if(mp(i,this.preElements))a=zf(i.data);else{a=i.data.replace(/[ \n\t\r]{1,}/g," "),c=/[^\S\u00A0]/.test(a.charAt(a.length-1));var u=o>0?e[o-1]:null,s=o+1<e.length?e[o+1]:null,l=!u||u.is("element")&&"br"==u.name||n,f=!s&&!Nf(i.data);!1!==r.withChildren&&(l&&(a=a.replace(/^ /,"")),f&&(a=a.replace(/ $/,""))),a=(a=zf(a)).replace(/ \u00A0/g,"  ");var p=s&&s.is("element")&&"br"!=s.name,d=s&&s.is("$text")&&" "==s.data.charAt(0);(/[ \u00A0]\u00A0$/.test(a)||!s||p||d)&&(a=a.replace(/\u00A0$/," ")),(l||u&&u.is("element")&&"br"!=u.name)&&(a=a.replace(/^\u00A0/," "))}0==a.length&&i.parent?(i._remove(),e.splice(o,1),o--):(i._data=a,n=c)}else n=!1}e.length=0}}},{key:"_processDataFromViewText",value:function(t){var e=this,r=t.data;if(t.getAncestors().some((function(t){return e.preElements.includes(t.name)})))return r;if(" "==r.charAt(0)){var n=this._getTouchingInlineViewNode(t,!1);!(n&&n.is("$textProxy")&&this._nodeEndsWithSpace(n))&&n||(r=" "+r.substr(1))}if(" "==r.charAt(r.length-1)){var o=this._getTouchingInlineViewNode(t,!0),i=o&&o.is("$textProxy")&&" "==o.data.charAt(0);" "!=r.charAt(r.length-2)&&o&&!i||(r=r.substr(0,r.length-1)+" ")}return r.replace(/ {2}/g,"  ")}},{key:"_nodeEndsWithSpace",value:function(t){var e=this;if(t.getAncestors().some((function(t){return e.preElements.includes(t.name)})))return!1;var r=this._processDataFromViewText(t);return" "==r.charAt(r.length-1)}},{key:"_getTouchingInlineViewNode",value:function(t,e){var r,n=cp(new Yu({startPosition:e?os._createAfter(t):os._createBefore(t),direction:e?"forward":"backward"}));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.item.is("element","br"))return null;if(this._isInlineObjectElement(o.item))return o.item;if(o.item.is("containerElement"))return null;if(o.item.is("$textProxy"))return o.item}}catch(t){n.e(t)}finally{n.f()}return null}},{key:"_isBlockDomElement",value:function(t){return this.isElement(t)&&this.blockElements.includes(t.tagName.toLowerCase())}},{key:"_isBlockViewElement",value:function(t){return t.is("element")&&this.blockElements.includes(t.name)}},{key:"_isInlineObjectElement",value:function(t){return!!t.is("element")&&("br"==t.name||this.inlineObjectElements.includes(t.name)||!!this._inlineObjectElementMatcher.match(t))}},{key:"_createViewElement",value:function(t,e){if(vo(t))return new Gl(this.document,"$comment");var r=e.keepOriginalCase?t.tagName:t.tagName.toLowerCase();return new gu(this.document,r)}},{key:"_isViewElementWithRawContent",value:function(t,e){return!1!==e.withChildren&&t.is("element")&&!!this._rawContentElementMatcher.match(t)}},{key:"_shouldRenameElement",value:function(t){var e=t.toLowerCase();return"editing"===this.renderingMode&&this.unsafeElements.includes(e)}},{key:"_createReplacementDomElement",value:function(t,e){var r=this._domDocument.createElement("span");if(r.setAttribute(bp,t),e){for(;e.firstChild;)r.appendChild(e.firstChild);var n,o=cp(e.getAttributeNames());try{for(o.s();!(n=o.n()).done;){var i=n.value;r.setAttribute(i,e.getAttribute(i))}}catch(t){o.e(t)}finally{o.f()}}return r}}],e&&lp(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function mp(t,e){return t.getAncestors().some((function(t){return t.is("element")&&e.includes(t.name)}))}function gp(t,e){for(var r=t;r;)e(r),r=r.parentElement}function wp(t,e){var r=t.parentNode;return!!r&&!!r.tagName&&e.includes(r.tagName.toLowerCase())}function kp(t){"script"===t&&x("domconverter-unsafe-script-element-detected"),"style"===t&&x("domconverter-unsafe-style-element-detected")}function _p(t){return _p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_p(t)}function Op(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Pp(n.key),n)}}function Pp(t){var e=function(t,e){if("object"!=_p(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_p(e)?e:e+""}function Sp(t,e,r){return e=Ep(e),function(t,e){if(e&&("object"===_p(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jp()?Reflect.construct(e,r||[],Ep(t).constructor):e.apply(t,r))}function jp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jp=function(){return!!t})()}function Ep(t){return Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ep(t)}function Tp(t,e){return Tp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Tp(t,e)}var Ap=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Sp(this,e))._isEnabled=!1,r.view=t,r.document=t.document,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Tp(t,e)}(e,t),r=e,(n=[{key:"isEnabled",get:function(){return this._isEnabled}},{key:"enable",value:function(){this._isEnabled=!0}},{key:"disable",value:function(){this._isEnabled=!1}},{key:"destroy",value:function(){this.disable(),this.stopListening()}},{key:"checkShouldIgnoreEventFromTarget",value:function(t){return t&&3===t.nodeType&&(t=t.parentNode),!(!t||1!==t.nodeType)&&t.matches("[data-cke-ignore-events], [data-cke-ignore-events] *")}}])&&Op(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Nn());const xp=ii((function(t,e){Fe(e,dr(e),t)}));function Cp(t){return Cp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cp(t)}function Dp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Rp(n.key),n)}}function Rp(t){var e=function(t,e){if("object"!=Cp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Cp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Cp(e)?e:e+""}var Ip=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.view=e,this.document=e.document,this.domEvent=r,this.domTarget=r.target,xp(this,n)},(e=[{key:"target",get:function(){return this.view.domConverter.mapDomToView(this.domTarget)}},{key:"preventDefault",value:function(){this.domEvent.preventDefault()}},{key:"stopPropagation",value:function(){this.domEvent.stopPropagation()}}])&&Dp(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Bp(t){return Bp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bp(t)}function Fp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Mp(n.key),n)}}function Mp(t){var e=function(t,e){if("object"!=Bp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bp(e)?e:e+""}function Lp(t,e,r){return e=Vp(e),function(t,e){if(e&&("object"===Bp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Np()?Reflect.construct(e,r||[],Vp(t).constructor):e.apply(t,r))}function Np(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Np=function(){return!!t})()}function Vp(t){return Vp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Vp(t)}function zp(t,e){return zp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zp(t,e)}var $p=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Lp(this,e,arguments)).useCapture=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zp(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(t){var e=this;("string"==typeof this.domEventType?[this.domEventType]:this.domEventType).forEach((function(r){e.listenTo(t,r,(function(t,r){e.isEnabled&&!e.checkShouldIgnoreEventFromTarget(r.target)&&e.onDomEvent(r)}),{useCapture:e.useCapture})}))}},{key:"stopObserving",value:function(t){this.stopListening(t)}},{key:"fire",value:function(t,e,r){this.isEnabled&&this.document.fire(t,new Ip(this.view,e,r))}}])&&Fp(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function qp(t){return qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qp(t)}function Up(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wp(n.key),n)}}function Wp(t){var e=function(t,e){if("object"!=qp(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qp(e)?e:e+""}function Gp(t,e,r){return e=Hp(e),function(t,e){if(e&&("object"===qp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Kp()?Reflect.construct(e,r||[],Hp(t).constructor):e.apply(t,r))}function Kp(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Kp=function(){return!!t})()}function Hp(t){return Hp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hp(t)}function Jp(t,e){return Jp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jp(t,e)}var Yp=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Gp(this,e,arguments)).domEventType=["keydown","keyup"],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jp(t,e)}(e,t),r=e,(n=[{key:"onDomEvent",value:function(t){var e={keyCode:t.keyCode,altKey:t.altKey,ctrlKey:t.ctrlKey,shiftKey:t.shiftKey,metaKey:t.metaKey,get keystroke(){return qo(this)}};this.fire(t.type,t,e)}}])&&Up(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}($p);const Zp=function(){return Bt.Date.now()};var Xp=/\s/;var Qp=/^\s+/;const td=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&Xp.test(t.charAt(e)););return e}(t)+1).replace(Qp,""):t};var ed=/^[-+]0x[0-9a-f]+$/i,rd=/^0b[01]+$/i,nd=/^0o[0-7]+$/i,od=parseInt;const id=function(t){if("number"==typeof t)return t;if(Ec(t))return NaN;if(rt(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=rt(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=td(t);var r=rd.test(t);return r||nd.test(t)?od(t.slice(2),r?2:8):ed.test(t)?NaN:+t};var ad=Math.max,cd=Math.min;const ud=function(t,e,r){var n,o,i,a,c,u,s=0,l=!1,f=!1,p=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function d(e){var r=n,i=o;return n=o=void 0,s=e,a=t.apply(i,r)}function h(t){var r=t-u;return void 0===u||r>=e||r<0||f&&t-s>=i}function y(){var t=Zp();if(h(t))return b(t);c=setTimeout(y,function(t){var r=e-(t-u);return f?cd(r,i-(t-s)):r}(t))}function b(t){return c=void 0,p&&n?d(t):(n=o=void 0,a)}function v(){var t=Zp(),r=h(t);if(n=arguments,o=this,u=t,r){if(void 0===c)return function(t){return s=t,c=setTimeout(y,e),l?d(t):a}(u);if(f)return clearTimeout(c),c=setTimeout(y,e),d(u)}return void 0===c&&(c=setTimeout(y,e)),a}return e=id(e)||0,rt(r)&&(l=!!r.leading,i=(f="maxWait"in r)?ad(id(r.maxWait)||0,e):i,p="trailing"in r?!!r.trailing:p),v.cancel=function(){void 0!==c&&clearTimeout(c),s=0,n=u=o=c=void 0},v.flush=function(){return void 0===c?a:b(Zp())},v};function sd(t){return sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sd(t)}function ld(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fd(n.key),n)}}function fd(t){var e=function(t,e){if("object"!=sd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sd(e)?e:e+""}function pd(t,e,r){return e=yd(e),function(t,e){if(e&&("object"===sd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dd()?Reflect.construct(e,r||[],yd(t).constructor):e.apply(t,r))}function dd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dd=function(){return!!t})()}function hd(){return hd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},hd.apply(this,arguments)}function yd(t){return yd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yd(t)}function bd(t,e){return bd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bd(t,e)}var vd=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=pd(this,e,[t]))._fireSelectionChangeDoneDebounced=ud((function(t){r.document.fire("selectionChangeDone",t)}),200),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bd(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(){var t=this,e=this.document;e.on("arrowKey",(function(r,n){e.selection.isFake&&t.isEnabled&&n.preventDefault()}),{context:"$capture"}),e.on("arrowKey",(function(r,n){e.selection.isFake&&t.isEnabled&&t._handleSelectionMove(n.keyCode)}),{priority:"lowest"})}},{key:"stopObserving",value:function(){}},{key:"destroy",value:function(){hd(yd(e.prototype),"destroy",this).call(this),this._fireSelectionChangeDoneDebounced.cancel()}},{key:"_handleSelectionMove",value:function(t){var e=this.document.selection,r=new Es(e.getRanges(),{backward:e.isBackward,fake:!1});t!=zo.arrowleft&&t!=zo.arrowup||r.setTo(r.getFirstPosition()),t!=zo.arrowright&&t!=zo.arrowdown||r.setTo(r.getLastPosition());var n={oldSelection:e,newSelection:r,domSelection:null};this.document.fire("selectionChange",n),this._fireSelectionChangeDoneDebounced(n)}}])&&ld(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function md(t){var e=-1,r=null==t?0:t.length;for(this.__data__=new Ae;++e<r;)this.add(t[e])}md.prototype.add=md.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},md.prototype.has=function(t){return this.__data__.has(t)};const gd=md,wd=function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1},kd=function(t,e){return t.has(e)},_d=function(t,e,r,n,o,i){var a=1&r,c=t.length,u=e.length;if(c!=u&&!(a&&u>c))return!1;var s=i.get(t),l=i.get(e);if(s&&l)return s==e&&l==t;var f=-1,p=!0,d=2&r?new gd:void 0;for(i.set(t,e),i.set(e,t);++f<c;){var h=t[f],y=e[f];if(n)var b=a?n(y,h,f,e,t,i):n(h,y,f,t,e,i);if(void 0!==b){if(b)continue;p=!1;break}if(d){if(!wd(e,(function(t,e){if(!kd(d,e)&&(h===t||o(h,t,r,n,i)))return d.push(e)}))){p=!1;break}}else if(h!==y&&!o(h,y,r,n,i)){p=!1;break}}return i.delete(t),i.delete(e),p},Od=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t,n){r[++e]=[n,t]})),r},Pd=function(t){var e=-1,r=Array(t.size);return t.forEach((function(t){r[++e]=t})),r};var Sd=Ft?Ft.prototype:void 0,jd=Sd?Sd.valueOf:void 0;var Ed=Object.prototype.hasOwnProperty;var Td="[object Arguments]",Ad="[object Array]",xd="[object Object]",Cd=Object.prototype.hasOwnProperty;const Dd=function(t,e,r,n,o,i){var a=Ut(t),c=Ut(e),u=a?Ad:Ur(t),s=c?Ad:Ur(e),l=(u=u==Td?xd:u)==xd,f=(s=s==Td?xd:s)==xd,p=u==s;if(p&&We(t)){if(!We(e))return!1;a=!0,l=!1}if(p&&!l)return i||(i=new Ce),a||rr(t)?_d(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new Gr(t),new Gr(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return ne(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var c=Od;case"[object Set]":var u=1&n;if(c||(c=Pd),t.size!=e.size&&!u)return!1;var s=a.get(t);if(s)return s==e;n|=2,a.set(t,e);var l=_d(c(t),c(e),n,o,i,a);return a.delete(t),l;case"[object Symbol]":if(jd)return jd.call(t)==jd.call(e)}return!1}(t,e,u,r,n,o,i);if(!(1&r)){var d=l&&Cd.call(t,"__wrapped__"),h=f&&Cd.call(e,"__wrapped__");if(d||h){var y=d?t.value():t,b=h?e.value():e;return i||(i=new Ce),o(y,b,r,n,i)}}return!!p&&(i||(i=new Ce),function(t,e,r,n,o,i){var a=1&r,c=Er(t),u=c.length;if(u!=Er(e).length&&!a)return!1;for(var s=u;s--;){var l=c[s];if(!(a?l in e:Ed.call(e,l)))return!1}var f=i.get(t),p=i.get(e);if(f&&p)return f==e&&p==t;var d=!0;i.set(t,e),i.set(e,t);for(var h=a;++s<u;){var y=t[l=c[s]],b=e[l];if(n)var v=a?n(b,y,l,e,t,i):n(y,b,l,t,e,i);if(!(void 0===v?y===b||o(y,b,r,n,i):v)){d=!1;break}h||(h="constructor"==l)}if(d&&!h){var m=t.constructor,g=e.constructor;m==g||!("constructor"in t)||!("constructor"in e)||"function"==typeof m&&m instanceof m&&"function"==typeof g&&g instanceof g||(d=!1)}return i.delete(t),i.delete(e),d}(t,e,r,n,o,i))},Rd=function t(e,r,n,o,i){return e===r||(null==e||null==r||!Wt(e)&&!Wt(r)?e!=e&&r!=r:Dd(e,r,n,o,t,i))},Id=function(t,e,r){var n=(r="function"==typeof r?r:void 0)?r(t,e):void 0;return void 0===n?Rd(t,e,void 0,r):!!n};function Bd(t){return Bd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bd(t)}function Fd(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Md(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Md(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Md(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Ld(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Nd(n.key),n)}}function Nd(t){var e=function(t,e){if("object"!=Bd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bd(e)?e:e+""}function Vd(t,e,r){return e=qd(e),function(t,e){if(e&&("object"===Bd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,zd()?Reflect.construct(e,r||[],qd(t).constructor):e.apply(t,r))}function zd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(zd=function(){return!!t})()}function $d(){return $d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},$d.apply(this,arguments)}function qd(t){return qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qd(t)}function Ud(t,e){return Ud=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ud(t,e)}var Wd=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Vd(this,e,[t]))._config={childList:!0,characterData:!0,subtree:!0},r.domConverter=t.domConverter,r.renderer=t._renderer,r._domElements=new Set,r._mutationObserver=new window.MutationObserver(r._onMutations.bind(r)),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ud(t,e)}(e,t),r=e,(n=[{key:"flush",value:function(){this._onMutations(this._mutationObserver.takeRecords())}},{key:"observe",value:function(t){this._domElements.add(t),this.isEnabled&&this._mutationObserver.observe(t,this._config)}},{key:"stopObserving",value:function(t){if(this._domElements.delete(t),this.isEnabled){this._mutationObserver.disconnect();var e,r=Fd(this._domElements);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._mutationObserver.observe(n,this._config)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"enable",value:function(){$d(qd(e.prototype),"enable",this).call(this);var t,r=Fd(this._domElements);try{for(r.s();!(t=r.n()).done;){var n=t.value;this._mutationObserver.observe(n,this._config)}}catch(t){r.e(t)}finally{r.f()}}},{key:"disable",value:function(){$d(qd(e.prototype),"disable",this).call(this),this._mutationObserver.disconnect()}},{key:"destroy",value:function(){$d(qd(e.prototype),"destroy",this).call(this),this._mutationObserver.disconnect()}},{key:"_onMutations",value:function(t){if(0!==t.length){var e,r=this.domConverter,n=new Set,o=new Set,i=Fd(t);try{for(i.s();!(e=i.n()).done;){var a=e.value,c=r.mapDomToView(a.target);c&&(c.is("uiElement")||c.is("rawElement")||"childList"!==a.type||this._isBogusBrMutation(a)||o.add(c))}}catch(t){i.e(t)}finally{i.f()}var u,s=Fd(t);try{for(s.s();!(u=s.n()).done;){var l=u.value,f=r.mapDomToView(l.target);if((!f||!f.is("uiElement")&&!f.is("rawElement"))&&"characterData"===l.type){var p=r.findCorrespondingViewText(l.target);p&&!o.has(p.parent)?n.add(p):!p&&Nf(l.target)&&o.add(r.mapDomToView(l.target.parentNode))}}}catch(t){s.e(t)}finally{s.f()}var d,h=!1,y=Fd(n);try{for(y.s();!(d=y.n()).done;){var b=d.value;h=!0,this.renderer.markToSync("text",b)}}catch(t){y.e(t)}finally{y.f()}var v,m=Fd(o);try{for(m.s();!(v=m.n()).done;){var g=v.value,w=r.mapViewToDom(g),k=Array.from(g.getChildren()),_=Array.from(r.domChildrenToView(w,{withChildren:!1}));Id(k,_,Gd)||(h=!0,this.renderer.markToSync("children",g))}}catch(t){m.e(t)}finally{m.f()}h&&this.view.forceRender()}}},{key:"_isBogusBrMutation",value:function(t){var e=null;return null===t.nextSibling&&0===t.removedNodes.length&&1==t.addedNodes.length&&(e=this.domConverter.domToView(t.addedNodes[0],{withChildren:!1})),e&&e.is("element","br")}}])&&Ld(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function Gd(t,e){if(!Array.isArray(t))return t===e||!(!t.is("$text")||!e.is("$text"))&&t.data===e.data}function Kd(t){return Kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(t)}function Hd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jd(n.key),n)}}function Jd(t){var e=function(t,e){if("object"!=Kd(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kd(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kd(e)?e:e+""}function Yd(t,e,r){return e=Qd(e),function(t,e){if(e&&("object"===Kd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zd()?Reflect.construct(e,r||[],Qd(t).constructor):e.apply(t,r))}function Zd(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zd=function(){return!!t})()}function Xd(){return Xd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Xd.apply(this,arguments)}function Qd(t){return Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Qd(t)}function th(t,e){return th=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},th(t,e)}var eh=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Yd(this,e,[t]))._isFocusChanging=!1,r.domEventType=["focus","blur"],r.useCapture=!0;var n=r.document;return n.on("focus",(function(){r._isFocusChanging=!0,r._renderTimeoutId=setTimeout((function(){r.flush(),t.change((function(){}))}),50)})),n.on("blur",(function(e,o){var i=n.selection.editableElement;null!==i&&i!==o.target||(n.isFocused=!1,r._isFocusChanging=!1,t.change((function(){})))})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&th(t,e)}(e,t),r=e,(n=[{key:"flush",value:function(){this._isFocusChanging&&(this._isFocusChanging=!1,this.document.isFocused=!0)}},{key:"onDomEvent",value:function(t){this.fire(t.type,t)}},{key:"destroy",value:function(){this._renderTimeoutId&&clearTimeout(this._renderTimeoutId),Xd(Qd(e.prototype),"destroy",this).call(this)}}])&&Hd(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}($p);function rh(t){return rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rh(t)}function nh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oh(n.key),n)}}function oh(t){var e=function(t,e){if("object"!=rh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rh(e)?e:e+""}function ih(t,e,r){return e=uh(e),function(t,e){if(e&&("object"===rh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ah()?Reflect.construct(e,r||[],uh(t).constructor):e.apply(t,r))}function ah(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ah=function(){return!!t})()}function ch(){return ch="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ch.apply(this,arguments)}function uh(t){return uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uh(t)}function sh(t,e){return sh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sh(t,e)}var lh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=ih(this,e,[t])).mutationObserver=t.getObserver(Wd),r.focusObserver=t.getObserver(eh),r.selection=r.document.selection,r.domConverter=t.domConverter,r._documents=new WeakSet,r._fireSelectionChangeDoneDebounced=ud((function(t){r.document.fire("selectionChangeDone",t)}),200),r._clearInfiniteLoopInterval=setInterval((function(){return r._clearInfiniteLoop()}),1e3),r._documentIsSelectingInactivityTimeoutDebounced=ud((function(){return r.document.isSelecting=!1}),5e3),r._loopbackCounter=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sh(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(t){var e=this,r=t.ownerDocument,n=function(){e.document.isSelecting&&(e._handleSelectionChange(null,r),e.document.isSelecting=!1,e._documentIsSelectingInactivityTimeoutDebounced.cancel())};this.listenTo(t,"selectstart",(function(){e.document.isSelecting=!0,e._documentIsSelectingInactivityTimeoutDebounced()}),{priority:"highest"}),this.listenTo(t,"keydown",n,{priority:"highest",useCapture:!0}),this.listenTo(t,"keyup",n,{priority:"highest",useCapture:!0}),this._documents.has(r)||(this.listenTo(r,"mouseup",n,{priority:"highest",useCapture:!0}),this.listenTo(r,"selectionchange",(function(t,n){e.document.isComposing&&!i.isAndroid||(e._handleSelectionChange(n,r),e._documentIsSelectingInactivityTimeoutDebounced())})),this._documents.add(r))}},{key:"stopObserving",value:function(t){this.stopListening(t)}},{key:"destroy",value:function(){ch(uh(e.prototype),"destroy",this).call(this),clearInterval(this._clearInfiniteLoopInterval),this._fireSelectionChangeDoneDebounced.cancel(),this._documentIsSelectingInactivityTimeoutDebounced.cancel()}},{key:"_reportInfiniteLoop",value:function(){}},{key:"_handleSelectionChange",value:function(t,e){if(this.isEnabled){var r=e.defaultView.getSelection();if(!this.checkShouldIgnoreEventFromTarget(r.anchorNode)){this.mutationObserver.flush();var n=this.domConverter.domSelectionToView(r);if(0!=n.rangeCount){if(this.view.hasDomSelection=!0,this.focusObserver.flush(),!this.selection.isEqual(n)||!this.domConverter.isDomSelectionCorrect(r))if(++this._loopbackCounter>60)this._reportInfiniteLoop();else if(this.selection.isSimilar(n))this.view.forceRender();else{var o={oldSelection:this.selection,newSelection:n,domSelection:r};this.document.fire("selectionChange",o),this._fireSelectionChangeDoneDebounced(o)}}else this.view.hasDomSelection=!1}}}},{key:"_clearInfiniteLoop",value:function(){this._loopbackCounter=0}}])&&nh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function fh(t){return fh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fh(t)}function ph(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dh(n.key),n)}}function dh(t){var e=function(t,e){if("object"!=fh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fh(e)?e:e+""}function hh(t,e,r){return e=bh(e),function(t,e){if(e&&("object"===fh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yh()?Reflect.construct(e,r||[],bh(t).constructor):e.apply(t,r))}function yh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yh=function(){return!!t})()}function bh(t){return bh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bh(t)}function vh(t,e){return vh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vh(t,e)}var mh=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=hh(this,e,[t])).domEventType=["compositionstart","compositionupdate","compositionend"];var n=r.document;return n.on("compositionstart",(function(){n.isComposing=!0}),{priority:"low"}),n.on("compositionend",(function(){n.isComposing=!1}),{priority:"low"}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vh(t,e)}(e,t),r=e,(n=[{key:"onDomEvent",value:function(t){this.fire(t.type,t,{data:t.data})}}])&&ph(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}($p);function gh(t){return gh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gh(t)}function wh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kh(n.key),n)}}function kh(t){var e=function(t,e){if("object"!=gh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=gh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==gh(e)?e:e+""}var _h=function(){return t=function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._files=r.cacheFiles?Oh(e):null,this._native=e},(e=[{key:"files",get:function(){return this._files||(this._files=Oh(this._native)),this._files}},{key:"types",get:function(){return this._native.types}},{key:"getData",value:function(t){return this._native.getData(t)}},{key:"setData",value:function(t,e){this._native.setData(t,e)}},{key:"effectAllowed",get:function(){return this._native.effectAllowed},set:function(t){this._native.effectAllowed=t}},{key:"dropEffect",get:function(){return this._native.dropEffect},set:function(t){this._native.dropEffect=t}},{key:"setDragImage",value:function(t,e,r){this._native.setDragImage(t,e,r)}},{key:"isCanceled",get:function(){return"none"==this._native.dropEffect||!!this._native.mozUserCancelled}}])&&wh(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Oh(t){var e=Array.from(t.files||[]),r=Array.from(t.items||[]);return e.length?e:r.filter((function(t){return"file"===t.kind})).map((function(t){return t.getAsFile()}))}function Ph(t){return Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ph(t)}function Sh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jh(n.key),n)}}function jh(t){var e=function(t,e){if("object"!=Ph(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ph(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ph(e)?e:e+""}function Eh(t,e,r){return e=Ah(e),function(t,e){if(e&&("object"===Ph(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Th()?Reflect.construct(e,r||[],Ah(t).constructor):e.apply(t,r))}function Th(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Th=function(){return!!t})()}function Ah(t){return Ah=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ah(t)}function xh(t,e){return xh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xh(t,e)}var Ch=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Eh(this,e,arguments)).domEventType="beforeinput",t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xh(t,e)}(e,t),r=e,(n=[{key:"onDomEvent",value:function(t){var e=t.getTargetRanges(),r=this.view,n=r.document,o=null,a=null,c=[];if(t.dataTransfer&&(o=new _h(t.dataTransfer)),null!==t.data?a=t.data:o&&(a=o.getData("text/plain")),n.selection.isFake)c=Array.from(n.selection.getRanges());else if(e.length)c=e.map((function(t){var e=r.domConverter.domPositionToView(t.startContainer,t.startOffset),n=r.domConverter.domPositionToView(t.endContainer,t.endOffset);return e?r.createRange(e,n):n?r.createRange(n):void 0})).filter((function(t){return!!t}));else if(i.isAndroid){var u=t.target.ownerDocument.defaultView.getSelection();c=Array.from(r.domConverter.domSelectionToView(u).getRanges())}if(i.isAndroid&&"insertCompositionText"==t.inputType&&a&&a.endsWith("\n"))this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:[r.createRange(c[0].end)]});else if("insertText"==t.inputType&&a&&a.includes("\n"))for(var s=a.split(/\n{1,2}/g),l=c,f=0;f<s.length;f++){var p=s[f];""!=p&&(this.fire(t.type,t,{data:p,dataTransfer:o,targetRanges:l,inputType:t.inputType,isComposing:t.isComposing}),l=[n.selection.getFirstRange()]),f+1<s.length&&(this.fire(t.type,t,{inputType:"insertParagraph",targetRanges:l}),l=[n.selection.getFirstRange()])}else this.fire(t.type,t,{data:a,dataTransfer:o,targetRanges:c,inputType:t.inputType,isComposing:t.isComposing})}}])&&Sh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}($p);function Dh(t){return Dh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dh(t)}function Rh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ih(n.key),n)}}function Ih(t){var e=function(t,e){if("object"!=Dh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dh(e)?e:e+""}function Bh(t,e,r){return e=Mh(e),function(t,e){if(e&&("object"===Dh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fh()?Reflect.construct(e,r||[],Mh(t).constructor):e.apply(t,r))}function Fh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fh=function(){return!!t})()}function Mh(t){return Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mh(t)}function Lh(t,e){return Lh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lh(t,e)}var Nh=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Bh(this,e,[t])).document.on("keydown",(function(t,e){if(r.isEnabled&&((o=e.keyCode)==zo.arrowright||o==zo.arrowleft||o==zo.arrowup||o==zo.arrowdown)){var n=new Us(r.document,"arrowKey",r.document.selection.getFirstRange());r.document.fire(n,e),n.stop.called&&t.stop()}var o})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lh(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(){}},{key:"stopObserving",value:function(){}}])&&Rh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function Vh(t){return Vh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vh(t)}function zh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$h(n.key),n)}}function $h(t){var e=function(t,e){if("object"!=Vh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vh(e)?e:e+""}function qh(t,e,r){return e=Wh(e),function(t,e){if(e&&("object"===Vh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Uh()?Reflect.construct(e,r||[],Wh(t).constructor):e.apply(t,r))}function Uh(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Uh=function(){return!!t})()}function Wh(t){return Wh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Wh(t)}function Gh(t,e){return Gh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Gh(t,e)}var Kh=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(r=qh(this,e,[t])).document;return n.on("keydown",(function(t,e){if(r.isEnabled&&e.keyCode==zo.tab&&!e.ctrlKey){var o=new Us(n,"tab",n.selection.getFirstRange());n.fire(o,e),o.stop.called&&t.stop()}})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gh(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(){}},{key:"stopObserving",value:function(){}}])&&zh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);const Hh=function(t){return fn(t,5)};function Jh(t){return Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jh(t)}function Yh(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Zh(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Zh(t,e){if(t){if("string"==typeof t)return Xh(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xh(t,e):void 0}}function Xh(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ty(n.key),n)}}function ty(t){var e=function(t,e){if("object"!=Jh(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jh(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jh(e)?e:e+""}function ey(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ey=function(){return!!t})()}function ry(t){return ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ry(t)}function ny(t,e){return ny=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ny(t,e)}var oy=function(t){function e(t){var r,n,o,a,c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=this,a=e,a=ry(a),r=function(t,e){if(e&&("object"===Jh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(o,ey()?Reflect.construct(a,c||[],ry(o).constructor):a.apply(o,c))).domRoots=new Map,r._initialDomRootAttributes=new WeakMap,r._observers=new Map,r._ongoingChange=!1,r._postFixersInProgress=!1,r._renderingDisabled=!1,r._hasChangedSinceTheLastRendering=!1,r.document=new bl(t),r.domConverter=new vp(r.document),r.set("isRenderingInProgress",!1),r.set("hasDomSelection",!1),r._renderer=new Qf(r.domConverter,r.document.selection),r._renderer.bind("isFocused","isSelecting","isComposing").to(r.document,"isFocused","isSelecting","isComposing"),r._writer=new Pf(r.document),r.addObserver(Wd),r.addObserver(eh),r.addObserver(lh),r.addObserver(Yp),r.addObserver(vd),r.addObserver(mh),r.addObserver(Nh),r.addObserver(Ch),r.addObserver(Kh),r.document.on("arrowKey",$f,{priority:"low"}),(n=r).document.on("arrowKey",(function(t,e){return function(t,e,r){if(e.keyCode==zo.arrowright){var n=e.domTarget.ownerDocument.defaultView.getSelection(),o=1==n.rangeCount&&n.getRangeAt(0).collapsed;if(o||e.shiftKey){var i=n.focusNode,a=n.focusOffset,c=r.domPositionToView(i,a);if(null===c)return;var u=!1,s=c.getLastMatchingPosition((function(t){return t.item.is("uiElement")&&(u=!0),!(!t.item.is("uiElement")&&!t.item.is("attributeElement"))}));if(u){var l=r.viewPositionToDom(s);o?n.collapse(l.parent,l.offset):n.extend(l.parent,l.offset)}}}}(0,e,n.domConverter)}),{priority:"low"}),r.on("render",(function(){r._render(),r.document.fire("layoutChanged"),r._hasChangedSinceTheLastRendering=!1})),r.listenTo(r.document.selection,"change",(function(){r._hasChangedSinceTheLastRendering=!0})),r.listenTo(r.document,"change:isFocused",(function(){r._hasChangedSinceTheLastRendering=!0})),i.isiOS&&r.listenTo(r.document,"blur",(function(t,e){r.domConverter.mapDomToView(e.domEvent.relatedTarget)||r.domConverter._clearDomSelection()})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ny(t,e)}(e,t),r=e,n=[{key:"attachDomRoot",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main",n=this.document.getRoot(r);n._name=t.tagName.toLowerCase();for(var o={},i=0,a=Array.from(t.attributes);i<a.length;i++){var c=a[i],u=c.name,s=c.value;o[u]=s,"class"===u?this._writer.addClass(s.split(" "),n):this._writer.setAttribute(u,s,n)}this._initialDomRootAttributes.set(t,o);var l=function(){e._writer.setAttribute("contenteditable",(!n.isReadOnly).toString(),n),n.isReadOnly?e._writer.addClass("ck-read-only",n):e._writer.removeClass("ck-read-only",n)};l(),this.domRoots.set(r,t),this.domConverter.bindElements(t,n),this._renderer.markToSync("children",n),this._renderer.markToSync("attributes",n),this._renderer.domDocuments.add(t.ownerDocument),n.on("change:children",(function(t,r){return e._renderer.markToSync("children",r)})),n.on("change:attributes",(function(t,r){return e._renderer.markToSync("attributes",r)})),n.on("change:text",(function(t,r){return e._renderer.markToSync("text",r)})),n.on("change:isReadOnly",(function(){return e.change(l)})),n.on("change",(function(){e._hasChangedSinceTheLastRendering=!0}));var f,p=Yh(this._observers.values());try{for(p.s();!(f=p.n()).done;)f.value.observe(t,r)}catch(t){p.e(t)}finally{p.f()}}},{key:"detachDomRoot",value:function(t){var e=this.domRoots.get(t);Array.from(e.attributes).forEach((function(t){var r=t.name;return e.removeAttribute(r)}));var r=this._initialDomRootAttributes.get(e);for(var n in r)e.setAttribute(n,r[n]);this.domRoots.delete(t),this.domConverter.unbindDomElement(e);var o,i=Yh(this._observers.values());try{for(i.s();!(o=i.n()).done;)o.value.stopObserving(e)}catch(t){i.e(t)}finally{i.f()}}},{key:"getDomRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.domRoots.get(t)}},{key:"addObserver",value:function(t){var e=this._observers.get(t);if(e)return e;e=new t(this),this._observers.set(t,e);var r,n,o,i=Yh(this.domRoots);try{for(i.s();!(r=i.n()).done;){var a=(n=r.value,o=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,o)||Zh(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=a[0],u=a[1];e.observe(u,c)}}catch(t){i.e(t)}finally{i.f()}return e.enable(),e}},{key:"getObserver",value:function(t){return this._observers.get(t)}},{key:"disableObservers",value:function(){var t,e=Yh(this._observers.values());try{for(e.s();!(t=e.n()).done;)t.value.disable()}catch(t){e.e(t)}finally{e.f()}}},{key:"enableObservers",value:function(){var t,e=Yh(this._observers.values());try{for(e.s();!(t=e.n()).done;)t.value.enable()}catch(t){e.e(t)}finally{e.f()}}},{key:"scrollToTheSelection",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.alignToTop,r=t.forceScroll,n=t.viewportOffset,o=void 0===n?20:n,i=t.ancestorOffset,a=void 0===i?20:i,c=this.document.selection.getFirstRange();if(c){var u=Hh({alignToTop:e,forceScroll:r,viewportOffset:o,ancestorOffset:a});"number"==typeof o&&(o={top:o,bottom:o,left:o,right:o});var s={target:this.domConverter.viewRangeToDom(c),viewportOffset:o,ancestorOffset:a,alignToTop:e,forceScroll:r};this.fire("scrollToTheSelection",s,u),function(t){var e=t.target,r=t.viewportOffset,n=void 0===r?0:r,o=t.ancestorOffset,i=void 0===o?0:o,a=t.alignToTop,c=t.forceScroll,u=Ro(e),s=u,l=null;for(n=function(t){return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:t}(n);s;){To({parent:Io(s==u?e:l),getRect:function(){return Bo(e,s)},alignToTop:a,ancestorOffset:i,forceScroll:c});var f=Bo(e,s);if(Eo({window:s,rect:f,viewportOffset:n,alignToTop:a,forceScroll:c}),s.parent!=s){if(l=s.frameElement,s=s.parent,!l)return}else s=null}}(s)}}},{key:"focus",value:function(){if(!this.document.isFocused){var t=this.document.selection.editableElement;t&&(this.domConverter.focus(t),this.forceRender())}}},{key:"change",value:function(t){if(this.isRenderingInProgress||this._postFixersInProgress)throw new A("cannot-change-view-tree",this);try{if(this._ongoingChange)return t(this._writer);this._ongoingChange=!0;var e=t(this._writer);return this._ongoingChange=!1,!this._renderingDisabled&&this._hasChangedSinceTheLastRendering&&(this._postFixersInProgress=!0,this.document._callPostFixers(this._writer),this._postFixersInProgress=!1,this.fire("render")),e}catch(t){A.rethrowUnexpectedError(t,this)}}},{key:"forceRender",value:function(){this._hasChangedSinceTheLastRendering=!0,this.getObserver(eh).flush(),this.change((function(){}))}},{key:"destroy",value:function(){var t,e=Yh(this._observers.values());try{for(e.s();!(t=e.n()).done;)t.value.destroy()}catch(t){e.e(t)}finally{e.f()}this.document.destroy(),this.stopListening()}},{key:"createPositionAt",value:function(t,e){return os._createAt(t,e)}},{key:"createPositionAfter",value:function(t){return os._createAfter(t)}},{key:"createPositionBefore",value:function(t){return os._createBefore(t)}},{key:"createRange",value:function(t,e){return new ys(t,e)}},{key:"createRangeOn",value:function(t){return ys._createOn(t)}},{key:"createRangeIn",value:function(t){return ys._createIn(t)}},{key:"createSelection",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t,e,r){if(ey())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&ny(o,r.prototype),o}(Es,e)}},{key:"_disableRendering",value:function(t){this._renderingDisabled=t,0==t&&this.change((function(){}))}},{key:"_render",value:function(){this.isRenderingInProgress=!0,this.disableObservers(),this._renderer.render(),this.enableObservers(),this.isRenderingInProgress=!1}}],n&&Qh(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function iy(t){return iy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iy(t)}function ay(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cy(n.key),n)}}function cy(t){var e=function(t,e){if("object"!=iy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=iy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==iy(e)?e:e+""}var uy=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"is",value:function(){throw new Error("is() method is abstract")}}])&&ay(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function sy(t){return sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(t)}function ly(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fy(n.key),n)}}function fy(t){var e=function(t,e){if("object"!=sy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sy(e)?e:e+""}function py(t,e,r){return e=hy(e),function(t,e){if(e&&("object"===sy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dy()?Reflect.construct(e,r||[],hy(t).constructor):e.apply(t,r))}function dy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dy=function(){return!!t})()}function hy(t){return hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hy(t)}function yy(t,e){return yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yy(t,e)}var by=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=py(this,e)).parent=null,r._attrs=Mi(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yy(t,e)}(e,t),r=e,n=[{key:"document",get:function(){return null}},{key:"index",get:function(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildIndex(this)))throw new A("model-node-not-found-in-parent",this);return t}},{key:"startOffset",get:function(){var t;if(!this.parent)return null;if(null===(t=this.parent.getChildStartOffset(this)))throw new A("model-node-not-found-in-parent",this);return t}},{key:"offsetSize",get:function(){return 1}},{key:"endOffset",get:function(){return this.parent?this.startOffset+this.offsetSize:null}},{key:"nextSibling",get:function(){var t=this.index;return null!==t&&this.parent.getChild(t+1)||null}},{key:"previousSibling",get:function(){var t=this.index;return null!==t&&this.parent.getChild(t-1)||null}},{key:"root",get:function(){for(var t=this;t.parent;)t=t.parent;return t}},{key:"isAttached",value:function(){return null!==this.parent&&this.root.isAttached()}},{key:"getPath",value:function(){for(var t=[],e=this;e.parent;)t.unshift(e.startOffset),e=e.parent;return t}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=t.includeSelf?this:this.parent;r;)e[t.parentFirst?"push":"unshift"](r),r=r.parent;return e}},{key:"getCommonAncestor",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.getAncestors(e),n=t.getAncestors(e),o=0;r[o]==n[o]&&r[o];)o++;return 0===o?null:r[o-1]}},{key:"isBefore",value:function(t){if(this==t)return!1;if(this.root!==t.root)return!1;var e=this.getPath(),r=t.getPath(),n=Ct(e,r);switch(n){case"prefix":return!0;case"extension":return!1;default:return e[n]<r[n]}}},{key:"isAfter",value:function(t){return this!=t&&this.root===t.root&&!this.isBefore(t)}},{key:"hasAttribute",value:function(t){return this._attrs.has(t)}},{key:"getAttribute",value:function(t){return this._attrs.get(t)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"toJSON",value:function(){var t={};return this._attrs.size&&(t.attributes=Array.from(this._attrs).reduce((function(t,e){return t[e[0]]=e[1],t}),{})),t}},{key:"_clone",value:function(t){return new this.constructor(this._attrs)}},{key:"_remove",value:function(){this.parent._removeChildren(this.index)}},{key:"_setAttribute",value:function(t,e){this._attrs.set(t,e)}},{key:"_setAttributesTo",value:function(t){this._attrs=Mi(t)}},{key:"_removeAttribute",value:function(t){return this._attrs.delete(t)}},{key:"_clearAttributes",value:function(){this._attrs.clear()}}],n&&ly(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(uy);function vy(t){return vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(t)}function my(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return gy(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?gy(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function gy(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function wy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ky(n.key),n)}}function ky(t){var e=function(t,e){if("object"!=vy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vy(e)?e:e+""}by.prototype.is=function(t){return"node"===t||"model:node"===t};var _y=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._nodes=[],e&&this._insertNodes(0,e)},e=[{key:Symbol.iterator,value:function(){return this._nodes[Symbol.iterator]()}},{key:"length",get:function(){return this._nodes.length}},{key:"maxOffset",get:function(){return this._nodes.reduce((function(t,e){return t+e.offsetSize}),0)}},{key:"getNode",value:function(t){return this._nodes[t]||null}},{key:"getNodeIndex",value:function(t){var e=this._nodes.indexOf(t);return-1==e?null:e}},{key:"getNodeStartOffset",value:function(t){var e=this.getNodeIndex(t);return null===e?null:this._nodes.slice(0,e).reduce((function(t,e){return t+e.offsetSize}),0)}},{key:"indexToOffset",value:function(t){if(t==this._nodes.length)return this.maxOffset;var e=this._nodes[t];if(!e)throw new A("model-nodelist-index-out-of-bounds",this);return this.getNodeStartOffset(e)}},{key:"offsetToIndex",value:function(t){var e,r=0,n=my(this._nodes);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(t>=r&&t<r+o.offsetSize)return this.getNodeIndex(o);r+=o.offsetSize}}catch(t){n.e(t)}finally{n.f()}if(r!=t)throw new A("model-nodelist-offset-out-of-bounds",this,{offset:t,nodeList:this});return this.length}},{key:"_insertNodes",value:function(t,e){var r,n=my(e);try{for(n.s();!(r=n.n()).done;)if(!(r.value instanceof by))throw new A("model-nodelist-insertnodes-not-node",this)}catch(t){n.e(t)}finally{n.f()}this._nodes=function(t,e,r,n){if(Math.max(e.length,t.length)>1e4)return t.slice(0,r).concat(e).concat(t.slice(r+n,t.length));var o,i=Array.from(t);return i.splice.apply(i,[r,n].concat(function(t){if(Array.isArray(t))return Li(t)}(o=e)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return Li(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Li(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),i}(this._nodes,Array.from(e),t,0)}},{key:"_removeNodes",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this._nodes.splice(t,e)}},{key:"toJSON",value:function(){return this._nodes.map((function(t){return t.toJSON()}))}}],e&&wy(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Oy(t){return Oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oy(t)}function Py(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sy(n.key),n)}}function Sy(t){var e=function(t,e){if("object"!=Oy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Oy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oy(e)?e:e+""}function jy(t,e,r){return e=Ay(e),function(t,e){if(e&&("object"===Oy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ey()?Reflect.construct(e,r||[],Ay(t).constructor):e.apply(t,r))}function Ey(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ey=function(){return!!t})()}function Ty(){return Ty="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ay(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ty.apply(this,arguments)}function Ay(t){return Ay=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ay(t)}function xy(t,e){return xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xy(t,e)}var Cy=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jy(this,e,[r]))._data=t||"",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xy(t,e)}(e,t),r=e,o=[{key:"fromJSON",value:function(t){return new e(t.data,t.attributes)}}],(n=[{key:"offsetSize",get:function(){return this.data.length}},{key:"data",get:function(){return this._data}},{key:"toJSON",value:function(){var t=Ty(Ay(e.prototype),"toJSON",this).call(this);return t.data=this.data,t}},{key:"_clone",value:function(){return new e(this.data,this.getAttributes())}}])&&Py(r.prototype,n),o&&Py(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(by);function Dy(t){return Dy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dy(t)}function Ry(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Iy(n.key),n)}}function Iy(t){var e=function(t,e){if("object"!=Dy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dy(e)?e:e+""}function By(t,e,r){return e=My(e),function(t,e){if(e&&("object"===Dy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fy()?Reflect.construct(e,r||[],My(t).constructor):e.apply(t,r))}function Fy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fy=function(){return!!t})()}function My(t){return My=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},My(t)}function Ly(t,e){return Ly=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ly(t,e)}Cy.prototype.is=function(t){return"$text"===t||"model:$text"===t||"text"===t||"model:text"===t||"node"===t||"model:node"===t};var Ny=function(t){function e(t,r,n){var o;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=By(this,e)).textNode=t,r<0||r>t.offsetSize)throw new A("model-textproxy-wrong-offsetintext",o);if(n<0||r+n>t.offsetSize)throw new A("model-textproxy-wrong-length",o);return o.data=t.data.substring(r,r+n),o.offsetInText=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ly(t,e)}(e,t),r=e,n=[{key:"startOffset",get:function(){return null!==this.textNode.startOffset?this.textNode.startOffset+this.offsetInText:null}},{key:"offsetSize",get:function(){return this.data.length}},{key:"endOffset",get:function(){return null!==this.startOffset?this.startOffset+this.offsetSize:null}},{key:"isPartial",get:function(){return this.offsetSize!==this.textNode.offsetSize}},{key:"parent",get:function(){return this.textNode.parent}},{key:"root",get:function(){return this.textNode.root}},{key:"getPath",value:function(){var t=this.textNode.getPath();return t.length>0&&(t[t.length-1]+=this.offsetInText),t}},{key:"getAncestors",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=[],r=t.includeSelf?this:this.parent;r;)e[t.parentFirst?"push":"unshift"](r),r=r.parent;return e}},{key:"hasAttribute",value:function(t){return this.textNode.hasAttribute(t)}},{key:"getAttribute",value:function(t){return this.textNode.getAttribute(t)}},{key:"getAttributes",value:function(){return this.textNode.getAttributes()}},{key:"getAttributeKeys",value:function(){return this.textNode.getAttributeKeys()}}],n&&Ry(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(uy);function Vy(t){return Vy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vy(t)}function zy(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return $y(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?$y(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function $y(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function qy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uy(n.key),n)}}function Uy(t){var e=function(t,e){if("object"!=Vy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vy(e)?e:e+""}function Wy(t,e,r){return e=Hy(e),function(t,e){if(e&&("object"===Vy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Gy()?Reflect.construct(e,r||[],Hy(t).constructor):e.apply(t,r))}function Gy(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Gy=function(){return!!t})()}function Ky(){return Ky="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Ky.apply(this,arguments)}function Hy(t){return Hy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Hy(t)}function Jy(t,e){return Jy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Jy(t,e)}Ny.prototype.is=function(t){return"$textProxy"===t||"model:$textProxy"===t||"textProxy"===t||"model:textProxy"===t};var Yy=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Wy(this,e,[r]))._children=new _y,o.name=t,n&&o._insertChild(0,n),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jy(t,e)}(e,t),r=e,n=[{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"getChild",value:function(t){return this._children.getNode(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(t){return this._children.getNodeIndex(t)}},{key:"getChildStartOffset",value:function(t){return this._children.getNodeStartOffset(t)}},{key:"offsetToIndex",value:function(t){return this._children.offsetToIndex(t)}},{key:"getNodeByPath",value:function(t){var e,r=this,n=zy(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r=r.getChild(r.offsetToIndex(o))}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"findAncestor",value:function(t){for(var e=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).includeSelf?this:this.parent;e;){if(e.name===t)return e;e=e.parent}return null}},{key:"toJSON",value:function(){var t=Ky(Hy(e.prototype),"toJSON",this).call(this);if(t.name=this.name,this._children.length>0){t.children=[];var r,n=zy(this._children);try{for(n.s();!(r=n.n()).done;){var o=r.value;t.children.push(o.toJSON())}}catch(t){n.e(t)}finally{n.f()}}return t}},{key:"_clone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0]?Array.from(this._children).map((function(t){return t._clone(!0)})):void 0;return new e(this.name,this.getAttributes(),t)}},{key:"_appendChild",value:function(t){this._insertChild(this.childCount,t)}},{key:"_insertChild",value:function(t,e){var r,n=function(t){return"string"==typeof t?[new Cy(t)]:(Dt(t)||(t=[t]),Array.from(t).map((function(t){return"string"==typeof t?new Cy(t):t instanceof Ny?new Cy(t.data,t.getAttributes()):t})))}(e),o=zy(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;null!==i.parent&&i._remove(),i.parent=this}}catch(t){o.e(t)}finally{o.f()}this._children._insertNodes(t,n)}},{key:"_removeChildren",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._children._removeNodes(t,r),o=zy(n);try{for(o.s();!(e=o.n()).done;)e.value.parent=null}catch(t){o.e(t)}finally{o.f()}return n}}],o=[{key:"fromJSON",value:function(t){var r;if(t.children){r=[];var n,o=zy(t.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.name?r.push(e.fromJSON(i)):r.push(Cy.fromJSON(i))}}catch(t){o.e(t)}finally{o.f()}}return new e(t.name,t.attributes,r)}}],n&&qy(r.prototype,n),o&&qy(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(by);function Zy(t){return Zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zy(t)}function Xy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qy(n.key),n)}}function Qy(t){var e=function(t,e){if("object"!=Zy(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Zy(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Zy(e)?e:e+""}Yy.prototype.is=function(t,e){return e?e===this.name&&("element"===t||"model:element"===t):"element"===t||"model:element"===t||"node"===t||"model:node"===t};var tb=function(){return t=function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e||!e.boundaries&&!e.startPosition)throw new A("model-tree-walker-no-start-position",null);var r=e.direction||"forward";if("forward"!=r&&"backward"!=r)throw new A("model-tree-walker-unknown-direction",e,{direction:r});this.direction=r,this.boundaries=e.boundaries||null,e.startPosition?this._position=e.startPosition.clone():this._position=fb._createAt(this.boundaries["backward"==this.direction?"end":"start"]),this.position.stickiness="toNone",this.singleCharacters=!!e.singleCharacters,this.shallow=!!e.shallow,this.ignoreElementEnd=!!e.ignoreElementEnd,this._boundaryStartParent=this.boundaries?this.boundaries.start.parent:null,this._boundaryEndParent=this.boundaries?this.boundaries.end.parent:null,this._visitedParent=this.position.parent},(e=[{key:Symbol.iterator,value:function(){return this}},{key:"position",get:function(){return this._position}},{key:"skip",value:function(t){var e,r,n,o;do{n=this.position,o=this._visitedParent;var i=this.next();e=i.done,r=i.value}while(!e&&t(r));e||(this._position=n,this._visitedParent=o)}},{key:"next",value:function(){return"forward"==this.direction?this._next():this._previous()}},{key:"_next",value:function(){var t=this.position,e=this.position.clone(),r=this._visitedParent;if(null===r.parent&&e.offset===r.maxOffset)return{done:!0,value:void 0};if(r===this._boundaryEndParent&&e.offset==this.boundaries.end.offset)return{done:!0,value:void 0};var n=pb(e,r),o=n||db(e,r,n);if(o instanceof Yy){if(this.shallow){if(this.boundaries&&this.boundaries.end.isBefore(e))return{done:!0,value:void 0};e.offset++}else e.path.push(0),this._visitedParent=o;return this._position=e,eb("elementStart",o,t,e,1)}if(o instanceof Cy){var i;if(this.singleCharacters)i=1;else{var a=o.endOffset;this._boundaryEndParent==r&&this.boundaries.end.offset<a&&(a=this.boundaries.end.offset),i=a-e.offset}var c=e.offset-o.startOffset,u=new Ny(o,c,i);return e.offset+=i,this._position=e,eb("text",u,t,e,i)}return e.path.pop(),e.offset++,this._position=e,this._visitedParent=r.parent,this.ignoreElementEnd?this._next():eb("elementEnd",r,t,e)}},{key:"_previous",value:function(){var t=this.position,e=this.position.clone(),r=this._visitedParent;if(null===r.parent&&0===e.offset)return{done:!0,value:void 0};if(r==this._boundaryStartParent&&e.offset==this.boundaries.start.offset)return{done:!0,value:void 0};var n=e.parent,o=pb(e,n),i=o||hb(e,n,o);if(i instanceof Yy)return e.offset--,this.shallow?(this._position=e,eb("elementStart",i,t,e,1)):(e.path.push(i.maxOffset),this._position=e,this._visitedParent=i,this.ignoreElementEnd?this._previous():eb("elementEnd",i,t,e));if(i instanceof Cy){var a;if(this.singleCharacters)a=1;else{var c=i.startOffset;this._boundaryStartParent==r&&this.boundaries.start.offset>c&&(c=this.boundaries.start.offset),a=e.offset-c}var u=e.offset-i.startOffset,s=new Ny(i,u-a,a);return e.offset-=a,this._position=e,eb("text",s,t,e,a)}return e.path.pop(),this._position=e,this._visitedParent=r.parent,eb("elementStart",r,t,e,1)}}])&&Xy(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function eb(t,e,r,n,o){return{done:!1,value:{type:t,item:e,previousPosition:r,nextPosition:n,length:o}}}function rb(t){return rb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rb(t)}function nb(t){return function(t){if(Array.isArray(t))return ob(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return ob(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ob(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ob(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ib(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ab(n.key),n)}}function ab(t){var e=function(t,e){if("object"!=rb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rb(e)?e:e+""}function cb(t,e,r){return e=sb(e),function(t,e){if(e&&("object"===rb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ub()?Reflect.construct(e,r||[],sb(t).constructor):e.apply(t,r))}function ub(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ub=function(){return!!t})()}function sb(t){return sb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sb(t)}function lb(t,e){return lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lb(t,e)}var fb=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=cb(this,e),!t.is("element")&&!t.is("documentFragment"))throw new A("model-position-root-invalid",t);if(!(r instanceof Array)||0===r.length)throw new A("model-position-path-incorrect-format",t,{path:r});return t.is("rootElement")?r=r.slice():(r=[].concat(nb(t.getPath()),nb(r)),t=t.root),n.root=t,n.path=r,n.stickiness=o,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lb(t,e)}(e,t),r=e,n=[{key:"offset",get:function(){return this.path[this.path.length-1]},set:function(t){this.path[this.path.length-1]=t}},{key:"parent",get:function(){for(var t=this.root,e=0;e<this.path.length-1;e++)if(!(t=t.getChild(t.offsetToIndex(this.path[e]))))throw new A("model-position-path-incorrect",this,{position:this});if(t.is("$text"))throw new A("model-position-path-incorrect",this,{position:this});return t}},{key:"index",get:function(){return this.parent.offsetToIndex(this.offset)}},{key:"textNode",get:function(){return pb(this,this.parent)}},{key:"nodeAfter",get:function(){var t=this.parent;return db(this,t,pb(this,t))}},{key:"nodeBefore",get:function(){var t=this.parent;return hb(this,t,pb(this,t))}},{key:"isAtStart",get:function(){return 0===this.offset}},{key:"isAtEnd",get:function(){return this.offset==this.parent.maxOffset}},{key:"compareWith",value:function(t){if(this.root!=t.root)return"different";var e=Ct(this.path,t.path);switch(e){case"same":return"same";case"prefix":return"before";case"extension":return"after";default:return this.path[e]<t.path[e]?"before":"after"}}},{key:"getLastMatchingPosition",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.startPosition=this;var r=new tb(e);return r.skip(t),r.position}},{key:"getParentPath",value:function(){return this.path.slice(0,-1)}},{key:"getAncestors",value:function(){var t=this.parent;return t.is("documentFragment")?[t]:t.getAncestors({includeSelf:!0})}},{key:"findAncestor",value:function(t){var e=this.parent;return e.is("element")?e.findAncestor(t,{includeSelf:!0}):null}},{key:"getCommonPath",value:function(t){if(this.root!=t.root)return[];var e=Ct(this.path,t.path),r="string"==typeof e?Math.min(this.path.length,t.path.length):e;return this.path.slice(0,r)}},{key:"getCommonAncestor",value:function(t){for(var e=this.getAncestors(),r=t.getAncestors(),n=0;e[n]==r[n]&&e[n];)n++;return 0===n?null:e[n-1]}},{key:"getShiftedBy",value:function(t){var e=this.clone(),r=e.offset+t;return e.offset=r<0?0:r,e}},{key:"isAfter",value:function(t){return"after"==this.compareWith(t)}},{key:"isBefore",value:function(t){return"before"==this.compareWith(t)}},{key:"isEqual",value:function(t){return"same"==this.compareWith(t)}},{key:"isTouching",value:function(t){if(this.root!==t.root)return!1;for(var e=Math.min(this.path.length,t.path.length),r=0;r<e;r++){var n=this.path[r]-t.path[r];if(n<-1||n>1)return!1;if(1===n)return yb(t,this,r);if(-1===n)return yb(this,t,r)}return this.path.length===t.path.length||(this.path.length>t.path.length?bb(this.path,e):bb(t.path,e))}},{key:"hasSameParentAs",value:function(t){return this.root===t.root&&"same"==Ct(this.getParentPath(),t.getParentPath())}},{key:"getTransformedByOperation",value:function(t){var r;switch(t.type){case"insert":r=this._getTransformedByInsertOperation(t);break;case"move":case"remove":case"reinsert":r=this._getTransformedByMoveOperation(t);break;case"split":r=this._getTransformedBySplitOperation(t);break;case"merge":r=this._getTransformedByMergeOperation(t);break;default:r=e._createAt(this)}return r}},{key:"_getTransformedByInsertOperation",value:function(t){return this._getTransformedByInsertion(t.position,t.howMany)}},{key:"_getTransformedByMoveOperation",value:function(t){return this._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany)}},{key:"_getTransformedBySplitOperation",value:function(t){var e=t.movedRange;return e.containsPosition(this)||e.start.isEqual(this)&&"toNext"==this.stickiness?this._getCombined(t.splitPosition,t.moveTargetPosition):t.graveyardPosition?this._getTransformedByMove(t.graveyardPosition,t.insertionPosition,1):this._getTransformedByInsertion(t.insertionPosition,1)}},{key:"_getTransformedByMergeOperation",value:function(t){var r,n=t.movedRange;return n.containsPosition(this)||n.start.isEqual(this)?(r=this._getCombined(t.sourcePosition,t.targetPosition),t.sourcePosition.isBefore(t.targetPosition)&&(r=r._getTransformedByDeletion(t.deletionPosition,1))):r=this.isEqual(t.deletionPosition)?e._createAt(t.deletionPosition):this._getTransformedByMove(t.deletionPosition,t.graveyardPosition,1),r}},{key:"_getTransformedByDeletion",value:function(t,r){var n=e._createAt(this);if(this.root!=t.root)return n;if("same"==Ct(t.getParentPath(),this.getParentPath())){if(t.offset<this.offset){if(t.offset+r>this.offset)return null;n.offset-=r}}else if("prefix"==Ct(t.getParentPath(),this.getParentPath())){var o=t.path.length-1;if(t.offset<=this.path[o]){if(t.offset+r>this.path[o])return null;n.path[o]-=r}}return n}},{key:"_getTransformedByInsertion",value:function(t,r){var n=e._createAt(this);if(this.root!=t.root)return n;if("same"==Ct(t.getParentPath(),this.getParentPath()))(t.offset<this.offset||t.offset==this.offset&&"toPrevious"!=this.stickiness)&&(n.offset+=r);else if("prefix"==Ct(t.getParentPath(),this.getParentPath())){var o=t.path.length-1;t.offset<=this.path[o]&&(n.path[o]+=r)}return n}},{key:"_getTransformedByMove",value:function(t,r,n){if(r=r._getTransformedByDeletion(t,n),t.isEqual(r))return e._createAt(this);var o=this._getTransformedByDeletion(t,n);return null===o||t.isEqual(this)&&"toNext"==this.stickiness||t.getShiftedBy(n).isEqual(this)&&"toPrevious"==this.stickiness?this._getCombined(t,r):o._getTransformedByInsertion(r,n)}},{key:"_getCombined",value:function(t,r){var n=t.path.length-1,o=e._createAt(r);return o.stickiness=this.stickiness,o.offset=o.offset+this.path[n]-t.offset,o.path=[].concat(nb(o.path),nb(this.path.slice(n+1))),o}},{key:"toJSON",value:function(){return{root:this.root.toJSON(),path:Array.from(this.path),stickiness:this.stickiness}}},{key:"clone",value:function(){return new this.constructor(this.root,this.path,this.stickiness)}}],o=[{key:"_createAt",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(t instanceof e)return new e(t.root,t.path,t.stickiness);var o=t;if("end"==r)r=o.maxOffset;else{if("before"==r)return this._createBefore(o,n);if("after"==r)return this._createAfter(o,n);if(0!==r&&!r)throw new A("model-createpositionat-offset-required",[this,t])}if(!o.is("element")&&!o.is("documentFragment"))throw new A("model-position-parent-incorrect",[this,t]);var i=o.getPath();return i.push(r),new this(o.root,i,n)}},{key:"_createAfter",value:function(t,e){if(!t.parent)throw new A("model-position-after-root",[this,t],{root:t});return this._createAt(t.parent,t.endOffset,e)}},{key:"_createBefore",value:function(t,e){if(!t.parent)throw new A("model-position-before-root",t,{root:t});return this._createAt(t.parent,t.startOffset,e)}},{key:"fromJSON",value:function(t,r){if("$graveyard"===t.root){var n=new e(r.graveyard,t.path);return n.stickiness=t.stickiness,n}if(!r.getRoot(t.root))throw new A("model-position-fromjson-no-root",r,{rootName:t.root});return new e(r.getRoot(t.root),t.path,t.stickiness)}}],n&&ib(r.prototype,n),o&&ib(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(uy);function pb(t,e){var r=e.getChild(e.offsetToIndex(t.offset));return r&&r.is("$text")&&r.startOffset<t.offset?r:null}function db(t,e,r){return null!==r?null:e.getChild(e.offsetToIndex(t.offset))}function hb(t,e,r){return null!==r?null:e.getChild(e.offsetToIndex(t.offset)-1)}function yb(t,e,r){return r+1!==t.path.length&&!!bb(e.path,r+1)&&!!function(t,e){for(var r=t.parent,n=t.path.length-1,o=0;n>=e;){if(t.path[n]+o!==r.maxOffset)return!1;o=1,n--,r=r.parent}return!0}(t,r+1)}function bb(t,e){for(;e<t.length;){if(0!==t[e])return!1;e++}return!0}function vb(t){return vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vb(t)}function mb(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=gb(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function gb(t,e){if(t){if("string"==typeof t)return wb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wb(t,e):void 0}}function wb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kb(){kb=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==vb(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(vb(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function _b(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ob(n.key),n)}}function Ob(t){var e=function(t,e){if("object"!=vb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vb(e)?e:e+""}function Pb(t,e,r){return e=jb(e),function(t,e){if(e&&("object"===vb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Sb()?Reflect.construct(e,r||[],jb(t).constructor):e.apply(t,r))}function Sb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Sb=function(){return!!t})()}function jb(t){return jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jb(t)}function Eb(t,e){return Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Eb(t,e)}fb.prototype.is=function(t){return"position"===t||"model:position"===t};var Tb=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Pb(this,e)).start=fb._createAt(t),n.end=r?fb._createAt(r):fb._createAt(t),n.start.stickiness=n.isCollapsed?"toNone":"toNext",n.end.stickiness=n.isCollapsed?"toNone":"toPrevious",n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eb(t,e)}(e,t),r=e,n=[{key:Symbol.iterator,value:kb().mark((function t(){return kb().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(new tb({boundaries:this,ignoreElementEnd:!0}),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"isCollapsed",get:function(){return this.start.isEqual(this.end)}},{key:"isFlat",get:function(){return"same"==Ct(this.start.getParentPath(),this.end.getParentPath())}},{key:"root",get:function(){return this.start.root}},{key:"containsPosition",value:function(t){return t.isAfter(this.start)&&t.isBefore(this.end)}},{key:"containsRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.isCollapsed&&(e=!1);var r=this.containsPosition(t.start)||e&&this.start.isEqual(t.start),n=this.containsPosition(t.end)||e&&this.end.isEqual(t.end);return r&&n}},{key:"containsItem",value:function(t){var e=fb._createBefore(t);return this.containsPosition(e)||this.start.isEqual(e)}},{key:"isEqual",value:function(t){return this.start.isEqual(t.start)&&this.end.isEqual(t.end)}},{key:"isIntersecting",value:function(t){return this.start.isBefore(t.end)&&this.end.isAfter(t.start)}},{key:"getDifference",value:function(t){var r=[];return this.isIntersecting(t)?(this.containsPosition(t.start)&&r.push(new e(this.start,t.start)),this.containsPosition(t.end)&&r.push(new e(t.end,this.end))):r.push(new e(this.start,this.end)),r}},{key:"getIntersection",value:function(t){if(this.isIntersecting(t)){var r=this.start,n=this.end;return this.containsPosition(t.start)&&(r=t.start),this.containsPosition(t.end)&&(n=t.end),new e(r,n)}return null}},{key:"getJoined",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.isIntersecting(t);if(n||(n=this.start.isBefore(t.start)?r?this.end.isTouching(t.start):this.end.isEqual(t.start):r?t.end.isTouching(this.start):t.end.isEqual(this.start)),!n)return null;var o=this.start,i=this.end;return t.start.isBefore(o)&&(o=t.start),t.end.isAfter(i)&&(i=t.end),new e(o,i)}},{key:"getMinimalFlatRanges",value:function(){for(var t=[],r=this.start.getCommonPath(this.end).length,n=fb._createAt(this.start),o=n.parent;n.path.length>r+1;){var i=o.maxOffset-n.offset;0!==i&&t.push(new e(n,n.getShiftedBy(i))),n.path=n.path.slice(0,-1),n.offset++,o=o.parent}for(;n.path.length<=this.end.path.length;){var a=this.end.path[n.path.length-1],c=a-n.offset;0!==c&&t.push(new e(n,n.getShiftedBy(c))),n.offset=a,n.path.push(0)}return t}},{key:"getWalker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return t.boundaries=this,new tb(t)}},{key:"getItems",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kb().mark((function r(){var n,o,i,a;return kb().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.boundaries=t,e.ignoreElementEnd=!0,n=new tb(e),o=mb(n),r.prev=4,o.s();case 6:if((i=o.n()).done){r.next=12;break}return a=i.value,r.next=10,a.item;case 10:r.next=6;break;case 12:r.next=17;break;case 14:r.prev=14,r.t0=r.catch(4),o.e(r.t0);case 17:return r.prev=17,o.f(),r.finish(17);case 20:case"end":return r.stop()}}),r,null,[[4,14,17,20]])}))()}},{key:"getPositions",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return kb().mark((function r(){var n,o,i,a;return kb().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.boundaries=t,n=new tb(e),r.next=4,n.position;case 4:o=mb(n),r.prev=5,o.s();case 7:if((i=o.n()).done){r.next=13;break}return a=i.value,r.next=11,a.nextPosition;case 11:r.next=7;break;case 13:r.next=18;break;case 15:r.prev=15,r.t0=r.catch(5),o.e(r.t0);case 18:return r.prev=18,o.f(),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[5,15,18,21]])}))()}},{key:"getTransformedByOperation",value:function(t){switch(t.type){case"insert":return this._getTransformedByInsertOperation(t);case"move":case"remove":case"reinsert":return this._getTransformedByMoveOperation(t);case"split":return[this._getTransformedBySplitOperation(t)];case"merge":return[this._getTransformedByMergeOperation(t)]}return[new e(this.start,this.end)]}},{key:"getTransformedByOperations",value:function(t){var r,n,o=[new e(this.start,this.end)],i=mb(t);try{for(i.s();!(r=i.n()).done;)for(var a=r.value,c=0;c<o.length;c++){var u=o[c].getTransformedByOperation(a);o.splice.apply(o,[c,1].concat(function(t){if(Array.isArray(t))return wb(t)}(n=u)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||gb(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())),c+=u.length-1}}catch(t){i.e(t)}finally{i.f()}for(var s=0;s<o.length;s++)for(var l=o[s],f=s+1;f<o.length;f++){var p=o[f];(l.containsRange(p)||p.containsRange(l)||l.isEqual(p))&&o.splice(f,1)}return o}},{key:"getCommonAncestor",value:function(){return this.start.getCommonAncestor(this.end)}},{key:"getContainedElement",value:function(){if(this.isCollapsed)return null;var t=this.start.nodeAfter,e=this.end.nodeBefore;return t&&t.is("element")&&t===e?t:null}},{key:"toJSON",value:function(){return{start:this.start.toJSON(),end:this.end.toJSON()}}},{key:"clone",value:function(){return new this.constructor(this.start,this.end)}},{key:"_getTransformedByInsertOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._getTransformedByInsertion(t.position,t.howMany,e)}},{key:"_getTransformedByMoveOperation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=t.sourcePosition,n=t.howMany,o=t.targetPosition;return this._getTransformedByMove(r,o,n,e)}},{key:"_getTransformedBySplitOperation",value:function(t){var r=this.start._getTransformedBySplitOperation(t),n=this.end._getTransformedBySplitOperation(t);return this.end.isEqual(t.insertionPosition)&&(n=this.end.getShiftedBy(1)),r.root!=n.root&&(n=this.end.getShiftedBy(-1)),new e(r,n)}},{key:"_getTransformedByMergeOperation",value:function(t){if(this.start.isEqual(t.targetPosition)&&this.end.isEqual(t.deletionPosition))return new e(this.start);var r=this.start._getTransformedByMergeOperation(t),n=this.end._getTransformedByMergeOperation(t);return r.root!=n.root&&(n=this.end.getShiftedBy(-1)),r.isAfter(n)?(t.sourcePosition.isBefore(t.targetPosition)?(r=fb._createAt(n)).offset=0:(t.deletionPosition.isEqual(r)||(n=t.deletionPosition),r=t.targetPosition),new e(r,n)):new e(r,n)}},{key:"_getTransformedByInsertion",value:function(t,r){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&this.containsPosition(t))return[new e(this.start,t),new e(t.getShiftedBy(r),this.end._getTransformedByInsertion(t,r))];var n=new e(this.start,this.end);return n.start=n.start._getTransformedByInsertion(t,r),n.end=n.end._getTransformedByInsertion(t,r),[n]}},{key:"_getTransformedByMove",value:function(t,r,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this.isCollapsed)return[new e(this.start._getTransformedByMove(t,r,n))];var i,a=e._createFromPositionAndShift(t,n),c=r._getTransformedByDeletion(t,n);if(this.containsPosition(r)&&!o&&(a.containsPosition(this.start)||a.containsPosition(this.end)))return[new e(this.start._getTransformedByMove(t,r,n),this.end._getTransformedByMove(t,r,n))];var u=this.getDifference(a),s=null,l=this.getIntersection(a);if(1==u.length?s=new e(u[0].start._getTransformedByDeletion(t,n),u[0].end._getTransformedByDeletion(t,n)):2==u.length&&(s=new e(this.start,this.end._getTransformedByDeletion(t,n))),i=s?s._getTransformedByInsertion(c,n,null!==l||o):[],l){var f=new e(l.start._getCombined(a.start,c),l.end._getCombined(a.start,c));2==i.length?i.splice(1,0,f):i.push(f)}return i}},{key:"_getTransformedByDeletion",value:function(t,r){var n=this.start._getTransformedByDeletion(t,r),o=this.end._getTransformedByDeletion(t,r);return null==n&&null==o?null:(null==n&&(n=t),null==o&&(o=t),new e(n,o))}}],o=[{key:"_createFromPositionAndShift",value:function(t,e){var r=t,n=t.getShiftedBy(e);return e>0?new this(r,n):new this(n,r)}},{key:"_createIn",value:function(t){return new this(fb._createAt(t,0),fb._createAt(t,t.maxOffset))}},{key:"_createOn",value:function(t){return this._createFromPositionAndShift(fb._createBefore(t),t.offsetSize)}},{key:"_createFromRanges",value:function(t){if(0===t.length)throw new A("range-create-from-ranges-empty-array",null);if(1==t.length)return t[0].clone();var e=t[0];t.sort((function(t,e){return t.start.isAfter(e.start)?1:-1}));var r=t.indexOf(e),n=new this(e.start,e.end);if(r>0)for(var o=r-1;t[o].end.isEqual(n.start);o++)n.start=fb._createAt(t[o].start);for(var i=r+1;i<t.length&&t[i].start.isEqual(n.end);i++)n.end=fb._createAt(t[i].end);return n}},{key:"fromJSON",value:function(t,e){return new this(fb.fromJSON(t.start,e),fb.fromJSON(t.end,e))}}],n&&_b(r.prototype,n),o&&_b(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(uy);function Ab(t){return Ab="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ab(t)}function xb(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Cb(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Cb(t,e){if(t){if("string"==typeof t)return Db(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Db(t,e):void 0}}function Db(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ib(n.key),n)}}function Ib(t){var e=function(t,e){if("object"!=Ab(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ab(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ab(e)?e:e+""}function Bb(t,e,r){return e=Mb(e),function(t,e){if(e&&("object"===Ab(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fb()?Reflect.construct(e,r||[],Mb(t).constructor):e.apply(t,r))}function Fb(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fb=function(){return!!t})()}function Mb(t){return Mb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Mb(t)}function Lb(t,e){return Lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Lb(t,e)}Tb.prototype.is=function(t){return"range"===t||"model:range"===t};var Nb=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Bb(this,e))._modelToViewMapping=new WeakMap,t._viewToModelMapping=new WeakMap,t._viewToModelLengthCallbacks=new Map,t._markerNameToElements=new Map,t._elementToMarkerNames=new Map,t._deferredBindingRemovals=new Map,t._unboundMarkerNames=new Set,t.on("modelToViewPosition",(function(e,r){if(!r.viewPosition){var n=t._modelToViewMapping.get(r.modelPosition.parent);if(!n)throw new A("mapping-model-position-view-parent-not-found",t,{modelPosition:r.modelPosition});r.viewPosition=t.findPositionIn(n,r.modelPosition.offset)}}),{priority:"low"}),t.on("viewToModelPosition",(function(e,r){if(!r.modelPosition){var n=t.findMappedViewAncestor(r.viewPosition),o=t._viewToModelMapping.get(n),i=t._toModelOffset(r.viewPosition.parent,r.viewPosition.offset,n);r.modelPosition=fb._createAt(o,i)}}),{priority:"low"}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lb(t,e)}(e,t),r=e,n=[{key:"bindElements",value:function(t,e){this._modelToViewMapping.set(t,e),this._viewToModelMapping.set(e,t)}},{key:"unbindViewElement",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.toModelElement(t);if(this._elementToMarkerNames.has(t)){var n,o=xb(this._elementToMarkerNames.get(t));try{for(o.s();!(n=o.n()).done;){var i=n.value;this._unboundMarkerNames.add(i)}}catch(t){o.e(t)}finally{o.f()}}e.defer?this._deferredBindingRemovals.set(t,t.root):(this._viewToModelMapping.delete(t),this._modelToViewMapping.get(r)==t&&this._modelToViewMapping.delete(r))}},{key:"unbindModelElement",value:function(t){var e=this.toViewElement(t);this._modelToViewMapping.delete(t),this._viewToModelMapping.get(e)==t&&this._viewToModelMapping.delete(e)}},{key:"bindElementToMarker",value:function(t,e){var r=this._markerNameToElements.get(e)||new Set;r.add(t);var n=this._elementToMarkerNames.get(t)||new Set;n.add(e),this._markerNameToElements.set(e,r),this._elementToMarkerNames.set(t,n)}},{key:"unbindElementFromMarkerName",value:function(t,e){var r=this._markerNameToElements.get(e);r&&(r.delete(t),0==r.size&&this._markerNameToElements.delete(e));var n=this._elementToMarkerNames.get(t);n&&(n.delete(e),0==n.size&&this._elementToMarkerNames.delete(t))}},{key:"flushUnboundMarkerNames",value:function(){var t=Array.from(this._unboundMarkerNames);return this._unboundMarkerNames.clear(),t}},{key:"flushDeferredBindings",value:function(){var t,e,r,n=xb(this._deferredBindingRemovals);try{for(n.s();!(t=n.n()).done;){var o=(e=t.value,r=2,function(t){if(Array.isArray(t))return t}(e)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(e,r)||Cb(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],a=o[1];i.root==a&&this.unbindViewElement(i)}}catch(t){n.e(t)}finally{n.f()}this._deferredBindingRemovals=new Map}},{key:"clearBindings",value:function(){this._modelToViewMapping=new WeakMap,this._viewToModelMapping=new WeakMap,this._markerNameToElements=new Map,this._elementToMarkerNames=new Map,this._unboundMarkerNames=new Set,this._deferredBindingRemovals=new Map}},{key:"toModelElement",value:function(t){return this._viewToModelMapping.get(t)}},{key:"toViewElement",value:function(t){return this._modelToViewMapping.get(t)}},{key:"toModelRange",value:function(t){return new Tb(this.toModelPosition(t.start),this.toModelPosition(t.end))}},{key:"toViewRange",value:function(t){return new ys(this.toViewPosition(t.start),this.toViewPosition(t.end))}},{key:"toModelPosition",value:function(t){var e={viewPosition:t,mapper:this};return this.fire("viewToModelPosition",e),e.modelPosition}},{key:"toViewPosition",value:function(t){var e={modelPosition:t,mapper:this,isPhantom:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).isPhantom};return this.fire("modelToViewPosition",e),e.viewPosition}},{key:"markerNameToElements",value:function(t){var e=this._markerNameToElements.get(t);if(!e)return null;var r,n=new Set,o=xb(e);try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.is("attributeElement")){var a,c=xb(i.getElementsWithSameId());try{for(c.s();!(a=c.n()).done;){var u=a.value;n.add(u)}}catch(t){c.e(t)}finally{c.f()}}else n.add(i)}}catch(t){o.e(t)}finally{o.f()}return n}},{key:"registerViewToModelLength",value:function(t,e){this._viewToModelLengthCallbacks.set(t,e)}},{key:"findMappedViewAncestor",value:function(t){for(var e=t.parent;!this._viewToModelMapping.has(e);)e=e.parent;return e}},{key:"_toModelOffset",value:function(t,e,r){if(r!=t)return this._toModelOffset(t.parent,t.index,r)+this._toModelOffset(t,e,t);if(t.is("$text"))return e;for(var n=0,o=0;o<e;o++)n+=this.getModelLength(t.getChild(o));return n}},{key:"getModelLength",value:function(t){if(this._viewToModelLengthCallbacks.get(t.name))return this._viewToModelLengthCallbacks.get(t.name)(t);if(this._viewToModelMapping.has(t))return 1;if(t.is("$text"))return t.data.length;if(t.is("uiElement"))return 0;var e,r=0,n=xb(t.getChildren());try{for(n.s();!(e=n.n()).done;){var o=e.value;r+=this.getModelLength(o)}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"findPositionIn",value:function(t,e){var r,n=0,o=0,i=0;if(t.is("$text"))return new os(t,e);for(;o<e;)r=t.getChild(i),o+=n=this.getModelLength(r),i++;return o==e?this._moveViewPositionToTextNode(new os(t,i)):this.findPositionIn(r,e-(o-n))}},{key:"_moveViewPositionToTextNode",value:function(t){var e=t.nodeBefore,r=t.nodeAfter;return e instanceof sc?new os(e,e.data.length):r instanceof sc?new os(r,0):t}}],n&&Rb(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function Vb(t){return Vb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vb(t)}function zb(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||qb(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $b(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=qb(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function qb(t,e){if(t){if("string"==typeof t)return Ub(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ub(t,e):void 0}}function Ub(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Wb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Gb(n.key),n)}}function Gb(t){var e=function(t,e){if("object"!=Vb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Vb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Vb(e)?e:e+""}var Kb=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._consumable=new Map,this._textProxyRegistry=new Map},(e=[{key:"add",value:function(t,e){e=Hb(e),t instanceof Ny&&(t=this._getSymbolForTextProxy(t)),this._consumable.has(t)||this._consumable.set(t,new Map),this._consumable.get(t).set(e,!0)}},{key:"consume",value:function(t,e){return e=Hb(e),t instanceof Ny&&(t=this._getSymbolForTextProxy(t)),!!this.test(t,e)&&(this._consumable.get(t).set(e,!1),!0)}},{key:"test",value:function(t,e){e=Hb(e),t instanceof Ny&&(t=this._getSymbolForTextProxy(t));var r=this._consumable.get(t);if(void 0===r)return null;var n=r.get(e);return void 0===n?null:n}},{key:"revert",value:function(t,e){e=Hb(e),t instanceof Ny&&(t=this._getSymbolForTextProxy(t));var r=this.test(t,e);return!1===r?(this._consumable.get(t).set(e,!0),!0):!0!==r&&null}},{key:"verifyAllConsumed",value:function(t){var e,r=[],n=$b(this._consumable);try{for(n.s();!(e=n.n()).done;){var o,i=zb(e.value,2),a=i[0],c=$b(i[1]);try{for(c.s();!(o=c.n()).done;){var u=zb(o.value,2),s=u[0],l=u[1],f=s.split(":")[0];l&&t==f&&r.push({event:s,item:a.name||a.description})}}catch(t){c.e(t)}finally{c.f()}}}catch(t){n.e(t)}finally{n.f()}if(r.length)throw new A("conversion-model-consumable-not-consumed",null,{items:r})}},{key:"_getSymbolForTextProxy",value:function(t){var e=null,r=this._textProxyRegistry.get(t.startOffset);if(r){var n=r.get(t.endOffset);n&&(e=n.get(t.parent))}return e||(e=this._addSymbolForTextProxy(t)),e}},{key:"_addSymbolForTextProxy",value:function(t){var e,r,n=t.startOffset,o=t.endOffset,i=t.parent,a=Symbol("$textProxy:"+t.data);return(e=this._textProxyRegistry.get(n))||(e=new Map,this._textProxyRegistry.set(n,e)),(r=e.get(o))||(r=new Map,e.set(o,r)),r.set(i,a),a}}])&&Wb(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Hb(t){var e=t.split(":");return"insert"==e[0]?e[0]:"addMarker"==e[0]||"removeMarker"==e[0]?t:e.length>1?e[0]+":"+e[1]:e[0]}function Jb(t){return Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jb(t)}function Yb(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Zb(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Zb(t,e){if(t){if("string"==typeof t)return Xb(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Xb(t,e):void 0}}function Xb(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Qb(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tv(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Qb(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=rv(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Qb(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function ev(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rv(n.key),n)}}function rv(t){var e=function(t,e){if("object"!=Jb(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Jb(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Jb(e)?e:e+""}function nv(t,e,r){return e=iv(e),function(t,e){if(e&&("object"===Jb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ov()?Reflect.construct(e,r||[],iv(t).constructor):e.apply(t,r))}function ov(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ov=function(){return!!t})()}function iv(t){return iv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iv(t)}function av(t,e){return av=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},av(t,e)}var cv=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=nv(this,e))._conversionApi=tv({dispatcher:r},t),r._firedEventsMap=new WeakMap,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&av(t,e)}(e,t),r=e,n=[{key:"convertChanges",value:function(t,e,r){var n,o=this._createConversionApi(r,t.getRefreshedItems()),i=Yb(t.getMarkersToRemove());try{for(i.s();!(n=i.n()).done;){var a=n.value;this._convertMarkerRemove(a.name,a.range,o)}}catch(t){i.e(t)}finally{i.f()}var c,u=Yb(this._reduceChanges(t.getChanges()));try{for(u.s();!(c=u.n()).done;){var s=c.value;"insert"===s.type?this._convertInsert(Tb._createFromPositionAndShift(s.position,s.length),o):"reinsert"===s.type?this._convertReinsert(Tb._createFromPositionAndShift(s.position,s.length),o):"remove"===s.type?this._convertRemove(s.position,s.length,s.name,o):this._convertAttribute(s.range,s.attributeKey,s.attributeOldValue,s.attributeNewValue,o)}}catch(t){u.e(t)}finally{u.f()}o.mapper.flushDeferredBindings();var l,f=Yb(o.mapper.flushUnboundMarkerNames());try{for(f.s();!(l=f.n()).done;){var p=l.value,d=e.get(p).getRange();this._convertMarkerRemove(p,d,o),this._convertMarkerAdd(p,d,o)}}catch(t){f.e(t)}finally{f.f()}var h,y=Yb(t.getMarkersToAdd());try{for(y.s();!(h=y.n()).done;){var b=h.value;this._convertMarkerAdd(b.name,b.range,o)}}catch(t){y.e(t)}finally{y.f()}o.consumable.verifyAllConsumed("insert")}},{key:"convert",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=this._createConversionApi(r,void 0,n);this._convertInsert(t,o);var i,a,c,u=Yb(e);try{for(u.s();!(i=u.n()).done;){var s=(a=i.value,c=2,function(t){if(Array.isArray(t))return t}(a)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(a,c)||Zb(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),l=s[0],f=s[1];this._convertMarkerAdd(l,f,o)}}catch(t){u.e(t)}finally{u.f()}o.consumable.verifyAllConsumed("insert")}},{key:"convertSelection",value:function(t,e,r){var n=this._createConversionApi(r);this.fire("cleanSelection",{selection:t},n);var o=t.getFirstPosition().root;if(n.mapper.toViewElement(o)){var i=Array.from(e.getMarkersAtPosition(t.getFirstPosition()));if(this._addConsumablesForSelection(n.consumable,t,i),this.fire("selection",{selection:t},n),t.isCollapsed){for(var a=0,c=i;a<c.length;a++){var u=c[a];if(n.consumable.test(t,"addMarker:"+u.name)){var s=u.getRange();if(!uv(t.getFirstPosition(),u,n.mapper))continue;var l={item:t,markerName:u.name,markerRange:s};this.fire("addMarker:".concat(u.name),l,n)}}var f,p=Yb(t.getAttributeKeys());try{for(p.s();!(f=p.n()).done;){var d=f.value;if(n.consumable.test(t,"attribute:"+d)){var h={item:t,range:t.getFirstRange(),attributeKey:d,attributeOldValue:null,attributeNewValue:t.getAttribute(d)};this.fire("attribute:".concat(d,":$text"),h,n)}}}catch(t){p.e(t)}finally{p.f()}}}}},{key:"_convertInsert",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).doNotAddConsumables||this._addConsumablesForInsert(e.consumable,t);var r,n=Yb(Array.from(t.getWalker({shallow:!0})).map(sv));try{for(n.s();!(r=n.n()).done;){var o=r.value;this._testAndFire("insert",o,e)}}catch(t){n.e(t)}finally{n.f()}}},{key:"_convertRemove",value:function(t,e,r,n){this.fire("remove:".concat(r),{position:t,length:e},n)}},{key:"_convertAttribute",value:function(t,e,r,n,o){this._addConsumablesForRange(o.consumable,t,"attribute:".concat(e));var i,a=Yb(t);try{for(a.s();!(i=a.n()).done;){var c=i.value,u={item:c.item,range:Tb._createFromPositionAndShift(c.previousPosition,c.length),attributeKey:e,attributeOldValue:r,attributeNewValue:n};this._testAndFire("attribute:".concat(e),u,o)}}catch(t){a.e(t)}finally{a.f()}}},{key:"_convertReinsert",value:function(t,e){var r=Array.from(t.getWalker({shallow:!0}));this._addConsumablesForInsert(e.consumable,r);var n,o=Yb(r.map(sv));try{for(o.s();!(n=o.n()).done;){var i=n.value;this._testAndFire("insert",tv(tv({},i),{},{reconversion:!0}),e)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_convertMarkerAdd",value:function(t,e,r){if("$graveyard"!=e.root.rootName){var n="addMarker:".concat(t);if(r.consumable.add(e,n),this.fire(n,{markerName:t,markerRange:e},r),r.consumable.consume(e,n)){this._addConsumablesForRange(r.consumable,e,n);var o,i=Yb(e.getItems());try{for(i.s();!(o=i.n()).done;){var a=o.value;if(r.consumable.test(a,n)){var c={item:a,range:Tb._createOn(a),markerName:t,markerRange:e};this.fire(n,c,r)}}}catch(t){i.e(t)}finally{i.f()}}}}},{key:"_convertMarkerRemove",value:function(t,e,r){"$graveyard"!=e.root.rootName&&this.fire("removeMarker:".concat(t),{markerName:t,markerRange:e},r)}},{key:"_reduceChanges",value:function(t){var e={changes:t};return this.fire("reduceChanges",e),e.changes}},{key:"_addConsumablesForInsert",value:function(t,e){var r,n=Yb(e);try{for(n.s();!(r=n.n()).done;){var o=r.value.item;if(null===t.test(o,"insert")){t.add(o,"insert");var i,a=Yb(o.getAttributeKeys());try{for(a.s();!(i=a.n()).done;){var c=i.value;t.add(o,"attribute:"+c)}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){n.e(t)}finally{n.f()}return t}},{key:"_addConsumablesForRange",value:function(t,e,r){var n,o=Yb(e.getItems());try{for(o.s();!(n=o.n()).done;){var i=n.value;t.add(i,r)}}catch(t){o.e(t)}finally{o.f()}return t}},{key:"_addConsumablesForSelection",value:function(t,e,r){t.add(e,"selection");var n,o=Yb(r);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.add(e,"addMarker:"+i.name)}}catch(t){o.e(t)}finally{o.f()}var a,c=Yb(e.getAttributeKeys());try{for(c.s();!(a=c.n()).done;){var u=a.value;t.add(e,"attribute:"+u)}}catch(t){c.e(t)}finally{c.f()}return t}},{key:"_testAndFire",value:function(t,e,r){var n=function(t,e){var r=e.item.is("element")?e.item.name:"$text";return"".concat(t,":").concat(r)}(t,e),o=e.item.is("$textProxy")?r.consumable._getSymbolForTextProxy(e.item):e.item,i=this._firedEventsMap.get(r),a=i.get(o);if(a){if(a.has(n))return;a.add(n)}else i.set(o,new Set([n]));this.fire(n,e,r)}},{key:"_testAndFireAddAttributes",value:function(t,e){var r,n={item:t,range:Tb._createOn(t)},o=Yb(n.item.getAttributeKeys());try{for(o.s();!(r=o.n()).done;){var i=r.value;n.attributeKey=i,n.attributeOldValue=null,n.attributeNewValue=n.item.getAttribute(i),this._testAndFire("attribute:".concat(i),n,e)}}catch(t){o.e(t)}finally{o.f()}}},{key:"_createConversionApi",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=tv(tv({},this._conversionApi),{},{consumable:new Kb,writer:t,options:n,convertItem:function(t){return e._convertInsert(Tb._createOn(t),o)},convertChildren:function(t){return e._convertInsert(Tb._createIn(t),o,{doNotAddConsumables:!0})},convertAttributes:function(t){return e._testAndFireAddAttributes(t,o)},canReuseView:function(t){return!r.has(o.mapper.toModelElement(t))}});return this._firedEventsMap.set(o,new Map),o}}],n&&ev(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function uv(t,e,r){var n=e.getRange(),o=Array.from(t.getAncestors());return o.shift(),o.reverse(),!o.some((function(t){if(n.containsItem(t))return!!r.toViewElement(t).getCustomProperty("addHighlight")}))}function sv(t){return{item:t.item,range:Tb._createFromPositionAndShift(t.previousPosition,t.length)}}function lv(t){return lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lv(t)}function fv(){fv=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==lv(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(lv(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function pv(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return dv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dv(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function dv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yv(n.key),n)}}function yv(t){var e=function(t,e){if("object"!=lv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lv(e)?e:e+""}function bv(t,e,r){return e=mv(e),function(t,e){if(e&&("object"===lv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vv()?Reflect.construct(e,r||[],mv(t).constructor):e.apply(t,r))}function vv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vv=function(){return!!t})()}function mv(t){return mv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mv(t)}function gv(t,e){return gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gv(t,e)}var wv=function(t){function e(){var t,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=bv(this,e))._lastRangeBackward=!1,t._attrs=new Map,t._ranges=[],arguments.length&&(r=t).setTo.apply(r,arguments),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gv(t,e)}(e,t),r=e,n=[{key:"anchor",get:function(){if(this._ranges.length>0){var t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.end:t.start}return null}},{key:"focus",get:function(){if(this._ranges.length>0){var t=this._ranges[this._ranges.length-1];return this._lastRangeBackward?t.start:t.end}return null}},{key:"isCollapsed",get:function(){return 1===this._ranges.length&&this._ranges[0].isCollapsed}},{key:"rangeCount",get:function(){return this._ranges.length}},{key:"isBackward",get:function(){return!this.isCollapsed&&this._lastRangeBackward}},{key:"isEqual",value:function(t){if(this.rangeCount!=t.rangeCount)return!1;if(0===this.rangeCount)return!0;if(!this.anchor.isEqual(t.anchor)||!this.focus.isEqual(t.focus))return!1;var e,r=pv(this._ranges);try{for(r.s();!(e=r.n()).done;){var n,o=e.value,i=!1,a=pv(t._ranges);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(o.isEqual(c)){i=!0;break}}}catch(t){a.e(t)}finally{a.f()}if(!i)return!1}}catch(t){r.e(t)}finally{r.f()}return!0}},{key:"getRanges",value:fv().mark((function t(){var e,r,n;return fv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=pv(this._ranges),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=r.value,t.next=7,new Tb(n.start,n.end);case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"getFirstRange",value:function(){var t,e=null,r=pv(this._ranges);try{for(r.s();!(t=r.n()).done;){var n=t.value;e&&!n.start.isBefore(e.start)||(e=n)}}catch(t){r.e(t)}finally{r.f()}return e?new Tb(e.start,e.end):null}},{key:"getLastRange",value:function(){var t,e=null,r=pv(this._ranges);try{for(r.s();!(t=r.n()).done;){var n=t.value;e&&!n.end.isAfter(e.end)||(e=n)}}catch(t){r.e(t)}finally{r.f()}return e?new Tb(e.start,e.end):null}},{key:"getFirstPosition",value:function(){var t=this.getFirstRange();return t?t.start.clone():null}},{key:"getLastPosition",value:function(){var t=this.getLastRange();return t?t.end.clone():null}},{key:"setTo",value:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var o=r[0],i=r[1],a=r[2];if("object"==lv(i)&&(a=i,i=void 0),null===o)this._setRanges([]);else if(o instanceof e)this._setRanges(o.getRanges(),o.isBackward);else if(o&&"function"==typeof o.getRanges)this._setRanges(o.getRanges(),o.isBackward);else if(o instanceof Tb)this._setRanges([o],!!a&&!!a.backward);else if(o instanceof fb)this._setRanges([new Tb(o)]);else if(o instanceof by){var c,u=!!a&&!!a.backward;if("in"==i)c=Tb._createIn(o);else if("on"==i)c=Tb._createOn(o);else{if(void 0===i)throw new A("model-selection-setto-required-second-parameter",[this,o]);c=new Tb(fb._createAt(o,i))}this._setRanges([c],u)}else{if(!Dt(o))throw new A("model-selection-setto-not-selectable",[this,o]);this._setRanges(o,a&&!!a.backward)}}},{key:"_setRanges",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=Array.from(t),o=n.some((function(r){if(!(r instanceof Tb))throw new A("model-selection-set-ranges-not-range",[e,t]);return e._ranges.every((function(t){return!t.isEqual(r)}))}));(n.length!==this._ranges.length||o)&&(this._replaceAllRanges(n),this._lastRangeBackward=!!r,this.fire("change:range",{directChange:!0}))}},{key:"setFocus",value:function(t,e){if(null===this.anchor)throw new A("model-selection-setfocus-no-ranges",[this,t]);var r=fb._createAt(t,e);if("same"!=r.compareWith(this.focus)){var n=this.anchor;this._ranges.length&&this._popRange(),"before"==r.compareWith(n)?(this._pushRange(new Tb(r,n)),this._lastRangeBackward=!0):(this._pushRange(new Tb(n,r)),this._lastRangeBackward=!1),this.fire("change:range",{directChange:!0})}}},{key:"getAttribute",value:function(t){return this._attrs.get(t)}},{key:"getAttributes",value:function(){return this._attrs.entries()}},{key:"getAttributeKeys",value:function(){return this._attrs.keys()}},{key:"hasAttribute",value:function(t){return this._attrs.has(t)}},{key:"removeAttribute",value:function(t){this.hasAttribute(t)&&(this._attrs.delete(t),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}},{key:"setAttribute",value:function(t,e){this.getAttribute(t)!==e&&(this._attrs.set(t,e),this.fire("change:attribute",{attributeKeys:[t],directChange:!0}))}},{key:"getSelectedElement",value:function(){return 1!==this.rangeCount?null:this.getFirstRange().getContainedElement()}},{key:"getSelectedBlocks",value:fv().mark((function t(){var e,r,n,o,i,a,c,u,s,l;return fv().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=new WeakSet,r=pv(this.getRanges()),t.prev=2,r.s();case 4:if((n=r.n()).done){t.next=35;break}if(o=n.value,!Sv(i=Ov(o.start,e),o)){t.next=10;break}return t.next=10,i;case 10:a=pv(o.getWalker()),t.prev=11,a.s();case 13:if((c=a.n()).done){t.next=21;break}if(u=c.value,s=u.item,"elementEnd"!=u.type||!_v(s,e,o)){t.next=19;break}return t.next=19,s;case 19:t.next=13;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(11),a.e(t.t0);case 26:return t.prev=26,a.f(),t.finish(26);case 29:if(!jv(l=Ov(o.end,e),o)){t.next=33;break}return t.next=33,l;case 33:t.next=4;break;case 35:t.next=40;break;case 37:t.prev=37,t.t1=t.catch(2),r.e(t.t1);case 40:return t.prev=40,r.f(),t.finish(40);case 43:case"end":return t.stop()}}),t,this,[[2,37,40,43],[11,23,26,29]])}))},{key:"containsEntireContent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.anchor.root,e=fb._createAt(t,0),r=fb._createAt(t,"end");return e.isTouching(this.getFirstPosition())&&r.isTouching(this.getLastPosition())}},{key:"_pushRange",value:function(t){this._checkRange(t),this._ranges.push(new Tb(t.start,t.end))}},{key:"_checkRange",value:function(t){for(var e=0;e<this._ranges.length;e++)if(t.isIntersecting(this._ranges[e]))throw new A("model-selection-range-intersects",[this,t],{addedRange:t,intersectingRange:this._ranges[e]})}},{key:"_replaceAllRanges",value:function(t){this._removeAllRanges();var e,r=pv(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._pushRange(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_removeAllRanges",value:function(){for(;this._ranges.length>0;)this._popRange()}},{key:"_popRange",value:function(){this._ranges.pop()}}],n&&hv(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H(uy));function kv(t,e){return!e.has(t)&&(e.add(t),t.root.document.model.schema.isBlock(t)&&!!t.parent)}function _v(t,e,r){return kv(t,e)&&Pv(t,r)}function Ov(t,e){var r=t.parent.root.document.model.schema,n=t.parent.getAncestors({parentFirst:!0,includeSelf:!0}),o=!1,i=n.find((function(t){return!o&&!(o=r.isLimit(t))&&kv(t,e)}));return n.forEach((function(t){return e.add(t)})),i}function Pv(t,e){var r=function(t){for(var e=t.root.document.model.schema,r=t.parent;r;){if(e.isBlock(r))return r;r=r.parent}}(t);return!r||!e.containsRange(Tb._createOn(r),!0)}function Sv(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.start.isTouching(fb._createAt(t,t.maxOffset))&&Pv(t,e))}function jv(t,e){return!!t&&(!(!e.isCollapsed&&!t.isEmpty)||!e.end.isTouching(fb._createAt(t,0))&&Pv(t,e))}function Ev(t){return Ev="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ev(t)}function Tv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Av(n.key),n)}}function Av(t){var e=function(t,e){if("object"!=Ev(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ev(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ev(e)?e:e+""}function xv(t,e,r){return e=Dv(e),function(t,e){if(e&&("object"===Ev(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Cv()?Reflect.construct(e,r||[],Dv(t).constructor):e.apply(t,r))}function Cv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Cv=function(){return!!t})()}function Dv(t){return Dv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dv(t)}function Rv(t,e){return Rv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rv(t,e)}wv.prototype.is=function(t){return"selection"===t||"model:selection"===t};var Iv=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=xv(this,e,[t,r]),Bv.call(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rv(t,e)}(e,t),r=e,o=[{key:"fromRange",value:function(t){return new e(t.start,t.end)}}],(n=[{key:"detach",value:function(){this.stopListening()}},{key:"toRange",value:function(){return new Tb(this.start,this.end)}}])&&Tv(r.prototype,n),o&&Tv(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(H(Tb));function Bv(){var t=this;this.listenTo(this.root.document.model,"applyOperation",(function(e,r){var n=r[0];n.isDocumentOperation&&Fv.call(t,n)}),{priority:"low"})}function Fv(t){var e=this.getTransformedByOperation(t),r=Tb._createFromRanges(e),n=!r.isEqual(this),o=function(t,e){switch(e.type){case"insert":return t.containsPosition(e.position);case"move":case"remove":case"reinsert":case"merge":return t.containsPosition(e.sourcePosition)||t.start.isEqual(e.sourcePosition)||t.containsPosition(e.targetPosition);case"split":return t.containsPosition(e.splitPosition)||t.containsPosition(e.insertionPosition)}return!1}(this,t),i=null;if(n){"$graveyard"==r.root.rootName&&(i="remove"==t.type?t.sourcePosition:t.deletionPosition);var a=this.toRange();this.start=r.start,this.end=r.end,this.fire("change:range",a,{deletionPosition:i})}else o&&this.fire("change:content",this.toRange(),{deletionPosition:i})}function Mv(t){return Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mv(t)}function Lv(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Vv(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nv(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Vv(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Vv(t,e){if(t){if("string"==typeof t)return zv(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zv(t,e):void 0}}function zv(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $v(){$v=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Mv(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Mv(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function qv(){return qv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},qv.apply(this,arguments)}function Uv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Kv(n.key),n)}}function Gv(t,e,r){return e&&Wv(t.prototype,e),r&&Wv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Kv(t){var e=function(t,e){if("object"!=Mv(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Mv(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mv(e)?e:e+""}function Hv(t,e,r){return e=Yv(e),function(t,e){if(e&&("object"===Mv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Jv()?Reflect.construct(e,r||[],Yv(t).constructor):e.apply(t,r))}function Jv(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Jv=function(){return!!t})()}function Yv(t){return Yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Yv(t)}function Zv(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xv(t,e)}function Xv(t,e){return Xv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Xv(t,e)}Iv.prototype.is=function(t){return"liveRange"===t||"model:liveRange"===t||"range"==t||"model:range"===t};var Qv="selection:",tm=function(t){function e(t){var r;return Uv(this,e),(r=Hv(this,e))._selection=new em(t),r._selection.delegate("change:range").to(r),r._selection.delegate("change:attribute").to(r),r._selection.delegate("change:marker").to(r),r}return Zv(e,t),Gv(e,[{key:"isCollapsed",get:function(){return this._selection.isCollapsed}},{key:"anchor",get:function(){return this._selection.anchor}},{key:"focus",get:function(){return this._selection.focus}},{key:"rangeCount",get:function(){return this._selection.rangeCount}},{key:"hasOwnRange",get:function(){return this._selection.hasOwnRange}},{key:"isBackward",get:function(){return this._selection.isBackward}},{key:"isGravityOverridden",get:function(){return this._selection.isGravityOverridden}},{key:"markers",get:function(){return this._selection.markers}},{key:"_ranges",get:function(){return this._selection._ranges}},{key:"getRanges",value:function(){return this._selection.getRanges()}},{key:"getFirstPosition",value:function(){return this._selection.getFirstPosition()}},{key:"getLastPosition",value:function(){return this._selection.getLastPosition()}},{key:"getFirstRange",value:function(){return this._selection.getFirstRange()}},{key:"getLastRange",value:function(){return this._selection.getLastRange()}},{key:"getSelectedBlocks",value:function(){return this._selection.getSelectedBlocks()}},{key:"getSelectedElement",value:function(){return this._selection.getSelectedElement()}},{key:"containsEntireContent",value:function(t){return this._selection.containsEntireContent(t)}},{key:"destroy",value:function(){this._selection.destroy()}},{key:"getAttributeKeys",value:function(){return this._selection.getAttributeKeys()}},{key:"getAttributes",value:function(){return this._selection.getAttributes()}},{key:"getAttribute",value:function(t){return this._selection.getAttribute(t)}},{key:"hasAttribute",value:function(t){return this._selection.hasAttribute(t)}},{key:"refresh",value:function(){this._selection.updateMarkers(),this._selection._updateAttributes(!1)}},{key:"observeMarkers",value:function(t){this._selection.observeMarkers(t)}},{key:"_setFocus",value:function(t,e){this._selection.setFocus(t,e)}},{key:"_setTo",value:function(){var t;(t=this._selection).setTo.apply(t,arguments)}},{key:"_setAttribute",value:function(t,e){this._selection.setAttribute(t,e)}},{key:"_removeAttribute",value:function(t){this._selection.removeAttribute(t)}},{key:"_getStoredAttributes",value:function(){return this._selection.getStoredAttributes()}},{key:"_overrideGravity",value:function(){return this._selection.overrideGravity()}},{key:"_restoreGravity",value:function(t){this._selection.restoreGravity(t)}}],[{key:"_getStoreAttributeKey",value:function(t){return Qv+t}},{key:"_isStoreAttributeKey",value:function(t){return t.startsWith(Qv)}}])}(H(uy));tm.prototype.is=function(t){return"selection"===t||"model:selection"==t||"documentSelection"==t||"model:documentSelection"==t};var em=function(t){function e(t){var r;return Uv(this,e),(r=Hv(this,e)).markers=new Oi({idProperty:"name"}),r._attributePriority=new Map,r._selectionRestorePosition=null,r._hasChangedRange=!1,r._overriddenGravityRegister=new Set,r._observedMarkers=new Set,r._model=t.model,r._document=t,r.listenTo(r._model,"applyOperation",(function(t,e){var n=e[0];n.isDocumentOperation&&"marker"!=n.type&&"rename"!=n.type&&"noop"!=n.type&&(0==r._ranges.length&&r._selectionRestorePosition&&r._fixGraveyardSelection(r._selectionRestorePosition),r._selectionRestorePosition=null,r._hasChangedRange&&(r._hasChangedRange=!1,r.fire("change:range",{directChange:!1})))}),{priority:"lowest"}),r.on("change:range",(function(){r._validateSelectionRanges(r.getRanges())})),r.listenTo(r._model.markers,"update",(function(t,e,n,o){r._updateMarker(e,o)})),r.listenTo(r._document,"change",(function(t,e){!function(t,e){var r,n=Nv(t.document.differ.getChanges());try{var o=function(){var n=r.value;if("insert"!=n.type)return 1;var o=n.position.parent;n.length===o.maxOffset&&t.enqueueChange(e,(function(t){var e,r=Array.from(o.getAttributeKeys()).filter((function(t){return t.startsWith(Qv)})),n=Nv(r);try{for(n.s();!(e=n.n()).done;){var i=e.value;t.removeAttribute(i,o)}}catch(t){n.e(t)}finally{n.f()}}))};for(n.s();!(r=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}}(r._model,e)})),r}return Zv(e,t),Gv(e,[{key:"isCollapsed",get:function(){return 0===this._ranges.length?this._document._getDefaultRange().isCollapsed:qv(Yv(e.prototype),"isCollapsed",this)}},{key:"anchor",get:function(){return qv(Yv(e.prototype),"anchor",this)||this._document._getDefaultRange().start}},{key:"focus",get:function(){return qv(Yv(e.prototype),"focus",this)||this._document._getDefaultRange().end}},{key:"rangeCount",get:function(){return this._ranges.length?this._ranges.length:1}},{key:"hasOwnRange",get:function(){return this._ranges.length>0}},{key:"isGravityOverridden",get:function(){return!!this._overriddenGravityRegister.size}},{key:"destroy",value:function(){for(var t=0;t<this._ranges.length;t++)this._ranges[t].detach();this.stopListening()}},{key:"getRanges",value:$v().mark((function t(){return $v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this._ranges.length){t.next=4;break}return t.delegateYield(qv(Yv(e.prototype),"getRanges",this).call(this),"t0",2);case 2:t.next=6;break;case 4:return t.next=6,this._document._getDefaultRange();case 6:case"end":return t.stop()}}),t,this)}))},{key:"getFirstRange",value:function(){return qv(Yv(e.prototype),"getFirstRange",this).call(this)||this._document._getDefaultRange()}},{key:"getLastRange",value:function(){return qv(Yv(e.prototype),"getLastRange",this).call(this)||this._document._getDefaultRange()}},{key:"setTo",value:function(){for(var t,r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];(t=qv(Yv(e.prototype),"setTo",this)).call.apply(t,[this].concat(n)),this._updateAttributes(!0),this.updateMarkers()}},{key:"setFocus",value:function(t,r){qv(Yv(e.prototype),"setFocus",this).call(this,t,r),this._updateAttributes(!0),this.updateMarkers()}},{key:"setAttribute",value:function(t,e){if(this._setAttribute(t,e)){var r=[t];this.fire("change:attribute",{attributeKeys:r,directChange:!0})}}},{key:"removeAttribute",value:function(t){if(this._removeAttribute(t)){var e=[t];this.fire("change:attribute",{attributeKeys:e,directChange:!0})}}},{key:"overrideGravity",value:function(){var t=v();return this._overriddenGravityRegister.add(t),1===this._overriddenGravityRegister.size&&this._updateAttributes(!0),t}},{key:"restoreGravity",value:function(t){if(!this._overriddenGravityRegister.has(t))throw new A("document-selection-gravity-wrong-restore",this,{uid:t});this._overriddenGravityRegister.delete(t),this.isGravityOverridden||this._updateAttributes(!0)}},{key:"observeMarkers",value:function(t){this._observedMarkers.add(t),this.updateMarkers()}},{key:"_replaceAllRanges",value:function(t){this._validateSelectionRanges(t),qv(Yv(e.prototype),"_replaceAllRanges",this).call(this,t)}},{key:"_popRange",value:function(){this._ranges.pop().detach()}},{key:"_pushRange",value:function(t){var e=this._prepareRange(t);e&&this._ranges.push(e)}},{key:"_validateSelectionRanges",value:function(t){var e,r=Nv(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(!this._document._validateSelectionRange(n))throw new A("document-selection-wrong-position",this,{range:n})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_prepareRange",value:function(t){var e=this;if(this._checkRange(t),t.root!=this._document.graveyard){var r=Iv.fromRange(t);return r.on("change:range",(function(t,n,o){if(e._hasChangedRange=!0,r.root==e._document.graveyard){e._selectionRestorePosition=o.deletionPosition;var i=e._ranges.indexOf(r);e._ranges.splice(i,1),r.detach()}})),r}}},{key:"updateMarkers",value:function(){if(this._observedMarkers.size){var t,e=[],r=!1,n=Nv(this._model.markers);try{for(n.s();!(t=n.n()).done;){var o=t.value,i=o.name.split(":",1)[0];if(this._observedMarkers.has(i)){var a,c=o.getRange(),u=Nv(this.getRanges());try{for(u.s();!(a=u.n()).done;){var s=a.value;c.containsRange(s,!s.isCollapsed)&&e.push(o)}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){n.e(t)}finally{n.f()}for(var l=Array.from(this.markers),f=0,p=e;f<p.length;f++){var d=p[f];this.markers.has(d)||(this.markers.add(d),r=!0)}for(var h=0,y=Array.from(this.markers);h<y.length;h++){var b=y[h];e.includes(b)||(this.markers.remove(b),r=!0)}r&&this.fire("change:marker",{oldMarkers:l,directChange:!1})}}},{key:"_updateMarker",value:function(t,e){var r=t.name.split(":",1)[0];if(this._observedMarkers.has(r)){var n=!1,o=Array.from(this.markers),i=this.markers.has(t);if(e){var a,c=!1,u=Nv(this.getRanges());try{for(u.s();!(a=u.n()).done;){var s=a.value;if(e.containsRange(s,!s.isCollapsed)){c=!0;break}}}catch(t){u.e(t)}finally{u.f()}c&&!i?(this.markers.add(t),n=!0):!c&&i&&(this.markers.remove(t),n=!0)}else i&&(this.markers.remove(t),n=!0);n&&this.fire("change:marker",{oldMarkers:o,directChange:!1})}}},{key:"_updateAttributes",value:function(t){var e=Mi(this._getSurroundingAttributes()),r=Mi(this.getAttributes());if(t)this._attributePriority=new Map,this._attrs=new Map;else{var n,o=Nv(this._attributePriority);try{for(o.s();!(n=o.n()).done;){var i=Lv(n.value,2),a=i[0];"low"==i[1]&&(this._attrs.delete(a),this._attributePriority.delete(a))}}catch(t){o.e(t)}finally{o.f()}}this._setAttributesTo(e);var c,u=[],s=Nv(this.getAttributes());try{for(s.s();!(c=s.n()).done;){var l=Lv(c.value,2),f=l[0],p=l[1];r.has(f)&&r.get(f)===p||u.push(f)}}catch(t){s.e(t)}finally{s.f()}var d,h=Nv(r);try{for(h.s();!(d=h.n()).done;){var y=Lv(d.value,1)[0];this.hasAttribute(y)||u.push(y)}}catch(t){h.e(t)}finally{h.f()}u.length>0&&this.fire("change:attribute",{attributeKeys:u,directChange:!1})}},{key:"_setAttribute",value:function(t,r){var n=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?"low":"normal";return("low"!=n||"normal"!=this._attributePriority.get(t))&&qv(Yv(e.prototype),"getAttribute",this).call(this,t)!==r&&(this._attrs.set(t,r),this._attributePriority.set(t,n),!0)}},{key:"_removeAttribute",value:function(t){var r=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?"low":"normal";return!("low"==r&&"normal"==this._attributePriority.get(t)||(this._attributePriority.set(t,r),!qv(Yv(e.prototype),"hasAttribute",this).call(this,t)||(this._attrs.delete(t),0)))}},{key:"_setAttributesTo",value:function(t){var e,r=new Set,n=Nv(this.getAttributes());try{for(n.s();!(e=n.n()).done;){var o=Lv(e.value,2),i=o[0],a=o[1];t.get(i)!==a&&this._removeAttribute(i,!1)}}catch(t){n.e(t)}finally{n.f()}var c,u=Nv(t);try{for(u.s();!(c=u.n()).done;){var s=Lv(c.value,2),l=s[0],f=s[1];this._setAttribute(l,f,!1)&&r.add(l)}}catch(t){u.e(t)}finally{u.f()}return r}},{key:"getStoredAttributes",value:$v().mark((function t(){var e,r,n,o,i;return $v().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e=this.getFirstPosition().parent,!this.isCollapsed||!e.isEmpty){t.next=21;break}r=Nv(e.getAttributeKeys()),t.prev=3,r.s();case 5:if((n=r.n()).done){t.next=13;break}if(!(o=n.value).startsWith(Qv)){t.next=11;break}return i=o.substr(10),t.next=11,[i,e.getAttribute(o)];case 11:t.next=5;break;case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(3),r.e(t.t0);case 18:return t.prev=18,r.f(),t.finish(18);case 21:case"end":return t.stop()}}),t,this,[[3,15,18,21]])}))},{key:"_getSurroundingAttributes",value:function(){var t=this.getFirstPosition(),e=this._model.schema;if("$graveyard"==t.root.rootName)return null;var r=null;if(this.isCollapsed){var n=t.textNode?t.textNode:t.nodeBefore,o=t.textNode?t.textNode:t.nodeAfter;if(this.isGravityOverridden||(r=rm(n,e)),r||(r=rm(o,e)),!this.isGravityOverridden&&!r)for(var i=n;i&&!r;)r=rm(i=i.previousSibling,e);if(!r)for(var a=o;a&&!r;)r=rm(a=a.nextSibling,e);r||(r=this.getStoredAttributes())}else{var c,u=Nv(this.getFirstRange());try{for(u.s();!(c=u.n()).done;){var s=c.value;if(s.item.is("element")&&e.isObject(s.item)){r=rm(s.item,e);break}if("text"==s.type){r=s.item.getAttributes();break}}}catch(t){u.e(t)}finally{u.f()}}return r}},{key:"_fixGraveyardSelection",value:function(t){var e=this._model.schema.getNearestSelectionRange(t);e&&this._pushRange(e)}}])}(wv);function rm(t,e){if(!t)return null;if(t instanceof Ny||t instanceof Cy)return t.getAttributes();if(!e.isInline(t))return null;if(!e.isObject(t))return[];var r,n=[],o=Nv(t.getAttributes());try{for(o.s();!(r=o.n()).done;){var i=Lv(r.value,2),a=i[0],c=i[1];e.checkAttribute("$text",a)&&!1!==e.getAttributeProperties(a).copyFromObject&&n.push([a,c])}}catch(t){o.e(t)}finally{o.f()}return n}function nm(t){return nm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nm(t)}function om(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,am(n.key),n)}}function am(t){var e=function(t,e){if("object"!=nm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nm(e)?e:e+""}var cm=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._dispatchers=e},(e=[{key:"add",value:function(t){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return om(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?om(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this._dispatchers);try{for(r.s();!(e=r.n()).done;)t(e.value)}catch(t){r.e(t)}finally{r.f()}return this}}])&&im(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function um(t){return um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},um(t)}function sm(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||fm(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function lm(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=fm(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function fm(t,e){if(t){if("string"==typeof t)return pm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pm(t,e):void 0}}function pm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hm(n.key),n)}}function hm(t){var e=function(t,e){if("object"!=um(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=um(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==um(e)?e:e+""}function ym(t,e,r){return e=vm(e),function(t,e){if(e&&("object"===um(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bm()?Reflect.construct(e,r||[],vm(t).constructor):e.apply(t,r))}function bm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bm=function(){return!!t})()}function vm(t){return vm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vm(t)}function mm(t,e){return mm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mm(t,e)}var gm=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ym(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mm(t,e)}(e,t),r=e,n=[{key:"elementToElement",value:function(t){return this.add(function(t){var e=_m(t.model),r=Om(t.view,"container");return e.attributes.length&&(e.children=!0),function(n){n.on("insert:".concat(e.name),function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Cm;return function(r,n,o){if(e(n.item,o.consumable,{preflight:!0})){var i=t(n.item,o,n);if(i){e(n.item,o.consumable);var a=o.mapper.toViewPosition(n.range.start);o.mapper.bindElements(n.item,i),o.writer.insert(a,i),o.convertAttributes(n.item),Am(i,n.item.getChildren(),o,{reconversion:n.reconversion})}}}}(r,Tm(e)),{priority:t.converterPriority||"normal"}),(e.children||e.attributes.length)&&n.on("reduceChanges",Em(e),{priority:"low"})}}(t))}},{key:"elementToStructure",value:function(t){return this.add(function(t){var e=_m(t.model),r=Om(t.view,"container");return e.children=!0,function(n){if(n._conversionApi.schema.checkChild(e.name,"$text"))throw new A("conversion-element-to-structure-disallowed-text",n,{elementName:e.name});var o,i;n.on("insert:".concat(e.name),(o=r,i=Tm(e),function(t,e,r){if(i(e.item,r.consumable,{preflight:!0})){var n=new Map;r.writer._registerSlotFactory(function(t,e,r){return function(n,o){var i=n.createContainerElement("$slot"),a=null;if("children"===o)a=Array.from(t.getChildren());else{if("function"!=typeof o)throw new A("conversion-slot-mode-unknown",r.dispatcher,{modeOrFilter:o});a=Array.from(t.getChildren()).filter((function(t){return o(t)}))}return e.set(i,a),i}}(e.item,n,r));var a=o(e.item,r,e);if(r.writer._clearSlotFactory(),a){!function(t,e,r){var n=Array.from(e.values()).flat(),o=new Set(n);if(o.size!=n.length)throw new A("conversion-slot-filter-overlap",r.dispatcher,{element:t});if(o.size!=t.childCount)throw new A("conversion-slot-filter-incomplete",r.dispatcher,{element:t})}(e.item,n,r),i(e.item,r.consumable);var c=r.mapper.toViewPosition(e.range.start);r.mapper.bindElements(e.item,a),r.writer.insert(c,a),r.convertAttributes(e.item),function(t,e,r,n){r.mapper.on("modelToViewPosition",s,{priority:"highest"});var o,i=null,a=null,c=lm(e);try{for(c.s();!(o=c.n()).done;){var u=sm(o.value,2);i=u[0],Am(t,a=u[1],r,n),r.writer.move(r.writer.createRangeIn(i),r.writer.createPositionBefore(i)),r.writer.remove(i)}}catch(t){c.e(t)}finally{c.f()}function s(t,e){var r=e.modelPosition.nodeAfter,n=a.indexOf(r);n<0||(e.viewPosition=e.mapper.findPositionIn(i,n))}r.mapper.off("modelToViewPosition",s)}(a,n,r,{reconversion:e.reconversion})}}}),{priority:t.converterPriority||"normal"}),n.on("reduceChanges",Em(e),{priority:"low"})}}(t))}},{key:"attributeToElement",value:function(t){return this.add(function(t){var e=(t=Hh(t)).model;"string"==typeof e&&(e={key:e});var r="attribute:".concat(e.key);if(e.name&&(r+=":"+e.name),e.values){var n,o=lm(e.values);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.view[i]=Om(t.view[i],"attribute")}}catch(t){o.e(t)}finally{o.f()}}else t.view=Om(t.view,"attribute");var a=Pm(t);return function(e){e.on(r,function(t){return function(e,r,n){if(n.consumable.test(r.item,e.name)){var o=t(r.attributeOldValue,n,r),i=t(r.attributeNewValue,n,r);if(o||i){n.consumable.consume(r.item,e.name);var a=n.writer,c=a.document.selection;if(r.item instanceof wv||r.item instanceof tm)a.wrap(c.getFirstRange(),i);else{var u=n.mapper.toViewRange(r.range);null!==r.attributeOldValue&&o&&(u=a.unwrap(u,o)),null!==r.attributeNewValue&&i&&a.wrap(u,i)}}}}}(a),{priority:t.converterPriority||"normal"})}}(t))}},{key:"attributeToAttribute",value:function(t){return this.add(function(t){var e=(t=Hh(t)).model;"string"==typeof e&&(e={key:e});var r="attribute:".concat(e.key);if(e.name&&(r+=":"+e.name),e.values){var n,o=lm(e.values);try{for(o.s();!(n=o.n()).done;){var i=n.value;t.view[i]=Sm(t.view[i])}}catch(t){o.e(t)}finally{o.f()}}else t.view=Sm(t.view);var a=Pm(t);return function(e){var n;e.on(r,(n=a,function(t,e,r){if(r.consumable.test(e.item,t.name)){var o=n(e.attributeOldValue,r,e),i=n(e.attributeNewValue,r,e);if(o||i){r.consumable.consume(e.item,t.name);var a=r.mapper.toViewElement(e.item),c=r.writer;if(!a)throw new A("conversion-attribute-to-attribute-on-text",r.dispatcher,e);if(null!==e.attributeOldValue&&o)if("class"==o.key){var u,s=lm("string"==typeof o.value?o.value.split(/\s+/):o.value);try{for(s.s();!(u=s.n()).done;){var l=u.value;c.removeClass(l,a)}}catch(t){s.e(t)}finally{s.f()}}else if("style"==o.key)if("string"==typeof o.value){var f=new ou(c.document.stylesProcessor);f.setTo(o.value);var p,d=lm(f.getStylesEntries());try{for(d.s();!(p=d.n()).done;){var h=sm(p.value,1)[0];c.removeStyle(h,a)}}catch(t){d.e(t)}finally{d.f()}}else for(var y=0,b=Object.keys(o.value);y<b.length;y++){var v=b[y];c.removeStyle(v,a)}else c.removeAttribute(o.key,a);if(null!==e.attributeNewValue&&i)if("class"==i.key){var m,g=lm("string"==typeof i.value?i.value.split(/\s+/):i.value);try{for(g.s();!(m=g.n()).done;){var w=m.value;c.addClass(w,a)}}catch(t){g.e(t)}finally{g.f()}}else if("style"==i.key)if("string"==typeof i.value){var k=new ou(c.document.stylesProcessor);k.setTo(i.value);var _,O=lm(k.getStylesEntries());try{for(O.s();!(_=O.n()).done;){var P=sm(_.value,2),S=P[0],j=P[1];c.setStyle(S,j,a)}}catch(t){O.e(t)}finally{O.f()}}else for(var E=0,T=Object.keys(i.value);E<T.length;E++){var x=T[E];c.setStyle(x,i.value[x],a)}else c.setAttribute(i.key,i.value,a)}}}),{priority:t.converterPriority||"normal"})}}(t))}},{key:"markerToElement",value:function(t){return this.add(function(t){var e=Om(t.view,"ui");return function(r){var n;r.on("addMarker:".concat(t.model),(n=e,function(t,e,r){e.isOpening=!0;var o=n(e,r);e.isOpening=!1;var i=n(e,r);if(o&&i){var a=e.markerRange;if(!a.isCollapsed||r.consumable.consume(a,t.name)){var c,u=lm(a);try{for(u.s();!(c=u.n()).done;){var s=c.value;if(!r.consumable.consume(s.item,t.name))return}}catch(t){u.e(t)}finally{u.f()}var l=r.mapper,f=r.writer;f.insert(l.toViewPosition(a.start),o),r.mapper.bindElementToMarker(o,e.markerName),a.isCollapsed||(f.insert(l.toViewPosition(a.end),i),r.mapper.bindElementToMarker(i,e.markerName)),t.stop()}}}),{priority:t.converterPriority||"normal"}),r.on("removeMarker:".concat(t.model),(function(t,e,r){var n=r.mapper.markerNameToElements(e.markerName);if(n){var o,i=lm(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;r.mapper.unbindElementFromMarkerName(a,e.markerName),r.writer.clear(r.writer.createRangeOn(a),a)}}catch(t){i.e(t)}finally{i.f()}r.writer.clearClonedElementsGroup(e.markerName),t.stop()}}),{priority:t.converterPriority||"normal"})}}(t))}},{key:"markerToHighlight",value:function(t){return this.add(function(t){return function(e){var r;e.on("addMarker:".concat(t.model),(r=t.view,function(t,e,n){if(e.item&&(e.item instanceof wv||e.item instanceof tm||e.item.is("$textProxy"))){var o=jm(r,e,n);if(o&&n.consumable.consume(e.item,t.name)){var i=n.writer,a=wm(i,o),c=i.document.selection;if(e.item instanceof wv||e.item instanceof tm)i.wrap(c.getFirstRange(),a);else{var u,s=n.mapper.toViewRange(e.range),l=lm(i.wrap(s,a).getItems());try{for(l.s();!(u=l.n()).done;){var f=u.value;if(f.is("attributeElement")&&f.isSimilar(a)){n.mapper.bindElementToMarker(f,e.markerName);break}}}catch(t){l.e(t)}finally{l.f()}}}}}),{priority:t.converterPriority||"normal"}),e.on("addMarker:".concat(t.model),function(t){return function(e,r,n){if(r.item&&r.item instanceof Yy){var o=jm(t,r,n);if(o&&n.consumable.test(r.item,e.name)){var i=n.mapper.toViewElement(r.item);if(i&&i.getCustomProperty("addHighlight")){n.consumable.consume(r.item,e.name);var a,c=lm(Tb._createIn(r.item));try{for(c.s();!(a=c.n()).done;){var u=a.value;n.consumable.consume(u.item,e.name)}}catch(t){c.e(t)}finally{c.f()}i.getCustomProperty("addHighlight")(i,o,n.writer),n.mapper.bindElementToMarker(i,r.markerName)}}}}}(t.view),{priority:t.converterPriority||"normal"}),e.on("removeMarker:".concat(t.model),function(t){return function(e,r,n){if(!r.markerRange.isCollapsed){var o=jm(t,r,n);if(o){var i=wm(n.writer,o),a=n.mapper.markerNameToElements(r.markerName);if(a){var c,u=lm(a);try{for(u.s();!(c=u.n()).done;){var s=c.value;n.mapper.unbindElementFromMarkerName(s,r.markerName),s.is("attributeElement")?n.writer.unwrap(n.writer.createRangeOn(s),i):s.getCustomProperty("removeHighlight")(s,o.id,n.writer)}}catch(t){u.e(t)}finally{u.f()}n.writer.clearClonedElementsGroup(r.markerName),e.stop()}}}}}(t.view),{priority:t.converterPriority||"normal"})}}(t))}},{key:"markerToData",value:function(t){return this.add(function(t){var e=(t=Hh(t)).model,r=t.view;return r||(r=function(r){return{group:e,name:r.substr(t.model.length+1)}}),function(n){var o;n.on("addMarker:".concat(e),(o=r,function(t,e,r){var n=o(e.markerName,r);if(n){var i=e.markerRange;r.consumable.consume(i,t.name)&&(km(i,!1,r,e,n),km(i,!0,r,e,n),t.stop())}}),{priority:t.converterPriority||"normal"}),n.on("removeMarker:".concat(e),function(t){return function(e,r,n){var o=t(r.markerName,n);if(o){var i=n.mapper.markerNameToElements(r.markerName);if(i){var a,c=lm(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;n.mapper.unbindElementFromMarkerName(u,r.markerName),u.is("containerElement")?(s("data-".concat(o.group,"-start-before"),u),s("data-".concat(o.group,"-start-after"),u),s("data-".concat(o.group,"-end-before"),u),s("data-".concat(o.group,"-end-after"),u)):n.writer.clear(n.writer.createRangeOn(u),u)}}catch(t){c.e(t)}finally{c.f()}n.writer.clearClonedElementsGroup(r.markerName),e.stop()}}function s(t,e){if(e.hasAttribute(t)){var r=new Set(e.getAttribute(t).split(","));r.delete(o.name),0==r.size?n.writer.removeAttribute(t,e):n.writer.setAttribute(t,Array.from(r).join(","),e)}}}}(r),{priority:t.converterPriority||"normal"})}}(t))}}],n&&dm(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(cm);function wm(t,e){var r=t.createAttributeElement("span",e.attributes);return e.classes&&r._addClass(e.classes),"number"==typeof e.priority&&(r._priority=e.priority),r._id=e.id,r}function km(t,e,r,n,o){var i=e?t.start:t.end,a=i.nodeAfter&&i.nodeAfter.is("element")?i.nodeAfter:null,c=i.nodeBefore&&i.nodeBefore.is("element")?i.nodeBefore:null;if(a||c){var u,s;e&&a||!e&&!c?(u=a,s=!0):(u=c,s=!1);var l=r.mapper.toViewElement(u);if(l)return void function(t,e,r,n,o,i){var a="data-".concat(i.group,"-").concat(e?"start":"end","-").concat(r?"before":"after"),c=t.hasAttribute(a)?t.getAttribute(a).split(","):[];c.unshift(i.name),n.writer.setAttribute(a,c.join(","),t),n.mapper.bindElementToMarker(t,o.markerName)}(l,e,s,r,n,o)}!function(t,e,r,n,o){var i="".concat(o.group,"-").concat(e?"start":"end"),a=o.name?{name:o.name}:null,c=r.writer.createUIElement(i,a);r.writer.insert(t,c),r.mapper.bindElementToMarker(c,n.markerName)}(r.mapper.toViewPosition(i),e,r,n,o)}function _m(t){return"string"==typeof t&&(t={name:t}),{name:t.name,attributes:t.attributes?Ko(t.attributes):[],children:!!t.children}}function Om(t,e){return"function"==typeof t?t:function(r,n){return function(t,e,r){"string"==typeof t&&(t={name:t});var n,o=e.writer,i=Object.assign({},t.attributes);if("container"==r)n=o.createContainerElement(t.name,i);else if("attribute"==r){var a={priority:t.priority||jl.DEFAULT_PRIORITY};n=o.createAttributeElement(t.name,i,a)}else n=o.createUIElement(t.name,i);if(t.styles)for(var c=0,u=Object.keys(t.styles);c<u.length;c++){var s=u[c];o.setStyle(s,t.styles[s],n)}if(t.classes){var l=t.classes;if("string"==typeof l)o.addClass(l,n);else{var f,p=lm(l);try{for(p.s();!(f=p.n()).done;){var d=f.value;o.addClass(d,n)}}catch(t){p.e(t)}finally{p.f()}}}return n}(t,n,e)}}function Pm(t){return t.model.values?function(e,r,n){var o=t.view[e];return o?o(e,r,n):null}:t.view}function Sm(t){return"string"==typeof t?function(e){return{key:t,value:e}}:"object"==um(t)?t.value?function(){return t}:function(e){return{key:t.key,value:e}}:t}function jm(t,e,r){var n="function"==typeof t?t(e,r):t;return n?(n.priority||(n.priority=10),n.id||(n.id=e.markerName),n):null}function Em(t){var e=function(t){return function(e,r){if(!e.is("element",t.name))return!1;if("attribute"==r.type){if(t.attributes.includes(r.attributeKey))return!0}else if(t.children)return!0;return!1}}(t);return function(t,r){var n=[];r.reconvertedElements||(r.reconvertedElements=new Set);var o,i=lm(r.changes);try{for(i.s();!(o=i.n()).done;){var a=o.value,c="attribute"==a.type?a.range.start.nodeAfter:a.position.parent;if(c&&e(c,a)){if(!r.reconvertedElements.has(c)){r.reconvertedElements.add(c);for(var u=fb._createBefore(c),s=n.length,l=n.length-1;l>=0;l--){var f=n[l],p=("attribute"==f.type?f.range.start:f.position).compareWith(u);if("before"==p||"remove"==f.type&&"same"==p)break;s=l}n.splice(s,0,{type:"remove",name:c.name,position:u,length:1},{type:"reinsert",name:c.name,position:u,length:1})}}else n.push(a)}}catch(t){i.e(t)}finally{i.f()}r.changes=n}}function Tm(t){return function(e,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=["insert"],a=lm(t.attributes);try{for(a.s();!(n=a.n()).done;){var c=n.value;e.hasAttribute(c)&&i.push("attribute:".concat(c))}}catch(t){a.e(t)}finally{a.f()}return!!i.every((function(t){return r.test(e,t)}))&&(o.preflight||i.forEach((function(t){return r.consume(e,t)})),!0)}}function Am(t,e,r,n){var o,i=lm(e);try{for(i.s();!(o=i.n()).done;){var a=o.value;xm(t.root,a,r,n)||r.convertItem(a)}}catch(t){i.e(t)}finally{i.f()}}function xm(t,e,r,n){var o=r.writer,i=r.mapper;if(!n.reconversion)return!1;var a=i.toViewElement(e);return!(!a||a.root==t||!r.canReuseView(a)||(o.move(o.createRangeOn(a),i.toViewPosition(fb._createBefore(e))),0))}function Cm(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).preflight?e.test(t,"insert"):e.consume(t,"insert")}function Dm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Rm(t){var e,r=t.model,n=r.schema,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Dm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Dm(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(r.document.getRoots());try{for(o.s();!(e=o.n()).done;){var i=e.value;if(i.isEmpty&&!n.checkChild(i,"$text")&&n.checkChild(i,"paragraph"))return t.insertElement("paragraph",i),!0}}catch(t){o.e(t)}finally{o.f()}return!1}function Im(t,e,r){var n=r.createContext(t);return!!r.checkChild(n,"paragraph")&&!!r.checkChild(n.push("paragraph"),e)}function Bm(t,e){var r=e.createElement("paragraph");return e.insert(r,t),e.createPositionAt(r,0)}function Fm(t){return Fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fm(t)}function Mm(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Lm(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Mm(Object(r),!0).forEach((function(e){Nm(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Mm(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Nm(t,e,r){return(e=qm(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Vm(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return zm(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?zm(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function zm(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function $m(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qm(n.key),n)}}function qm(t){var e=function(t,e){if("object"!=Fm(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Fm(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Fm(e)?e:e+""}function Um(t,e,r){return e=Gm(e),function(t,e){if(e&&("object"===Fm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wm()?Reflect.construct(e,r||[],Gm(t).constructor):e.apply(t,r))}function Wm(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wm=function(){return!!t})()}function Gm(t){return Gm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gm(t)}function Km(t,e){return Km=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Km(t,e)}var Hm=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Um(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Km(t,e)}(e,t),r=e,(n=[{key:"elementToElement",value:function(t){return this.add(Jm(t))}},{key:"elementToAttribute",value:function(t){return this.add(function(t){Xm(t=Hh(t));var e=Qm(t,!1),r=Ym(t.view),n=r?"element:".concat(r):"element";return function(r){r.on(n,e,{priority:t.converterPriority||"low"})}}(t))}},{key:"attributeToAttribute",value:function(t){return this.add(function(t){var e=null;("string"==typeof(t=Hh(t)).view||t.view.key)&&(e=function(t){"string"==typeof t.view&&(t.view={key:t.view});var e,r=t.view.key,n=void 0===t.view.value?/[\s\S]*/:t.view.value;return e="class"==r||"style"==r?Nm({},"class"==r?"classes":"styles",n):{attributes:Nm({},r,n)},t.view.name&&(e.name=t.view.name),t.view=e,r}(t)),Xm(t,e);var r=Qm(t,!0);return function(e){e.on("element",r,{priority:t.converterPriority||"low"})}}(t))}},{key:"elementToMarker",value:function(t){return this.add(function(t){var e=function(t){return function(e,r){var n="string"==typeof t?t:t(e,r);return r.writer.createElement("$marker",{"data-name":n})}}(t.model);return Jm(Lm(Lm({},t),{},{model:e}))}(t))}},{key:"dataToMarker",value:function(t){return this.add(function(t){(t=Hh(t)).model||(t.model=function(e){return e?t.view+":"+e:t.view});var e={view:t.view,model:t.model},r=Zm(tg(e,"start")),n=Zm(tg(e,"end"));return function(o){o.on("element:".concat(t.view,"-start"),r,{priority:t.converterPriority||"normal"}),o.on("element:".concat(t.view,"-end"),n,{priority:t.converterPriority||"normal"});var i=m.low,a=m.highest,c=m.get(t.converterPriority)/a;o.on("element",function(t){return function(e,r,n){var o="data-".concat(t.view);function i(e,o){var i,a=Vm(o);try{for(a.s();!(i=a.n()).done;){var c=i.value,u=t.model(c,n),s=n.writer.createElement("$marker",{"data-name":u});n.writer.insert(s,e),r.modelCursor.isEqual(e)?r.modelCursor=r.modelCursor.getShiftedBy(1):r.modelCursor=r.modelCursor._getTransformedByInsertion(e,1),r.modelRange=r.modelRange._getTransformedByInsertion(e,1)[0]}}catch(t){a.e(t)}finally{a.f()}}(n.consumable.test(r.viewItem,{attributes:o+"-end-after"})||n.consumable.test(r.viewItem,{attributes:o+"-start-after"})||n.consumable.test(r.viewItem,{attributes:o+"-end-before"})||n.consumable.test(r.viewItem,{attributes:o+"-start-before"}))&&(r.modelRange||Object.assign(r,n.convertChildren(r.viewItem,r.modelCursor)),n.consumable.consume(r.viewItem,{attributes:o+"-end-after"})&&i(r.modelRange.end,r.viewItem.getAttribute(o+"-end-after").split(",")),n.consumable.consume(r.viewItem,{attributes:o+"-start-after"})&&i(r.modelRange.end,r.viewItem.getAttribute(o+"-start-after").split(",")),n.consumable.consume(r.viewItem,{attributes:o+"-end-before"})&&i(r.modelRange.start,r.viewItem.getAttribute(o+"-end-before").split(",")),n.consumable.consume(r.viewItem,{attributes:o+"-start-before"})&&i(r.modelRange.start,r.viewItem.getAttribute(o+"-start-before").split(",")))}}(e),{priority:i+c})}}(t))}}])&&$m(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(cm);function Jm(t){var e=Zm(t=Hh(t)),r=Ym(t.view),n=r?"element:".concat(r):"element";return function(r){r.on(n,e,{priority:t.converterPriority||"normal"})}}function Ym(t){return"string"==typeof t?t:"object"==Fm(t)&&"string"==typeof t.name?t.name:null}function Zm(t){var e=new Pc(t.view);return function(r,n,o){var i=e.match(n.viewItem);if(i){var a=i.match;if(a.name=!0,o.consumable.test(n.viewItem,a)){var c=function(t,e,r){return t instanceof Function?t(e,r):r.writer.createElement(t)}(t.model,n.viewItem,o);c&&o.safeInsert(c,n.modelCursor)&&(o.consumable.consume(n.viewItem,a),o.convertChildren(n.viewItem,c),o.updateConversionResult(c,n))}}}}function Xm(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null===e||function(t){return t.getAttribute(e)},n="object"!=Fm(t.model)?t.model:t.model.key,o="object"!=Fm(t.model)||void 0===t.model.value?r:t.model.value;t.model={key:n,value:o}}function Qm(t,e){var r=new Pc(t.view);return function(n,o,i){if(o.modelRange||!e){var a=r.match(o.viewItem);if(a&&(l=t.view,f=o.viewItem,"object"==Fm(p="function"==typeof l?l(f):l)&&!Ym(p)||p.classes||p.attributes||p.styles?delete a.match.name:a.match.name=!0,i.consumable.test(o.viewItem,a.match))){var c=t.model.key,u="function"==typeof t.model.value?t.model.value(o.viewItem,i):t.model.value;if(null!==u){o.modelRange||Object.assign(o,i.convertChildren(o.viewItem,o.modelCursor));var s=function(t,e,r,n){for(var o=!1,i=0,a=Array.from(t.getItems({shallow:r}));i<a.length;i++){var c=a[i];n.schema.checkAttribute(c,e.key)&&(o=!0,c.hasAttribute(e.key)||n.writer.setAttribute(e.key,e.value,c))}return o}(o.modelRange,{key:c,value:u},e,i);s&&(i.consumable.test(o.viewItem,{name:!0})&&(a.match.name=!0),i.consumable.consume(o.viewItem,a.match))}}}var l,f,p}}function tg(t,e){return{view:"".concat(t.view,"-").concat(e),model:function(e,r){var n=e.getAttribute("name"),o=t.model(n,r);return r.writer.createElement("$marker",{"data-name":o})}}}function eg(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||ng(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function rg(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ng(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ng(t,e){if(t){if("string"==typeof t)return og(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?og(t,e):void 0}}function og(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ig(t){t.document.registerPostFixer((function(e){return function(t,e){var r,n=e.document.selection,o=e.schema,i=[],a=!1,c=rg(n.getRanges());try{for(c.s();!(r=c.n()).done;){var u=r.value,s=ag(u,o);s&&!s.isEqual(u)?(i.push(s),a=!0):i.push(u)}}catch(t){c.e(t)}finally{c.f()}return a&&t.setSelection(function(t){for(var e,r=function(t){if(Array.isArray(t))return og(t)}(e=t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||ng(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),n=new Set,o=1;o<r.length;){var i,a=r[o],c=rg(r.slice(0,o).entries());try{for(c.s();!(i=c.n()).done;){var u=eg(i.value,2),s=u[0],l=u[1];if(!n.has(s))if(a.isEqual(l))n.add(s);else if(a.isIntersecting(l)){n.add(s),n.add(o);var f=a.getJoined(l);r.push(f)}}}catch(t){c.e(t)}finally{c.f()}o++}return r.filter((function(t,e){return!n.has(e)}))}(i),{backward:n.isBackward}),!1}(e,t)}))}function ag(t,e){return t.isCollapsed?function(t,e){var r=t.start,n=e.getNearestSelectionRange(r);if(!n){var o=r.getAncestors().reverse().find((function(t){return e.isObject(t)}));return o?Tb._createOn(o):null}if(!n.isCollapsed)return n;var i=n.start;return r.isEqual(i)?null:new Tb(i)}(t,e):function(t,e){var r=t.start,n=t.end,o=e.checkChild(r,"$text"),i=e.checkChild(n,"$text"),a=e.getLimitElement(r),c=e.getLimitElement(n);if(a===c){if(o&&i)return null;if(function(t,e,r){var n=t.nodeAfter&&!r.isLimit(t.nodeAfter)||r.checkChild(t,"$text"),o=e.nodeBefore&&!r.isLimit(e.nodeBefore)||r.checkChild(e,"$text");return n||o}(r,n,e)){var u=r.nodeAfter&&e.isSelectable(r.nodeAfter)?null:e.getNearestSelectionRange(r,"forward"),s=n.nodeBefore&&e.isSelectable(n.nodeBefore)?null:e.getNearestSelectionRange(n,"backward"),l=u?u.start:r,f=s?s.end:n;return new Tb(l,f)}}var p=a&&!a.is("rootElement"),d=c&&!c.is("rootElement");if(p||d){var h=r.nodeAfter&&n.nodeBefore&&r.nodeAfter.parent===n.nodeBefore.parent,y=p&&(!h||!ug(r.nodeAfter,e)),b=d&&(!h||!ug(n.nodeBefore,e)),v=r,m=n;return y&&(v=fb._createBefore(cg(a,e))),b&&(m=fb._createAfter(cg(c,e))),new Tb(v,m)}return null}(t,e)}function cg(t,e){for(var r=t,n=r;e.isLimit(n)&&n.parent;)r=n,n=n.parent;return r}function ug(t,e){return t&&e.isSelectable(t)}function sg(t){return sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sg(t)}function lg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fg(n.key),n)}}function fg(t){var e=function(t,e){if("object"!=sg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sg(e)?e:e+""}function pg(t,e,r){return e=hg(e),function(t,e){if(e&&("object"===sg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dg()?Reflect.construct(e,r||[],hg(t).constructor):e.apply(t,r))}function dg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dg=function(){return!!t})()}function hg(t){return hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hg(t)}function yg(t,e){return yg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yg(t,e)}var bg=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=pg(this,e)).model=t,n.view=new oy(r),n.mapper=new Nb,n.downcastDispatcher=new cv({mapper:n.mapper,schema:t.schema});var o,a,c,u=n.model.document,s=u.selection,l=n.model.markers;return n.listenTo(n.model,"_beforeChanges",(function(){n.view._disableRendering(!0)}),{priority:"highest"}),n.listenTo(n.model,"_afterChanges",(function(){n.view._disableRendering(!1)}),{priority:"lowest"}),n.listenTo(u,"change",(function(){n.view.change((function(t){n.downcastDispatcher.convertChanges(u.differ,l,t),n.downcastDispatcher.convertSelection(s,l,t)}))}),{priority:"low"}),n.listenTo(n.view.document,"selectionChange",function(t,e){return function(r,n){var o,i=n.newSelection,a=[],c=Vm(i.getRanges());try{for(c.s();!(o=c.n()).done;){var u=o.value;a.push(e.toModelRange(u))}}catch(t){c.e(t)}finally{c.f()}var s=t.createSelection(a,{backward:i.isBackward});s.isEqual(t.document.selection)||t.change((function(t){t.setSelection(s)}))}}(n.model,n.mapper)),n.listenTo(n.view.document,"beforeinput",(o=n.mapper,a=n.model.schema,c=n.view,function(t,e){if(!c.document.isComposing||i.isAndroid)for(var r=0;r<e.targetRanges.length;r++){var n=e.targetRanges[r],u=o.toModelRange(n),s=ag(u,a);s&&!s.isEqual(u)&&(e.targetRanges[r]=o.toViewRange(s))}}),{priority:"high"}),n.downcastDispatcher.on("insert:$text",(function(t,e,r){if(r.consumable.consume(e.item,t.name)){var n=r.writer,o=r.mapper.toViewPosition(e.range.start),i=n.createText(e.item.data);n.insert(o,i)}}),{priority:"lowest"}),n.downcastDispatcher.on("insert",(function(t,e,r){r.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||r.convertChildren(e.item)}),{priority:"lowest"}),n.downcastDispatcher.on("remove",(function(t,e,r){var n,o=r.mapper.toViewPosition(e.position),i=e.position.getShiftedBy(e.length),a=r.mapper.toViewPosition(i,{isPhantom:!0}),c=r.writer.createRange(o,a),u=r.writer.remove(c.getTrimmed()),s=lm(r.writer.createRangeIn(u).getItems());try{for(s.s();!(n=s.n()).done;){var l=n.value;r.mapper.unbindViewElement(l,{defer:!0})}}catch(t){s.e(t)}finally{s.f()}}),{priority:"low"}),n.downcastDispatcher.on("cleanSelection",(function(t,e,r){var n,o=r.writer,i=lm(o.document.selection.getRanges());try{for(i.s();!(n=i.n()).done;){var a=n.value;a.isCollapsed&&a.end.parent.isAttached()&&r.writer.mergeAttributes(a.start)}}catch(t){i.e(t)}finally{i.f()}o.setSelection(null)})),n.downcastDispatcher.on("selection",(function(t,e,r){var n=e.selection;if(!n.isCollapsed&&r.consumable.consume(n,"selection")){var o,i=[],a=lm(n.getRanges());try{for(a.s();!(o=a.n()).done;){var c=o.value;i.push(r.mapper.toViewRange(c))}}catch(t){a.e(t)}finally{a.f()}r.writer.setSelection(i,{backward:n.isBackward})}}),{priority:"low"}),n.downcastDispatcher.on("selection",(function(t,e,r){var n=e.selection;if(n.isCollapsed&&r.consumable.consume(n,"selection")){var o=r.writer,i=n.getFirstPosition(),a=r.mapper.toViewPosition(i),c=o.breakAttributes(a);o.setSelection(c)}}),{priority:"low"}),n.view.document.roots.bindTo(n.model.document.roots).using((function(t){if("$graveyard"==t.rootName)return null;var e=new Gu(n.view.document,t.name);return e.rootName=t.rootName,n.mapper.bindElements(t,e),e})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yg(t,e)}(e,t),r=e,(n=[{key:"destroy",value:function(){this.view.destroy(),this.stopListening()}},{key:"reconvertMarker",value:function(t){var e=this,r="string"==typeof t?t:t.name,n=this.model.markers.get(r);if(!n)throw new A("editingcontroller-reconvertmarker-marker-not-exist",this,{markerName:r});this.model.change((function(){e.model.markers._refresh(n)}))}},{key:"reconvertItem",value:function(t){var e=this;this.model.change((function(){e.model.document.differ._refreshItem(t)}))}}])&&lg(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function vg(t){return function(t){if(Array.isArray(t))return kg(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||wg(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mg(t){return mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mg(t)}function gg(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=wg(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function wg(t,e){if(t){if("string"==typeof t)return kg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?kg(t,e):void 0}}function kg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function _g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Og(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sg(n.key),n)}}function Pg(t,e,r){return e&&Og(t.prototype,e),r&&Og(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Sg(t){var e=function(t,e){if("object"!=mg(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mg(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mg(e)?e:e+""}var jg=function(){function t(){_g(this,t),this._consumables=new Map}return Pg(t,[{key:"add",value:function(t,e){var r;t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):(this._consumables.has(t)?r=this._consumables.get(t):(r=new Tg(t),this._consumables.set(t,r)),r.add(e))}},{key:"test",value:function(t,e){var r=this._consumables.get(t);return void 0===r?null:t.is("$text")||t.is("documentFragment")?r:r.test(e)}},{key:"consume",value:function(t,e){return!!this.test(t,e)&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!1):this._consumables.get(t).consume(e),!0)}},{key:"revert",value:function(t,e){var r=this._consumables.get(t);void 0!==r&&(t.is("$text")||t.is("documentFragment")?this._consumables.set(t,!0):r.revert(e))}}],[{key:"consumablesFromElement",value:function(t){var e,r={element:t,name:!0,attributes:[],classes:[],styles:[]},n=gg(t.getAttributeKeys());try{for(n.s();!(e=n.n()).done;){var o=e.value;"style"!=o&&"class"!=o&&r.attributes.push(o)}}catch(t){n.e(t)}finally{n.f()}var i,a=gg(t.getClassNames());try{for(a.s();!(i=a.n()).done;){var c=i.value;r.classes.push(c)}}catch(t){a.e(t)}finally{a.f()}var u,s=gg(t.getStyleNames());try{for(s.s();!(u=s.n()).done;){var l=u.value;r.styles.push(l)}}catch(t){s.e(t)}finally{s.f()}return r}},{key:"createFrom",value:function(e,r){if(r||(r=new t),e.is("$text"))return r.add(e),r;e.is("element")&&r.add(e,t.consumablesFromElement(e)),e.is("documentFragment")&&r.add(e);var n,o=gg(e.getChildren());try{for(o.s();!(n=o.n()).done;){var i=n.value;r=t.createFrom(i,r)}}catch(t){o.e(t)}finally{o.f()}return r}}])}(),Eg=["attributes","classes","styles"],Tg=function(){return Pg((function t(e){_g(this,t),this.element=e,this._canConsumeName=null,this._consumables={attributes:new Map,styles:new Map,classes:new Map}}),[{key:"add",value:function(t){t.name&&(this._canConsumeName=!0);for(var e=0,r=Eg;e<r.length;e++){var n=r[e];n in t&&this._add(n,t[n])}}},{key:"test",value:function(t){if(t.name&&!this._canConsumeName)return this._canConsumeName;for(var e=0,r=Eg;e<r.length;e++){var n=r[e];if(n in t){var o=this._test(n,t[n]);if(!0!==o)return o}}return!0}},{key:"consume",value:function(t){t.name&&(this._canConsumeName=!1);for(var e=0,r=Eg;e<r.length;e++){var n=r[e];n in t&&this._consume(n,t[n])}}},{key:"revert",value:function(t){t.name&&(this._canConsumeName=!0);for(var e=0,r=Eg;e<r.length;e++){var n=r[e];n in t&&this._revert(n,t[n])}}},{key:"_add",value:function(t,e){var r,n=Ko(e),o=this._consumables[t],i=gg(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("attributes"===t&&("class"===a||"style"===a))throw new A("viewconsumable-invalid-attribute",this);if(o.set(a,!0),"styles"===t){var c,u=gg(this.element.document.stylesProcessor.getRelatedStyles(a));try{for(u.s();!(c=u.n()).done;){var s=c.value;o.set(s,!0)}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){i.e(t)}finally{i.f()}}},{key:"_test",value:function(t,e){var r,n=Ko(e),o=this._consumables[t],i=gg(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("attributes"!==t||"class"!==a&&"style"!==a){var c=o.get(a);if(void 0===c)return null;if(!c)return!1}else{var u="class"==a?"classes":"styles",s=this._test(u,vg(this._consumables[u].keys()));if(!0!==s)return s}}}catch(t){i.e(t)}finally{i.f()}return!0}},{key:"_consume",value:function(t,e){var r,n=Ko(e),o=this._consumables[t],i=gg(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("attributes"!==t||"class"!==a&&"style"!==a){if(o.set(a,!1),"styles"==t){var c,u=gg(this.element.document.stylesProcessor.getRelatedStyles(a));try{for(u.s();!(c=u.n()).done;){var s=c.value;o.set(s,!1)}}catch(t){u.e(t)}finally{u.f()}}}else{var l="class"==a?"classes":"styles";this._consume(l,vg(this._consumables[l].keys()))}}}catch(t){i.e(t)}finally{i.f()}}},{key:"_revert",value:function(t,e){var r,n=Ko(e),o=this._consumables[t],i=gg(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if("attributes"!==t||"class"!==a&&"style"!==a)!1===o.get(a)&&o.set(a,!0);else{var c="class"==a?"classes":"styles";this._revert(c,vg(this._consumables[c].keys()))}}}catch(t){i.e(t)}finally{i.f()}}}])}();function Ag(t){return Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ag(t)}var xg=Dg().mark(aw),Cg=Dg().mark(cw);function Dg(){Dg=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Ag(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Ag(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function Rg(t){return function(t){if(Array.isArray(t))return Mg(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Fg(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ig(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Fg(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bg(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Fg(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Fg(t,e){if(t){if("string"==typeof t)return Mg(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Mg(t,e):void 0}}function Mg(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Lg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ng(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,zg(n.key),n)}}function Vg(t,e,r){return e&&Ng(t.prototype,e),r&&Ng(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function zg(t){var e=function(t,e){if("object"!=Ag(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Ag(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ag(e)?e:e+""}function $g(t,e,r){return e=Ug(e),function(t,e){if(e&&("object"===Ag(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,qg()?Reflect.construct(e,r||[],Ug(t).constructor):e.apply(t,r))}function qg(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(qg=function(){return!!t})()}function Ug(t){return Ug=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ug(t)}function Wg(t,e){return Wg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Wg(t,e)}var Gg=function(t){function e(){var t;return Lg(this,e),(t=$g(this,e))._sourceDefinitions={},t._attributeProperties={},t.decorate("checkChild"),t.decorate("checkAttribute"),t.on("checkAttribute",(function(t,e){e[0]=new Kg(e[0])}),{priority:"highest"}),t.on("checkChild",(function(e,r){r[0]=new Kg(r[0]),r[1]=t.getDefinition(r[1])}),{priority:"highest"}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wg(t,e)}(e,t),Vg(e,[{key:"register",value:function(t,e){if(this._sourceDefinitions[t])throw new A("schema-cannot-register-item-twice",this,{itemName:t});this._sourceDefinitions[t]=[Object.assign({},e)],this._clearCache()}},{key:"extend",value:function(t,e){if(!this._sourceDefinitions[t])throw new A("schema-cannot-extend-missing-item",this,{itemName:t});this._sourceDefinitions[t].push(Object.assign({},e)),this._clearCache()}},{key:"getDefinitions",value:function(){return this._compiledDefinitions||this._compile(),this._compiledDefinitions}},{key:"getDefinition",value:function(t){var e;return e="string"==typeof t?t:"is"in t&&(t.is("$text")||t.is("$textProxy"))?"$text":t.name,this.getDefinitions()[e]}},{key:"isRegistered",value:function(t){return!!this.getDefinition(t)}},{key:"isBlock",value:function(t){var e=this.getDefinition(t);return!(!e||!e.isBlock)}},{key:"isLimit",value:function(t){var e=this.getDefinition(t);return!(!e||!e.isLimit&&!e.isObject)}},{key:"isObject",value:function(t){var e=this.getDefinition(t);return!!e&&!!(e.isObject||e.isLimit&&e.isSelectable&&e.isContent)}},{key:"isInline",value:function(t){var e=this.getDefinition(t);return!(!e||!e.isInline)}},{key:"isSelectable",value:function(t){var e=this.getDefinition(t);return!(!e||!e.isSelectable&&!e.isObject)}},{key:"isContent",value:function(t){var e=this.getDefinition(t);return!(!e||!e.isContent&&!e.isObject)}},{key:"checkChild",value:function(t,e){return!!e&&this._checkContextMatch(e,t)}},{key:"checkAttribute",value:function(t,e){var r=this.getDefinition(t.last);return!!r&&r.allowAttributes.includes(e)}},{key:"checkMerge",value:function(t,e){if(t instanceof fb){var r=t.nodeBefore,n=t.nodeAfter;if(!(r instanceof Yy))throw new A("schema-check-merge-no-element-before",this);if(!(n instanceof Yy))throw new A("schema-check-merge-no-element-after",this);return this.checkMerge(r,n)}var o,i=Bg(e.getChildren());try{for(i.s();!(o=i.n()).done;){var a=o.value;if(!this.checkChild(t,a))return!1}}catch(t){i.e(t)}finally{i.f()}return!0}},{key:"addChildCheck",value:function(t){this.on("checkChild",(function(e,r){var n=Ig(r,2),o=n[0],i=n[1];if(i){var a=t(o,i);"boolean"==typeof a&&(e.stop(),e.return=a)}}),{priority:"high"})}},{key:"addAttributeCheck",value:function(t){this.on("checkAttribute",(function(e,r){var n=Ig(r,2),o=n[0],i=n[1],a=t(o,i);"boolean"==typeof a&&(e.stop(),e.return=a)}),{priority:"high"})}},{key:"setAttributeProperties",value:function(t,e){this._attributeProperties[t]=Object.assign(this.getAttributeProperties(t),e)}},{key:"getAttributeProperties",value:function(t){return this._attributeProperties[t]||{}}},{key:"getLimitElement",value:function(t){var e;for(e=t instanceof fb?t.parent:(t instanceof Tb?[t]:Array.from(t.getRanges())).reduce((function(t,e){var r=e.getCommonAncestor();return t?t.getCommonAncestor(r,{includeSelf:!0}):r}),null);!this.isLimit(e)&&e.parent;)e=e.parent;return e}},{key:"checkAttributeInSelection",value:function(t,e){if(t.isCollapsed){var r=t.getFirstPosition(),n=[].concat(Rg(r.getAncestors()),[new Cy("",t.getAttributes())]);return this.checkAttribute(n,e)}var o,i=Bg(t.getRanges());try{for(i.s();!(o=i.n()).done;){var a,c=Bg(o.value);try{for(c.s();!(a=c.n()).done;){var u=a.value;if(this.checkAttribute(u.item,e))return!0}}catch(t){c.e(t)}finally{c.f()}}}catch(t){i.e(t)}finally{i.f()}return!1}},{key:"getValidRanges",value:Dg().mark((function t(e,r){var n,o,i;return Dg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=cw(e),n=Bg(e),t.prev=2,n.s();case 4:if((o=n.n()).done){t.next=9;break}return i=o.value,t.delegateYield(this._getValidRangesForRange(i,r),"t0",7);case 7:t.next=4;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),n.e(t.t1);case 14:return t.prev=14,n.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[2,11,14,17]])}))},{key:"getNearestSelectionRange",value:function(t){var e,r,n=this,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"both";if("$graveyard"==t.root.rootName)return null;if(this.checkChild(t,"$text"))return new Tb(t);var i=t.getAncestors().reverse().find((function(t){return n.isLimit(t)}))||t.root;"both"!=o&&"backward"!=o||(e=new tb({boundaries:Tb._createIn(i),startPosition:t,direction:"backward"})),"both"!=o&&"forward"!=o||(r=new tb({boundaries:Tb._createIn(i),startPosition:t}));var a,c=Bg(aw(e,r));try{for(c.s();!(a=c.n()).done;){var u=a.value,s=u.walker==e?"elementEnd":"elementStart",l=u.value;if(l.type==s&&this.isObject(l.item))return Tb._createOn(l.item);if(this.checkChild(l.nextPosition,"$text"))return new Tb(l.nextPosition)}}catch(t){c.e(t)}finally{c.f()}return null}},{key:"findAllowedParent",value:function(t,e){for(var r=t.parent;r;){if(this.checkChild(r,e))return r;if(this.isLimit(r))return null;r=r.parent}return null}},{key:"setAllowedAttributes",value:function(t,e,r){for(var n=r.model,o=0,i=Object.entries(e);o<i.length;o++){var a=Ig(i[o],2),c=a[0],u=a[1];n.schema.checkAttribute(t,c)&&r.setAttribute(c,u,t)}}},{key:"removeDisallowedAttributes",value:function(t,e){var r,n=Bg(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.is("$text"))uw(this,o,e);else{var i,a=Bg(Tb._createIn(o).getPositions());try{for(a.s();!(i=a.n()).done;){var c=i.value;uw(this,c.nodeBefore||c.parent,e)}}catch(t){a.e(t)}finally{a.f()}}}}catch(t){n.e(t)}finally{n.f()}}},{key:"getAttributesWithProperty",value:function(t,e,r){var n,o={},i=Bg(t.getAttributes());try{for(i.s();!(n=i.n()).done;){var a=Ig(n.value,2),c=a[0],u=a[1],s=this.getAttributeProperties(c);void 0!==s[e]&&(void 0!==r&&r!==s[e]||(o[c]=u))}}catch(t){i.e(t)}finally{i.f()}return o}},{key:"createContext",value:function(t){return new Kg(t)}},{key:"_clearCache",value:function(){this._compiledDefinitions=null}},{key:"_compile",value:function(){for(var t={},e=this._sourceDefinitions,r=Object.keys(e),n=0,o=r;n<o.length;n++){var i=o[n];t[i]=Hg(e[i],i)}for(var a=0,c=r;a<c.length;a++)Jg(t,c[a]);for(var u=0,s=r;u<s.length;u++)Yg(t,s[u]);for(var l=0,f=r;l<f.length;l++)Zg(t,f[l]);for(var p=0,d=r;p<d.length;p++){var h=d[p];Xg(t,h),Qg(t,h)}for(var y=0,b=r;y<b.length;y++){var v=b[y];tw(t,v),ew(t,v),rw(t,v)}this._compiledDefinitions=t}},{key:"_checkContextMatch",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length-1,n=e.getItem(r);if(t.allowIn.includes(n.name)){if(0==r)return!0;var o=this.getDefinition(n);return this._checkContextMatch(o,e,r-1)}return!1}},{key:"_getValidRangesForRange",value:Dg().mark((function t(e,r){var n,o,i,a,c;return Dg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.start,o=e.start,i=Bg(e.getItems({shallow:!0})),t.prev=3,i.s();case 5:if((a=i.n()).done){t.next=17;break}if(!(c=a.value).is("element")){t.next=9;break}return t.delegateYield(this._getValidRangesForRange(Tb._createIn(c),r),"t0",9);case 9:if(this.checkAttribute(c,r)){t.next=14;break}if(n.isEqual(o)){t.next=13;break}return t.next=13,new Tb(n,o);case 13:n=fb._createAfter(c);case 14:o=fb._createAfter(c);case 15:t.next=5;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(3),i.e(t.t1);case 22:return t.prev=22,i.f(),t.finish(22);case 25:if(n.isEqual(o)){t.next=28;break}return t.next=28,new Tb(n,o);case 28:case"end":return t.stop()}}),t,this,[[3,19,22,25]])}))},{key:"findOptimalInsertionRange",value:function(t,e){var r=t.getSelectedElement();if(r&&this.isObject(r)&&!this.isInline(r))return"before"==e||"after"==e?new Tb(fb._createAt(r,e)):Tb._createOn(r);var n=Pi(t.getSelectedBlocks());if(!n)return new Tb(t.focus);if(n.isEmpty)return new Tb(fb._createAt(n,0));var o=fb._createAfter(n);return t.focus.isTouching(o)?new Tb(o):new Tb(fb._createBefore(n))}}])}(mt()),Kg=function(){function t(e){if(Lg(this,t),e instanceof t)return e;var r;r="string"==typeof e?[e]:Array.isArray(e)?e:e.getAncestors({includeSelf:!0}),this._items=r.map(iw)}return Vg(t,[{key:"length",get:function(){return this._items.length}},{key:"last",get:function(){return this._items[this._items.length-1]}},{key:Symbol.iterator,value:function(){return this._items[Symbol.iterator]()}},{key:"push",value:function(e){var r=new t([e]);return r._items=[].concat(Rg(this._items),Rg(r._items)),r}},{key:"getItem",value:function(t){return this._items[t]}},{key:"getNames",value:Dg().mark((function t(){return Dg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._items.map((function(t){return t.name})),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"endsWith",value:function(t){return Array.from(this.getNames()).join(" ").endsWith(t)}},{key:"startsWith",value:function(t){return Array.from(this.getNames()).join(" ").startsWith(t)}}])}();function Hg(t,e){var r={name:e,allowIn:[],allowContentOf:[],allowWhere:[],allowAttributes:[],allowAttributesOf:[],allowChildren:[],inheritTypesFrom:[]};return function(t,e){var r,n=Bg(t);try{for(n.s();!(r=n.n()).done;){var o,i=r.value,a=Object.keys(i).filter((function(t){return t.startsWith("is")})),c=Bg(a);try{for(c.s();!(o=c.n()).done;){var u=o.value;e[u]=!!i[u]}}catch(t){c.e(t)}finally{c.f()}}}catch(t){n.e(t)}finally{n.f()}}(t,r),nw(t,r,"allowIn"),nw(t,r,"allowContentOf"),nw(t,r,"allowWhere"),nw(t,r,"allowAttributes"),nw(t,r,"allowAttributesOf"),nw(t,r,"allowChildren"),nw(t,r,"inheritTypesFrom"),function(t,e){var r,n=Bg(t);try{for(n.s();!(r=n.n()).done;){var o=r.value.inheritAllFrom;o&&(e.allowContentOf.push(o),e.allowWhere.push(o),e.allowAttributesOf.push(o),e.inheritTypesFrom.push(o))}}catch(t){n.e(t)}finally{n.f()}}(t,r),r}function Jg(t,e){var r,n=t[e],o=Bg(n.allowChildren);try{for(o.s();!(r=o.n()).done;){var i=t[r.value];i&&i.allowIn.push(e)}}catch(t){o.e(t)}finally{o.f()}n.allowChildren.length=0}function Yg(t,e){var r,n=Bg(t[e].allowContentOf);try{for(n.s();!(r=n.n()).done;){var o=r.value;t[o]&&ow(t,o).forEach((function(t){t.allowIn.push(e)}))}}catch(t){n.e(t)}finally{n.f()}delete t[e].allowContentOf}function Zg(t,e){var r,n=Bg(t[e].allowWhere);try{for(n.s();!(r=n.n()).done;){var o=t[r.value];if(o){var i,a=o.allowIn;(i=t[e].allowIn).push.apply(i,Rg(a))}}}catch(t){n.e(t)}finally{n.f()}delete t[e].allowWhere}function Xg(t,e){var r,n=Bg(t[e].allowAttributesOf);try{for(n.s();!(r=n.n()).done;){var o=t[r.value];if(o){var i,a=o.allowAttributes;(i=t[e].allowAttributes).push.apply(i,Rg(a))}}}catch(t){n.e(t)}finally{n.f()}delete t[e].allowAttributesOf}function Qg(t,e){var r,n=t[e],o=Bg(n.inheritTypesFrom);try{for(o.s();!(r=o.n()).done;){var i=t[r.value];if(i){var a,c=Object.keys(i).filter((function(t){return t.startsWith("is")})),u=Bg(c);try{for(u.s();!(a=u.n()).done;){var s=a.value;s in n||(n[s]=i[s])}}catch(t){u.e(t)}finally{u.f()}}}}catch(t){o.e(t)}finally{o.f()}delete n.inheritTypesFrom}function tw(t,e){var r=t[e],n=r.allowIn.filter((function(e){return t[e]}));r.allowIn=Array.from(new Set(n))}function ew(t,e){var r,n=Bg(t[e].allowIn);try{for(n.s();!(r=n.n()).done;)t[r.value].allowChildren.push(e)}catch(t){n.e(t)}finally{n.f()}}function rw(t,e){var r=t[e];r.allowAttributes=Array.from(new Set(r.allowAttributes))}function nw(t,e,r){var n,o=Bg(t);try{for(o.s();!(n=o.n()).done;){var i=n.value[r];if("string"==typeof i)e[r].push(i);else if(Array.isArray(i)){var a;(a=e[r]).push.apply(a,Rg(i))}}}catch(t){o.e(t)}finally{o.f()}}function ow(t,e){var r,n=t[e];return(r=t,Object.keys(r).map((function(t){return r[t]}))).filter((function(t){return t.allowIn.includes(n.name)}))}function iw(t){return"string"==typeof t||t.is("documentFragment")?{name:"string"==typeof t?t:"$documentFragment",getAttributeKeys:Dg().mark((function t(){return Dg().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})),getAttribute:function(){}}:{name:t.is("element")?t.name:"$text",getAttributeKeys:Dg().mark((function e(){return Dg().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.delegateYield(t.getAttributeKeys(),"t0",1);case 1:case"end":return e.stop()}}),e)})),getAttribute:function(e){return t.getAttribute(e)}}}function aw(t,e){var r,n,o;return Dg().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=!1;case 1:if(r){i.next=17;break}if(r=!0,!t){i.next=9;break}if((n=t.next()).done){i.next=9;break}return r=!1,i.next=9,{walker:t,value:n.value};case 9:if(!e){i.next=15;break}if((o=e.next()).done){i.next=15;break}return r=!1,i.next=15,{walker:e,value:o.value};case 15:i.next=1;break;case 17:case"end":return i.stop()}}),xg)}function cw(t){var e,r,n;return Dg().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e=Bg(t),o.prev=1,e.s();case 3:if((r=e.n()).done){o.next=8;break}return n=r.value,o.delegateYield(n.getMinimalFlatRanges(),"t0",6);case 6:o.next=3;break;case 8:o.next=13;break;case 10:o.prev=10,o.t1=o.catch(1),e.e(o.t1);case 13:return o.prev=13,e.f(),o.finish(13);case 16:case"end":return o.stop()}}),Cg,null,[[1,10,13,16]])}function uw(t,e,r){var n,o=Bg(e.getAttributeKeys());try{for(o.s();!(n=o.n()).done;){var i=n.value;t.checkAttribute(e,i)||r.removeAttribute(i,e)}}catch(t){o.e(t)}finally{o.f()}}function sw(t){return sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sw(t)}function lw(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return fw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function fw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pw(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dw(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pw(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=yw(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pw(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function hw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yw(n.key),n)}}function yw(t){var e=function(t,e){if("object"!=sw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sw(e)?e:e+""}function bw(t,e,r){return e=mw(e),function(t,e){if(e&&("object"===sw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vw()?Reflect.construct(e,r||[],mw(t).constructor):e.apply(t,r))}function vw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vw=function(){return!!t})()}function mw(t){return mw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mw(t)}function gw(t,e){return gw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gw(t,e)}var ww=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=bw(this,e))._splitParts=new Map,r._cursorParents=new Map,r._modelCursor=null,r._emptyElementsToKeep=new Set,r.conversionApi=dw(dw({},t),{},{consumable:null,writer:null,store:null,convertItem:function(t,e){return r._convertItem(t,e)},convertChildren:function(t,e){return r._convertChildren(t,e)},safeInsert:function(t,e){return r._safeInsert(t,e)},updateConversionResult:function(t,e){return r._updateConversionResult(t,e)},splitToAllowedParent:function(t,e){return r._splitToAllowedParent(t,e)},getSplitParts:function(t){return r._getSplitParts(t)},keepEmptyElement:function(t){return r._keepEmptyElement(t)}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gw(t,e)}(e,t),r=e,n=[{key:"convert",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["$root"];this.fire("viewCleanup",t),this._modelCursor=function(t,e){var r,n,o=lw(new Kg(t));try{for(o.s();!(n=o.n()).done;){var i,a=n.value,c={},u=lw(a.getAttributeKeys());try{for(u.s();!(i=u.n()).done;){var s=i.value;c[s]=a.getAttribute(s)}}catch(t){u.e(t)}finally{u.f()}var l=e.createElement(a.name,c);r&&e.insert(l,r),r=fb._createAt(l,0)}}catch(t){o.e(t)}finally{o.f()}return r}(r,e),this.conversionApi.writer=e,this.conversionApi.consumable=jg.createFrom(t),this.conversionApi.store={};var n=this._convertItem(t,this._modelCursor).modelRange,o=e.createDocumentFragment();if(n){this._removeEmptyElements();for(var i=0,a=Array.from(this._modelCursor.parent.getChildren());i<a.length;i++){var c=a[i];e.append(c,o)}o.markers=function(t,e){var r,n=new Set,o=new Map,i=lw(Tb._createIn(t).getItems());try{for(i.s();!(r=i.n()).done;){var a=r.value;a.is("element","$marker")&&n.add(a)}}catch(t){i.e(t)}finally{i.f()}var c,u=lw(n);try{for(u.s();!(c=u.n()).done;){var s=c.value,l=s.getAttribute("data-name"),f=e.createPositionBefore(s);o.has(l)?o.get(l).end=f.clone():o.set(l,new Tb(f.clone())),e.remove(s)}}catch(t){u.e(t)}finally{u.f()}return o}(o,e)}return this._modelCursor=null,this._splitParts.clear(),this._cursorParents.clear(),this._emptyElementsToKeep.clear(),this.conversionApi.writer=null,this.conversionApi.store=null,o}},{key:"_convertItem",value:function(t,e){var r={viewItem:t,modelCursor:e,modelRange:null};if(t.is("element")?this.fire("element:".concat(t.name),r,this.conversionApi):t.is("$text")?this.fire("text",r,this.conversionApi):this.fire("documentFragment",r,this.conversionApi),r.modelRange&&!(r.modelRange instanceof Tb))throw new A("view-conversion-dispatcher-incorrect-result",this);return{modelRange:r.modelRange,modelCursor:r.modelCursor}}},{key:"_convertChildren",value:function(t,e){for(var r=e.is("position")?e:fb._createAt(e,0),n=new Tb(r),o=0,i=Array.from(t.getChildren());o<i.length;o++){var a=i[o],c=this._convertItem(a,r);c.modelRange instanceof Tb&&(n.end=c.modelRange.end,r=c.modelCursor)}return{modelRange:n,modelCursor:r}}},{key:"_safeInsert",value:function(t,e){var r=this._splitToAllowedParent(t,e);return!!r&&(this.conversionApi.writer.insert(t,r.position),!0)}},{key:"_updateConversionResult",value:function(t,e){var r=this._getSplitParts(t),n=this.conversionApi.writer;e.modelRange||(e.modelRange=n.createRange(n.createPositionBefore(t),n.createPositionAfter(r[r.length-1])));var o=this._cursorParents.get(t);e.modelCursor=o?n.createPositionAt(o,0):e.modelRange.end}},{key:"_splitToAllowedParent",value:function(t,e){var r=this.conversionApi,n=r.schema,o=r.writer,i=n.findAllowedParent(e,t);if(i){if(i===e.parent)return{position:e};this._modelCursor.parent.getAncestors().includes(i)&&(i=null)}if(!i)return Im(e,t,n)?{position:Bm(e,o)}:null;var a,c=this.conversionApi.writer.split(e,i),u=[],s=lw(c.range.getWalker());try{for(s.s();!(a=s.n()).done;){var l=a.value;if("elementEnd"==l.type)u.push(l.item);else{var f=u.pop(),p=l.item;this._registerSplitPair(f,p)}}}catch(t){s.e(t)}finally{s.f()}var d=c.range.end.parent;return this._cursorParents.set(t,d),{position:c.position,cursorParent:d}}},{key:"_registerSplitPair",value:function(t,e){this._splitParts.has(t)||this._splitParts.set(t,[t]);var r=this._splitParts.get(t);this._splitParts.set(e,r),r.push(e)}},{key:"_getSplitParts",value:function(t){return this._splitParts.has(t)?this._splitParts.get(t):[t]}},{key:"_keepEmptyElement",value:function(t){this._emptyElementsToKeep.add(t)}},{key:"_removeEmptyElements",value:function(){var t,e=!1,r=lw(this._splitParts.keys());try{for(r.s();!(t=r.n()).done;){var n=t.value;n.isEmpty&&!this._emptyElementsToKeep.has(n)&&(this.conversionApi.writer.remove(n),this._splitParts.delete(n),e=!0)}}catch(t){r.e(t)}finally{r.f()}e&&this._removeEmptyElements()}}],n&&hw(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function kw(t){return kw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kw(t)}function _w(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ow(n.key),n)}}function Ow(t){var e=function(t,e){if("object"!=kw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kw(e)?e:e+""}var Pw=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},(e=[{key:"getHtml",value:function(t){var e=qn.document.implementation.createHTMLDocument("").createElement("div");return e.appendChild(t),e.innerHTML}}])&&_w(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Sw(t){return Sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sw(t)}function jw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ew(n.key),n)}}function Ew(t){var e=function(t,e){if("object"!=Sw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Sw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Sw(e)?e:e+""}var Tw=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.skipComments=!0,this.domParser=new DOMParser,this.domConverter=new vp(e,{renderingMode:"data"}),this.htmlWriter=new Pw},(e=[{key:"toData",value:function(t){var e=this.domConverter.viewToDom(t);return this.htmlWriter.getHtml(e)}},{key:"toView",value:function(t){var e=this._toDom(t);return this.domConverter.domToView(e,{skipComments:this.skipComments})}},{key:"registerRawContentMatcher",value:function(t){this.domConverter.registerRawContentMatcher(t)}},{key:"useFillerType",value:function(t){this.domConverter.blockFillerMode="marked"==t?"markedNbsp":"nbsp"}},{key:"_toDom",value:function(t){t.match(/<(?:html|body|head|meta)(?:\s[^>]*)?>/i)||(t="<body>".concat(t,"</body>"));for(var e=this.domParser.parseFromString(t,"text/html"),r=e.createDocumentFragment(),n=e.body.childNodes;n.length>0;)r.appendChild(n[0]);return r}}])&&jw(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Aw(t){return Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Aw(t)}function xw(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||Dw(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Cw(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=Dw(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Dw(t,e){if(t){if("string"==typeof t)return Rw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rw(t,e):void 0}}function Rw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Iw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Bw(n.key),n)}}function Bw(t){var e=function(t,e){if("object"!=Aw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Aw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Aw(e)?e:e+""}function Fw(t,e,r){return e=Lw(e),function(t,e){if(e&&("object"===Aw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Mw()?Reflect.construct(e,r||[],Lw(t).constructor):e.apply(t,r))}function Mw(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Mw=function(){return!!t})()}function Lw(t){return Lw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lw(t)}function Nw(t,e){return Nw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nw(t,e)}var Vw=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Fw(this,e)).model=t,n.mapper=new Nb,n.downcastDispatcher=new cv({mapper:n.mapper,schema:t.schema}),n.downcastDispatcher.on("insert:$text",(function(t,e,r){if(r.consumable.consume(e.item,t.name)){var n=r.writer,o=r.mapper.toViewPosition(e.range.start),i=n.createText(e.item.data);n.insert(o,i)}}),{priority:"lowest"}),n.downcastDispatcher.on("insert",(function(t,e,r){r.convertAttributes(e.item),e.reconversion||!e.item.is("element")||e.item.isEmpty||r.convertChildren(e.item)}),{priority:"lowest"}),n.upcastDispatcher=new ww({schema:t.schema}),n.viewDocument=new bl(r),n.stylesProcessor=r,n.htmlProcessor=new Tw(n.viewDocument),n.processor=n.htmlProcessor,n._viewWriter=new Pf(n.viewDocument),n.upcastDispatcher.on("text",(function(t,e,r){var n=r.schema,o=r.consumable,i=r.writer,a=e.modelCursor;if(o.test(e.viewItem)){if(!n.checkChild(a,"$text")){if(!Im(a,"$text",n))return;if(0==e.viewItem.data.trim().length)return;var c=a.nodeBefore;a=Bm(a,i),c&&c.is("element","$marker")&&(i.move(i.createRangeOn(c),a),a=i.createPositionAfter(c))}o.consume(e.viewItem);var u=i.createText(e.viewItem.data);i.insert(u,a),e.modelRange=i.createRange(a,a.getShiftedBy(u.offsetSize)),e.modelCursor=e.modelRange.end}}),{priority:"lowest"}),n.upcastDispatcher.on("element",(function(t,e,r){if(!e.modelRange&&r.consumable.consume(e.viewItem,{name:!0})){var n=r.convertChildren(e.viewItem,e.modelCursor),o=n.modelRange,i=n.modelCursor;e.modelRange=o,e.modelCursor=i}}),{priority:"lowest"}),n.upcastDispatcher.on("documentFragment",(function(t,e,r){if(!e.modelRange&&r.consumable.consume(e.viewItem,{name:!0})){var n=r.convertChildren(e.viewItem,e.modelCursor),o=n.modelRange,i=n.modelCursor;e.modelRange=o,e.modelCursor=i}}),{priority:"lowest"}),mt().prototype.decorate.call(n,"init"),mt().prototype.decorate.call(n,"set"),mt().prototype.decorate.call(n,"get"),mt().prototype.decorate.call(n,"toView"),mt().prototype.decorate.call(n,"toModel"),n.on("init",(function(){n.fire("ready")}),{priority:"lowest"}),n.on("ready",(function(){n.model.enqueueChange({isUndoable:!1},Rm)}),{priority:"lowest"}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nw(t,e)}(e,t),r=e,n=[{key:"get",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.rootName,r=void 0===e?"main":e,n=t.trim,o=void 0===n?"empty":n;if(!this._checkIfRootsExists([r]))throw new A("datacontroller-get-non-existent-root",this);var i=this.model.document.getRoot(r);return i.isAttached()||x("datacontroller-get-detached-root",this),"empty"!==o||this.model.hasContent(i,{ignoreWhitespaces:!0})?this.stringify(i,t):""}},{key:"stringify",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.toView(t,e);return this.processor.toData(r)}},{key:"toView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.viewDocument,n=this._viewWriter;this.mapper.clearBindings();var o=Tb._createIn(t),i=new df(r);this.mapper.bindElements(t,i);var a=t.is("documentFragment")?t.markers:function(t){var e=[],r=t.root.document;if(!r)return new Map;var n,o=Tb._createIn(t),i=Cw(r.model.markers);try{for(i.s();!(n=i.n()).done;){var a=n.value,c=a.getRange(),u=c.isCollapsed,s=c.start.isEqual(o.start)||c.end.isEqual(o.end);if(u&&s)e.push([a.name,c]);else{var l=o.getIntersection(c);l&&e.push([a.name,l])}}}catch(t){i.e(t)}finally{i.f()}return e.sort((function(t,e){var r=xw(t,2),n=r[0],o=r[1],i=xw(e,2),a=i[0],c=i[1];if("after"!==o.end.compareWith(c.start))return 1;if("before"!==o.start.compareWith(c.end))return-1;switch(o.start.compareWith(c.start)){case"before":return 1;case"after":return-1;default:switch(o.end.compareWith(c.end)){case"before":return 1;case"after":return-1;default:return a.localeCompare(n)}}})),new Map(e)}(t);return this.downcastDispatcher.convert(o,a,n,e),i}},{key:"init",value:function(t){var e=this;if(this.model.document.version)throw new A("datacontroller-init-document-not-empty",this);var r={};if("string"==typeof t?r.main=t:r=t,!this._checkIfRootsExists(Object.keys(r)))throw new A("datacontroller-init-non-existent-root",this);return this.model.enqueueChange({isUndoable:!1},(function(t){for(var n=0,o=Object.keys(r);n<o.length;n++){var i=o[n],a=e.model.document.getRoot(i);t.insert(e.parse(r[i],a),a,0)}})),Promise.resolve()}},{key:"set",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={};if("string"==typeof t?n.main=t:n=t,!this._checkIfRootsExists(Object.keys(n)))throw new A("datacontroller-set-non-existent-root",this);this.model.enqueueChange(r.batchType||{},(function(t){t.setSelection(null),t.removeSelectionAttribute(e.model.document.selection.getAttributeKeys());for(var r=0,o=Object.keys(n);r<o.length;r++){var i=o[r],a=e.model.document.getRoot(i);t.remove(t.createRangeIn(a)),t.insert(e.parse(n[i],a),a,0)}}))}},{key:"parse",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root",r=this.processor.toView(t);return this.toModel(r,e)}},{key:"toModel",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root";return this.model.change((function(n){return e.upcastDispatcher.convert(t,n,r)}))}},{key:"addStyleProcessorRules",value:function(t){t(this.stylesProcessor)}},{key:"registerRawContentMatcher",value:function(t){this.processor&&this.processor!==this.htmlProcessor&&this.processor.registerRawContentMatcher(t),this.htmlProcessor.registerRawContentMatcher(t)}},{key:"destroy",value:function(){this.stopListening()}},{key:"_checkIfRootsExists",value:function(t){var e,r=Cw(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;if(!this.model.document.getRoot(n))return!1}}catch(t){r.e(t)}finally{r.f()}return!0}}],n&&Iw(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function zw(){zw=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Uw(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Uw(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}var $w=zw().mark(Yw),qw=zw().mark(Zw);function Uw(t){return Uw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Uw(t)}function Ww(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Gw(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Gw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Gw(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Kw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Hw(n.key),n)}}function Hw(t){var e=function(t,e){if("object"!=Uw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Uw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Uw(e)?e:e+""}var Jw=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._helpers=new Map,this._downcast=Ko(e),this._createConversionHelpers({name:"downcast",dispatchers:this._downcast,isDowncast:!0}),this._upcast=Ko(r),this._createConversionHelpers({name:"upcast",dispatchers:this._upcast,isDowncast:!1})},(e=[{key:"addAlias",value:function(t,e){var r=this._downcast.includes(e);if(!this._upcast.includes(e)&&!r)throw new A("conversion-add-alias-dispatcher-not-registered",this);this._createConversionHelpers({name:t,dispatchers:[e],isDowncast:r})}},{key:"for",value:function(t){if(!this._helpers.has(t))throw new A("conversion-for-unknown-group",this);return this._helpers.get(t)}},{key:"elementToElement",value:function(t){this.for("downcast").elementToElement(t);var e,r=Ww(Yw(t));try{for(r.s();!(e=r.n()).done;){var n=e.value,o=n.model,i=n.view;this.for("upcast").elementToElement({model:o,view:i,converterPriority:t.converterPriority})}}catch(t){r.e(t)}finally{r.f()}}},{key:"attributeToElement",value:function(t){this.for("downcast").attributeToElement(t);var e,r=Ww(Yw(t));try{for(r.s();!(e=r.n()).done;){var n=e.value,o=n.model,i=n.view;this.for("upcast").elementToAttribute({view:i,model:o,converterPriority:t.converterPriority})}}catch(t){r.e(t)}finally{r.f()}}},{key:"attributeToAttribute",value:function(t){this.for("downcast").attributeToAttribute(t);var e,r=Ww(Yw(t));try{for(r.s();!(e=r.n()).done;){var n=e.value,o=n.model,i=n.view;this.for("upcast").attributeToAttribute({view:i,model:o})}}catch(t){r.e(t)}finally{r.f()}}},{key:"_createConversionHelpers",value:function(t){var e=t.name,r=t.dispatchers,n=t.isDowncast;if(this._helpers.has(e))throw new A("conversion-group-exists",this);var o=n?new gm(r):new Hm(r);this._helpers.set(e,o)}}])&&Kw(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function Yw(t){var e,r,n,o,i,a;return zw().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!t.model.values){c.next=22;break}e=Ww(t.model.values),c.prev=2,e.s();case 4:if((r=e.n()).done){c.next=12;break}return n=r.value,o={key:t.model.key,value:n},i=t.view[n],a=t.upcastAlso?t.upcastAlso[n]:void 0,c.delegateYield(Zw(o,i,a),"t0",10);case 10:c.next=4;break;case 12:c.next=17;break;case 14:c.prev=14,c.t1=c.catch(2),e.e(c.t1);case 17:return c.prev=17,e.f(),c.finish(17);case 20:c.next=23;break;case 22:return c.delegateYield(Zw(t.model,t.view,t.upcastAlso),"t2",23);case 23:case"end":return c.stop()}}),$w,null,[[2,14,17,20]])}function Zw(t,e,r){var n,o,i;return zw().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,{model:t,view:e};case 2:if(!r){a.next=20;break}n=Ww(Ko(r)),a.prev=4,n.s();case 6:if((o=n.n()).done){a.next=12;break}return i=o.value,a.next=10,{model:t,view:i};case 10:a.next=6;break;case 12:a.next=17;break;case 14:a.prev=14,a.t0=a.catch(4),n.e(a.t0);case 17:return a.prev=17,n.f(),a.finish(17);case 20:case"end":return a.stop()}}),qw,null,[[4,14,17,20]])}function Xw(t){return Xw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xw(t)}function Qw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tk(n.key),n)}}function tk(t){var e=function(t,e){if("object"!=Xw(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Xw(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Xw(e)?e:e+""}var ek=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.baseVersion=e,this.isDocumentOperation=null!==this.baseVersion,this.batch=null},r=[{key:"className",get:function(){return"Operation"}},{key:"fromJSON",value:function(t,e){return new this(t.baseVersion)}}],(e=[{key:"_validate",value:function(){}},{key:"toJSON",value:function(){var t=Object.assign({},this);return t.__className=this.constructor.className,delete t.batch,delete t.isDocumentOperation,t}}])&&Qw(t.prototype,e),r&&Qw(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,r}();function rk(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return nk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nk(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function nk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function ok(t,e){var r=ck(e),n=r.reduce((function(t,e){return t+e.offsetSize}),0),o=t.parent;sk(t);var i=t.index;return o._insertChild(i,r),uk(o,i+r.length),uk(o,i),new Tb(t,t.getShiftedBy(n))}function ik(t){if(!t.isFlat)throw new A("operation-utils-remove-range-not-flat",this);var e=t.start.parent;sk(t.start),sk(t.end);var r=e._removeChildren(t.start.index,t.end.index-t.start.index);return uk(e,t.start.index),r}function ak(t,e){if(!t.isFlat)throw new A("operation-utils-move-range-not-flat",this);var r=ik(t);return ok(e=e._getTransformedByDeletion(t.start,t.end.offset-t.start.offset),r)}function ck(t){var e=[];!function t(r){if("string"==typeof r)e.push(new Cy(r));else if(r instanceof Ny)e.push(new Cy(r.data,r.getAttributes()));else if(r instanceof by)e.push(r);else if(Dt(r)){var n,o=rk(r);try{for(o.s();!(n=o.n()).done;)t(n.value)}catch(t){o.e(t)}finally{o.f()}}}(t);for(var r=1;r<e.length;r++){var n=e[r],o=e[r-1];n instanceof Cy&&o instanceof Cy&&lk(n,o)&&(e.splice(r-1,2,new Cy(o.data+n.data,o.getAttributes())),r--)}return e}function uk(t,e){var r=t.getChild(e-1),n=t.getChild(e);if(r&&n&&r.is("$text")&&n.is("$text")&&lk(r,n)){var o=new Cy(r.data+n.data,r.getAttributes());t._removeChildren(e-1,2),t._insertChild(e-1,o)}}function sk(t){var e=t.textNode,r=t.parent;if(e){var n=t.offset-e.startOffset,o=e.index;r._removeChildren(o,1);var i=new Cy(e.data.substr(0,n),e.getAttributes()),a=new Cy(e.data.substr(n),e.getAttributes());r._insertChild(o,[i,a])}}function lk(t,e){var r,n=t.getAttributes(),o=e.getAttributes(),i=rk(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a[1]!==e.getAttribute(a[0]))return!1;o.next()}}catch(t){i.e(t)}finally{i.f()}return o.next().done}function fk(t){return fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fk(t)}function pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dk(n.key),n)}}function dk(t){var e=function(t,e){if("object"!=fk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fk(e)?e:e+""}function hk(t,e,r){return e=vk(e),function(t,e){if(e&&("object"===fk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yk()?Reflect.construct(e,r||[],vk(t).constructor):e.apply(t,r))}function yk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(yk=function(){return!!t})()}function bk(){return bk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},bk.apply(this,arguments)}function vk(t){return vk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vk(t)}function mk(t,e){return mk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mk(t,e)}var gk=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=hk(this,e,[o])).sourcePosition=t.clone(),i.sourcePosition.stickiness="toNext",i.howMany=r,i.targetPosition=n.clone(),i.targetPosition.stickiness="toNone",i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mk(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"MoveOperation"}},{key:"fromJSON",value:function(t,e){var r=fb.fromJSON(t.sourcePosition,e),n=fb.fromJSON(t.targetPosition,e);return new this(r,t.howMany,n,t.baseVersion)}}],(n=[{key:"type",get:function(){return"$graveyard"==this.targetPosition.root.rootName?"remove":"$graveyard"==this.sourcePosition.root.rootName?"reinsert":"move"}},{key:"affectedSelectable",get:function(){return[Tb._createFromPositionAndShift(this.sourcePosition,this.howMany),Tb._createFromPositionAndShift(this.targetPosition,0)]}},{key:"clone",value:function(){return new e(this.sourcePosition,this.howMany,this.targetPosition,this.baseVersion)}},{key:"getMovedRangeStart",value:function(){return this.targetPosition._getTransformedByDeletion(this.sourcePosition,this.howMany)}},{key:"getReversed",value:function(){var t=this.sourcePosition._getTransformedByInsertion(this.targetPosition,this.howMany);return new e(this.getMovedRangeStart(),this.howMany,t,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.sourcePosition.parent,e=this.targetPosition.parent,r=this.sourcePosition.offset,n=this.targetPosition.offset;if(r+this.howMany>t.maxOffset)throw new A("move-operation-nodes-do-not-exist",this);if(t===e&&r<n&&n<r+this.howMany)throw new A("move-operation-range-into-itself",this);if(this.sourcePosition.root==this.targetPosition.root&&"prefix"==Ct(this.sourcePosition.getParentPath(),this.targetPosition.getParentPath())){var o=this.sourcePosition.path.length-1;if(this.targetPosition.path[o]>=r&&this.targetPosition.path[o]<r+this.howMany)throw new A("move-operation-node-into-itself",this)}}},{key:"_execute",value:function(){ak(Tb._createFromPositionAndShift(this.sourcePosition,this.howMany),this.targetPosition)}},{key:"toJSON",value:function(){var t=bk(vk(e.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t.targetPosition=this.targetPosition.toJSON(),t}}])&&pk(r.prototype,n),o&&pk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function wk(t){return wk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wk(t)}function kk(t){return function(t){if(Array.isArray(t))return Ok(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||_k(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _k(t,e){if(t){if("string"==typeof t)return Ok(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Ok(t,e):void 0}}function Ok(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Sk(n.key),n)}}function Sk(t){var e=function(t,e){if("object"!=wk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=wk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wk(e)?e:e+""}function jk(t,e,r){return e=Ak(e),function(t,e){if(e&&("object"===wk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Ek()?Reflect.construct(e,r||[],Ak(t).constructor):e.apply(t,r))}function Ek(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Ek=function(){return!!t})()}function Tk(){return Tk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ak(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Tk.apply(this,arguments)}function Ak(t){return Ak=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ak(t)}function xk(t,e){return xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xk(t,e)}var Ck=function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=jk(this,e,[n])).position=t.clone(),o.position.stickiness="toNone",o.nodes=new _y(ck(r)),o.shouldReceiveAttributes=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xk(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"InsertOperation"}},{key:"fromJSON",value:function(t,r){var n,o=[],i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=_k(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t.nodes);try{for(i.s();!(n=i.n()).done;){var a=n.value;a.name?o.push(Yy.fromJSON(a)):o.push(Cy.fromJSON(a))}}catch(t){i.e(t)}finally{i.f()}var c=new e(fb.fromJSON(t.position,r),o,t.baseVersion);return c.shouldReceiveAttributes=t.shouldReceiveAttributes,c}}],(n=[{key:"type",get:function(){return"insert"}},{key:"howMany",get:function(){return this.nodes.maxOffset}},{key:"affectedSelectable",get:function(){return this.position.clone()}},{key:"clone",value:function(){var t=new _y(kk(this.nodes).map((function(t){return t._clone(!0)}))),r=new e(this.position,t,this.baseVersion);return r.shouldReceiveAttributes=this.shouldReceiveAttributes,r}},{key:"getReversed",value:function(){var t=this.position.root.document.graveyard,e=new fb(t,[0]);return new gk(this.position,this.nodes.maxOffset,e,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.position.parent;if(!t||t.maxOffset<this.position.offset)throw new A("insert-operation-position-invalid",this)}},{key:"_execute",value:function(){var t=this.nodes;this.nodes=new _y(kk(t).map((function(t){return t._clone(!0)}))),ok(this.position,t)}},{key:"toJSON",value:function(){var t=Tk(Ak(e.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t.nodes=this.nodes.toJSON(),t}}])&&Pk(r.prototype,n),o&&Pk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function Dk(t){return Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dk(t)}function Rk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ik(n.key),n)}}function Ik(t){var e=function(t,e){if("object"!=Dk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Dk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Dk(e)?e:e+""}function Bk(t,e,r){return e=Lk(e),function(t,e){if(e&&("object"===Dk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Fk()?Reflect.construct(e,r||[],Lk(t).constructor):e.apply(t,r))}function Fk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Fk=function(){return!!t})()}function Mk(){return Mk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Mk.apply(this,arguments)}function Lk(t){return Lk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Lk(t)}function Nk(t,e){return Nk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Nk(t,e)}var Vk=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Bk(this,e,[i])).splitPosition=t.clone(),a.splitPosition.stickiness="toNext",a.howMany=r,a.insertionPosition=n,a.graveyardPosition=o?o.clone():null,a.graveyardPosition&&(a.graveyardPosition.stickiness="toNext"),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nk(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"SplitOperation"}},{key:"getInsertionPosition",value:function(t){var e=t.path.slice(0,-1);return e[e.length-1]++,new fb(t.root,e,"toPrevious")}},{key:"fromJSON",value:function(t,e){var r=fb.fromJSON(t.splitPosition,e),n=fb.fromJSON(t.insertionPosition,e),o=t.graveyardPosition?fb.fromJSON(t.graveyardPosition,e):null;return new this(r,t.howMany,n,o,t.baseVersion)}}],(n=[{key:"type",get:function(){return"split"}},{key:"moveTargetPosition",get:function(){var t=this.insertionPosition.path.slice();return t.push(0),new fb(this.insertionPosition.root,t)}},{key:"movedRange",get:function(){var t=this.splitPosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Tb(this.splitPosition,t)}},{key:"affectedSelectable",get:function(){var t=[Tb._createFromPositionAndShift(this.splitPosition,0),Tb._createFromPositionAndShift(this.insertionPosition,0)];return this.graveyardPosition&&t.push(Tb._createFromPositionAndShift(this.graveyardPosition,0)),t}},{key:"clone",value:function(){return new e(this.splitPosition,this.howMany,this.insertionPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var t=this.splitPosition.root.document.graveyard,e=new fb(t,[0]);return new Jk(this.moveTargetPosition,this.howMany,this.splitPosition,e,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.splitPosition.parent,e=this.splitPosition.offset;if(!t||t.maxOffset<e)throw new A("split-operation-position-invalid",this);if(!t.parent)throw new A("split-operation-split-in-root",this);if(this.howMany!=t.maxOffset-this.splitPosition.offset)throw new A("split-operation-how-many-invalid",this);if(this.graveyardPosition&&!this.graveyardPosition.nodeAfter)throw new A("split-operation-graveyard-position-invalid",this)}},{key:"_execute",value:function(){var t=this.splitPosition.parent;if(this.graveyardPosition)ak(Tb._createFromPositionAndShift(this.graveyardPosition,1),this.insertionPosition);else{var e=t._clone();ok(this.insertionPosition,e)}ak(new Tb(fb._createAt(t,this.splitPosition.offset),fb._createAt(t,t.maxOffset)),this.moveTargetPosition)}},{key:"toJSON",value:function(){var t=Mk(Lk(e.prototype),"toJSON",this).call(this);return t.splitPosition=this.splitPosition.toJSON(),t.insertionPosition=this.insertionPosition.toJSON(),this.graveyardPosition&&(t.graveyardPosition=this.graveyardPosition.toJSON()),t}}])&&Rk(r.prototype,n),o&&Rk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function zk(t){return zk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zk(t)}function $k(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qk(n.key),n)}}function qk(t){var e=function(t,e){if("object"!=zk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zk(e)?e:e+""}function Uk(t,e,r){return e=Kk(e),function(t,e){if(e&&("object"===zk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wk()?Reflect.construct(e,r||[],Kk(t).constructor):e.apply(t,r))}function Wk(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wk=function(){return!!t})()}function Gk(){return Gk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Gk.apply(this,arguments)}function Kk(t){return Kk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Kk(t)}function Hk(t,e){return Hk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Hk(t,e)}var Jk=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Uk(this,e,[i])).sourcePosition=t.clone(),a.sourcePosition.stickiness="toPrevious",a.howMany=r,a.targetPosition=n.clone(),a.targetPosition.stickiness="toNext",a.graveyardPosition=o.clone(),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hk(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"MergeOperation"}},{key:"fromJSON",value:function(t,e){var r=fb.fromJSON(t.sourcePosition,e),n=fb.fromJSON(t.targetPosition,e),o=fb.fromJSON(t.graveyardPosition,e);return new this(r,t.howMany,n,o,t.baseVersion)}}],(n=[{key:"type",get:function(){return"merge"}},{key:"deletionPosition",get:function(){return new fb(this.sourcePosition.root,this.sourcePosition.path.slice(0,-1))}},{key:"movedRange",get:function(){var t=this.sourcePosition.getShiftedBy(Number.POSITIVE_INFINITY);return new Tb(this.sourcePosition,t)}},{key:"affectedSelectable",get:function(){var t=this.sourcePosition.parent;return[Tb._createOn(t),Tb._createFromPositionAndShift(this.targetPosition,0),Tb._createFromPositionAndShift(this.graveyardPosition,0)]}},{key:"clone",value:function(){return new e(this.sourcePosition,this.howMany,this.targetPosition,this.graveyardPosition,this.baseVersion)}},{key:"getReversed",value:function(){var t=this.targetPosition._getTransformedByMergeOperation(this),e=this.sourcePosition.path.slice(0,-1),r=new fb(this.sourcePosition.root,e)._getTransformedByMergeOperation(this);return new Vk(t,this.howMany,r,this.graveyardPosition,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.sourcePosition.parent,e=this.targetPosition.parent;if(!t.parent)throw new A("merge-operation-source-position-invalid",this);if(!e.parent)throw new A("merge-operation-target-position-invalid",this);if(this.howMany!=t.maxOffset)throw new A("merge-operation-how-many-invalid",this)}},{key:"_execute",value:function(){var t=this.sourcePosition.parent;ak(Tb._createIn(t),this.targetPosition),ak(Tb._createOn(t),this.graveyardPosition)}},{key:"toJSON",value:function(){var t=Gk(Kk(e.prototype),"toJSON",this).call(this);return t.sourcePosition=t.sourcePosition.toJSON(),t.targetPosition=t.targetPosition.toJSON(),t.graveyardPosition=t.graveyardPosition.toJSON(),t}}])&&$k(r.prototype,n),o&&$k(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function Yk(t){return Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yk(t)}function Zk(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Xk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Qk(n.key),n)}}function Qk(t){var e=function(t,e){if("object"!=Yk(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Yk(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Yk(e)?e:e+""}function t_(t,e,r){return e=n_(e),function(t,e){if(e&&("object"===Yk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,e_()?Reflect.construct(e,r||[],n_(t).constructor):e.apply(t,r))}function e_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(e_=function(){return!!t})()}function r_(){return r_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=n_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},r_.apply(this,arguments)}function n_(t){return n_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},n_(t)}function o_(t,e){return o_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o_(t,e)}var i_=function(t){function e(t,r,n,o,i,a){var c;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(c=t_(this,e,[a])).name=t,c.oldRange=r?r.clone():null,c.newRange=n?n.clone():null,c.affectsData=i,c._markers=o,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&o_(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"MarkerOperation"}},{key:"fromJSON",value:function(t,r){return new e(t.name,t.oldRange?Tb.fromJSON(t.oldRange,r):null,t.newRange?Tb.fromJSON(t.newRange,r):null,r.model.markers,t.affectsData,t.baseVersion)}}],(n=[{key:"type",get:function(){return"marker"}},{key:"affectedSelectable",get:function(){var t,e=[];return this.oldRange&&e.push(this.oldRange.clone()),this.newRange&&(this.oldRange?e.push.apply(e,function(t){if(Array.isArray(t))return Zk(t)}(t=this.newRange.getDifference(this.oldRange))||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(t){if("string"==typeof t)return Zk(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Zk(t,e):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()):e.push(this.newRange.clone())),e}},{key:"clone",value:function(){return new e(this.name,this.oldRange,this.newRange,this._markers,this.affectsData,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.name,this.newRange,this.oldRange,this._markers,this.affectsData,this.baseVersion+1)}},{key:"_execute",value:function(){this.newRange?this._markers._set(this.name,this.newRange,!0,this.affectsData):this._markers._remove(this.name)}},{key:"toJSON",value:function(){var t=r_(n_(e.prototype),"toJSON",this).call(this);return this.oldRange&&(t.oldRange=this.oldRange.toJSON()),this.newRange&&(t.newRange=this.newRange.toJSON()),delete t._markers,t}}])&&Xk(r.prototype,n),o&&Xk(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);const a_=function(t,e){return Rd(t,e)};function c_(t){return c_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c_(t)}function u_(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,l_(n.key),n)}}function l_(t){var e=function(t,e){if("object"!=c_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=c_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==c_(e)?e:e+""}function f_(t,e,r){return e=h_(e),function(t,e){if(e&&("object"===c_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,p_()?Reflect.construct(e,r||[],h_(t).constructor):e.apply(t,r))}function p_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(p_=function(){return!!t})()}function d_(){return d_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=h_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},d_.apply(this,arguments)}function h_(t){return h_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},h_(t)}function y_(t,e){return y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},y_(t,e)}var b_=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=f_(this,e,[i])).range=t.clone(),a.key=r,a.oldValue=void 0===n?null:n,a.newValue=void 0===o?null:o,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&y_(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"AttributeOperation"}},{key:"fromJSON",value:function(t,r){return new e(Tb.fromJSON(t.range,r),t.key,t.oldValue,t.newValue,t.baseVersion)}}],(n=[{key:"type",get:function(){return null===this.oldValue?"addAttribute":null===this.newValue?"removeAttribute":"changeAttribute"}},{key:"affectedSelectable",get:function(){return this.range.clone()}},{key:"clone",value:function(){return new e(this.range,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.range,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"toJSON",value:function(){var t=d_(h_(e.prototype),"toJSON",this).call(this);return t.range=this.range.toJSON(),t}},{key:"_validate",value:function(){if(!this.range.isFlat)throw new A("attribute-operation-range-not-flat",this);var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return u_(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.range.getItems({shallow:!0}));try{for(e.s();!(t=e.n()).done;){var r=t.value;if(null!==this.oldValue&&!a_(r.getAttribute(this.key),this.oldValue))throw new A("attribute-operation-wrong-old-value",this,{item:r,key:this.key,value:this.oldValue});if(null===this.oldValue&&null!==this.newValue&&r.hasAttribute(this.key))throw new A("attribute-operation-attribute-exists",this,{node:r,key:this.key})}}catch(t){e.e(t)}finally{e.f()}}},{key:"_execute",value:function(){a_(this.oldValue,this.newValue)||function(t,e,r){sk(t.start),sk(t.end);var n,o=rk(t.getItems({shallow:!0}));try{for(o.s();!(n=o.n()).done;){var i=n.value,a=i.is("$textProxy")?i.textNode:i;null!==r?a._setAttribute(e,r):a._removeAttribute(e),uk(a.parent,a.index)}}catch(t){o.e(t)}finally{o.f()}uk(t.end.parent,t.end.index)}(this.range,this.key,this.newValue)}}])&&s_(r.prototype,n),o&&s_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function v_(t){return v_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v_(t)}function m_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,g_(n.key),n)}}function g_(t){var e=function(t,e){if("object"!=v_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=v_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==v_(e)?e:e+""}function w_(t,e,r){return e=__(e),function(t,e){if(e&&("object"===v_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,k_()?Reflect.construct(e,r||[],__(t).constructor):e.apply(t,r))}function k_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(k_=function(){return!!t})()}function __(t){return __=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},__(t)}function O_(t,e){return O_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},O_(t,e)}var P_=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),w_(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&O_(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"NoOperation"}}],(n=[{key:"type",get:function(){return"noop"}},{key:"affectedSelectable",get:function(){return null}},{key:"clone",value:function(){return new e(this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.baseVersion+1)}},{key:"_execute",value:function(){}}])&&m_(r.prototype,n),o&&m_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function S_(t){return S_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S_(t)}function j_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,E_(n.key),n)}}function E_(t){var e=function(t,e){if("object"!=S_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=S_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S_(e)?e:e+""}function T_(t,e,r){return e=C_(e),function(t,e){if(e&&("object"===S_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,A_()?Reflect.construct(e,r||[],C_(t).constructor):e.apply(t,r))}function A_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(A_=function(){return!!t})()}function x_(){return x_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=C_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},x_.apply(this,arguments)}function C_(t){return C_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},C_(t)}function D_(t,e){return D_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},D_(t,e)}var R_=function(t){function e(t,r,n,o){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=T_(this,e,[o])).position=t,i.position.stickiness="toNext",i.oldName=r,i.newName=n,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&D_(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"RenameOperation"}},{key:"fromJSON",value:function(t,r){return new e(fb.fromJSON(t.position,r),t.oldName,t.newName,t.baseVersion)}}],(n=[{key:"type",get:function(){return"rename"}},{key:"affectedSelectable",get:function(){return this.position.nodeAfter}},{key:"clone",value:function(){return new e(this.position.clone(),this.oldName,this.newName,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.position.clone(),this.newName,this.oldName,this.baseVersion+1)}},{key:"_validate",value:function(){var t=this.position.nodeAfter;if(!(t instanceof Yy))throw new A("rename-operation-wrong-position",this);if(t.name!==this.oldName)throw new A("rename-operation-wrong-name",this)}},{key:"_execute",value:function(){this.position.nodeAfter.name=this.newName}},{key:"toJSON",value:function(){var t=x_(C_(e.prototype),"toJSON",this).call(this);return t.position=this.position.toJSON(),t}}])&&j_(r.prototype,n),o&&j_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function I_(t){return I_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I_(t)}function B_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,F_(n.key),n)}}function F_(t){var e=function(t,e){if("object"!=I_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=I_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I_(e)?e:e+""}function M_(t,e,r){return e=V_(e),function(t,e){if(e&&("object"===I_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,L_()?Reflect.construct(e,r||[],V_(t).constructor):e.apply(t,r))}function L_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(L_=function(){return!!t})()}function N_(){return N_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=V_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},N_.apply(this,arguments)}function V_(t){return V_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},V_(t)}function z_(t,e){return z_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},z_(t,e)}var $_=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=M_(this,e,[i])).root=t,a.key=r,a.oldValue=void 0===n?null:n,a.newValue=void 0===o?null:o,a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&z_(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"RootAttributeOperation"}},{key:"fromJSON",value:function(t,r){if(!r.getRoot(t.root))throw new A("rootattribute-operation-fromjson-no-root",this,{rootName:t.root});return new e(r.getRoot(t.root),t.key,t.oldValue,t.newValue,t.baseVersion)}}],(n=[{key:"type",get:function(){return null===this.oldValue?"addRootAttribute":null===this.newValue?"removeRootAttribute":"changeRootAttribute"}},{key:"affectedSelectable",get:function(){return this.root}},{key:"clone",value:function(){return new e(this.root,this.key,this.oldValue,this.newValue,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.root,this.key,this.newValue,this.oldValue,this.baseVersion+1)}},{key:"_validate",value:function(){if(this.root!=this.root.root||this.root.is("documentFragment"))throw new A("rootattribute-operation-not-a-root",this,{root:this.root,key:this.key});if(null!==this.oldValue&&this.root.getAttribute(this.key)!==this.oldValue)throw new A("rootattribute-operation-wrong-old-value",this,{root:this.root,key:this.key});if(null===this.oldValue&&null!==this.newValue&&this.root.hasAttribute(this.key))throw new A("rootattribute-operation-attribute-exists",this,{root:this.root,key:this.key})}},{key:"_execute",value:function(){null!==this.newValue?this.root._setAttribute(this.key,this.newValue):this.root._removeAttribute(this.key)}},{key:"toJSON",value:function(){var t=N_(V_(e.prototype),"toJSON",this).call(this);return t.root=this.root.toJSON(),t}}])&&B_(r.prototype,n),o&&B_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function q_(t){return q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},q_(t)}function U_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,W_(n.key),n)}}function W_(t){var e=function(t,e){if("object"!=q_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=q_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==q_(e)?e:e+""}function G_(t,e,r){return e=J_(e),function(t,e){if(e&&("object"===q_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,K_()?Reflect.construct(e,r||[],J_(t).constructor):e.apply(t,r))}function K_(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(K_=function(){return!!t})()}function H_(){return H_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=J_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},H_.apply(this,arguments)}function J_(t){return J_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},J_(t)}function Y_(t,e){return Y_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Y_(t,e)}var Z_=function(t){function e(t,r,n,o,i){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=G_(this,e,[i])).rootName=t,a.elementName=r,a.isAdd=n,a._document=o,a._document.getRoot(a.rootName)||(a._document.createRoot(a.elementName,a.rootName)._isAttached=!1),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Y_(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"RootOperation"}},{key:"fromJSON",value:function(t,r){return new e(t.rootName,t.elementName,t.isAdd,r,t.baseVersion)}}],(n=[{key:"type",get:function(){return this.isAdd?"addRoot":"detachRoot"}},{key:"affectedSelectable",get:function(){return this._document.getRoot(this.rootName)}},{key:"clone",value:function(){return new e(this.rootName,this.elementName,this.isAdd,this._document,this.baseVersion)}},{key:"getReversed",value:function(){return new e(this.rootName,this.elementName,!this.isAdd,this._document,this.baseVersion+1)}},{key:"_execute",value:function(){this._document.getRoot(this.rootName)._isAttached=this.isAdd}},{key:"toJSON",value:function(){var t=H_(J_(e.prototype),"toJSON",this).call(this);return delete t._document,t}}])&&U_(r.prototype,n),o&&U_(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function X_(t){return X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},X_(t)}function Q_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tO(n.key),n)}}function tO(t){var e=function(t,e){if("object"!=X_(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=X_(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==X_(e)?e:e+""}var eO={};eO[b_.className]=b_,eO[Ck.className]=Ck,eO[i_.className]=i_,eO[gk.className]=gk,eO[P_.className]=P_,eO[ek.className]=ek,eO[R_.className]=R_,eO[$_.className]=$_,eO[Z_.className]=Z_,eO[Vk.className]=Vk,eO[Jk.className]=Jk;var rO=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)},e=[{key:"fromJSON",value:function(t,e){return eO[t.__className].fromJSON(t,e)}}],null&&Q_(t.prototype,null),e&&Q_(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function nO(t){return nO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nO(t)}function oO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iO(n.key),n)}}function iO(t){var e=function(t,e){if("object"!=nO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nO(e)?e:e+""}function aO(t){return function(t){if(Array.isArray(t))return sO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||uO(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cO(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=uO(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function uO(t,e){if(t){if("string"==typeof t)return sO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sO(t,e):void 0}}function sO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var lO=new Map;function fO(t,e,r){var n=lO.get(t);n||(n=new Map,lO.set(t,n)),n.set(e,r)}function pO(t){return[t]}function dO(t,e){var r,n,o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=(r=t.constructor,n=e.constructor,(o=lO.get(r))&&o.has(n)?o.get(n):pO);try{return a(t=t.clone(),e,i)}catch(t){throw t}}function hO(t,e,r){t=t.slice(),e=e.slice();var n=new yO(r.document,r.useRelations,r.forceWeakRemove);n.setOriginalOperations(t),n.setOriginalOperations(e);var o=n.originalOperations;if(0==t.length||0==e.length)return{operationsA:t,operationsB:e,originalOperations:o};var i,a=new WeakMap,c=cO(t);try{for(c.s();!(i=c.n()).done;){var u=i.value;a.set(u,0)}}catch(t){c.e(t)}finally{c.f()}for(var s={nextBaseVersionA:t[t.length-1].baseVersion+1,nextBaseVersionB:e[e.length-1].baseVersion+1,originalOperationsACount:t.length,originalOperationsBCount:e.length},l=0;l<t.length;){var f,p,d=t[l],h=a.get(d);if(h!=e.length){var y=e[h],b=dO(d,y,n.getContext(d,y,!0)),v=dO(y,d,n.getContext(y,d,!1));n.updateRelation(d,y),n.setOriginalOperations(b,d),n.setOriginalOperations(v,y);var m,g=cO(b);try{for(g.s();!(m=g.n()).done;){var w=m.value;a.set(w,h+v.length)}}catch(t){g.e(t)}finally{g.f()}(f=t).splice.apply(f,[l,1].concat(aO(b))),(p=e).splice.apply(p,[h,1].concat(aO(v)))}else l++}if(r.padWithNoOps){var k=t.length-s.originalOperationsACount,_=e.length-s.originalOperationsBCount;vO(t,_-k),vO(e,k-_)}return bO(t,s.nextBaseVersionB),bO(e,s.nextBaseVersionA),{operationsA:t,operationsB:e,originalOperations:o}}var yO=function(){return t=function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.originalOperations=new Map,this._history=e.history,this._useRelations=r,this._forceWeakRemove=!!n,this._relations=new Map},e=[{key:"setOriginalOperations",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=r?this.originalOperations.get(r):null,o=cO(t);try{for(o.s();!(e=o.n()).done;){var i=e.value;this.originalOperations.set(i,n||i)}}catch(t){o.e(t)}finally{o.f()}}},{key:"updateRelation",value:function(t,e){if(t instanceof gk)e instanceof Jk?t.targetPosition.isEqual(e.sourcePosition)||e.movedRange.containsPosition(t.targetPosition)?this._setRelation(t,e,"insertAtSource"):t.targetPosition.isEqual(e.deletionPosition)?this._setRelation(t,e,"insertBetween"):t.targetPosition.isAfter(e.sourcePosition)&&this._setRelation(t,e,"moveTargetAfter"):e instanceof gk&&(t.targetPosition.isEqual(e.sourcePosition)||t.targetPosition.isBefore(e.sourcePosition)?this._setRelation(t,e,"insertBefore"):this._setRelation(t,e,"insertAfter"));else if(t instanceof Vk){if(e instanceof Jk)t.splitPosition.isBefore(e.sourcePosition)&&this._setRelation(t,e,"splitBefore");else if(e instanceof gk)if(t.splitPosition.isEqual(e.sourcePosition)||t.splitPosition.isBefore(e.sourcePosition))this._setRelation(t,e,"splitBefore");else{var r=Tb._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&r.containsPosition(t.splitPosition)){var n=r.end.offset-t.splitPosition.offset,o=t.splitPosition.offset-r.start.offset;this._setRelation(t,e,{howMany:n,offset:o})}}}else if(t instanceof Jk)e instanceof Jk?(t.targetPosition.isEqual(e.sourcePosition)||this._setRelation(t,e,"mergeTargetNotMoved"),t.sourcePosition.isEqual(e.targetPosition)&&this._setRelation(t,e,"mergeSourceNotMoved"),t.sourcePosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeSameElement")):e instanceof Vk?t.sourcePosition.isEqual(e.splitPosition)&&this._setRelation(t,e,"splitAtSource"):e instanceof gk&&e.howMany>0&&(t.sourcePosition.isEqual(e.sourcePosition.getShiftedBy(e.howMany))&&this._setRelation(t,e,"mergeSourceAffected"),t.targetPosition.isEqual(e.sourcePosition)&&this._setRelation(t,e,"mergeTargetWasBefore"));else if(t instanceof i_){var i=t.newRange;if(!i)return;if(e instanceof gk){var a=Tb._createFromPositionAndShift(e.sourcePosition,e.howMany),c=a.containsPosition(i.start)||a.start.isEqual(i.start),u=a.containsPosition(i.end)||a.end.isEqual(i.end);!c&&!u||a.containsRange(i)||this._setRelation(t,e,{side:c?"left":"right",path:c?i.start.path.slice():i.end.path.slice()})}else if(e instanceof Jk){var s=i.start.isEqual(e.targetPosition),l=i.start.isEqual(e.deletionPosition),f=i.end.isEqual(e.deletionPosition),p=i.end.isEqual(e.sourcePosition);(s||l||f||p)&&this._setRelation(t,e,{wasInLeftElement:s,wasStartBeforeMergedElement:l,wasEndBeforeMergedElement:f,wasInRightElement:p})}}}},{key:"getContext",value:function(t,e,r){return{aIsStrong:r,aWasUndone:this._wasUndone(t),bWasUndone:this._wasUndone(e),abRelation:this._useRelations?this._getRelation(t,e):null,baRelation:this._useRelations?this._getRelation(e,t):null,forceWeakRemove:this._forceWeakRemove}}},{key:"_wasUndone",value:function(t){var e=this.originalOperations.get(t);return e.wasUndone||this._history.isUndoneOperation(e)}},{key:"_getRelation",value:function(t,e){var r=this.originalOperations.get(e),n=this._history.getUndoneOperation(r);if(!n)return null;var o=this.originalOperations.get(t),i=this._relations.get(o);return i&&i.get(n)||null}},{key:"_setRelation",value:function(t,e,r){var n=this.originalOperations.get(t),o=this.originalOperations.get(e),i=this._relations.get(n);i||(i=new Map,this._relations.set(n,i)),i.set(o,r)}}],e&&oO(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function bO(t,e){var r,n=cO(t);try{for(n.s();!(r=n.n()).done;)r.value.baseVersion=e++}catch(t){n.e(t)}finally{n.f()}}function vO(t,e){for(var r=0;r<e;r++)t.push(new P_(0))}function mO(t,e,r){var n=t.nodes.getNode(0).getAttribute(e);if(n==r)return null;var o=new Tb(t.position,t.position.getShiftedBy(t.howMany));return new b_(o,e,n,r,0)}function gO(t,e){return null===t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany)}function wO(t,e){for(var r=[],n=0;n<t.length;n++){var o=t[n],i=new gk(o.start,o.end.offset-o.start.offset,e,0);r.push(i);for(var a=n+1;a<t.length;a++)t[a]=t[a]._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)[0];e=e._getTransformedByMove(i.sourcePosition,i.targetPosition,i.howMany)}return r}function kO(t){return kO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kO(t)}function _O(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OO(n.key),n)}}function OO(t){var e=function(t,e){if("object"!=kO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kO(e)?e:e+""}function PO(t,e,r){return e=jO(e),function(t,e){if(e&&("object"===kO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,SO()?Reflect.construct(e,r||[],jO(t).constructor):e.apply(t,r))}function SO(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(SO=function(){return!!t})()}function jO(t){return jO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jO(t)}function EO(t,e){return EO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},EO(t,e)}fO(b_,b_,(function(t,e,r){if(t.key===e.key&&t.range.start.hasSameParentAs(e.range.start)){var n=t.range.getDifference(e.range).map((function(e){return new b_(e,t.key,t.oldValue,t.newValue,0)})),o=t.range.getIntersection(e.range);return o&&r.aIsStrong&&n.push(new b_(o,e.key,e.newValue,t.newValue,0)),0==n.length?[new P_(0)]:n}return[t]})),fO(b_,Ck,(function(t,e){if(t.range.start.hasSameParentAs(e.position)&&t.range.containsPosition(e.position)){var r=t.range._getTransformedByInsertion(e.position,e.howMany,!e.shouldReceiveAttributes).map((function(e){return new b_(e,t.key,t.oldValue,t.newValue,t.baseVersion)}));if(e.shouldReceiveAttributes){var n=mO(e,t.key,t.oldValue);n&&r.unshift(n)}return r}return t.range=t.range._getTransformedByInsertion(e.position,e.howMany,!1)[0],[t]})),fO(b_,Jk,(function(t,e){var r=[];t.range.start.hasSameParentAs(e.deletionPosition)&&(t.range.containsPosition(e.deletionPosition)||t.range.start.isEqual(e.deletionPosition))&&r.push(Tb._createFromPositionAndShift(e.graveyardPosition,1));var n=t.range._getTransformedByMergeOperation(e);return n.isCollapsed||r.push(n),r.map((function(e){return new b_(e,t.key,t.oldValue,t.newValue,t.baseVersion)}))})),fO(b_,gk,(function(t,e){var r=function(t,e){var r=Tb._createFromPositionAndShift(e.sourcePosition,e.howMany),n=null,o=[];r.containsRange(t,!0)?n=t:t.start.hasSameParentAs(r.start)?(o=t.getDifference(r),n=t.getIntersection(r)):o=[t];var i,a=[],c=cO(o);try{for(c.s();!(i=c.n()).done;){var u=i.value;u=u._getTransformedByDeletion(e.sourcePosition,e.howMany);var s=e.getMovedRangeStart(),l=u.start.hasSameParentAs(s),f=u._getTransformedByInsertion(s,e.howMany,l);a.push.apply(a,aO(f))}}catch(t){c.e(t)}finally{c.f()}return n&&a.push(n._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany,!1)[0]),a}(t.range,e);return r.map((function(e){return new b_(e,t.key,t.oldValue,t.newValue,t.baseVersion)}))})),fO(b_,Vk,(function(t,e){if(t.range.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.range.end.offset++,[t];if(t.range.start.hasSameParentAs(e.splitPosition)&&t.range.containsPosition(e.splitPosition)){var r=t.clone();return r.range=new Tb(e.moveTargetPosition.clone(),t.range.end._getCombined(e.splitPosition,e.moveTargetPosition)),t.range.end=e.splitPosition.clone(),t.range.end.stickiness="toPrevious",[t,r]}return t.range=t.range._getTransformedBySplitOperation(e),[t]})),fO(Ck,b_,(function(t,e){var r=[t];if(t.shouldReceiveAttributes&&t.position.hasSameParentAs(e.range.start)&&e.range.containsPosition(t.position)){var n=mO(t,e.key,e.newValue);n&&r.push(n)}return r})),fO(Ck,Ck,(function(t,e,r){return t.position.isEqual(e.position)&&r.aIsStrong||(t.position=t.position._getTransformedByInsertOperation(e)),[t]})),fO(Ck,gk,(function(t,e){return t.position=t.position._getTransformedByMoveOperation(e),[t]})),fO(Ck,Vk,(function(t,e){return t.position=t.position._getTransformedBySplitOperation(e),[t]})),fO(Ck,Jk,(function(t,e){return t.position=t.position._getTransformedByMergeOperation(e),[t]})),fO(i_,Ck,(function(t,e){return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByInsertOperation(e)[0]),t.newRange&&(t.newRange=t.newRange._getTransformedByInsertOperation(e)[0]),[t]})),fO(i_,i_,(function(t,e,r){if(t.name==e.name){if(!r.aIsStrong)return[new P_(0)];t.oldRange=e.newRange?e.newRange.clone():null}return[t]})),fO(i_,Jk,(function(t,e){return t.oldRange&&(t.oldRange=t.oldRange._getTransformedByMergeOperation(e)),t.newRange&&(t.newRange=t.newRange._getTransformedByMergeOperation(e)),[t]})),fO(i_,gk,(function(t,e,r){if(t.oldRange&&(t.oldRange=Tb._createFromRanges(t.oldRange._getTransformedByMoveOperation(e))),t.newRange){if(r.abRelation){var n=Tb._createFromRanges(t.newRange._getTransformedByMoveOperation(e));if("left"==r.abRelation.side&&e.targetPosition.isEqual(t.newRange.start))return t.newRange.end=n.end,t.newRange.start.path=r.abRelation.path,[t];if("right"==r.abRelation.side&&e.targetPosition.isEqual(t.newRange.end))return t.newRange.start=n.start,t.newRange.end.path=r.abRelation.path,[t]}t.newRange=Tb._createFromRanges(t.newRange._getTransformedByMoveOperation(e))}return[t]})),fO(i_,Vk,(function(t,e,r){if(t.oldRange&&(t.oldRange=t.oldRange._getTransformedBySplitOperation(e)),t.newRange){if(r.abRelation){var n=t.newRange._getTransformedBySplitOperation(e);return t.newRange.start.isEqual(e.splitPosition)&&r.abRelation.wasStartBeforeMergedElement?t.newRange.start=fb._createAt(e.insertionPosition):t.newRange.start.isEqual(e.splitPosition)&&!r.abRelation.wasInLeftElement&&(t.newRange.start=fb._createAt(e.moveTargetPosition)),t.newRange.end.isEqual(e.splitPosition)&&r.abRelation.wasInRightElement?t.newRange.end=fb._createAt(e.moveTargetPosition):t.newRange.end.isEqual(e.splitPosition)&&r.abRelation.wasEndBeforeMergedElement?t.newRange.end=fb._createAt(e.insertionPosition):t.newRange.end=n.end,[t]}t.newRange=t.newRange._getTransformedBySplitOperation(e)}return[t]})),fO(Jk,Ck,(function(t,e){return t.sourcePosition.hasSameParentAs(e.position)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByInsertOperation(e),t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e),[t]})),fO(Jk,Jk,(function(t,e,r){if(t.sourcePosition.isEqual(e.sourcePosition)&&t.targetPosition.isEqual(e.targetPosition)){if(r.bWasUndone){var n=e.graveyardPosition.path.slice();return n.push(0),t.sourcePosition=new fb(e.graveyardPosition.root,n),t.howMany=0,[t]}return[new P_(0)]}if(t.sourcePosition.isEqual(e.sourcePosition)&&!t.targetPosition.isEqual(e.targetPosition)&&!r.bWasUndone&&"splitAtSource"!=r.abRelation){var o="$graveyard"==t.targetPosition.root.rootName,i="$graveyard"==e.targetPosition.root.rootName;if(i&&!o||(!o||i)&&r.aIsStrong){var a=e.targetPosition._getTransformedByMergeOperation(e),c=t.targetPosition._getTransformedByMergeOperation(e);return[new gk(a,t.howMany,c,0)]}return[new P_(0)]}return t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition=t.sourcePosition._getTransformedByMergeOperation(e),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),t.graveyardPosition.isEqual(e.graveyardPosition)&&r.aIsStrong||(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]})),fO(Jk,gk,(function(t,e,r){var n=Tb._createFromPositionAndShift(e.sourcePosition,e.howMany);return"remove"==e.type&&!r.bWasUndone&&!r.forceWeakRemove&&t.deletionPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.sourcePosition)?[new P_(0)]:(e.sourcePosition.getShiftedBy(e.howMany).isEqual(t.sourcePosition)?t.sourcePosition.stickiness="toNone":e.targetPosition.isEqual(t.sourcePosition)&&"mergeSourceAffected"==r.abRelation?t.sourcePosition.stickiness="toNext":e.sourcePosition.isEqual(t.targetPosition)?(t.targetPosition.stickiness="toNone",t.howMany-=e.howMany):e.targetPosition.isEqual(t.targetPosition)&&"mergeTargetWasBefore"==r.abRelation?(t.targetPosition.stickiness="toPrevious",t.howMany+=e.howMany):(t.sourcePosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.sourcePosition.hasSameParentAs(e.sourcePosition)&&(t.howMany-=e.howMany)),t.sourcePosition=t.sourcePosition._getTransformedByMoveOperation(e),t.targetPosition=t.targetPosition._getTransformedByMoveOperation(e),t.sourcePosition.stickiness="toPrevious",t.targetPosition.stickiness="toNext",t.graveyardPosition.isEqual(e.targetPosition)||(t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)),[t])})),fO(Jk,Vk,(function(t,e,r){if(e.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByDeletion(e.graveyardPosition,1),t.deletionPosition.isEqual(e.graveyardPosition)&&(t.howMany=e.howMany)),t.targetPosition.isEqual(e.splitPosition)){var n=0!=e.howMany,o=e.graveyardPosition&&t.deletionPosition.isEqual(e.graveyardPosition);if(n||o||"mergeTargetNotMoved"==r.abRelation)return t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),[t]}if(t.sourcePosition.isEqual(e.splitPosition)){if("mergeSourceNotMoved"==r.abRelation)return t.howMany=0,t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t];if("mergeSameElement"==r.abRelation||t.sourcePosition.offset>0)return t.sourcePosition=e.moveTargetPosition.clone(),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]}return t.sourcePosition.hasSameParentAs(e.splitPosition)&&(t.howMany=e.splitPosition.offset),t.sourcePosition=t.sourcePosition._getTransformedBySplitOperation(e),t.targetPosition=t.targetPosition._getTransformedBySplitOperation(e),[t]})),fO(gk,Ck,(function(t,e){var r=Tb._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByInsertOperation(e,!1)[0];return t.sourcePosition=r.start,t.howMany=r.end.offset-r.start.offset,t.targetPosition.isEqual(e.position)||(t.targetPosition=t.targetPosition._getTransformedByInsertOperation(e)),[t]})),fO(gk,gk,(function(t,e,r){var n,o=Tb._createFromPositionAndShift(t.sourcePosition,t.howMany),i=Tb._createFromPositionAndShift(e.sourcePosition,e.howMany),a=r.aIsStrong,c=!r.aIsStrong;if("insertBefore"==r.abRelation||"insertAfter"==r.baRelation?c=!0:"insertAfter"!=r.abRelation&&"insertBefore"!=r.baRelation||(c=!1),n=t.targetPosition.isEqual(e.targetPosition)&&c?t.targetPosition._getTransformedByDeletion(e.sourcePosition,e.howMany):t.targetPosition._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),gO(t,e)&&gO(e,t))return[e.getReversed()];if(o.containsPosition(e.targetPosition)&&o.containsRange(i,!0))return o.start=o.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),o.end=o.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),wO([o],n);if(i.containsPosition(t.targetPosition)&&i.containsRange(o,!0))return o.start=o.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),o.end=o.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),wO([o],n);var u=Ct(t.sourcePosition.getParentPath(),e.sourcePosition.getParentPath());if("prefix"==u||"extension"==u)return o.start=o.start._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),o.end=o.end._getTransformedByMove(e.sourcePosition,e.targetPosition,e.howMany),wO([o],n);"remove"!=t.type||"remove"==e.type||r.aWasUndone||r.forceWeakRemove?"remove"==t.type||"remove"!=e.type||r.bWasUndone||r.forceWeakRemove||(a=!1):a=!0;var s,l=[],f=cO(o.getDifference(i));try{for(f.s();!(s=f.n()).done;){var p=s.value;p.start=p.start._getTransformedByDeletion(e.sourcePosition,e.howMany),p.end=p.end._getTransformedByDeletion(e.sourcePosition,e.howMany);var d="same"==Ct(p.start.getParentPath(),e.getMovedRangeStart().getParentPath()),h=p._getTransformedByInsertion(e.getMovedRangeStart(),e.howMany,d);l.push.apply(l,aO(h))}}catch(t){f.e(t)}finally{f.f()}var y=o.getIntersection(i);return null!==y&&a&&(y.start=y.start._getCombined(e.sourcePosition,e.getMovedRangeStart()),y.end=y.end._getCombined(e.sourcePosition,e.getMovedRangeStart()),0===l.length?l.push(y):1==l.length?i.start.isBefore(o.start)||i.start.isEqual(o.start)?l.unshift(y):l.push(y):l.splice(1,0,y)),0===l.length?[new P_(t.baseVersion)]:wO(l,n)})),fO(gk,Vk,(function(t,e,r){var n=t.targetPosition.clone();t.targetPosition.isEqual(e.insertionPosition)&&e.graveyardPosition&&"moveTargetAfter"!=r.abRelation||(n=t.targetPosition._getTransformedBySplitOperation(e));var o=Tb._createFromPositionAndShift(t.sourcePosition,t.howMany);if(o.end.isEqual(e.insertionPosition))return e.graveyardPosition||t.howMany++,t.targetPosition=n,[t];if(o.start.hasSameParentAs(e.splitPosition)&&o.containsPosition(e.splitPosition)){var i=new Tb(e.splitPosition,o.end);return i=i._getTransformedBySplitOperation(e),wO([new Tb(o.start,e.splitPosition),i],n)}t.targetPosition.isEqual(e.splitPosition)&&"insertAtSource"==r.abRelation&&(n=e.moveTargetPosition),t.targetPosition.isEqual(e.insertionPosition)&&"insertBetween"==r.abRelation&&(n=t.targetPosition);var a=[o._getTransformedBySplitOperation(e)];if(e.graveyardPosition){var c=o.start.isEqual(e.graveyardPosition)||o.containsPosition(e.graveyardPosition);t.howMany>1&&c&&!r.aWasUndone&&a.push(Tb._createFromPositionAndShift(e.insertionPosition,1))}return wO(a,n)})),fO(gk,Jk,(function(t,e,r){var n=Tb._createFromPositionAndShift(t.sourcePosition,t.howMany);if(e.deletionPosition.hasSameParentAs(t.sourcePosition)&&n.containsPosition(e.sourcePosition))if("remove"!=t.type||r.forceWeakRemove){if(1==t.howMany)return r.bWasUndone?(t.sourcePosition=e.graveyardPosition.clone(),t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]):[new P_(0)]}else if(!r.aWasUndone){var o=[],i=e.graveyardPosition.clone(),a=e.targetPosition._getTransformedByMergeOperation(e);t.howMany>1&&(o.push(new gk(t.sourcePosition,t.howMany-1,t.targetPosition,0)),i=i._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1),a=a._getTransformedByMove(t.sourcePosition,t.targetPosition,t.howMany-1));var c=e.deletionPosition._getCombined(t.sourcePosition,t.targetPosition),u=new gk(i,1,c,0),s=u.getMovedRangeStart().path.slice();s.push(0);var l=new fb(u.targetPosition.root,s);a=a._getTransformedByMove(i,c,1);var f=new gk(a,e.howMany,l,0);return o.push(u),o.push(f),o}var p=Tb._createFromPositionAndShift(t.sourcePosition,t.howMany)._getTransformedByMergeOperation(e);return t.sourcePosition=p.start,t.howMany=p.end.offset-p.start.offset,t.targetPosition=t.targetPosition._getTransformedByMergeOperation(e),[t]})),fO(R_,Ck,(function(t,e){return t.position=t.position._getTransformedByInsertOperation(e),[t]})),fO(R_,Jk,(function(t,e){return t.position.isEqual(e.deletionPosition)?(t.position=e.graveyardPosition.clone(),t.position.stickiness="toNext",[t]):(t.position=t.position._getTransformedByMergeOperation(e),[t])})),fO(R_,gk,(function(t,e){return t.position=t.position._getTransformedByMoveOperation(e),[t]})),fO(R_,R_,(function(t,e,r){if(t.position.isEqual(e.position)){if(!r.aIsStrong)return[new P_(0)];t.oldName=e.newName}return[t]})),fO(R_,Vk,(function(t,e){if("same"==Ct(t.position.path,e.splitPosition.getParentPath())&&!e.graveyardPosition){var r=new R_(t.position.getShiftedBy(1),t.oldName,t.newName,0);return[t,r]}return t.position=t.position._getTransformedBySplitOperation(e),[t]})),fO($_,$_,(function(t,e,r){if(t.root===e.root&&t.key===e.key){if(!r.aIsStrong||t.newValue===e.newValue)return[new P_(0)];t.oldValue=e.newValue}return[t]})),fO(Z_,Z_,(function(t,e){return t.rootName===e.rootName&&t.isAdd===e.isAdd?[new P_(0)]:[t]})),fO(Vk,Ck,(function(t,e){return t.splitPosition.hasSameParentAs(e.position)&&t.splitPosition.offset<e.position.offset&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByInsertOperation(e),t.insertionPosition=t.insertionPosition._getTransformedByInsertOperation(e),[t]})),fO(Vk,Jk,(function(t,e,r){if(!t.graveyardPosition&&!r.bWasUndone&&t.splitPosition.hasSameParentAs(e.sourcePosition)){var n=e.graveyardPosition.path.slice();n.push(0);var o=new fb(e.graveyardPosition.root,n),i=Vk.getInsertionPosition(new fb(e.graveyardPosition.root,n)),a=new Vk(o,0,i,null,0);return t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Vk.getInsertionPosition(t.splitPosition),t.graveyardPosition=a.insertionPosition.clone(),t.graveyardPosition.stickiness="toNext",[a,t]}return t.splitPosition.hasSameParentAs(e.deletionPosition)&&!t.splitPosition.isAfter(e.deletionPosition)&&t.howMany--,t.splitPosition.hasSameParentAs(e.targetPosition)&&(t.howMany+=e.howMany),t.splitPosition=t.splitPosition._getTransformedByMergeOperation(e),t.insertionPosition=Vk.getInsertionPosition(t.splitPosition),t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedByMergeOperation(e)),[t]})),fO(Vk,gk,(function(t,e,r){var n=Tb._createFromPositionAndShift(e.sourcePosition,e.howMany);if(t.graveyardPosition){var o=n.start.isEqual(t.graveyardPosition)||n.containsPosition(t.graveyardPosition);if(!r.bWasUndone&&o){var i=t.splitPosition._getTransformedByMoveOperation(e),a=t.graveyardPosition._getTransformedByMoveOperation(e),c=a.path.slice();c.push(0);var u=new fb(a.root,c);return[new gk(i,t.howMany,u,0)]}t.graveyardPosition=t.graveyardPosition._getTransformedByMoveOperation(e)}var s=t.splitPosition.isEqual(e.targetPosition);if(s&&("insertAtSource"==r.baRelation||"splitBefore"==r.abRelation))return t.howMany+=e.howMany,t.splitPosition=t.splitPosition._getTransformedByDeletion(e.sourcePosition,e.howMany),t.insertionPosition=Vk.getInsertionPosition(t.splitPosition),[t];if(s&&r.abRelation&&r.abRelation.howMany){var l=r.abRelation,f=l.howMany,p=l.offset;return t.howMany+=f,t.splitPosition=t.splitPosition.getShiftedBy(p),[t]}if(t.splitPosition.hasSameParentAs(e.sourcePosition)&&n.containsPosition(t.splitPosition)){var d=e.howMany-(t.splitPosition.offset-e.sourcePosition.offset);return t.howMany-=d,t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany),t.splitPosition=e.sourcePosition.clone(),t.insertionPosition=Vk.getInsertionPosition(t.splitPosition),[t]}return e.sourcePosition.isEqual(e.targetPosition)||(t.splitPosition.hasSameParentAs(e.sourcePosition)&&t.splitPosition.offset<=e.sourcePosition.offset&&(t.howMany-=e.howMany),t.splitPosition.hasSameParentAs(e.targetPosition)&&t.splitPosition.offset<e.targetPosition.offset&&(t.howMany+=e.howMany)),t.splitPosition.stickiness="toNone",t.splitPosition=t.splitPosition._getTransformedByMoveOperation(e),t.splitPosition.stickiness="toNext",t.graveyardPosition?t.insertionPosition=t.insertionPosition._getTransformedByMoveOperation(e):t.insertionPosition=Vk.getInsertionPosition(t.splitPosition),[t]})),fO(Vk,Vk,(function(t,e,r){if(t.splitPosition.isEqual(e.splitPosition)){if(!t.graveyardPosition&&!e.graveyardPosition)return[new P_(0)];if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition))return[new P_(0)];if("splitBefore"==r.abRelation)return t.howMany=0,t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e),[t]}if(t.graveyardPosition&&e.graveyardPosition&&t.graveyardPosition.isEqual(e.graveyardPosition)){var n="$graveyard"==t.splitPosition.root.rootName,o="$graveyard"==e.splitPosition.root.rootName;if(o&&!n||(!n||o)&&r.aIsStrong){var i=[];return e.howMany&&i.push(new gk(e.moveTargetPosition,e.howMany,e.splitPosition,0)),t.howMany&&i.push(new gk(t.splitPosition,t.howMany,t.moveTargetPosition,0)),i}return[new P_(0)]}if(t.graveyardPosition&&(t.graveyardPosition=t.graveyardPosition._getTransformedBySplitOperation(e)),t.splitPosition.isEqual(e.insertionPosition)&&"splitBefore"==r.abRelation)return t.howMany++,[t];if(e.splitPosition.isEqual(t.insertionPosition)&&"splitBefore"==r.baRelation){var a=e.insertionPosition.path.slice();a.push(0);var c=new fb(e.insertionPosition.root,a);return[t,new gk(t.insertionPosition,1,c,0)]}return t.splitPosition.hasSameParentAs(e.splitPosition)&&t.splitPosition.offset<e.splitPosition.offset&&(t.howMany-=e.howMany),t.splitPosition=t.splitPosition._getTransformedBySplitOperation(e),t.insertionPosition=Vk.getInsertionPosition(t.splitPosition),[t]}));var TO=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"toNone";if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!(n=PO(this,e,[t,r,o])).root.is("rootElement"))throw new A("model-liveposition-root-not-rootelement",t);return AO.call(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EO(t,e)}(e,t),r=e,o=[{key:"fromPosition",value:function(t,e){return new this(t.root,t.path.slice(),e||t.stickiness)}}],(n=[{key:"detach",value:function(){this.stopListening()}},{key:"toPosition",value:function(){return new fb(this.root,this.path.slice(),this.stickiness)}}])&&_O(r.prototype,n),o&&_O(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(H(fb));function AO(){var t=this;this.listenTo(this.root.document.model,"applyOperation",(function(e,r){var n=r[0];n.isDocumentOperation&&xO.call(t,n)}),{priority:"low"})}function xO(t){var e=this.getTransformedByOperation(t);if(!this.isEqual(e)){var r=this.toPosition();this.path=e.path,this.root=e.root,this.fire("change",r)}}function CO(t){return CO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CO(t)}function DO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IO(n.key),n)}}function IO(t){var e=function(t,e){if("object"!=CO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=CO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==CO(e)?e:e+""}TO.prototype.is=function(t){return"livePosition"===t||"model:livePosition"===t||"position"==t||"model:position"===t};var BO=function(){return t=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"==typeof e&&(e="transparent"===e?{isUndoable:!1}:{},x("batch-constructor-deprecated-string-type"));var r=e,n=r.isUndoable,o=void 0===n||n,i=r.isLocal,a=void 0===i||i,c=r.isUndo,u=void 0!==c&&c,s=r.isTyping,l=void 0!==s&&s;this.operations=[],this.isUndoable=o,this.isLocal=a,this.isUndo=u,this.isTyping=l},(e=[{key:"type",get:function(){return x("batch-type-deprecated"),"default"}},{key:"baseVersion",get:function(){var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return DO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DO(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.operations);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(null!==r.baseVersion)return r.baseVersion}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"addOperation",value:function(t){return t.batch=this,this.operations.push(t),t}}])&&RO(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function FO(t){return FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FO(t)}function MO(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function LO(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?MO(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=WO(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):MO(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function NO(t){return function(t){if(Array.isArray(t))return qO(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$O(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function VO(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||$O(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zO(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=$O(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function $O(t,e){if(t){if("string"==typeof t)return qO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qO(t,e):void 0}}function qO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function UO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WO(n.key),n)}}function WO(t){var e=function(t,e){if("object"!=FO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=FO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==FO(e)?e:e+""}var GO=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._changesInElement=new Map,this._elementSnapshots=new Map,this._changedMarkers=new Map,this._changedRoots=new Map,this._changeCount=0,this._cachedChanges=null,this._cachedChangesWithGraveyard=null,this._refreshedItems=new Set,this._markerCollection=e},e=[{key:"isEmpty",get:function(){return 0==this._changesInElement.size&&0==this._changedMarkers.size&&0==this._changedRoots.size}},{key:"bufferOperation",value:function(t){var e=t;switch(e.type){case"insert":if(this._isInInsertedElement(e.position.parent))return;this._markInsert(e.position.parent,e.position.offset,e.nodes.maxOffset);break;case"addAttribute":case"removeAttribute":case"changeAttribute":var r,n=zO(e.range.getItems({shallow:!0}));try{for(n.s();!(r=n.n()).done;){var o=r.value;this._isInInsertedElement(o.parent)||this._markAttribute(o)}}catch(t){n.e(t)}finally{n.f()}break;case"remove":case"move":case"reinsert":if(e.sourcePosition.isEqual(e.targetPosition)||e.sourcePosition.getShiftedBy(e.howMany).isEqual(e.targetPosition))return;var i=this._isInInsertedElement(e.sourcePosition.parent),a=this._isInInsertedElement(e.targetPosition.parent);i||this._markRemove(e.sourcePosition.parent,e.sourcePosition.offset,e.howMany),a||this._markInsert(e.targetPosition.parent,e.getMovedRangeStart().offset,e.howMany);break;case"rename":if(this._isInInsertedElement(e.position.parent))return;this._markRemove(e.position.parent,e.position.offset,1),this._markInsert(e.position.parent,e.position.offset,1);var c,u=Tb._createFromPositionAndShift(e.position,1),s=zO(this._markerCollection.getMarkersIntersectingRange(u));try{for(s.s();!(c=s.n()).done;){var l=c.value,f=l.getData();this.bufferMarkerChange(l.name,f,f)}}catch(t){s.e(t)}finally{s.f()}break;case"split":var p=e.splitPosition.parent;this._isInInsertedElement(p)||this._markRemove(p,e.splitPosition.offset,e.howMany),this._isInInsertedElement(e.insertionPosition.parent)||this._markInsert(e.insertionPosition.parent,e.insertionPosition.offset,1),e.graveyardPosition&&this._markRemove(e.graveyardPosition.parent,e.graveyardPosition.offset,1);break;case"merge":var d=e.sourcePosition.parent;this._isInInsertedElement(d.parent)||this._markRemove(d.parent,d.startOffset,1);var h=e.graveyardPosition.parent;this._markInsert(h,e.graveyardPosition.offset,1);var y=e.targetPosition.parent;this._isInInsertedElement(y)||this._markInsert(y,e.targetPosition.offset,d.maxOffset);break;case"detachRoot":case"addRoot":var b=e.affectedSelectable;if(!b._isLoaded)return;if(b.isAttached()==e.isAdd)return;this._bufferRootStateChange(e.rootName,e.isAdd);break;case"addRootAttribute":case"removeRootAttribute":case"changeRootAttribute":if(!e.root._isLoaded)return;var v=e.root.rootName;this._bufferRootAttributeChange(v,e.key,e.oldValue,e.newValue)}this._cachedChanges=null}},{key:"bufferMarkerChange",value:function(t,e,r){e.range&&e.range.root.is("rootElement")&&!e.range.root._isLoaded&&(e.range=null),r.range&&r.range.root.is("rootElement")&&!r.range.root._isLoaded&&(r.range=null);var n=this._changedMarkers.get(t);n?n.newMarkerData=r:(n={newMarkerData:r,oldMarkerData:e},this._changedMarkers.set(t,n)),null==n.oldMarkerData.range&&null==r.range&&this._changedMarkers.delete(t)}},{key:"getMarkersToRemove",value:function(){var t,e=[],r=zO(this._changedMarkers);try{for(r.s();!(t=r.n()).done;){var n=VO(t.value,2),o=n[0],i=n[1];null!=i.oldMarkerData.range&&e.push({name:o,range:i.oldMarkerData.range})}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"getMarkersToAdd",value:function(){var t,e=[],r=zO(this._changedMarkers);try{for(r.s();!(t=r.n()).done;){var n=VO(t.value,2),o=n[0],i=n[1];null!=i.newMarkerData.range&&e.push({name:o,range:i.newMarkerData.range})}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"getChangedMarkers",value:function(){return Array.from(this._changedMarkers).map((function(t){var e=VO(t,2),r=e[0],n=e[1];return{name:r,data:{oldRange:n.oldMarkerData.range,newRange:n.newMarkerData.range}}}))}},{key:"hasDataChanges",value:function(){if(this._changesInElement.size>0)return!0;if(this._changedRoots.size>0)return!0;var t,e=zO(this._changedMarkers.values());try{for(e.s();!(t=e.n()).done;){var r=t.value,n=r.newMarkerData,o=r.oldMarkerData;if(n.affectsData!==o.affectsData)return!0;if(n.affectsData){var i=n.range&&!o.range,a=!n.range&&o.range,c=n.range&&o.range&&!n.range.isEqual(o.range);if(i||a||c)return!0}}}catch(t){e.e(t)}finally{e.f()}return!1}},{key:"getChanges",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._cachedChanges)return t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice();var e,r=[],n=zO(this._changesInElement.keys());try{for(n.s();!(e=n.n()).done;){var o,i=e.value,a=this._changesInElement.get(i).sort((function(t,e){return t.offset===e.offset?t.type!=e.type?"remove"==t.type?-1:1:0:t.offset<e.offset?-1:1})),c=this._elementSnapshots.get(i),u=KO(i.getChildren()),s=HO(c.length,a),l=0,f=0,p=zO(s);try{for(p.s();!(o=p.n()).done;){var d=o.value;if("i"===d)r.push(this._getInsertDiff(i,l,u[l])),l++;else if("r"===d)r.push(this._getRemoveDiff(i,l,c[f])),f++;else if("a"===d){var h,y=u[l].attributes,b=c[f].attributes,v=void 0;if("$text"==u[l].name)v=new Tb(fb._createAt(i,l),fb._createAt(i,l+1));else{var m=i.offsetToIndex(l);v=new Tb(fb._createAt(i,l),fb._createAt(i.getChild(m),0))}(h=r).push.apply(h,NO(this._getAttributesDiff(v,b,y))),l++,f++}else l++,f++}}catch(t){p.e(t)}finally{p.f()}}}catch(t){n.e(t)}finally{n.f()}r.sort((function(t,e){return t.position.root!=e.position.root?t.position.root.rootName<e.position.root.rootName?-1:1:t.position.isEqual(e.position)?t.changeCount-e.changeCount:t.position.isBefore(e.position)?-1:1}));for(var g=1,w=0;g<r.length;g++){var k=r[w],_=r[g],O="remove"==k.type&&"remove"==_.type&&"$text"==k.name&&"$text"==_.name&&k.position.isEqual(_.position),P="insert"==k.type&&"insert"==_.type&&"$text"==k.name&&"$text"==_.name&&k.position.parent==_.position.parent&&k.position.offset+k.length==_.position.offset,S="attribute"==k.type&&"attribute"==_.type&&k.position.parent==_.position.parent&&k.range.isFlat&&_.range.isFlat&&k.position.offset+k.length==_.position.offset&&k.attributeKey==_.attributeKey&&k.attributeOldValue==_.attributeOldValue&&k.attributeNewValue==_.attributeNewValue;O||P||S?(k.length++,S&&(k.range.end=k.range.end.getShiftedBy(1)),r[g]=null):w=g}var j,E=zO(r=r.filter((function(t){return t})));try{for(E.s();!(j=E.n()).done;){var T=j.value;delete T.changeCount,"attribute"==T.type&&(delete T.position,delete T.length)}}catch(t){E.e(t)}finally{E.f()}return this._changeCount=0,this._cachedChangesWithGraveyard=r,this._cachedChanges=r.filter(JO),t.includeChangesInGraveyard?this._cachedChangesWithGraveyard.slice():this._cachedChanges.slice()}},{key:"getChangedRoots",value:function(){return Array.from(this._changedRoots.values()).map((function(t){var e=LO({},t);return void 0!==e.state&&delete e.attributes,e}))}},{key:"getRefreshedItems",value:function(){return new Set(this._refreshedItems)}},{key:"reset",value:function(){this._changesInElement.clear(),this._elementSnapshots.clear(),this._changedMarkers.clear(),this._changedRoots.clear(),this._refreshedItems=new Set,this._cachedChanges=null}},{key:"_bufferRootStateChange",value:function(t,e){if(this._changedRoots.has(t)){var r=this._changedRoots.get(t);void 0!==r.state?(delete r.state,void 0===r.attributes&&this._changedRoots.delete(t)):r.state=e?"attached":"detached"}else this._changedRoots.set(t,{name:t,state:e?"attached":"detached"})}},{key:"_bufferRootAttributeChange",value:function(t,e,r,n){var o=this._changedRoots.get(t)||{name:t},i=o.attributes||{};if(i[e]){var a=i[e];n===a.oldValue?delete i[e]:a.newValue=n}else i[e]={oldValue:r,newValue:n};0===Object.entries(i).length?(delete o.attributes,void 0===o.state&&this._changedRoots.delete(t)):(o.attributes=i,this._changedRoots.set(t,o))}},{key:"_refreshItem",value:function(t){if(!this._isInInsertedElement(t.parent)){this._markRemove(t.parent,t.startOffset,t.offsetSize),this._markInsert(t.parent,t.startOffset,t.offsetSize),this._refreshedItems.add(t);var e,r=Tb._createOn(t),n=zO(this._markerCollection.getMarkersIntersectingRange(r));try{for(n.s();!(e=n.n()).done;){var o=e.value,i=o.getData();this.bufferMarkerChange(o.name,i,i)}}catch(t){n.e(t)}finally{n.f()}this._cachedChanges=null}}},{key:"_bufferRootLoad",value:function(t){if(t.isAttached()){this._bufferRootStateChange(t.rootName,!0),this._markInsert(t,0,t.maxOffset);var e,r=zO(t.getAttributeKeys());try{for(r.s();!(e=r.n()).done;){var n=e.value;this._bufferRootAttributeChange(t.rootName,n,null,t.getAttribute(n))}}catch(t){r.e(t)}finally{r.f()}var o,i=zO(this._markerCollection);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(a.getRange().root==t){var c=a.getData();this.bufferMarkerChange(a.name,LO(LO({},c),{},{range:null}),c)}}}catch(t){i.e(t)}finally{i.f()}}}},{key:"_markInsert",value:function(t,e,r){if(!t.root.is("rootElement")||t.root._isLoaded){var n={type:"insert",offset:e,howMany:r,count:this._changeCount++};this._markChange(t,n)}}},{key:"_markRemove",value:function(t,e,r){if(!t.root.is("rootElement")||t.root._isLoaded){var n={type:"remove",offset:e,howMany:r,count:this._changeCount++};this._markChange(t,n),this._removeAllNestedChanges(t,e,r)}}},{key:"_markAttribute",value:function(t){if(!t.root.is("rootElement")||t.root._isLoaded){var e={type:"attribute",offset:t.startOffset,howMany:t.offsetSize,count:this._changeCount++};this._markChange(t.parent,e)}}},{key:"_markChange",value:function(t,e){this._makeSnapshot(t);var r=this._getChangesForElement(t);this._handleChange(e,r),r.push(e);for(var n=0;n<r.length;n++)r[n].howMany<1&&(r.splice(n,1),n--)}},{key:"_getChangesForElement",value:function(t){var e;return this._changesInElement.has(t)?e=this._changesInElement.get(t):(e=[],this._changesInElement.set(t,e)),e}},{key:"_makeSnapshot",value:function(t){this._elementSnapshots.has(t)||this._elementSnapshots.set(t,KO(t.getChildren()))}},{key:"_handleChange",value:function(t,e){t.nodesToHandle=t.howMany;var r,n=zO(e);try{for(n.s();!(r=n.n()).done;){var o=r.value,i=t.offset+t.howMany,a=o.offset+o.howMany;if("insert"==t.type&&("insert"==o.type&&(t.offset<=o.offset?o.offset+=t.howMany:t.offset<a&&(o.howMany+=t.nodesToHandle,t.nodesToHandle=0)),"remove"==o.type&&t.offset<o.offset&&(o.offset+=t.howMany),"attribute"==o.type))if(t.offset<=o.offset)o.offset+=t.howMany;else if(t.offset<a){var c=o.howMany;o.howMany=t.offset-o.offset,e.unshift({type:"attribute",offset:i,howMany:c-o.howMany,count:this._changeCount++})}if("remove"==t.type){if("insert"==o.type)if(i<=o.offset)o.offset-=t.howMany;else if(i<=a)if(t.offset<o.offset){var u=i-o.offset;o.offset=t.offset,o.howMany-=u,t.nodesToHandle-=u}else o.howMany-=t.nodesToHandle,t.nodesToHandle=0;else if(t.offset<=o.offset)t.nodesToHandle-=o.howMany,o.howMany=0;else if(t.offset<a){var s=a-t.offset;o.howMany-=s,t.nodesToHandle-=s}if("remove"==o.type&&(i<=o.offset?o.offset-=t.howMany:t.offset<o.offset&&(t.nodesToHandle+=o.howMany,o.howMany=0)),"attribute"==o.type)if(i<=o.offset)o.offset-=t.howMany;else if(t.offset<o.offset){var l=i-o.offset;o.offset=t.offset,o.howMany-=l}else if(t.offset<a)if(i<=a){var f=o.howMany;o.howMany=t.offset-o.offset;var p=f-o.howMany-t.nodesToHandle;e.unshift({type:"attribute",offset:t.offset,howMany:p,count:this._changeCount++})}else o.howMany-=a-t.offset}if("attribute"==t.type){if("insert"==o.type)if(t.offset<o.offset&&i>o.offset){if(i>a){var d={type:"attribute",offset:a,howMany:i-a,count:this._changeCount++};this._handleChange(d,e),e.push(d)}t.nodesToHandle=o.offset-t.offset,t.howMany=t.nodesToHandle}else t.offset>=o.offset&&t.offset<a&&(i>a?(t.nodesToHandle=i-a,t.offset=a):t.nodesToHandle=0);if("remove"==o.type&&t.offset<o.offset&&i>o.offset){var h={type:"attribute",offset:o.offset,howMany:i-o.offset,count:this._changeCount++};this._handleChange(h,e),e.push(h),t.nodesToHandle=o.offset-t.offset,t.howMany=t.nodesToHandle}"attribute"==o.type&&(t.offset>=o.offset&&i<=a?(t.nodesToHandle=0,t.howMany=0,t.offset=0):t.offset<=o.offset&&i>=a&&(o.howMany=0))}}}catch(t){n.e(t)}finally{n.f()}t.howMany=t.nodesToHandle,delete t.nodesToHandle}},{key:"_getInsertDiff",value:function(t,e,r){return{type:"insert",position:fb._createAt(t,e),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,_element:r.element}}},{key:"_getRemoveDiff",value:function(t,e,r){return{type:"remove",position:fb._createAt(t,e),name:r.name,attributes:new Map(r.attributes),length:1,changeCount:this._changeCount++,_element:r.element}}},{key:"_getAttributesDiff",value:function(t,e,r){var n=[];r=new Map(r);var o,i=zO(e);try{for(i.s();!(o=i.n()).done;){var a=VO(o.value,2),c=a[0],u=a[1],s=r.has(c)?r.get(c):null;s!==u&&n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:c,attributeOldValue:u,attributeNewValue:s,changeCount:this._changeCount++}),r.delete(c)}}catch(t){i.e(t)}finally{i.f()}var l,f=zO(r);try{for(f.s();!(l=f.n()).done;){var p=VO(l.value,2),d=p[0],h=p[1];n.push({type:"attribute",position:t.start,range:t.clone(),length:1,attributeKey:d,attributeOldValue:null,attributeNewValue:h,changeCount:this._changeCount++})}}catch(t){f.e(t)}finally{f.f()}return n}},{key:"_isInInsertedElement",value:function(t){var e=t.parent;if(!e)return!1;var r=this._changesInElement.get(e),n=t.startOffset;if(r){var o,i=zO(r);try{for(i.s();!(o=i.n()).done;){var a=o.value;if("insert"==a.type&&n>=a.offset&&n<a.offset+a.howMany)return!0}}catch(t){i.e(t)}finally{i.f()}}return this._isInInsertedElement(e)}},{key:"_removeAllNestedChanges",value:function(t,e,r){var n,o=zO(new Tb(fb._createAt(t,e),fb._createAt(t,e+r)).getItems({shallow:!0}));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.is("element")&&(this._elementSnapshots.delete(i),this._changesInElement.delete(i),this._removeAllNestedChanges(i,0,i.maxOffset))}}catch(t){o.e(t)}finally{o.f()}}}],e&&UO(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function KO(t){var e,r=[],n=zO(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;if(o.is("$text"))for(var i=0;i<o.data.length;i++)r.push({name:"$text",attributes:new Map(o.getAttributes())});else r.push({name:o.name,attributes:new Map(o.getAttributes()),element:o})}}catch(t){n.e(t)}finally{n.f()}return r}function HO(t,e){var r,n=[],o=0,i=0,a=zO(e);try{for(a.s();!(r=a.n()).done;){var c=r.value;if(c.offset>o){for(var u=0;u<c.offset-o;u++)n.push("e");i+=c.offset-o}if("insert"==c.type){for(var s=0;s<c.howMany;s++)n.push("i");o=c.offset+c.howMany}else if("remove"==c.type){for(var l=0;l<c.howMany;l++)n.push("r");o=c.offset,i+=c.howMany}else n.push.apply(n,NO("a".repeat(c.howMany).split(""))),o=c.offset+c.howMany,i+=c.howMany}}catch(t){a.e(t)}finally{a.f()}if(i<t)for(var f=0;f<t-i-o;f++)n.push("e");return n}function JO(t){var e="position"in t&&"$graveyard"==t.position.root.rootName,r="range"in t&&"$graveyard"==t.range.root.rootName;return!e&&!r}function YO(t){return YO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YO(t)}function ZO(t,e){if(t){if("string"==typeof t)return XO(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XO(t,e):void 0}}function XO(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tP(n.key),n)}}function tP(t){var e=function(t,e){if("object"!=YO(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=YO(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==YO(e)?e:e+""}var eP=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._operations=[],this._undoPairs=new Map,this._undoneOperations=new Set,this._baseVersionToOperationIndex=new Map,this._version=0,this._gaps=new Map},e=[{key:"version",get:function(){return this._version},set:function(t){this._operations.length&&t>this._version+1&&this._gaps.set(this._version,t),this._version=t}},{key:"lastOperation",get:function(){return this._operations[this._operations.length-1]}},{key:"addOperation",value:function(t){if(t.baseVersion!==this.version)throw new A("model-document-history-addoperation-incorrect-version",this,{operation:t,historyVersion:this.version});this._operations.push(t),this._version++,this._baseVersionToOperationIndex.set(t.baseVersion,this._operations.length-1)}},{key:"getOperations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.version;if(!this._operations.length)return[];var r=this._operations[0];void 0===t&&(t=r.baseVersion);var n,o,i,a=e-1,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ZO(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this._gaps);try{for(c.s();!(n=c.n()).done;){var u=(o=n.value,i=2,function(t){if(Array.isArray(t))return t}(o)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(o,i)||ZO(o,i)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=u[0],l=u[1];t>s&&t<l&&(t=l),a>s&&a<l&&(a=s-1)}}catch(t){c.e(t)}finally{c.f()}if(a<r.baseVersion||t>this.lastOperation.baseVersion)return[];var f=this._baseVersionToOperationIndex.get(t);void 0===f&&(f=0);var p=this._baseVersionToOperationIndex.get(a);return void 0===p&&(p=this._operations.length-1),this._operations.slice(f,p+1)}},{key:"getOperation",value:function(t){var e=this._baseVersionToOperationIndex.get(t);if(void 0!==e)return this._operations[e]}},{key:"setOperationAsUndone",value:function(t,e){this._undoPairs.set(e,t),this._undoneOperations.add(t)}},{key:"isUndoingOperation",value:function(t){return this._undoPairs.has(t)}},{key:"isUndoneOperation",value:function(t){return this._undoneOperations.has(t)}},{key:"getUndoneOperation",value:function(t){return this._undoPairs.get(t)}},{key:"reset",value:function(){this._version=0,this._undoPairs=new Map,this._operations=[],this._undoneOperations=new Set,this._gaps=new Map,this._baseVersionToOperationIndex=new Map}}],e&&QO(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function rP(t){return rP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rP(t)}function nP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oP(n.key),n)}}function oP(t){var e=function(t,e){if("object"!=rP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rP(e)?e:e+""}function iP(t,e,r){return e=cP(e),function(t,e){if(e&&("object"===rP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aP()?Reflect.construct(e,r||[],cP(t).constructor):e.apply(t,r))}function aP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aP=function(){return!!t})()}function cP(t){return cP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cP(t)}function uP(t,e){return uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uP(t,e)}var sP=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"main";return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=iP(this,e,[r]))._isAttached=!0,n._isLoaded=!0,n._document=t,n.rootName=o,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uP(t,e)}(e,t),r=e,(n=[{key:"document",get:function(){return this._document}},{key:"isAttached",value:function(){return this._isAttached}},{key:"toJSON",value:function(){return this.rootName}}])&&nP(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Yy);function lP(t){return lP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lP(t)}function fP(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return pP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?pP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function pP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function dP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function hP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dP(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=bP(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function yP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bP(n.key),n)}}function bP(t){var e=function(t,e){if("object"!=lP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lP(e)?e:e+""}function vP(t,e,r){return e=gP(e),function(t,e){if(e&&("object"===lP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mP()?Reflect.construct(e,r||[],gP(t).constructor):e.apply(t,r))}function mP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mP=function(){return!!t})()}function gP(t){return gP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gP(t)}function wP(t,e){return wP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wP(t,e)}sP.prototype.is=function(t,e){return e?e===this.name&&("rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t):"rootElement"===t||"model:rootElement"===t||"element"===t||"model:element"===t||"node"===t||"model:node"===t};var kP="$graveyard",_P=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vP(this,e)).model=t,r.history=new eP,r.selection=new tm(r),r.roots=new Oi({idProperty:"rootName"}),r.differ=new GO(t.markers),r.isReadOnly=!1,r._postFixers=new Set,r._hasSelectionChangedFromTheLastChangeBlock=!1,r.createRoot("$root",kP),r.listenTo(t,"applyOperation",(function(t,e){var n=e[0];n.isDocumentOperation&&r.differ.bufferOperation(n)}),{priority:"high"}),r.listenTo(t,"applyOperation",(function(t,e){var n=e[0];n.isDocumentOperation&&r.history.addOperation(n)}),{priority:"low"}),r.listenTo(r.selection,"change",(function(){r._hasSelectionChangedFromTheLastChangeBlock=!0})),r.listenTo(t.markers,"update",(function(t,e,n,o,i){var a=hP(hP({},e.getData()),{},{range:o});r.differ.bufferMarkerChange(e.name,i,a),null===n&&e.on("change",(function(t,n){var o=e.getData();r.differ.bufferMarkerChange(e.name,hP(hP({},o),{},{range:n}),o)}))})),r.registerPostFixer((function(t){var e,n=!1,o=fP(r.roots);try{for(o.s();!(e=o.n()).done;){var i=e.value;i.isAttached()||i.isEmpty||(t.remove(t.createRangeIn(i)),n=!0)}}catch(t){o.e(t)}finally{o.f()}var a,c=fP(r.model.markers);try{for(c.s();!(a=c.n()).done;){var u=a.value;u.getRange().root.isAttached()||(t.removeMarker(u),n=!0)}}catch(t){c.e(t)}finally{c.f()}return n})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wP(t,e)}(e,t),r=e,n=[{key:"version",get:function(){return this.history.version},set:function(t){this.history.version=t}},{key:"graveyard",get:function(){return this.getRoot(kP)}},{key:"createRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"$root",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"main";if(this.roots.get(e))throw new A("model-document-createroot-name-exists",this,{name:e});var r=new sP(this,t,e);return this.roots.add(r),r}},{key:"destroy",value:function(){this.selection.destroy(),this.stopListening()}},{key:"getRoot",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this.roots.get(t)}},{key:"getRootNames",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getRoots(t).map((function(t){return t.rootName}))}},{key:"getRoots",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.roots.filter((function(r){return r!=t.graveyard&&(e||r.isAttached())&&r._isLoaded}))}},{key:"registerPostFixer",value:function(t){this._postFixers.add(t)}},{key:"toJSON",value:function(){var t=Ka(this);return t.selection="[engine.model.DocumentSelection]",t.model="[engine.model.Model]",t}},{key:"_handleChangeBlock",value:function(t){this._hasDocumentChangedFromTheLastChangeBlock()&&(this._callPostFixers(t),this.selection.refresh(),this.differ.hasDataChanges()?this.fire("change:data",t.batch):this.fire("change",t.batch),this.selection.refresh(),this.differ.reset()),this._hasSelectionChangedFromTheLastChangeBlock=!1}},{key:"_hasDocumentChangedFromTheLastChangeBlock",value:function(){return!this.differ.isEmpty||this._hasSelectionChangedFromTheLastChangeBlock}},{key:"_getDefaultRoot",value:function(){var t=this.getRoots();return t.length?t[0]:this.graveyard}},{key:"_getDefaultRange",value:function(){var t=this._getDefaultRoot(),e=this.model,r=e.schema,n=e.createPositionFromPath(t,[0]);return r.getNearestSelectionRange(n)||e.createRange(n)}},{key:"_validateSelectionRange",value:function(t){return OP(t.start)&&OP(t.end)}},{key:"_callPostFixers",value:function(t){var e=!1;do{var r,n=fP(this._postFixers);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(this.selection.refresh(),e=o(t))break}}catch(t){n.e(t)}finally{n.f()}}while(e)}}],n&&yP(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function OP(t){var e=t.textNode;if(e){var r=e.data,n=t.offset-e.startOffset;return!Vi(r,n)&&!zi(r,n)}return!0}function PP(t){return PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PP(t)}function SP(){SP=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==PP(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(PP(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function jP(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return EP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?EP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function EP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TP(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function AP(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?TP(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=RP(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):TP(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function xP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function CP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RP(n.key),n)}}function DP(t,e,r){return e&&CP(t.prototype,e),r&&CP(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function RP(t){var e=function(t,e){if("object"!=PP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=PP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==PP(e)?e:e+""}function IP(t,e,r){return e=FP(e),function(t,e){if(e&&("object"===PP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,BP()?Reflect.construct(e,r||[],FP(t).constructor):e.apply(t,r))}function BP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BP=function(){return!!t})()}function FP(t){return FP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FP(t)}function MP(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LP(t,e)}function LP(t,e){return LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},LP(t,e)}var NP=function(t){function e(){var t;return xP(this,e),(t=IP(this,e,arguments))._markers=new Map,t}return MP(e,t),DP(e,[{key:Symbol.iterator,value:function(){return this._markers.values()}},{key:"has",value:function(t){var e=t instanceof VP?t.name:t;return this._markers.has(e)}},{key:"get",value:function(t){return this._markers.get(t)||null}},{key:"_set",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t instanceof VP?t.name:t;if(o.includes(","))throw new A("markercollection-incorrect-marker-name",this);var i=this._markers.get(o);if(i){var a=i.getData(),c=i.getRange(),u=!1;return c.isEqual(e)||(i._attachLiveRange(Iv.fromRange(e)),u=!0),r!=i.managedUsingOperations&&(i._managedUsingOperations=r,u=!0),"boolean"==typeof n&&n!=i.affectsData&&(i._affectsData=n,u=!0),u&&this.fire("update:".concat(o),i,c,e,a),i}var s=Iv.fromRange(e),l=new VP(o,s,r,n);return this._markers.set(o,l),this.fire("update:".concat(o),l,null,e,AP(AP({},l.getData()),{},{range:null})),l}},{key:"_remove",value:function(t){var e=t instanceof VP?t.name:t,r=this._markers.get(e);return!!r&&(this._markers.delete(e),this.fire("update:".concat(e),r,r.getRange(),null,r.getData()),this._destroyMarker(r),!0)}},{key:"_refresh",value:function(t){var e=t instanceof VP?t.name:t,r=this._markers.get(e);if(!r)throw new A("markercollection-refresh-marker-not-exists",this);var n=r.getRange();this.fire("update:".concat(e),r,n,n,r.getData())}},{key:"getMarkersAtPosition",value:SP().mark((function t(e){var r,n,o;return SP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=jP(this),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=10;break}if(!(o=n.value).getRange().containsPosition(e)){t.next=8;break}return t.next=8,o;case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,12,15,18]])}))},{key:"getMarkersIntersectingRange",value:SP().mark((function t(e){var r,n,o;return SP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=jP(this),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=10;break}if(null===(o=n.value).getRange().getIntersection(e)){t.next=8;break}return t.next=8,o;case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,12,15,18]])}))},{key:"destroy",value:function(){var t,e=jP(this._markers.values());try{for(e.s();!(t=e.n()).done;){var r=t.value;this._destroyMarker(r)}}catch(t){e.e(t)}finally{e.f()}this._markers=null,this.stopListening()}},{key:"getMarkersGroup",value:SP().mark((function t(e){var r,n,o;return SP().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=jP(this._markers.values()),t.prev=1,r.s();case 3:if((n=r.n()).done){t.next=10;break}if(!(o=n.value).name.startsWith(e+":")){t.next=8;break}return t.next=8,o;case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),r.e(t.t0);case 15:return t.prev=15,r.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,this,[[1,12,15,18]])}))},{key:"_destroyMarker",value:function(t){t.stopListening(),t._detachLiveRange()}}])}(H()),VP=function(t){function e(t,r,n,o){var i;return xP(this,e),(i=IP(this,e)).name=t,i._liveRange=i._attachLiveRange(r),i._managedUsingOperations=n,i._affectsData=o,i}return MP(e,t),DP(e,[{key:"managedUsingOperations",get:function(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._managedUsingOperations}},{key:"affectsData",get:function(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._affectsData}},{key:"getData",value:function(){return{range:this.getRange(),affectsData:this.affectsData,managedUsingOperations:this.managedUsingOperations}}},{key:"getStart",value:function(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.start.clone()}},{key:"getEnd",value:function(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.end.clone()}},{key:"getRange",value:function(){if(!this._liveRange)throw new A("marker-destroyed",this);return this._liveRange.toRange()}},{key:"_attachLiveRange",value:function(t){return this._liveRange&&this._detachLiveRange(),t.delegate("change:range").to(this),t.delegate("change:content").to(this),this._liveRange=t,t}},{key:"_detachLiveRange",value:function(){this._liveRange.stopDelegating("change:range",this),this._liveRange.stopDelegating("change:content",this),this._liveRange.detach(),this._liveRange=null}}])}(H(uy));function zP(t){return zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zP(t)}function $P(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qP(n.key),n)}}function qP(t){var e=function(t,e){if("object"!=zP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zP(e)?e:e+""}function UP(t,e,r){return e=KP(e),function(t,e){if(e&&("object"===zP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WP()?Reflect.construct(e,r||[],KP(t).constructor):e.apply(t,r))}function WP(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WP=function(){return!!t})()}function GP(){return GP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=KP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},GP.apply(this,arguments)}function KP(t){return KP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KP(t)}function HP(t,e){return HP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},HP(t,e)}VP.prototype.is=function(t){return"marker"===t||"model:marker"===t};var JP=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=UP(this,e,[null])).sourcePosition=t.clone(),n.howMany=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HP(t,e)}(e,t),r=e,o=[{key:"className",get:function(){return"DetachOperation"}}],(n=[{key:"type",get:function(){return"detach"}},{key:"affectedSelectable",get:function(){return null}},{key:"toJSON",value:function(){var t=GP(KP(e.prototype),"toJSON",this).call(this);return t.sourcePosition=this.sourcePosition.toJSON(),t}},{key:"_validate",value:function(){if(this.sourcePosition.root.document)throw new A("detach-operation-on-document-node",this)}},{key:"_execute",value:function(){ik(Tb._createFromPositionAndShift(this.sourcePosition,this.howMany))}}])&&$P(r.prototype,n),o&&$P(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ek);function YP(t){return YP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YP(t)}function ZP(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return XP(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function XP(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tS(n.key),n)}}function tS(t){var e=function(t,e){if("object"!=YP(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=YP(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==YP(e)?e:e+""}function eS(t,e,r){return e=nS(e),function(t,e){if(e&&("object"===YP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rS()?Reflect.construct(e,r||[],nS(t).constructor):e.apply(t,r))}function rS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rS=function(){return!!t})()}function nS(t){return nS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nS(t)}function oS(t,e){return oS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oS(t,e)}var iS=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=eS(this,e)).markers=new Map,r._children=new _y,t&&r._insertChild(0,t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oS(t,e)}(e,t),r=e,n=[{key:Symbol.iterator,value:function(){return this.getChildren()}},{key:"childCount",get:function(){return this._children.length}},{key:"maxOffset",get:function(){return this._children.maxOffset}},{key:"isEmpty",get:function(){return 0===this.childCount}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"root",get:function(){return this}},{key:"parent",get:function(){return null}},{key:"document",get:function(){return null}},{key:"isAttached",value:function(){return!1}},{key:"getAncestors",value:function(){return[]}},{key:"getChild",value:function(t){return this._children.getNode(t)}},{key:"getChildren",value:function(){return this._children[Symbol.iterator]()}},{key:"getChildIndex",value:function(t){return this._children.getNodeIndex(t)}},{key:"getChildStartOffset",value:function(t){return this._children.getNodeStartOffset(t)}},{key:"getPath",value:function(){return[]}},{key:"getNodeByPath",value:function(t){var e,r=this,n=ZP(t);try{for(n.s();!(e=n.n()).done;){var o=e.value;r=r.getChild(r.offsetToIndex(o))}}catch(t){n.e(t)}finally{n.f()}return r}},{key:"offsetToIndex",value:function(t){return this._children.offsetToIndex(t)}},{key:"toJSON",value:function(){var t,e=[],r=ZP(this._children);try{for(r.s();!(t=r.n()).done;){var n=t.value;e.push(n.toJSON())}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"_appendChild",value:function(t){this._insertChild(this.childCount,t)}},{key:"_insertChild",value:function(t,e){var r,n=function(t){return"string"==typeof t?[new Cy(t)]:(Dt(t)||(t=[t]),Array.from(t).map((function(t){return"string"==typeof t?new Cy(t):t instanceof Ny?new Cy(t.data,t.getAttributes()):t})))}(e),o=ZP(n);try{for(o.s();!(r=o.n()).done;){var i=r.value;null!==i.parent&&i._remove(),i.parent=this}}catch(t){o.e(t)}finally{o.f()}this._children._insertNodes(t,n)}},{key:"_removeChildren",value:function(t){var e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this._children._removeNodes(t,r),o=ZP(n);try{for(o.s();!(e=o.n()).done;)e.value.parent=null}catch(t){o.e(t)}finally{o.f()}return n}}],o=[{key:"fromJSON",value:function(t){var r,n=[],o=ZP(t);try{for(o.s();!(r=o.n()).done;){var i=r.value;i.name?n.push(Yy.fromJSON(i)):n.push(Cy.fromJSON(i))}}catch(t){o.e(t)}finally{o.f()}return new e(n)}}],n&&QP(r.prototype,n),o&&QP(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(uy);function aS(t){return aS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aS(t)}function cS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||sS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uS(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=sS(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function sS(t,e){if(t){if("string"==typeof t)return lS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?lS(t,e):void 0}}function lS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function fS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pS(n.key),n)}}function pS(t){var e=function(t,e){if("object"!=aS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=aS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==aS(e)?e:e+""}iS.prototype.is=function(t){return"documentFragment"===t||"model:documentFragment"===t};var dS=function(){return t=function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=e,this.batch=r},e=[{key:"createText",value:function(t,e){return new Cy(t,e)}},{key:"createElement",value:function(t,e){return new Yy(t,e)}},{key:"createDocumentFragment",value:function(){return new iS}},{key:"cloneElement",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t._clone(e)}},{key:"insert",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._assertWriterUsedCorrectly(),!(t instanceof Cy&&""==t.data)){var n=fb._createAt(e,r);if(t.parent){if(mS(t.root,n.root))return void this.move(Tb._createOn(t),n);if(t.root.document)throw new A("model-writer-insert-forbidden-move",this);this.remove(t)}var o=n.root.document?n.root.document.version:null,i=new Ck(n,t,o);if(t instanceof Cy&&(i.shouldReceiveAttributes=!0),this.batch.addOperation(i),this.model.applyOperation(i),t instanceof iS){var a,c=uS(t.markers);try{for(c.s();!(a=c.n()).done;){var u=cS(a.value,2),s=u[0],l=u[1],f=fb._createAt(l.root,0),p={range:new Tb(l.start._getCombined(f,n),l.end._getCombined(f,n)),usingOperation:!0,affectsData:!0};this.model.markers.has(s)?this.updateMarker(s,p):this.addMarker(s,p)}}catch(t){c.e(t)}finally{c.f()}}}}},{key:"insertText",value:function(t,e,r,n){e instanceof iS||e instanceof Yy||e instanceof fb?this.insert(this.createText(t),e,r):this.insert(this.createText(t,e),r,n)}},{key:"insertElement",value:function(t,e,r,n){e instanceof iS||e instanceof Yy||e instanceof fb?this.insert(this.createElement(t),e,r):this.insert(this.createElement(t,e),r,n)}},{key:"append",value:function(t,e){this.insert(t,e,"end")}},{key:"appendText",value:function(t,e,r){e instanceof iS||e instanceof Yy?this.insert(this.createText(t),e,"end"):this.insert(this.createText(t,e),r,"end")}},{key:"appendElement",value:function(t,e,r){e instanceof iS||e instanceof Yy?this.insert(this.createElement(t),e,"end"):this.insert(this.createElement(t,e),r,"end")}},{key:"setAttribute",value:function(t,e,r){if(this._assertWriterUsedCorrectly(),r instanceof Tb){var n,o=uS(r.getMinimalFlatRanges());try{for(o.s();!(n=o.n()).done;)hS(this,t,e,n.value)}catch(t){o.e(t)}finally{o.f()}}else yS(this,t,e,r)}},{key:"setAttributes",value:function(t,e){var r,n=uS(Mi(t));try{for(n.s();!(r=n.n()).done;){var o=cS(r.value,2),i=o[0],a=o[1];this.setAttribute(i,a,e)}}catch(t){n.e(t)}finally{n.f()}}},{key:"removeAttribute",value:function(t,e){if(this._assertWriterUsedCorrectly(),e instanceof Tb){var r,n=uS(e.getMinimalFlatRanges());try{for(n.s();!(r=n.n()).done;)hS(this,t,null,r.value)}catch(t){n.e(t)}finally{n.f()}}else yS(this,t,null,e)}},{key:"clearAttributes",value:function(t){var e=this;this._assertWriterUsedCorrectly();var r=function(t){var r,n=uS(t.getAttributeKeys());try{for(n.s();!(r=n.n()).done;){var o=r.value;e.removeAttribute(o,t)}}catch(t){n.e(t)}finally{n.f()}};if(t instanceof Tb){var n,o=uS(t.getItems());try{for(o.s();!(n=o.n()).done;)r(n.value)}catch(t){o.e(t)}finally{o.f()}}else r(t)}},{key:"move",value:function(t,e,r){if(this._assertWriterUsedCorrectly(),!(t instanceof Tb))throw new A("writer-move-invalid-range",this);if(!t.isFlat)throw new A("writer-move-range-not-flat",this);var n=fb._createAt(e,r);if(!n.isEqual(t.start)){if(this._addOperationForAffectedMarkers("move",t),!mS(t.root,n.root))throw new A("writer-move-different-document",this);var o=t.root.document?t.root.document.version:null,i=new gk(t.start,t.end.offset-t.start.offset,n,o);this.batch.addOperation(i),this.model.applyOperation(i)}}},{key:"remove",value:function(t){this._assertWriterUsedCorrectly();var e,r=uS((t instanceof Tb?t:Tb._createOn(t)).getMinimalFlatRanges().reverse());try{for(r.s();!(e=r.n()).done;){var n=e.value;this._addOperationForAffectedMarkers("move",n),vS(n.start,n.end.offset-n.start.offset,this.batch,this.model)}}catch(t){r.e(t)}finally{r.f()}}},{key:"merge",value:function(t){this._assertWriterUsedCorrectly();var e=t.nodeBefore,r=t.nodeAfter;if(this._addOperationForAffectedMarkers("merge",t),!(e instanceof Yy))throw new A("writer-merge-no-element-before",this);if(!(r instanceof Yy))throw new A("writer-merge-no-element-after",this);t.root.document?this._merge(t):this._mergeDetached(t)}},{key:"createPositionFromPath",value:function(t,e,r){return this.model.createPositionFromPath(t,e,r)}},{key:"createPositionAt",value:function(t,e){return this.model.createPositionAt(t,e)}},{key:"createPositionAfter",value:function(t){return this.model.createPositionAfter(t)}},{key:"createPositionBefore",value:function(t){return this.model.createPositionBefore(t)}},{key:"createRange",value:function(t,e){return this.model.createRange(t,e)}},{key:"createRangeIn",value:function(t){return this.model.createRangeIn(t)}},{key:"createRangeOn",value:function(t){return this.model.createRangeOn(t)}},{key:"createSelection",value:function(){var t;return(t=this.model).createSelection.apply(t,arguments)}},{key:"_mergeDetached",value:function(t){var e=t.nodeBefore,r=t.nodeAfter;this.move(Tb._createIn(r),fb._createAt(e,"end")),this.remove(r)}},{key:"_merge",value:function(t){var e=fb._createAt(t.nodeBefore,"end"),r=fb._createAt(t.nodeAfter,0),n=t.root.document.graveyard,o=new fb(n,[0]),i=t.root.document.version,a=new Jk(r,t.nodeAfter.maxOffset,e,o,i);this.batch.addOperation(a),this.model.applyOperation(a)}},{key:"rename",value:function(t,e){if(this._assertWriterUsedCorrectly(),!(t instanceof Yy))throw new A("writer-rename-not-element-instance",this);var r=t.root.document?t.root.document.version:null,n=new R_(fb._createBefore(t),t.name,e,r);this.batch.addOperation(n),this.model.applyOperation(n)}},{key:"split",value:function(t,e){this._assertWriterUsedCorrectly();var r,n,o=t.parent;if(!o.parent)throw new A("writer-split-element-no-parent",this);if(e||(e=o.parent),!t.parent.getAncestors({includeSelf:!0}).includes(e))throw new A("writer-split-invalid-limit-element",this);do{var i=o.root.document?o.root.document.version:null,a=o.maxOffset-t.offset,c=Vk.getInsertionPosition(t),u=new Vk(t,a,c,null,i);this.batch.addOperation(u),this.model.applyOperation(u),r||n||(r=o,n=t.parent.nextSibling),o=(t=this.createPositionAfter(t.parent)).parent}while(o!==e);return{position:t,range:new Tb(fb._createAt(r,"end"),fb._createAt(n,0))}}},{key:"wrap",value:function(t,e){if(this._assertWriterUsedCorrectly(),!t.isFlat)throw new A("writer-wrap-range-not-flat",this);var r=e instanceof Yy?e:new Yy(e);if(r.childCount>0)throw new A("writer-wrap-element-not-empty",this);if(null!==r.parent)throw new A("writer-wrap-element-attached",this);this.insert(r,t.start);var n=new Tb(t.start.getShiftedBy(1),t.end.getShiftedBy(1));this.move(n,fb._createAt(r,0))}},{key:"unwrap",value:function(t){if(this._assertWriterUsedCorrectly(),null===t.parent)throw new A("writer-unwrap-element-no-parent",this);this.move(Tb._createIn(t),this.createPositionAfter(t)),this.remove(t)}},{key:"addMarker",value:function(t,e){if(this._assertWriterUsedCorrectly(),!e||"boolean"!=typeof e.usingOperation)throw new A("writer-addmarker-no-usingoperation",this);var r=e.usingOperation,n=e.range,o=void 0!==e.affectsData&&e.affectsData;if(this.model.markers.has(t))throw new A("writer-addmarker-marker-exists",this);if(!n)throw new A("writer-addmarker-no-range",this);return r?(bS(this,t,null,n,o),this.model.markers.get(t)):this.model.markers._set(t,n,r,o)}},{key:"updateMarker",value:function(t,e){this._assertWriterUsedCorrectly();var r="string"==typeof t?t:t.name,n=this.model.markers.get(r);if(!n)throw new A("writer-updatemarker-marker-not-exists",this);if(!e)return x("writer-updatemarker-reconvert-using-editingcontroller",{markerName:r}),void this.model.markers._refresh(n);var o="boolean"==typeof e.usingOperation,i="boolean"==typeof e.affectsData,a=i?e.affectsData:n.affectsData;if(!o&&!e.range&&!i)throw new A("writer-updatemarker-wrong-options",this);var c=n.getRange(),u=e.range?e.range:c;o&&e.usingOperation!==n.managedUsingOperations?e.usingOperation?bS(this,r,null,u,a):(bS(this,r,c,null,a),this.model.markers._set(r,u,void 0,a)):n.managedUsingOperations?bS(this,r,c,u,a):this.model.markers._set(r,u,void 0,a)}},{key:"removeMarker",value:function(t){this._assertWriterUsedCorrectly();var e="string"==typeof t?t:t.name;if(!this.model.markers.has(e))throw new A("writer-removemarker-no-marker",this);var r=this.model.markers.get(e);r.managedUsingOperations?bS(this,e,r.getRange(),null,r.affectsData):this.model.markers._remove(e)}},{key:"addRoot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"$root";this._assertWriterUsedCorrectly();var r=this.model.document.getRoot(t);if(r&&r.isAttached())throw new A("writer-addroot-root-exists",this);var n=this.model.document,o=new Z_(t,e,!0,n,n.version);return this.batch.addOperation(o),this.model.applyOperation(o),this.model.document.getRoot(t)}},{key:"detachRoot",value:function(t){this._assertWriterUsedCorrectly();var e="string"==typeof t?this.model.document.getRoot(t):t;if(!e||!e.isAttached())throw new A("writer-detachroot-no-root",this);var r,n=uS(this.model.markers);try{for(n.s();!(r=n.n()).done;){var o=r.value;o.getRange().root===e&&this.removeMarker(o)}}catch(t){n.e(t)}finally{n.f()}var i,a=uS(e.getAttributeKeys());try{for(a.s();!(i=a.n()).done;){var c=i.value;this.removeAttribute(c,e)}}catch(t){a.e(t)}finally{a.f()}this.remove(this.createRangeIn(e));var u=this.model.document,s=new Z_(e.rootName,e.name,!1,u,u.version);this.batch.addOperation(s),this.model.applyOperation(s)}},{key:"setSelection",value:function(){var t;this._assertWriterUsedCorrectly(),(t=this.model.document.selection)._setTo.apply(t,arguments)}},{key:"setSelectionFocus",value:function(t,e){this._assertWriterUsedCorrectly(),this.model.document.selection._setFocus(t,e)}},{key:"setSelectionAttribute",value:function(t,e){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._setSelectionAttribute(t,e);else{var r,n=uS(Mi(t));try{for(n.s();!(r=n.n()).done;){var o=cS(r.value,2),i=o[0],a=o[1];this._setSelectionAttribute(i,a)}}catch(t){n.e(t)}finally{n.f()}}}},{key:"removeSelectionAttribute",value:function(t){if(this._assertWriterUsedCorrectly(),"string"==typeof t)this._removeSelectionAttribute(t);else{var e,r=uS(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._removeSelectionAttribute(n)}}catch(t){r.e(t)}finally{r.f()}}}},{key:"overrideSelectionGravity",value:function(){return this.model.document.selection._overrideGravity()}},{key:"restoreSelectionGravity",value:function(t){this.model.document.selection._restoreGravity(t)}},{key:"_setSelectionAttribute",value:function(t,e){var r=this.model.document.selection;if(r.isCollapsed&&r.anchor.parent.isEmpty){var n=tm._getStoreAttributeKey(t);this.setAttribute(n,e,r.anchor.parent)}r._setAttribute(t,e)}},{key:"_removeSelectionAttribute",value:function(t){var e=this.model.document.selection;if(e.isCollapsed&&e.anchor.parent.isEmpty){var r=tm._getStoreAttributeKey(t);this.removeAttribute(r,e.anchor.parent)}e._removeAttribute(t)}},{key:"_assertWriterUsedCorrectly",value:function(){if(this.model._currentWriter!==this)throw new A("writer-incorrect-use",this)}},{key:"_addOperationForAffectedMarkers",value:function(t,e){var r,n=uS(this.model.markers);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(o.managedUsingOperations){var i=o.getRange(),a=!1;if("move"===t){var c=e;a=c.containsPosition(i.start)||c.start.isEqual(i.start)||c.containsPosition(i.end)||c.end.isEqual(i.end)}else{var u=e,s=u.nodeBefore,l=u.nodeAfter,f=i.start.parent==s&&i.start.isAtEnd,p=i.end.parent==l&&0==i.end.offset,d=i.end.nodeAfter==l,h=i.start.nodeAfter==l;a=f||p||d||h}a&&this.updateMarker(o.name,{range:i})}}}catch(t){n.e(t)}finally{n.f()}}}],e&&fS(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function hS(t,e,r,n){var o,i,a,c,u=t.model,s=u.document,l=n.start,f=uS(n.getWalker({shallow:!0}));try{for(f.s();!(c=f.n()).done;){var p=c.value;a=p.item.getAttribute(e),o&&i!=a&&(i!=r&&d(),l=o),o=p.nextPosition,i=a}}catch(t){f.e(t)}finally{f.f()}function d(){var n=new Tb(l,o),a=n.root.document?s.version:null,c=new b_(n,e,i,r,a);t.batch.addOperation(c),u.applyOperation(c)}o instanceof fb&&o!=l&&i!=r&&d()}function yS(t,e,r,n){var o,i,a=t.model,c=a.document,u=n.getAttribute(e);if(u!=r){if(n.root===n){var s=n.document?c.version:null;i=new $_(n,e,u,r,s)}else{var l=(o=new Tb(fb._createBefore(n),t.createPositionAfter(n))).root.document?c.version:null;i=new b_(o,e,u,r,l)}t.batch.addOperation(i),a.applyOperation(i)}}function bS(t,e,r,n,o){var i=t.model,a=i.document,c=new i_(e,r,n,i.markers,!!o,a.version);t.batch.addOperation(c),i.applyOperation(c)}function vS(t,e,r,n){var o;if(t.root.document){var i=n.document,a=new fb(i.graveyard,[0]);o=new gk(t,e,a,i.version)}else o=new JP(t,e);r.addOperation(o),n.applyOperation(o)}function mS(t,e){return t===e||t instanceof sP&&e instanceof sP}function gS(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=kS(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function wS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||kS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kS(t,e){if(t){if("string"==typeof t)return _S(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_S(t,e):void 0}}function _S(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function OS(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!e.isCollapsed){var n=e.getFirstRange();if("$graveyard"!=n.root.rootName){var o=t.schema;t.change((function(t){if(r.doNotResetEntireContent||!function(t,e){var r=t.getLimitElement(e);if(!e.containsEntireContent(r))return!1;var n=e.getFirstRange();return n.start.parent!=n.end.parent&&t.checkChild(r,"paragraph")}(o,e)){var i={};if(!r.doNotAutoparagraph){var a=e.getSelectedElement();a&&Object.assign(i,o.getAttributesWithProperty(a,"copyOnReplace",!0))}var c=function(t){var e=t.root.document.model,r=t.start,n=t.end;if(e.hasContent(t,{ignoreMarkers:!0})){var o=function(t){var e,r=t.parent,n=r.root.document.model.schema,o=gS(r.getAncestors({parentFirst:!0,includeSelf:!0}));try{for(o.s();!(e=o.n()).done;){var i=e.value;if(n.isLimit(i))return null;if(n.isBlock(i))return i}}catch(t){o.e(t)}finally{o.f()}}(n);if(o&&n.isTouching(e.createPositionAt(o,0))){var i=e.createSelection(t);e.modifySelection(i,{direction:"backward"});var a=i.getLastPosition(),c=e.createRange(a,n);e.hasContent(c,{ignoreMarkers:!0})||(n=a)}}return[TO.fromPosition(r,"toPrevious"),TO.fromPosition(n,"toNext")]}(n),u=wS(c,2),s=u[0],l=u[1];s.isTouching(l)||t.remove(t.createRange(s,l)),r.leaveUnmerged||(function(t,e,r){var n=t.model;if(jS(t.model.schema,e,r)){var o=wS(function(t,e){for(var r=t.getAncestors(),n=e.getAncestors(),o=0;r[o]&&r[o]==n[o];)o++;return[r[o],n[o]]}(e,r),2),i=o[0],a=o[1];i&&a&&(!n.hasContent(i,{ignoreMarkers:!0})&&n.hasContent(a,{ignoreMarkers:!0})?SS(t,e,r,i.parent):PS(t,e,r,i.parent))}}(t,s,l),o.removeDisallowedAttributes(s.parent.getChildren(),t)),TS(t,e,s),!r.doNotAutoparagraph&&function(t,e){var r=t.checkChild(e,"$text"),n=t.checkChild(e,"paragraph");return!r&&n}(o,s)&&ES(t,s,e,i),s.detach(),l.detach()}else!function(t,e){var r=t.model.schema.getLimitElement(e);t.remove(t.createRangeIn(r)),ES(t,t.createPositionAt(r,0),e)}(t,e)}))}}}function PS(t,e,r,n){var o=e.parent,i=r.parent;if(o!=n&&i!=n){for(e=t.createPositionAfter(o),(r=t.createPositionBefore(i)).isEqual(e)||t.insert(i,e),t.merge(e);r.parent.isEmpty;){var a=r.parent;r=t.createPositionBefore(a),t.remove(a)}jS(t.model.schema,e,r)&&PS(t,e,r,n)}}function SS(t,e,r,n){var o=e.parent,i=r.parent;if(o!=n&&i!=n){for(e=t.createPositionAfter(o),(r=t.createPositionBefore(i)).isEqual(e)||t.insert(o,r);e.parent.isEmpty;){var a=e.parent;e=t.createPositionBefore(a),t.remove(a)}r=t.createPositionBefore(i),function(t,e){var r=e.nodeBefore,n=e.nodeAfter;r.name!=n.name&&t.rename(r,n.name),t.clearAttributes(r),t.setAttributes(Object.fromEntries(n.getAttributes()),r),t.merge(e)}(t,r),jS(t.model.schema,e,r)&&SS(t,e,r,n)}}function jS(t,e,r){var n=e.parent,o=r.parent;return n!=o&&!t.isLimit(n)&&!t.isLimit(o)&&function(t,e,r){var n,o=gS(new Tb(t,e).getWalker());try{for(o.s();!(n=o.n()).done;){var i=n.value;if(r.isLimit(i.item))return!1}}catch(t){o.e(t)}finally{o.f()}return!0}(e,r,t)}function ES(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.createElement("paragraph");t.model.schema.setAllowedAttributes(o,n,t),t.insert(o,e),TS(t,r,t.createPositionAt(o,0))}function TS(t,e,r){e instanceof tm?t.setSelection(r):e.setTo(r)}function AS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function xS(t,e){var r=[];Array.from(t.getItems({direction:"backward"})).map((function(t){return e.createRangeOn(t)})).filter((function(e){return(e.start.isAfter(t.start)||e.start.isEqual(t.start))&&(e.end.isBefore(t.end)||e.end.isEqual(t.end))})).forEach((function(t){r.push(t.start.parent),e.remove(t)})),r.forEach((function(t){for(var r=t;r.parent&&r.isEmpty;){var n=e.createRangeOn(r);r=r.parent,e.remove(n)}}))}function CS(t){return CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CS(t)}function DS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RS(n.key),n)}}function RS(t){var e=function(t,e){if("object"!=CS(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=CS(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==CS(e)?e:e+""}function IS(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||BS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function BS(t,e){if(t){if("string"==typeof t)return FS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?FS(t,e):void 0}}function FS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var MS=function(){return t=function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._firstNode=null,this._lastNode=null,this._lastAutoParagraph=null,this._filterAttributesOf=[],this._affectedStart=null,this._affectedEnd=null,this._nodeToSelect=null,this.model=e,this.writer=r,this.position=n,this.canMergeWith=new Set([this.position.parent]),this.schema=e.schema,this._documentFragment=r.createDocumentFragment(),this._documentFragmentPosition=r.createPositionAt(this._documentFragment,0)},(e=[{key:"handleNodes",value:function(t){for(var e=0,r=Array.from(t);e<r.length;e++){var n=r[e];this._handleNode(n)}this._insertPartialFragment(),this._lastAutoParagraph&&this._updateLastNodeFromAutoParagraph(this._lastAutoParagraph),this._mergeOnRight(),this.schema.removeDisallowedAttributes(this._filterAttributesOf,this.writer),this._filterAttributesOf=[]}},{key:"_updateLastNodeFromAutoParagraph",value:function(t){var e=this.writer.createPositionAfter(this._lastNode),r=this.writer.createPositionAfter(t);if(r.isAfter(e)){if(this._lastNode=t,this.position.parent!=t||!this.position.isAtEnd)throw new A("insertcontent-invalid-insertion-position",this);this.position=r,this._setAffectedBoundaries(this.position)}}},{key:"getSelectionRange",value:function(){return this._nodeToSelect?Tb._createOn(this._nodeToSelect):this.model.schema.getNearestSelectionRange(this.position)}},{key:"getAffectedRange",value:function(){return this._affectedStart?new Tb(this._affectedStart,this._affectedEnd):null}},{key:"destroy",value:function(){this._affectedStart&&this._affectedStart.detach(),this._affectedEnd&&this._affectedEnd.detach()}},{key:"_handleNode",value:function(t){if(this.schema.isObject(t))this._handleObject(t);else{var e=this._checkAndAutoParagraphToAllowedPosition(t);e||(e=this._checkAndSplitToAllowedPosition(t))?(this._appendToFragment(t),this._firstNode||(this._firstNode=t),this._lastNode=t):this._handleDisallowedNode(t)}}},{key:"_insertPartialFragment",value:function(){if(!this._documentFragment.isEmpty){var t=TO.fromPosition(this.position,"toNext");this._setAffectedBoundaries(this.position),this._documentFragment.getChild(0)==this._firstNode&&(this.writer.insert(this._firstNode,this.position),this._mergeOnLeft(),this.position=t.toPosition()),this._documentFragment.isEmpty||this.writer.insert(this._documentFragment,this.position),this._documentFragmentPosition=this.writer.createPositionAt(this._documentFragment,0),this.position=t.toPosition(),t.detach()}}},{key:"_handleObject",value:function(t){this._checkAndSplitToAllowedPosition(t)?this._appendToFragment(t):this._tryAutoparagraphing(t)}},{key:"_handleDisallowedNode",value:function(t){t.is("element")?this.handleNodes(t.getChildren()):this._tryAutoparagraphing(t)}},{key:"_appendToFragment",value:function(t){if(!this.schema.checkChild(this.position,t))throw new A("insertcontent-wrong-position",this,{node:t,position:this.position});this.writer.insert(t,this._documentFragmentPosition),this._documentFragmentPosition=this._documentFragmentPosition.getShiftedBy(t.offsetSize),this.schema.isObject(t)&&!this.schema.checkChild(this.position,"$text")?this._nodeToSelect=t:this._nodeToSelect=null,this._filterAttributesOf.push(t)}},{key:"_setAffectedBoundaries",value:function(t){this._affectedStart||(this._affectedStart=TO.fromPosition(t,"toPrevious")),this._affectedEnd&&!this._affectedEnd.isBefore(t)||(this._affectedEnd&&this._affectedEnd.detach(),this._affectedEnd=TO.fromPosition(t,"toNext"))}},{key:"_mergeOnLeft",value:function(){var t=this._firstNode;if(t instanceof Yy&&this._canMergeLeft(t)){var e=TO._createBefore(t);e.stickiness="toNext";var r=TO.fromPosition(this.position,"toNext");this._affectedStart.isEqual(e)&&(this._affectedStart.detach(),this._affectedStart=TO._createAt(e.nodeBefore,"end","toPrevious")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.isEqual(this._affectedEnd)&&this._firstNode===this._lastNode&&(this._affectedEnd.detach(),this._affectedEnd=TO._createAt(e.nodeBefore,"end","toNext")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}}},{key:"_mergeOnRight",value:function(){var t=this._lastNode;if(t instanceof Yy&&this._canMergeRight(t)){var e=TO._createAfter(t);if(e.stickiness="toNext",!this.position.isEqual(e))throw new A("insertcontent-invalid-insertion-position",this);this.position=fb._createAt(e.nodeBefore,"end");var r=TO.fromPosition(this.position,"toPrevious");this._affectedEnd.isEqual(e)&&(this._affectedEnd.detach(),this._affectedEnd=TO._createAt(e.nodeBefore,"end","toNext")),this._firstNode===this._lastNode&&(this._firstNode=e.nodeBefore,this._lastNode=e.nodeBefore),this.writer.merge(e),e.getShiftedBy(-1).isEqual(this._affectedStart)&&this._firstNode===this._lastNode&&(this._affectedStart.detach(),this._affectedStart=TO._createAt(e.nodeBefore,0,"toPrevious")),this.position=r.toPosition(),r.detach(),this._filterAttributesOf.push(this.position.parent),e.detach()}}},{key:"_canMergeLeft",value:function(t){var e=t.previousSibling;return e instanceof Yy&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(e,t)}},{key:"_canMergeRight",value:function(t){var e=t.nextSibling;return e instanceof Yy&&this.canMergeWith.has(e)&&this.model.schema.checkMerge(t,e)}},{key:"_tryAutoparagraphing",value:function(t){var e=this.writer.createElement("paragraph");this._getAllowedIn(this.position.parent,e)&&this.schema.checkChild(e,t)&&(e._appendChild(t),this._handleNode(e))}},{key:"_checkAndAutoParagraphToAllowedPosition",value:function(t){if(this.schema.checkChild(this.position.parent,t))return!0;if(!this.schema.checkChild(this.position.parent,"paragraph")||!this.schema.checkChild("paragraph",t))return!1;this._insertPartialFragment();var e=this.writer.createElement("paragraph");return this.writer.insert(e,this.position),this._setAffectedBoundaries(this.position),this._lastAutoParagraph=e,this.position=this.writer.createPositionAt(e,0),!0}},{key:"_checkAndSplitToAllowedPosition",value:function(t){var e=this._getAllowedIn(this.position.parent,t);if(!e)return!1;for(e!=this.position.parent&&this._insertPartialFragment();e!=this.position.parent;)if(this.position.isAtStart){var r=this.position.parent;this.position=this.writer.createPositionBefore(r),r.isEmpty&&r.parent===e&&this.writer.remove(r)}else if(this.position.isAtEnd)this.position=this.writer.createPositionAfter(this.position.parent);else{var n=this.writer.createPositionAfter(this.position.parent);this._setAffectedBoundaries(this.position),this.writer.split(this.position),this.position=n,this.canMergeWith.add(this.position.nodeAfter)}return!0}},{key:"_getAllowedIn",value:function(t,e){return this.schema.checkChild(t,e)?t:this.schema.isLimit(t)?null:this._getAllowedIn(t.parent,e)}}])&&DS(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();var LS=' ,.?!:;"-()';function NS(t,e){var r=t.root,n=fb._createAt(r,e?"end":0);return e?new Tb(t,n):new Tb(n,t)}function VS(t,e,r){var n=e+(r?0:-1);return LS.includes(t.charAt(n))}function zS(t,e,r){return e===(r?t.offsetSize:0)}function $S(t){return $S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$S(t)}function qS(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=WS(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function US(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||WS(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function WS(t,e){if(t){if("string"==typeof t)return GS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GS(t,e):void 0}}function GS(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HS(n.key),n)}}function HS(t){var e=function(t,e){if("object"!=$S(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$S(e)?e:e+""}function JS(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(JS=function(){return!!t})()}function YS(t){return YS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},YS(t)}function ZS(t,e){return ZS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},ZS(t,e)}var XS=function(t){function e(){var t,r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=this,n=e,n=YS(n),t=function(t,e){if(e&&("object"===$S(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(r,JS()?Reflect.construct(n,o||[],YS(r).constructor):n.apply(r,o))).markers=new NP,t.document=new _P(t),t.schema=new Gg,t._pendingChanges=[],t._currentWriter=null,["deleteContent","modifySelection","getSelectedContent","applyOperation"].forEach((function(e){return t.decorate(e)})),t.on("applyOperation",(function(t,e){e[0]._validate()}),{priority:"highest"}),t.schema.register("$root",{isLimit:!0}),t.schema.register("$container",{allowIn:["$root","$container"]}),t.schema.register("$block",{allowIn:["$root","$container"],isBlock:!0}),t.schema.register("$blockObject",{allowWhere:"$block",isBlock:!0,isObject:!0}),t.schema.register("$inlineObject",{allowWhere:"$text",allowAttributesOf:"$text",isInline:!0,isObject:!0}),t.schema.register("$text",{allowIn:"$block",isInline:!0,isContent:!0}),t.schema.register("$clipboardHolder",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),t.schema.register("$documentFragment",{allowContentOf:"$root",allowChildren:"$text",isLimit:!0}),t.schema.register("$marker"),t.schema.addChildCheck((function(t,e){if("$marker"===e.name)return!0})),ig(t),t.document.registerPostFixer(Rm),t.on("insertContent",(function(e,r){var n=US(r,2),o=n[0],i=n[1];e.return=function(t,e,r){return t.change((function(n){var o=r||t.document.selection;o.isCollapsed||t.deleteContent(o,{doNotAutoparagraph:!0});var i,a=new MS(t,n,o.anchor),c=[];if(e.is("documentFragment")){if(e.markers.size){var u,s=[],l=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=BS(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e.markers);try{for(l.s();!(u=l.n()).done;){var f=IS(u.value,2),p=f[0],d=f[1],h=d.start,y=d.end,b=h.isEqual(y);s.push({position:h,name:p,isCollapsed:b},{position:y,name:p,isCollapsed:b})}}catch(t){l.e(t)}finally{l.f()}s.sort((function(t,e){var r=t.position,n=e.position;return r.isBefore(n)?1:-1}));for(var v=0,m=s;v<m.length;v++){var g=m[v],w=g.position,k=g.name,_=g.isCollapsed,O=null,P=null,S=w.parent===e&&w.isAtStart,j=w.parent===e&&w.isAtEnd;S||j?_&&(P=S?"start":"end"):(O=n.createElement("$marker"),n.insert(O,w)),c.push({name:k,element:O,collapsed:P})}}i=e.getChildren()}else i=[e];a.handleNodes(i);var E=a.getSelectionRange();if(e.is("documentFragment")&&c.length){for(var T=E?Iv.fromRange(E):null,A={},x=c.length-1;x>=0;x--){var C=c[x],D=C.name,R=C.element,I=C.collapsed,B=!A[D];if(B&&(A[D]=[]),R){var F=n.createPositionAt(R,"before");A[D].push(F),n.remove(R)}else{var M=a.getAffectedRange();if(!M){I&&A[D].push(a.position);continue}I?A[D].push(M[I]):A[D].push(B?M.start:M.end)}}for(var L=0,N=Object.entries(A);L<N.length;L++){var V=IS(N[L],2),z=V[0],$=IS(V[1],2),q=$[0],U=$[1];q&&U&&q.root===U.root&&q.root.document&&n.addMarker(z,{usingOperation:!0,affectsData:!0,range:new Tb(q,U)})}T&&(E=T.toRange(),T.detach())}E&&(o instanceof tm?n.setSelection(E):o.setTo(E));var W=a.getAffectedRange()||t.createRange(o.anchor);return a.destroy(),W}))}(t,o,i)})),t.on("insertObject",(function(e,r){var n=US(r,3),o=n[0],i=n[1],a=n[2];e.return=function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(!t.schema.isObject(e))throw new A("insertobject-element-not-an-object",t,{object:e});var o=r||t.document.selection,i=o;n.findOptimalPosition&&t.schema.isBlock(e)&&(i=t.createSelection(t.schema.findOptimalInsertionRange(o,n.findOptimalPosition)));var a=Pi(o.getSelectedBlocks()),c={};return a&&Object.assign(c,t.schema.getAttributesWithProperty(a,"copyOnReplace",!0)),t.change((function(r){i.isCollapsed||t.deleteContent(i,{doNotAutoparagraph:!0});var o=e,a=i.anchor.parent;!t.schema.checkChild(a,e)&&t.schema.checkChild(a,"paragraph")&&t.schema.checkChild("paragraph",e)&&(o=r.createElement("paragraph"),r.insert(e,o)),t.schema.setAllowedAttributes(o,c,r);var u=t.insertContent(o,i);return u.isCollapsed||n.setSelection&&function(t,e,r,n){var o=t.model;if("on"!=r){if("after"!=r)throw new A("insertobject-invalid-place-parameter-value",o);var i=e.nextSibling;o.schema.isInline(e)?t.setSelection(e,"after"):(!(i&&o.schema.checkChild(i,"$text"))&&o.schema.checkChild(e.parent,"paragraph")&&(i=t.createElement("paragraph"),o.schema.setAllowedAttributes(i,n,t),o.insertContent(i,t.createPositionAfter(e))),i&&t.setSelection(i,0))}else t.setSelection(e,"on")}(r,e,n.setSelection,c),u}))}(t,o,i,a)})),t.on("canEditAt",(function(e){var r=!t.document.isReadOnly;e.return=r,r||e.stop()})),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZS(t,e)}(e,t),r=e,n=[{key:"change",value:function(t){try{return 0===this._pendingChanges.length?(this._pendingChanges.push({batch:new BO,callback:t}),this._runPendingChanges()[0]):t(this._currentWriter)}catch(t){A.rethrowUnexpectedError(t,this)}}},{key:"enqueueChange",value:function(t,e){try{t?"function"==typeof t?(e=t,t=new BO):t instanceof BO||(t=new BO(t)):t=new BO,this._pendingChanges.push({batch:t,callback:e}),1==this._pendingChanges.length&&this._runPendingChanges()}catch(t){A.rethrowUnexpectedError(t,this)}}},{key:"applyOperation",value:function(t){t._execute()}},{key:"insertContent",value:function(t,e,r){for(var n=QS(e,r),o=arguments.length,i=new Array(o>3?o-3:0),a=3;a<o;a++)i[a-3]=arguments[a];return this.fire("insertContent",[t,n,r].concat(i))}},{key:"insertObject",value:function(t,e,r,n){for(var o=QS(e,r),i=arguments.length,a=new Array(i>4?i-4:0),c=4;c<i;c++)a[c-4]=arguments[c];return this.fire("insertObject",[t,o,n,n].concat(a))}},{key:"deleteContent",value:function(t,e){OS(this,t,e)}},{key:"modifySelection",value:function(t,e){!function(t,e){for(var r,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.schema,a="backward"!=o.direction,c=o.unit?o.unit:"character",u=!!o.treatEmojiAsSingleUnit,s=e.focus,l=new tb({boundaries:NS(s,a),singleCharacters:!0,direction:a?"forward":"backward"}),f={walker:l,schema:i,isForward:a,unit:c,treatEmojiAsSingleUnit:u},p=function(){if(r.done)return{v:void 0};var n=function(t,e){var r=t.isForward,n=t.walker,o=t.unit,i=t.schema,a=t.treatEmojiAsSingleUnit,c=e.type,u=e.item,s=e.nextPosition;if("text"==c)return"word"===t.unit?function(t,e){var r=t.position.textNode;for(r||(r=e?t.position.nodeAfter:t.position.nodeBefore);r&&r.is("$text");){var n=t.position.offset-r.startOffset;if(zS(r,n,e))r=e?t.position.nodeAfter:t.position.nodeBefore;else{if(VS(r.data,n,e))break;t.next()}}return t.position}(n,r):function(t,e,r){var n=t.position.textNode;if(n)for(var o=n.data,i=t.position.offset-n.startOffset;Vi(o,i)||"character"==e&&zi(o,i)||r&&Gi(o,i);)t.next(),i=t.position.offset-n.startOffset;return t.position}(n,o,a);if(c==(r?"elementStart":"elementEnd")){if(i.isSelectable(u))return fb._createAt(u,r?"after":"before");if(i.checkChild(s,"$text"))return s}else{if(i.isLimit(u))return void n.skip((function(){return!0}));if(i.checkChild(s,"$text"))return s}}(f,r.value);return n?(e instanceof tm?t.change((function(t){t.setSelectionFocus(n)})):e.setFocus(n),{v:void 0}):void 0};r=l.next();)if(n=p())return n.v}(this,t,e)}},{key:"getSelectedContent",value:function(t){return function(t,e){return t.change((function(t){var r=t.createDocumentFragment(),n=e.getFirstRange();if(!n||n.isCollapsed)return r;var o,i,a=n.start.root,c=n.start.getCommonPath(n.end),u=a.getNodeByPath(c),s=(o=n.start.parent==n.end.parent?n:t.createRange(t.createPositionAt(u,n.start.path[c.length]),t.createPositionAt(u,n.end.path[c.length]+1))).end.offset-o.start.offset,l=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return AS(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?AS(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(o.getItems({shallow:!0}));try{for(l.s();!(i=l.n()).done;){var f=i.value;f.is("$textProxy")?t.appendText(f.data,f.getAttributes(),r):t.append(t.cloneElement(f,!0),r)}}catch(t){l.e(t)}finally{l.f()}if(o!=n){var p=n._getTransformedByMove(o.start,t.createPositionAt(r,0),s)[0],d=t.createRange(t.createPositionAt(r,0),p.start);xS(t.createRange(p.end,t.createPositionAt(r,"end")),t),xS(d,t)}return r}))}(this,t)}},{key:"hasContent",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t instanceof Tb?t:Tb._createIn(t);if(r.isCollapsed)return!1;var n=e.ignoreWhitespaces,o=void 0!==n&&n,i=e.ignoreMarkers;if(void 0===i||!i){var a,c=qS(this.markers.getMarkersIntersectingRange(r));try{for(c.s();!(a=c.n()).done;)if(a.value.affectsData)return!0}catch(t){c.e(t)}finally{c.f()}}var u,s=qS(r.getItems());try{for(s.s();!(u=s.n()).done;){var l=u.value;if(this.schema.isContent(l)){if(!l.is("$textProxy"))return!0;if(!o)return!0;if(-1!==l.data.search(/\S/))return!0}}}catch(t){s.e(t)}finally{s.f()}return!1}},{key:"canEditAt",value:function(t){var e=QS(t);return this.fire("canEditAt",[e])}},{key:"createPositionFromPath",value:function(t,e,r){return new fb(t,e,r)}},{key:"createPositionAt",value:function(t,e){return fb._createAt(t,e)}},{key:"createPositionAfter",value:function(t){return fb._createAfter(t)}},{key:"createPositionBefore",value:function(t){return fb._createBefore(t)}},{key:"createRange",value:function(t,e){return new Tb(t,e)}},{key:"createRangeIn",value:function(t){return Tb._createIn(t)}},{key:"createRangeOn",value:function(t){return Tb._createOn(t)}},{key:"createSelection",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t,e,r){if(JS())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var o=new(t.bind.apply(t,n));return r&&ZS(o,r.prototype),o}(wv,e)}},{key:"createBatch",value:function(t){return new BO(t)}},{key:"createOperationFromJSON",value:function(t){return rO.fromJSON(t,this.document)}},{key:"destroy",value:function(){this.document.destroy(),this.stopListening()}},{key:"_runPendingChanges",value:function(){var t=[];this.fire("_beforeChanges");try{for(;this._pendingChanges.length;){var e=this._pendingChanges[0].batch;this._currentWriter=new dS(this,e);var r=this._pendingChanges[0].callback(this._currentWriter);t.push(r),this.document._handleChangeBlock(this._currentWriter),this._pendingChanges.shift(),this._currentWriter=null}}finally{this._pendingChanges.length=0,this._currentWriter=null,this.fire("_afterChanges")}return t}}],n&&KS(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function QS(t,e){if(t)return t instanceof wv||t instanceof tm?t:t instanceof by?e||0===e?new wv(t,e):t.is("rootElement")?new wv(t,"in"):new wv(t,"on"):new wv(t)}function tj(t){return tj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tj(t)}function ej(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rj(n.key),n)}}function rj(t){var e=function(t,e){if("object"!=tj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tj(e)?e:e+""}function nj(t,e,r){return e=ij(e),function(t,e){if(e&&("object"===tj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oj()?Reflect.construct(e,r||[],ij(t).constructor):e.apply(t,r))}function oj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oj=function(){return!!t})()}function ij(t){return ij=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ij(t)}function aj(t,e){return aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aj(t,e)}var cj=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=nj(this,e,arguments)).domEventType=["mousedown","mouseup","mouseover","mouseout"],t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aj(t,e)}(e,t),r=e,(n=[{key:"onDomEvent",value:function(t){this.fire(t.type,t)}}])&&ej(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}($p);function uj(t){return uj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uj(t)}function sj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function lj(){lj=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==uj(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(uj(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function fj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pj(n.key),n)}}function pj(t){var e=function(t,e){if("object"!=uj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uj(e)?e:e+""}new Set(["black","silver","gray","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","orange","aliceblue","antiquewhite","aquamarine","azure","beige","bisque","blanchedalmond","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkgrey","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkslategrey","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dimgrey","dodgerblue","firebrick","floralwhite","forestgreen","gainsboro","ghostwhite","gold","goldenrod","greenyellow","grey","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightgrey","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightslategrey","lightsteelblue","lightyellow","limegreen","linen","magenta","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","oldlace","olivedrab","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","skyblue","slateblue","slategray","slategrey","snow","springgreen","steelblue","tan","thistle","tomato","turquoise","violet","wheat","whitesmoke","yellowgreen","activeborder","activecaption","appworkspace","background","buttonface","buttonhighlight","buttonshadow","buttontext","captiontext","graytext","highlight","highlighttext","inactiveborder","inactivecaption","inactivecaptiontext","infobackground","infotext","menu","menutext","scrollbar","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","window","windowframe","windowtext","rebeccapurple","currentcolor","transparent"]);var dj=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._commands=new Map},e=[{key:"add",value:function(t,e){this._commands.set(t,e)}},{key:"get",value:function(t){return this._commands.get(t)}},{key:"execute",value:function(t){var e=this.get(t);if(!e)throw new A("commandcollection-command-not-found",this,{commandName:t});for(var r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return e.execute.apply(e,n)}},{key:"names",value:lj().mark((function t(){return lj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._commands.keys(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:"commands",value:lj().mark((function t(){return lj().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.delegateYield(this._commands.values(),"t0",1);case 1:case"end":return t.stop()}}),t,this)}))},{key:Symbol.iterator,value:function(){return this._commands[Symbol.iterator]()}},{key:"destroy",value:function(){var t,e=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return sj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?sj(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.commands());try{for(e.s();!(t=e.n()).done;)t.value.destroy()}catch(t){e.e(t)}finally{e.f()}}}],e&&fj(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function hj(t){return hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hj(t)}function yj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,bj(n.key),n)}}function bj(t){var e=function(t,e){if("object"!=hj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=hj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==hj(e)?e:e+""}function vj(t,e,r){return e=wj(e),function(t,e){if(e&&("object"===hj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,mj()?Reflect.construct(e,r||[],wj(t).constructor):e.apply(t,r))}function mj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(mj=function(){return!!t})()}function gj(){return gj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wj(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},gj.apply(this,arguments)}function wj(t){return wj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wj(t)}function kj(t,e){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kj(t,e)}var _j=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=vj(this,e)).editor=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kj(t,e)}(e,t),r=e,n=[{key:"set",value:function(t,r){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"==typeof r){var i=r;r=function(t,e){n.editor.execute(i),e()}}gj(wj(e.prototype),"set",this).call(this,t,r,o)}}],n&&yj(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Fi);function Oj(t){return Oj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oj(t)}function Pj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Sj(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function jj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Ej(n.key),n)}}function Ej(t){var e=function(t,e){if("object"!=Oj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Oj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Oj(e)?e:e+""}var Tj="contentEditing",Aj="common",xj=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.keystrokeInfos=new Map,this._editor=e;var r=e.locale.t;this.addKeystrokeInfoCategory({id:Tj,label:r("Content editing keystrokes"),description:r("These keyboard shortcuts allow for quick access to content editing features.")}),this.addKeystrokeInfoCategory({id:"navigation",label:r("User interface and content navigation keystrokes"),description:r("Use the following keystrokes for more efficient navigation in the CKEditor 5 user interface."),groups:[{id:"common",keystrokes:[{label:r("Close contextual balloons, dropdowns, and dialogs"),keystroke:"Esc"},{label:r("Open the accessibility help dialog"),keystroke:"Alt+0"},{label:r("Move focus between form fields (inputs, buttons, etc.)"),keystroke:[["Tab"],["Shift+Tab"]]},{label:r("Move focus to the toolbar, navigate between toolbars"),keystroke:"Alt+F10",mayRequireFn:!0},{label:r("Navigate through the toolbar"),keystroke:[["arrowup"],["arrowright"],["arrowdown"],["arrowleft"]]},{label:r("Execute the currently focused button"),keystroke:[["Enter"],["Space"]]}]}]})},e=[{key:"addKeystrokeInfoCategory",value:function(t){var e=this,r=t.id,n=t.label,o=t.description,i=t.groups;this.keystrokeInfos.set(r,{id:r,label:n,description:o,groups:new Map}),this.addKeystrokeInfoGroup({categoryId:r,id:Aj}),i&&i.forEach((function(t){e.addKeystrokeInfoGroup(function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Sj(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Ej(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Sj(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({categoryId:r},t))}))}},{key:"addKeystrokeInfoGroup",value:function(t){var e=t.categoryId,r=void 0===e?Tj:e,n=t.id,o=t.label,i=t.keystrokes,a=this.keystrokeInfos.get(r);if(!a)throw new A("accessibility-unknown-keystroke-info-category",this._editor,{groupId:n,categoryId:r});a.groups.set(n,{id:n,label:o,keystrokes:i||[]})}},{key:"addKeystrokeInfos",value:function(t){var e,r=t.categoryId,n=void 0===r?Tj:r,o=t.groupId,i=void 0===o?Aj:o,a=t.keystrokes;if(!this.keystrokeInfos.has(n))throw new A("accessibility-unknown-keystroke-info-category",this._editor,{categoryId:n,keystrokes:a});var c,u=this.keystrokeInfos.get(n);if(!u.groups.has(i))throw new A("accessibility-unknown-keystroke-info-group",this._editor,{groupId:i,categoryId:n,keystrokes:a});(e=u.groups.get(i).keystrokes).push.apply(e,function(t){if(Array.isArray(t))return Pj(t)}(c=a)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(c)||function(t,e){if(t){if("string"==typeof t)return Pj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Pj(t,e):void 0}}(c)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}}],e&&jj(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),Cj=["translations"],Dj=["translations"];function Rj(t){return Rj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rj(t)}function Ij(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}function Bj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Fj(n.key),n)}}function Fj(t){var e=function(t,e){if("object"!=Rj(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Rj(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Rj(e)?e:e+""}function Mj(t,e,r){return e=Nj(e),function(t,e){if(e&&("object"===Rj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Lj()?Reflect.construct(e,r||[],Nj(t).constructor):e.apply(t,r))}function Lj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Lj=function(){return!!t})()}function Nj(t){return Nj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Nj(t)}function Vj(t,e){return Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Vj(t,e)}var zj=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(t=Mj(this,e)).constructor,o=n.defaultConfig||{},i=o.translations,a=Ij(o,Cj),c=r.translations,u=void 0===c?i:c,s=Ij(r,Dj),l=r.language||a.language;t._context=r.context||new xa({language:l,translations:u}),t._context._addEditor(t,!r.context);var f=Array.from(n.builtinPlugins||[]);t.config=new wn(s,a),t.config.define("plugins",f),t.config.define(t._context._getEditorConfig()),t.plugins=new Oa(t,f,t._context.plugins),t.locale=t._context.locale,t.t=t.locale.t,t._readOnlyLocks=new Set,t.commands=new dj,t.set("state","initializing"),t.once("ready",(function(){return t.state="ready"}),{priority:"high"}),t.once("destroy",(function(){return t.state="destroyed"}),{priority:"high"}),t.model=new XS,t.on("change:isReadOnly",(function(){t.model.document.isReadOnly=t.isReadOnly}));var p=new iu;return t.data=new Vw(t.model,p),t.editing=new bg(t.model,p),t.editing.view.document.bind("isReadOnly").to(t),t.conversion=new Jw([t.editing.downcastDispatcher,t.data.downcastDispatcher],t.data.upcastDispatcher),t.conversion.addAlias("dataDowncast",t.data.downcastDispatcher),t.conversion.addAlias("editingDowncast",t.editing.downcastDispatcher),t.keystrokes=new _j(t),t.keystrokes.listenTo(t.editing.view.document),t.accessibility=new xj(t),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vj(t,e)}(e,t),r=e,n=[{key:"isReadOnly",get:function(){return this._readOnlyLocks.size>0},set:function(t){throw new A("editor-isreadonly-has-no-setter")}},{key:"enableReadOnlyMode",value:function(t){if("string"!=typeof t&&"symbol"!==Rj(t))throw new A("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)||(this._readOnlyLocks.add(t),1===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!0,!1))}},{key:"disableReadOnlyMode",value:function(t){if("string"!=typeof t&&"symbol"!==Rj(t))throw new A("editor-read-only-lock-id-invalid",null,{lockId:t});this._readOnlyLocks.has(t)&&(this._readOnlyLocks.delete(t),0===this._readOnlyLocks.size&&this.fire("change:isReadOnly","isReadOnly",!1,!0))}},{key:"setData",value:function(t){this.data.set(t)}},{key:"getData",value:function(t){return this.data.get(t)}},{key:"initPlugins",value:function(){var t=this.config,e=t.get("plugins"),r=t.get("removePlugins")||[],n=t.get("extraPlugins")||[],o=t.get("substitutePlugins")||[];return this.plugins.init(e.concat(n),r,o)}},{key:"destroy",value:function(){var t=this,e=Promise.resolve();return"initializing"==this.state&&(e=new Promise((function(e){return t.once("ready",e)}))),e.then((function(){t.fire("destroy"),t.stopListening(),t.commands.destroy()})).then((function(){return t.plugins.destroy()})).then((function(){t.model.destroy(),t.data.destroy(),t.editing.destroy(),t.keystrokes.destroy()})).then((function(){return t._context._removeEditor(t)}))}},{key:"execute",value:function(t){try{for(var e,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return(e=this.commands).execute.apply(e,[t].concat(n))}catch(t){A.rethrowUnexpectedError(t,this)}}},{key:"focus",value:function(){this.editing.view.focus()}}],o=[{key:"create",value:function(){throw new Error("This is an abstract method.")}}],n&&Bj(r.prototype,n),o&&Bj(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(mt());function $j(t){return $j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$j(t)}function qj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Uj(n.key),n)}}function Uj(t){var e=function(t,e){if("object"!=$j(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$j(e)?e:e+""}function Wj(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Wj=function(){return!!t})()}function Gj(t){return Gj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gj(t)}function Kj(t,e){return Kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Kj(t,e)}function Hj(t){var e=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,n=arguments,r=Gj(r=e),function(t,e){if(e&&("object"===$j(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Wj()?Reflect.construct(r,n||[],Gj(t).constructor):r.apply(t,n));var t,r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Kj(t,e)}(e,t),r=e,(n=[{key:"updateSourceElement",value:function(t){if(!this.sourceElement)throw new A("editor-missing-sourceelement",this);var e=this.config.get("updateSourceElementOnDestroy"),r=this.sourceElement instanceof HTMLTextAreaElement;if(e||r){var n="string"==typeof t?t:this.data.get();po(this.sourceElement,n)}else po(this.sourceElement,"")}}])&&qj(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(t);return e}Hj.updateSourceElement=Hj(Object).prototype.updateSourceElement;var Jj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.187 17H5.773c-.637 0-1.092-.138-1.364-.415-.273-.277-.409-.718-.409-1.323V4.738c0-.617.14-1.062.419-1.332.279-.27.73-.406 1.354-.406h4.68c.69 0 1.288.041 1.793.124.506.083.96.242 1.36.478.341.197.644.447.906.75a3.262 3.262 0 0 1 .808 2.162c0 1.401-.722 2.426-2.167 3.075C15.05 10.175 16 11.315 16 13.01a3.756 3.756 0 0 1-2.296 3.504 6.1 6.1 0 0 1-1.517.377c-.571.073-1.238.11-2 .11zm-.217-6.217H7v4.087h3.069c1.977 0 2.965-.69 2.965-2.072 0-.707-.256-1.22-.768-1.537-.512-.319-1.277-.478-2.296-.478zM7 5.13v3.619h2.606c.729 0 1.292-.067 1.69-.2a1.6 1.6 0 0 0 .91-.765c.165-.267.247-.566.247-.897 0-.707-.26-1.176-.778-1.409-.519-.232-1.31-.348-2.375-.348H7z"/></svg>',Yj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m11.591 10.177 4.243 4.242a1 1 0 0 1-1.415 1.415l-4.242-4.243-4.243 4.243a1 1 0 0 1-1.414-1.415l4.243-4.242L4.52 5.934A1 1 0 0 1 5.934 4.52l4.243 4.243 4.242-4.243a1 1 0 1 1 1.415 1.414l-4.243 4.243z"/></svg>',Zj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><circle cx="9.5" cy="4.5" r="1.5"/><circle cx="9.5" cy="10.5" r="1.5"/><circle cx="9.5" cy="16.5" r="1.5"/></svg>',Xj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m14.958 9.367-2.189 1.837a.75.75 0 0 0 .965 1.149l3.788-3.18a.747.747 0 0 0 .21-.284.75.75 0 0 0-.17-.945L13.77 4.762a.75.75 0 1 0-.964 1.15l2.331 1.955H6.22A.75.75 0 0 0 6 7.9a4 4 0 1 0 1.477 7.718l-.344-1.489A2.5 2.5 0 1 1 6.039 9.4l-.008-.032h8.927z"/></svg>',Qj='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="m5.042 9.367 2.189 1.837a.75.75 0 0 1-.965 1.149l-3.788-3.18a.747.747 0 0 1-.21-.284.75.75 0 0 1 .17-.945L6.23 4.762a.75.75 0 1 1 .964 1.15L4.863 7.866h8.917A.75.75 0 0 1 14 7.9a4 4 0 1 1-1.477 7.718l.344-1.489a2.5 2.5 0 1 0 1.094-4.73l.008-.032H5.042z"/></svg>';function tE(t){return tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tE(t)}function eE(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return rE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function rE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function nE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oE(n.key),n)}}function oE(t){var e=function(t,e){if("object"!=tE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tE(e)?e:e+""}function iE(t,e,r){return e=uE(e),function(t,e){if(e&&("object"===tE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aE()?Reflect.construct(e,r||[],uE(t).constructor):e.apply(t,r))}function aE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aE=function(){return!!t})()}function cE(){return cE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},cE.apply(this,arguments)}function uE(t){return uE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uE(t)}function sE(t,e){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sE(t,e)}var lE=function(t){function e(){var t,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=iE(this,e,[r,{idProperty:"viewUid"}])).on("add",(function(e,r,n){t._renderViewIntoCollectionParent(r,n)})),t.on("remove",(function(e,r){r.element&&t._parentElement&&r.element.remove()})),t._parentElement=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sE(t,e)}(e,t),r=e,n=[{key:"destroy",value:function(){this.map((function(t){return t.destroy()}))}},{key:"setParent",value:function(t){this._parentElement=t;var e,r=eE(this);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._renderViewIntoCollectionParent(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"delegate",value:function(){for(var t=this,e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];if(!r.length||!r.every((function(t){return"string"==typeof t})))throw new A("ui-viewcollection-delegate-wrong-events",this);return{to:function(e){var n,o=eE(t);try{for(o.s();!(n=o.n()).done;)for(var i=n.value,a=0,c=r;a<c.length;a++){var u=c[a];i.delegate(u).to(e)}}catch(t){o.e(t)}finally{o.f()}t.on("add",(function(t,n){for(var o=0,i=r;o<i.length;o++){var a=i[o];n.delegate(a).to(e)}})),t.on("remove",(function(t,n){for(var o=0,i=r;o<i.length;o++){var a=i[o];n.stopDelegating(a,e)}}))}}}},{key:"_renderViewIntoCollectionParent",value:function(t,e){t.isRendered||t.render(),t.element&&this._parentElement&&this._parentElement.insertBefore(t.element,this._parentElement.children[e])}},{key:"remove",value:function(t){return cE(uE(e.prototype),"remove",this).call(this,t)}}],n&&nE(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Oi);function fE(t){return fE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fE(t)}function pE(t){return function(t){if(Array.isArray(t))return vE(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||bE(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dE(){return dE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},dE.apply(this,arguments)}function hE(){hE=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==fE(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(fE(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function yE(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=bE(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function bE(t,e){if(t){if("string"==typeof t)return vE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vE(t,e):void 0}}function vE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function gE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,kE(n.key),n)}}function wE(t,e,r){return e&&gE(t.prototype,e),r&&gE(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function kE(t){var e=function(t,e){if("object"!=fE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fE(e)?e:e+""}function _E(t,e,r){return e=PE(e),function(t,e){if(e&&("object"===fE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,OE()?Reflect.construct(e,r||[],PE(t).constructor):e.apply(t,r))}function OE(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(OE=function(){return!!t})()}function PE(t){return PE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},PE(t)}function SE(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jE(t,e)}function jE(t,e){return jE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},jE(t,e)}var EE=function(t){function e(t){var r;return mE(this,e),r=_E(this,e),Object.assign(r,ME(FE(t))),r._isRendered=!1,r._revertData=null,r}return SE(e,t),wE(e,[{key:"render",value:function(){var t=this._renderNode({intoFragment:!0});return this._isRendered=!0,t}},{key:"apply",value:function(t){return this._revertData={children:[],bindings:[],attributes:{}},this._renderNode({node:t,intoFragment:!1,isApplying:!0,revertData:this._revertData}),t}},{key:"revert",value:function(t){if(!this._revertData)throw new A("ui-template-revert-not-applied",[this,t]);this._revertTemplateFromNode(t,this._revertData)}},{key:"getViews",value:hE().mark((function t(){var e,r;return hE().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(t){var n,o,i;return hE().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.children){e.next=23;break}n=yE(t.children),e.prev=2,n.s();case 4:if((o=n.n()).done){e.next=15;break}if(!qE(i=o.value)){e.next=11;break}return e.next=9,i;case 9:e.next=13;break;case 11:if(!UE(i)){e.next=13;break}return e.delegateYield(r(i),"t0",13);case 13:e.next=4;break;case 15:e.next=20;break;case 17:e.prev=17,e.t1=e.catch(2),n.e(e.t1);case 20:return e.prev=20,n.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,17,20,23]])},e=hE().mark(r),t.delegateYield(r(this),"t0",3);case 3:case"end":return t.stop()}}),t,this)}))},{key:"_renderNode",value:function(t){if(t.node?this.tag&&this.text:this.tag?this.text:!this.text)throw new A("ui-template-wrong-syntax",this);return this.text?this._renderText(t):this._renderElement(t)}},{key:"_renderElement",value:function(t){var e=t.node;return e||(e=t.node=document.createElementNS(this.ns||"http://www.w3.org/1999/xhtml",this.tag)),this._renderAttributes(t),this._renderElementChildren(t),this._setUpListeners(t),e}},{key:"_renderText",value:function(t){var e=t.node;return e?t.revertData.text=e.textContent:e=t.node=document.createTextNode(""),CE(this.text)?this._bindToObservable({schema:this.text,updater:RE(e),data:t}):e.textContent=this.text.join(""),e}},{key:"_renderAttributes",value:function(t){if(this.attributes){var e=t.node,r=t.revertData;for(var n in this.attributes){var o=e.getAttribute(n),i=this.attributes[n];r&&(r.attributes[n]=o);var a=GE(i)?i[0].ns:null;if(CE(i)){var c=GE(i)?i[0].value:i;r&&KE(n)&&c.unshift(o),this._bindToObservable({schema:c,updater:IE(e,n,a),data:t})}else if("style"==n&&"string"!=typeof i[0])this._renderStyleAttribute(i[0],t);else{r&&o&&KE(n)&&i.unshift(o);var u=i.map((function(t){return t&&t.value||t})).reduce((function(t,e){return t.concat(e)}),[]).reduce(NE,"");$E(u)||e.setAttributeNS(a,n,u)}}}}},{key:"_renderStyleAttribute",value:function(t,e){var r=e.node;for(var n in t){var o=t[n];CE(o)?this._bindToObservable({schema:[o],updater:BE(r,n),data:e}):r.style[n]=o}}},{key:"_renderElementChildren",value:function(t){var e,r=t.node,n=t.intoFragment?document.createDocumentFragment():r,o=t.isApplying,i=0,a=yE(this.children);try{for(a.s();!(e=a.n()).done;){var c=e.value;if(WE(c)){if(!o){c.setParent(r);var u,s=yE(c);try{for(s.s();!(u=s.n()).done;){var l=u.value;n.appendChild(l.element)}}catch(t){s.e(t)}finally{s.f()}}}else if(qE(c))o||(c.isRendered||c.render(),n.appendChild(c.element));else if(On(c))n.appendChild(c);else if(o){var f=t.revertData,p={children:[],bindings:[],attributes:{}};f.children.push(p),c._renderNode({intoFragment:!1,node:n.childNodes[i++],isApplying:!0,revertData:p})}else n.appendChild(c.render())}}catch(t){a.e(t)}finally{a.f()}t.intoFragment&&r.appendChild(n)}},{key:"_setUpListeners",value:function(t){var e=this;if(this.eventListeners){var r=function(r){var n=e.eventListeners[r].map((function(e){var n,o,i=(n=r.split("@"),o=2,function(t){if(Array.isArray(t))return t}(n)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(n,o)||bE(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];return e.activateDomEventListener(a,c,t)}));t.revertData&&t.revertData.bindings.push(n)};for(var n in this.eventListeners)r(n)}}},{key:"_bindToObservable",value:function(t){var e=t.schema,r=t.updater,n=t.data,o=n.revertData;DE(e,r,n);var i=e.filter((function(t){return!$E(t)})).filter((function(t){return t.observable})).map((function(t){return t.activateAttributeListener(e,r,n)}));o&&o.bindings.push(i)}},{key:"_revertTemplateFromNode",value:function(t,e){var r,n=yE(e.bindings);try{for(n.s();!(r=n.n()).done;){var o,i=yE(r.value);try{for(i.s();!(o=i.n()).done;)(0,o.value)()}catch(t){i.e(t)}finally{i.f()}}}catch(t){n.e(t)}finally{n.f()}if(e.text)t.textContent=e.text;else{var a=t;for(var c in e.attributes){var u=e.attributes[c];null===u?a.removeAttribute(c):a.setAttribute(c,u)}for(var s=0;s<e.children.length;++s)this._revertTemplateFromNode(a.childNodes[s],e.children[s])}}}],[{key:"bind",value:function(t,e){return{to:function(r,n){return new AE({eventNameOrFunction:r,attribute:r,observable:t,emitter:e,callback:n})},if:function(r,n,o){return new xE({observable:t,emitter:e,attribute:r,valueIfTrue:n,callback:o})}}}},{key:"extend",value:function(t,e){if(t._isRendered)throw new A("template-extend-render",[this,t]);zE(t,ME(FE(e)))}}])}(H()),TE=function(){return wE((function t(e){mE(this,t),this.attribute=e.attribute,this.observable=e.observable,this.emitter=e.emitter,this.callback=e.callback}),[{key:"getValue",value:function(t){var e=this.observable[this.attribute];return this.callback?this.callback(e,t):e}},{key:"activateAttributeListener",value:function(t,e,r){var n=this,o=function(){return DE(t,e,r)};return this.emitter.listenTo(this.observable,"change:".concat(this.attribute),o),function(){n.emitter.stopListening(n.observable,"change:".concat(n.attribute),o)}}}])}(),AE=function(t){function e(t){var r;return mE(this,e),(r=_E(this,e,[t])).eventNameOrFunction=t.eventNameOrFunction,r}return SE(e,t),wE(e,[{key:"activateDomEventListener",value:function(t,e,r){var n=this,o=function(t,r){e&&!r.target.matches(e)||("function"==typeof n.eventNameOrFunction?n.eventNameOrFunction(r):n.observable.fire(n.eventNameOrFunction,r))};return this.emitter.listenTo(r.node,t,o),function(){n.emitter.stopListening(r.node,t,o)}}}])}(TE),xE=function(t){function e(t){var r;return mE(this,e),(r=_E(this,e,[t])).valueIfTrue=t.valueIfTrue,r}return SE(e,t),wE(e,[{key:"getValue",value:function(t){return!$E(dE(PE(e.prototype),"getValue",this).call(this,t))&&(this.valueIfTrue||!0)}}])}(TE);function CE(t){return!!t&&(t.value&&(t=t.value),Array.isArray(t)?t.some(CE):t instanceof TE)}function DE(t,e,r){var n,o=function(t,e){return t.map((function(t){return t instanceof TE?t.getValue(e):t}))}(t,r.node);$E(n=1==t.length&&t[0]instanceof xE?o[0]:o.reduce(NE,""))?e.remove():e.set(n)}function RE(t){return{set:function(e){t.textContent=e},remove:function(){t.textContent=""}}}function IE(t,e,r){return{set:function(n){t.setAttributeNS(r,e,n)},remove:function(){t.removeAttributeNS(r,e)}}}function BE(t,e){return{set:function(r){t.style[e]=r},remove:function(){t.style[e]=null}}}function FE(t){return pn(t,(function(t){if(t&&(t instanceof TE||UE(t)||qE(t)||WE(t)))return t}))}function ME(t){if("string"==typeof t?t=function(t){return{text:[t]}}(t):t.text&&function(t){t.text=Ko(t.text)}(t),t.on&&(t.eventListeners=function(t){for(var e in t)LE(t,e);return t}(t.on),delete t.on),!t.text){t.attributes&&function(t){for(var e in t)t[e].value&&(t[e].value=Ko(t[e].value)),LE(t,e)}(t.attributes);var e=[];if(t.children)if(WE(t.children))e.push(t.children);else{var r,n=yE(t.children);try{for(n.s();!(r=n.n()).done;){var o=r.value;UE(o)||qE(o)||On(o)?e.push(o):e.push(new EE(o))}}catch(t){n.e(t)}finally{n.f()}}t.children=e}return t}function LE(t,e){t[e]=Ko(t[e])}function NE(t,e){return $E(e)?t:$E(t)?e:"".concat(t," ").concat(e)}function VE(t,e){for(var r in e){var n;t[r]?(n=t[r]).push.apply(n,pE(e[r])):t[r]=e[r]}}function zE(t,e){var r;if(e.attributes&&(t.attributes||(t.attributes={}),VE(t.attributes,e.attributes)),e.eventListeners&&(t.eventListeners||(t.eventListeners={}),VE(t.eventListeners,e.eventListeners)),e.text&&(r=t.text).push.apply(r,pE(e.text)),e.children&&e.children.length){if(t.children.length!=e.children.length)throw new A("ui-template-extend-children-mismatch",t);var n,o=0,i=yE(e.children);try{for(i.s();!(n=i.n()).done;){var a=n.value;zE(t.children[o++],a)}}catch(t){i.e(t)}finally{i.f()}}}function $E(t){return!t&&0!==t}function qE(t){return t instanceof oT}function UE(t){return t instanceof EE}function WE(t){return t instanceof lE}function GE(t){return rt(t[0])&&t[0].ns}function KE(t){return"class"==t||"style"==t}var HE=r(7247);function JE(t){return JE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JE(t)}function YE(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ZE(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function ZE(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function XE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QE(n.key),n)}}function QE(t){var e=function(t,e){if("object"!=JE(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=JE(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JE(e)?e:e+""}function tT(t,e,r){return e=rT(e),function(t,e){if(e&&("object"===JE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eT()?Reflect.construct(e,r||[],rT(t).constructor):e.apply(t,r))}function eT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eT=function(){return!!t})()}function rT(t){return rT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rT(t)}function nT(t,e){return nT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nT(t,e)}Da()(HE.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),HE.A.locals;var oT=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tT(this,e)).element=null,r.isRendered=!1,r.locale=t,r.t=t&&t.t,r._viewCollections=new Oi,r._unboundChildren=r.createCollection(),r._viewCollections.on("add",(function(e,r){r.locale=t,r.t=t&&t.t})),r.decorate("render"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nT(t,e)}(e,t),r=e,(n=[{key:"bindTemplate",get:function(){return this._bindTemplate?this._bindTemplate:this._bindTemplate=EE.bind(this,this)}},{key:"createCollection",value:function(t){var e=new lE(t);return this._viewCollections.add(e),e}},{key:"registerChild",value:function(t){Dt(t)||(t=[t]);var e,r=YE(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._unboundChildren.add(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"deregisterChild",value:function(t){Dt(t)||(t=[t]);var e,r=YE(t);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._unboundChildren.remove(n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"setTemplate",value:function(t){this.template=new EE(t)}},{key:"extendTemplate",value:function(t){EE.extend(this.template,t)}},{key:"render",value:function(){if(this.isRendered)throw new A("ui-view-render-already-rendered",this);this.template&&(this.element=this.template.render(),this.registerChild(this.template.getViews())),this.isRendered=!0}},{key:"destroy",value:function(){this.stopListening(),this._viewCollections.map((function(t){return t.destroy()})),this.template&&this.template._revertData&&this.template.revert(this.element)}}])&&XE(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Nn(mt())),iT=r(3756);function aT(t){return aT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aT(t)}function cT(t,e,r){return e=sT(e),function(t,e){if(e&&("object"===aT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uT()?Reflect.construct(e,r||[],sT(t).constructor):e.apply(t,r))}function uT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uT=function(){return!!t})()}function sT(t){return sT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sT(t)}function lT(t,e){return lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lT(t,e)}Da()(iT.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),iT.A.locals;var fT=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cT(this,e,[t])).set("text",void 0),r.set("for",void 0),r.id="ck-editor__label_".concat(v());var n=r.bindTemplate;return r.setTemplate({tag:"label",attributes:{class:["ck","ck-label"],id:r.id,for:n.to("for")},children:[{text:n.to("text")}]}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lT(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT);function pT(t){return pT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pT(t)}function dT(t){return function(t){if(Array.isArray(t))return yT(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||hT(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hT(t,e){if(t){if("string"==typeof t)return yT(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?yT(t,e):void 0}}function yT(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vT(n.key),n)}}function vT(t){var e=function(t,e){if("object"!=pT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=pT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pT(e)?e:e+""}function mT(t,e,r){return e=wT(e),function(t,e){if(e&&("object"===pT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gT()?Reflect.construct(e,r||[],wT(t).constructor):e.apply(t,r))}function gT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gT=function(){return!!t})()}function wT(t){return wT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wT(t)}function kT(t,e){return kT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kT(t,e)}var _T=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=mT(this,e,[t]);var o=t.t,i=new fT;return i.text=o("Help Contents. To close this dialog press ESC."),n.setTemplate({tag:"div",attributes:{class:["ck","ck-accessibility-help-dialog__content"],"aria-labelledby":i.id,role:"document",tabindex:-1},children:[Ht(document,"p",{},o("Below, you can find a list of keyboard shortcuts that can be used in the editor."))].concat(dT(n._createCategories(Array.from(r.values()))),[i])}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kT(t,e)}(e,t),r=e,(n=[{key:"focus",value:function(){this.element.focus()}},{key:"_createCategories",value:function(t){var e=this;return t.map((function(t){var r=[Ht(document,"h3",{},t.label)].concat(dT(Array.from(t.groups.values()).map((function(t){return e._createGroup(t)})).flat()));return t.description&&r.splice(1,0,Ht(document,"p",{},t.description)),Ht(document,"section",{},r)}))}},{key:"_createGroup",value:function(t){var e=this,r=t.keystrokes.sort((function(t,e){return t.label.localeCompare(e.label)})).map((function(t){return e._createGroupRow(t)})).flat(),n=[Ht(document,"dl",{},r)];return t.label&&n.unshift(Ht(document,"h4",{},t.label)),n}},{key:"_createGroupRow",value:function(t){var e,r,n=this.locale.t,o=Ht(document,"dt"),a=Ht(document,"dd"),c=[],u=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=hT(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}("string"==typeof(r=t.keystroke)?[[r]]:"string"==typeof r[0]?[r]:r);try{for(u.s();!(e=u.n()).done;){var s=e.value;c.push(s.map(OT).join(""))}}catch(t){u.e(t)}finally{u.f()}return o.innerHTML=t.label,a.innerHTML=c.join(", ")+(t.mayRequireFn&&i.isMac?" ".concat(n("(may require <kbd>Fn</kbd>)")):""),[o,a]}}])&&bT(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function OT(t){return Wo(t).split("+").map((function(t){return"<kbd>".concat(t,"</kbd>")})).join("+")}const PT='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.628a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3Z"/><path d="M8.5 9.125a.3.3 0 0 0-.253-.296L5.11 8.327a.75.75 0 1 1 .388-1.449l4.04.716c.267.072.624.08.893.009l4.066-.724a.75.75 0 1 1 .388 1.45l-3.132.5a.3.3 0 0 0-.253.296v1.357a.3.3 0 0 0 .018.102l1.615 4.438a.75.75 0 0 1-1.41.513l-1.35-3.71a.3.3 0 0 0-.281-.197h-.209a.3.3 0 0 0-.282.198l-1.35 3.711a.75.75 0 0 1-1.41-.513l1.64-4.509a.3.3 0 0 0 .019-.103V9.125Z"/><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 1 0-17 8.5 8.5 0 0 1 0 17Zm0 1.5c5.523 0 10-4.477 10-10S15.523 0 10 0 0 4.477 0 10s4.477 10 10 10Z"/></svg>';var ST=r(8020);function jT(t){return jT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jT(t)}function ET(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AT(n.key),n)}}function AT(t){var e=function(t,e){if("object"!=jT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jT(e)?e:e+""}function xT(t,e,r){return e=DT(e),function(t,e){if(e&&("object"===jT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,CT()?Reflect.construct(e,r||[],DT(t).constructor):e.apply(t,r))}function CT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CT=function(){return!!t})()}function DT(t){return DT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DT(t)}function RT(t,e){return RT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},RT(t,e)}Da()(ST.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),ST.A.locals;var IT=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=xT(this,e,arguments)).contentView=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RT(t,e)}(e,t),r=e,n=[{key:"init",value:function(){var t=this,e=this.editor,r=e.locale.t;e.ui.componentFactory.add("accessibilityHelp",(function(e){var n=new bA(e);return n.set({label:r("Accessibility help"),tooltip:!0,withText:!1,keystroke:"Alt+0",icon:PT}),n.on("execute",(function(){return t._showDialog()})),n})),e.keystrokes.set("Alt+0",(function(e,r){t._showDialog(),r()})),this._setupRootLabels()}},{key:"_setupRootLabels",value:function(){var t=this.editor,e=t.editing.view,r=t.t;function n(t,e){var n=e.getAttribute("aria-label"),o="".concat(n,". ").concat(r("Press %0 for help.",[Wo("Alt+0")]));t.setAttribute("aria-label",o,e)}t.ui.on("ready",(function(){e.change((function(t){var r,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ET(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ET(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e.document.roots);try{for(o.s();!(r=o.n()).done;)n(t,r.value)}catch(t){o.e(t)}finally{o.f()}})),t.on("addRoot",(function(r,o){var i=t.editing.view.document.getRoot(o.rootName);e.change((function(t){return n(t,i)}))}),{priority:"low"})}))}},{key:"_showDialog",value:function(){var t=this.editor,e=t.plugins.get("Dialog"),r=t.locale.t;this.contentView||(this.contentView=new _T(t.locale,t.accessibility.keystrokeInfos)),e.show({id:"accessibilityHelp",className:"ck-accessibility-help-dialog",title:r("Accessibility help"),icon:PT,hasCloseButton:!0,content:this.contentView})}}],o=[{key:"requires",get:function(){return[MR]}},{key:"pluginName",get:function(){return"AccessibilityHelp"}}],n&&TT(r.prototype,n),o&&TT(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function BT(t){return BT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BT(t)}function FT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MT(n.key),n)}}function MT(t){var e=function(t,e){if("object"!=BT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=BT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==BT(e)?e:e+""}function LT(t,e,r){return e=zT(e),function(t,e){if(e&&("object"===BT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,NT()?Reflect.construct(e,r||[],zT(t).constructor):e.apply(t,r))}function NT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(NT=function(){return!!t})()}function VT(){return VT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},VT.apply(this,arguments)}function zT(t){return zT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zT(t)}function $T(t,e){return $T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$T(t,e)}var qT=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=LT(this,e,[n])).locale=t,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$T(t,e)}(e,t),r=e,(n=[{key:"bodyCollectionContainer",get:function(){return this._bodyCollectionContainer}},{key:"attachToDom",value:function(){this._bodyCollectionContainer=new EE({tag:"div",attributes:{class:["ck","ck-reset_all","ck-body","ck-rounded-corners"],dir:this.locale.uiLanguageDirection},children:this}).render();var t=document.querySelector(".ck-body-wrapper");t||(t=Ht(document,"div",{class:"ck-body-wrapper"}),document.body.appendChild(t)),t.appendChild(this._bodyCollectionContainer)}},{key:"detachFromDom",value:function(){VT(zT(e.prototype),"destroy",this).call(this),this._bodyCollectionContainer&&this._bodyCollectionContainer.remove();var t=document.querySelector(".ck-body-wrapper");t&&0==t.childElementCount&&t.remove()}}])&&FT(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(lE),UT=r(6912);function WT(t){return WT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WT(t)}function GT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KT(n.key),n)}}function KT(t){var e=function(t,e){if("object"!=WT(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=WT(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==WT(e)?e:e+""}function HT(t,e,r){return e=ZT(e),function(t,e){if(e&&("object"===WT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,JT()?Reflect.construct(e,r||[],ZT(t).constructor):e.apply(t,r))}function JT(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(JT=function(){return!!t})()}function YT(){return YT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},YT.apply(this,arguments)}function ZT(t){return ZT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZT(t)}function XT(t,e){return XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XT(t,e)}Da()(UT.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),UT.A.locals;var QT=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(t=HT(this,e)).bindTemplate;return t.set("content",""),t.set("viewBox","0 0 20 20"),t.set("fillColor",""),t.set("isColorInherited",!0),t.set("isVisible",!0),t.setTemplate({tag:"svg",ns:"http://www.w3.org/2000/svg",attributes:{class:["ck","ck-icon",r.if("isVisible","ck-hidden",(function(t){return!t})),"ck-reset_all-excluded",r.if("isColorInherited","ck-icon_inherit-color")],viewBox:r.to("viewBox")}}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;YT(ZT(e.prototype),"render",this).call(this),this._updateXMLContent(),this._colorFillPaths(),this.on("change:content",(function(){t._updateXMLContent(),t._colorFillPaths()})),this.on("change:fillColor",(function(){t._colorFillPaths()}))}},{key:"_updateXMLContent",value:function(){if(this.content){var t=(new DOMParser).parseFromString(this.content.trim(),"image/svg+xml").querySelector("svg"),r=t.getAttribute("viewBox");r&&(this.viewBox=r);for(var n=0,o=Array.from(t.attributes);n<o.length;n++){var i=o[n],a=i.name,c=i.value;e.presentationalAttributeNames.includes(a)&&this.element.setAttribute(a,c)}for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(;t.childNodes.length>0;)this.element.appendChild(t.childNodes[0])}}},{key:"_colorFillPaths",value:function(){var t=this;this.fillColor&&this.element.querySelectorAll(".ck-icon__fill").forEach((function(e){e.style.fill=t.fillColor}))}}])&&GT(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);QT.presentationalAttributeNames=["alignment-baseline","baseline-shift","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-rendering","cursor","direction","display","dominant-baseline","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","mask","opacity","overflow","paint-order","pointer-events","shape-rendering","stop-color","stop-opacity","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-overflow","text-rendering","transform","unicode-bidi","vector-effect","visibility","white-space","word-spacing","writing-mode"];const tA=QT;function eA(t){return eA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eA(t)}function rA(t,e,r){return e=oA(e),function(t,e){if(e&&("object"===eA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nA()?Reflect.construct(e,r||[],oA(t).constructor):e.apply(t,r))}function nA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nA=function(){return!!t})()}function oA(t){return oA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oA(t)}function iA(t,e){return iA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iA(t,e)}var aA=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=rA(this,e)).set({style:void 0,text:void 0,id:void 0});var r=t.bindTemplate;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__label"],style:r.to("style"),id:r.to("id")},children:[{text:r.to("text")}]}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iA(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT),cA=r(5810);function uA(t){return uA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uA(t)}function sA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lA(n.key),n)}}function lA(t){var e=function(t,e){if("object"!=uA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uA(e)?e:e+""}function fA(t,e,r){return e=hA(e),function(t,e){if(e&&("object"===uA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pA()?Reflect.construct(e,r||[],hA(t).constructor):e.apply(t,r))}function pA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pA=function(){return!!t})()}function dA(){return dA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},dA.apply(this,arguments)}function hA(t){return hA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hA(t)}function yA(t,e){return yA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yA(t,e)}Da()(cA.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),cA.A.locals;var bA=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new aA;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=fA(this,e,[t]))._focusDelayed=null;var o=r.bindTemplate,a=v();r.set("ariaLabel",void 0),r.set("ariaLabelledBy","ck-editor__aria-label_".concat(a)),r.set("class",void 0),r.set("labelStyle",void 0),r.set("icon",void 0),r.set("isEnabled",!0),r.set("isOn",!1),r.set("isVisible",!0),r.set("isToggleable",!1),r.set("keystroke",void 0),r.set("label",void 0),r.set("role",void 0),r.set("tabindex",-1),r.set("tooltip",!1),r.set("tooltipPosition","s"),r.set("type","button"),r.set("withText",!1),r.set("withKeystroke",!1),r.children=r.createCollection(),r.labelView=r._setupLabelView(n),r.iconView=new tA,r.iconView.extendTemplate({attributes:{class:"ck-button__icon"}}),r.keystrokeView=r._createKeystrokeView(),r.bind("_tooltipString").to(r,"tooltip",r,"label",r,"keystroke",r._getTooltipString.bind(r));var c={tag:"button",attributes:{class:["ck","ck-button",o.to("class"),o.if("isEnabled","ck-disabled",(function(t){return!t})),o.if("isVisible","ck-hidden",(function(t){return!t})),o.to("isOn",(function(t){return t?"ck-on":"ck-off"})),o.if("withText","ck-button_with-text"),o.if("withKeystroke","ck-button_with-keystroke")],role:o.to("role"),type:o.to("type",(function(t){return t||"button"})),tabindex:o.to("tabindex"),"aria-label":o.to("ariaLabel"),"aria-labelledby":o.to("ariaLabelledBy"),"aria-disabled":o.if("isEnabled",!0,(function(t){return!t})),"aria-pressed":o.to("isOn",(function(t){return!!r.isToggleable&&String(!!t)})),"data-cke-tooltip-text":o.to("_tooltipString"),"data-cke-tooltip-position":o.to("tooltipPosition")},children:r.children,on:{click:o.to((function(t){r.isEnabled?r.fire("execute"):t.preventDefault()}))}};return i.isSafari&&(r._focusDelayed||(r._focusDelayed=Ni((function(){return r.focus()}),0)),c.on.mousedown=o.to((function(){r._focusDelayed()})),c.on.mouseup=o.to((function(){r._focusDelayed.cancel()}))),r.setTemplate(c),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yA(t,e)}(e,t),r=e,n=[{key:"render",value:function(){dA(hA(e.prototype),"render",this).call(this),this.icon&&(this.iconView.bind("content").to(this,"icon"),this.children.add(this.iconView)),this.children.add(this.labelView),this.withKeystroke&&this.keystroke&&this.children.add(this.keystrokeView)}},{key:"focus",value:function(){this.element.focus()}},{key:"destroy",value:function(){this._focusDelayed&&this._focusDelayed.cancel(),dA(hA(e.prototype),"destroy",this).call(this)}},{key:"_setupLabelView",value:function(t){return t.bind("text","style","id").to(this,"label","labelStyle","ariaLabelledBy"),t}},{key:"_createKeystrokeView",value:function(){var t=new oT;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__keystroke"]},children:[{text:this.bindTemplate.to("keystroke",(function(t){return Wo(t)}))}]}),t}},{key:"_getTooltipString",value:function(t,e,r){return t?"string"==typeof t?t:(r&&(r=Wo(r)),t instanceof Function?t(e,r):"".concat(e).concat(r?" (".concat(r,")"):"")):""}}],n&&sA(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),vA=r(3986);function mA(t){return mA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mA(t)}function gA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wA(n.key),n)}}function wA(t){var e=function(t,e){if("object"!=mA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mA(e)?e:e+""}function kA(t,e,r){return e=PA(e),function(t,e){if(e&&("object"===mA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_A()?Reflect.construct(e,r||[],PA(t).constructor):e.apply(t,r))}function _A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_A=function(){return!!t})()}function OA(){return OA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},OA.apply(this,arguments)}function PA(t){return PA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},PA(t)}function SA(t,e){return SA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},SA(t,e)}Da()(vA.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),vA.A.locals;var jA=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=kA(this,e,[t])).isToggleable=!0,r.toggleSwitchView=r._createToggleView(),r.extendTemplate({attributes:{class:"ck-switchbutton"}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SA(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){OA(PA(e.prototype),"render",this).call(this),this.children.add(this.toggleSwitchView)}},{key:"_createToggleView",value:function(){var t=new oT;return t.setTemplate({tag:"span",attributes:{class:["ck","ck-button__toggle"]},children:[{tag:"span",attributes:{class:["ck","ck-button__toggle__inner"]}}]}),t}}])&&gA(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(bA),EA=r(3476);Da()(EA.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),EA.A.locals;var TA=r(4488);Da()(TA.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),TA.A.locals,r(8156),r(734);var AA=r(7883);function xA(t){return xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xA(t)}function CA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DA(n.key),n)}}function DA(t){var e=function(t,e){if("object"!=xA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xA(e)?e:e+""}function RA(t,e,r){return e=BA(e),function(t,e){if(e&&("object"===xA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IA()?Reflect.construct(e,r||[],BA(t).constructor):e.apply(t,r))}function IA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IA=function(){return!!t})()}function BA(t){return BA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BA(t)}function FA(t,e){return FA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FA(t,e)}Da()(AA.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),AA.A.locals;var MA=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=RA(this,e,[t]);var o="ck-labeled-field-view-".concat(v()),i="ck-labeled-field-view-status-".concat(v());n.fieldView=r(n,o,i),n.set("label",void 0),n.set("isEnabled",!0),n.set("isEmpty",!0),n.set("isFocused",!1),n.set("errorText",null),n.set("infoText",null),n.set("class",void 0),n.set("placeholder",void 0),n.labelView=n._createLabelView(o),n.statusView=n._createStatusView(i),n.fieldWrapperChildren=n.createCollection([n.fieldView,n.labelView]),n.bind("_statusText").to(n,"errorText",n,"infoText",(function(t,e){return t||e}));var a=n.bindTemplate;return n.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view",a.to("class"),a.if("isEnabled","ck-disabled",(function(t){return!t})),a.if("isEmpty","ck-labeled-field-view_empty"),a.if("isFocused","ck-labeled-field-view_focused"),a.if("placeholder","ck-labeled-field-view_placeholder"),a.if("errorText","ck-error")]},children:[{tag:"div",attributes:{class:["ck","ck-labeled-field-view__input-wrapper"]},children:n.fieldWrapperChildren},n.statusView]}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FA(t,e)}(e,t),r=e,(n=[{key:"_createLabelView",value:function(t){var e=new fT(this.locale);return e.for=t,e.bind("text").to(this,"label"),e}},{key:"_createStatusView",value:function(t){var e=new oT(this.locale),r=this.bindTemplate;return e.setTemplate({tag:"div",attributes:{class:["ck","ck-labeled-field-view__status",r.if("errorText","ck-labeled-field-view__status_error"),r.if("_statusText","ck-hidden",(function(t){return!t}))],id:t,role:r.if("errorText","alert")},children:[{text:r.to("_statusText")}]}),e}},{key:"focus",value:function(t){this.fieldView.focus(t)}}])&&CA(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function LA(t){return LA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LA(t)}function NA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VA(n.key),n)}}function VA(t){var e=function(t,e){if("object"!=LA(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=LA(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==LA(e)?e:e+""}function zA(t,e,r){return e=UA(e),function(t,e){if(e&&("object"===LA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$A()?Reflect.construct(e,r||[],UA(t).constructor):e.apply(t,r))}function $A(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($A=function(){return!!t})()}function qA(){return qA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=UA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},qA.apply(this,arguments)}function UA(t){return UA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},UA(t)}function WA(t,e){return WA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},WA(t,e)}var GA=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=zA(this,e,[t])).set("value",void 0),r.set("id",void 0),r.set("placeholder",void 0),r.set("isReadOnly",!1),r.set("hasError",!1),r.set("ariaDescribedById",void 0),r.focusTracker=new Di,r.bind("isFocused").to(r.focusTracker),r.set("isEmpty",!0);var n=r.bindTemplate;return r.setTemplate({tag:"input",attributes:{class:["ck","ck-input",n.if("isFocused","ck-input_focused"),n.if("isEmpty","ck-input-text_empty"),n.if("hasError","ck-error")],id:n.to("id"),placeholder:n.to("placeholder"),readonly:n.to("isReadOnly"),"aria-invalid":n.if("hasError",!0),"aria-describedby":n.to("ariaDescribedById")},on:{input:n.to((function(){for(var t,e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];(t=r).fire.apply(t,["input"].concat(n)),r._updateIsEmpty()})),change:n.to(r._updateIsEmpty.bind(r))}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WA(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;qA(UA(e.prototype),"render",this).call(this),this.focusTracker.add(this.element),this._setDomElementValue(this.value),this._updateIsEmpty(),this.on("change:value",(function(e,r,n){t._setDomElementValue(n),t._updateIsEmpty()}))}},{key:"destroy",value:function(){qA(UA(e.prototype),"destroy",this).call(this),this.focusTracker.destroy()}},{key:"select",value:function(){this.element.select()}},{key:"focus",value:function(){this.element.focus()}},{key:"reset",value:function(){this.value=this.element.value="",this._updateIsEmpty()}},{key:"_updateIsEmpty",value:function(){this.isEmpty=!this.element.value}},{key:"_setDomElementValue",value:function(t){this.element.value=t||0===t?t:""}}])&&NA(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),KA=r(1272);function HA(t){return HA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HA(t)}function JA(t,e,r){return e=ZA(e),function(t,e){if(e&&("object"===HA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YA()?Reflect.construct(e,r||[],ZA(t).constructor):e.apply(t,r))}function YA(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YA=function(){return!!t})()}function ZA(t){return ZA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZA(t)}function XA(t,e){return XA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XA(t,e)}function QA(t){return QA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QA(t)}function tx(t,e,r){return e=rx(e),function(t,e){if(e&&("object"===QA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ex()?Reflect.construct(e,r||[],rx(t).constructor):e.apply(t,r))}function ex(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ex=function(){return!!t})()}function rx(t){return rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rx(t)}function nx(t,e){return nx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nx(t,e)}Da()(KA.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),KA.A.locals;var ox=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tx(this,e,[t])).extendTemplate({attributes:{type:"text",class:["ck-input-text"]}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nx(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=JA(this,e,[t])).set("inputMode","text");var n=r.bindTemplate;return r.extendTemplate({attributes:{inputmode:n.to("inputMode")}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XA(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(GA)),ix=r(8118);function ax(t){return ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ax(t)}function cx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ux(n.key),n)}}function ux(t){var e=function(t,e){if("object"!=ax(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ax(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ax(e)?e:e+""}function sx(t,e,r){return e=fx(e),function(t,e){if(e&&("object"===ax(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lx()?Reflect.construct(e,r||[],fx(t).constructor):e.apply(t,r))}function lx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lx=function(){return!!t})()}function fx(t){return fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fx(t)}function px(t,e){return px=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},px(t,e)}Da()(ix.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),ix.A.locals;var dx=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(r=sx(this,e,[t])).bindTemplate;return r.set("isVisible",!1),r.set("position","se"),r.children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-dropdown__panel",n.to("position",(function(t){return"ck-dropdown__panel_".concat(t)})),n.if("isVisible","ck-dropdown__panel-visible")],tabindex:"-1"},children:r.children,on:{selectstart:n.to((function(t){"input"!==t.target.tagName.toLocaleLowerCase()&&t.preventDefault()}))}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&px(t,e)}(e,t),r=e,(n=[{key:"focus",value:function(){if(this.children.length){var t=this.children.first;"function"==typeof t.focus?t.focus():x("ui-dropdown-panel-focus-child-missing-focus",{childView:this.children.first,dropdownPanel:this})}}},{key:"focusLast",value:function(){if(this.children.length){var t=this.children.last;"function"==typeof t.focusLast?t.focusLast():t.focus()}}}])&&cx(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),hx=r(6608);function yx(t){return yx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yx(t)}function bx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vx(n.key),n)}}function vx(t){var e=function(t,e){if("object"!=yx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yx(e)?e:e+""}function mx(t,e,r){return e=kx(e),function(t,e){if(e&&("object"===yx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gx()?Reflect.construct(e,r||[],kx(t).constructor):e.apply(t,r))}function gx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gx=function(){return!!t})()}function wx(){return wx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},wx.apply(this,arguments)}function kx(t){return kx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kx(t)}function _x(t,e){return _x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_x(t,e)}Da()(hx.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),hx.A.locals;var Ox=function(t){function e(t,r,n){var o;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=(o=mx(this,e,[t])).bindTemplate;return o.buttonView=r,o.panelView=n,o.set("isOpen",!1),o.set("isEnabled",!0),o.set("class",void 0),o.set("id",void 0),o.set("panelPosition","auto"),o.panelView.bind("isVisible").to(o,"isOpen"),o.keystrokes=new Fi,o.focusTracker=new Di,o.setTemplate({tag:"div",attributes:{class:["ck","ck-dropdown",i.to("class"),i.if("isEnabled","ck-disabled",(function(t){return!t}))],id:i.to("id"),"aria-describedby":i.to("ariaDescribedById")},children:[r,n]}),r.extendTemplate({attributes:{class:["ck-dropdown__button"],"data-cke-tooltip-disabled":i.to("isOpen")}}),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_x(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;wx(kx(e.prototype),"render",this).call(this),this.focusTracker.add(this.buttonView.element),this.focusTracker.add(this.panelView.element),this.listenTo(this.buttonView,"open",(function(){t.isOpen=!t.isOpen})),this.on("change:isOpen",(function(r,n,o){if(o)if("auto"===t.panelPosition){var i=e._getOptimalPosition({element:t.panelView.element,target:t.buttonView.element,fitInViewport:!0,positions:t._panelPositions});t.panelView.position=i?i.name:t._panelPositions[0].name}else t.panelView.position=t.panelPosition})),this.keystrokes.listenTo(this.element);var r=function(e,r){t.isOpen&&(t.isOpen=!1,r())};this.keystrokes.set("arrowdown",(function(e,r){t.buttonView.isEnabled&&!t.isOpen&&(t.isOpen=!0,r())})),this.keystrokes.set("arrowright",(function(e,r){t.isOpen&&r()})),this.keystrokes.set("arrowleft",r),this.keystrokes.set("esc",r)}},{key:"focus",value:function(){this.buttonView.focus()}},{key:"_panelPositions",get:function(){var t=e.defaultPanelPositions,r=t.south,n=t.north,o=t.southEast,i=t.southWest,a=t.northEast,c=t.northWest,u=t.southMiddleEast,s=t.southMiddleWest,l=t.northMiddleEast,f=t.northMiddleWest;return"rtl"!==this.locale.uiLanguageDirection?[o,i,u,s,r,a,c,l,f,n]:[i,o,s,u,r,c,a,f,l,n]}}])&&bx(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);Ox.defaultPanelPositions={south:function(t,e){return{top:t.bottom,left:t.left-(e.width-t.width)/2,name:"s"}},southEast:function(t){return{top:t.bottom,left:t.left,name:"se"}},southWest:function(t,e){return{top:t.bottom,left:t.left-e.width+t.width,name:"sw"}},southMiddleEast:function(t,e){return{top:t.bottom,left:t.left-(e.width-t.width)/4,name:"sme"}},southMiddleWest:function(t,e){return{top:t.bottom,left:t.left-3*(e.width-t.width)/4,name:"smw"}},north:function(t,e){return{top:t.top-e.height,left:t.left-(e.width-t.width)/2,name:"n"}},northEast:function(t,e){return{top:t.top-e.height,left:t.left,name:"ne"}},northWest:function(t,e){return{top:t.top-e.height,left:t.left-e.width+t.width,name:"nw"}},northMiddleEast:function(t,e){return{top:t.top-e.height,left:t.left-(e.width-t.width)/4,name:"nme"}},northMiddleWest:function(t,e){return{top:t.top-e.height,left:t.left-3*(e.width-t.width)/4,name:"nmw"}}},Ox._getOptimalPosition=Oo;const Px=Ox,Sx='<svg viewBox="0 0 10 10" xmlns="http://www.w3.org/2000/svg"><path d="M.941 4.523a.75.75 0 1 1 1.06-1.06l3.006 3.005 3.005-3.005a.75.75 0 1 1 1.06 1.06l-3.549 3.55a.75.75 0 0 1-1.168-.136L.941 4.523z"/></svg>';function jx(t){return jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(t)}function Ex(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Tx(n.key),n)}}function Tx(t){var e=function(t,e){if("object"!=jx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=jx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==jx(e)?e:e+""}function Ax(t,e,r){return e=Dx(e),function(t,e){if(e&&("object"===jx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,xx()?Reflect.construct(e,r||[],Dx(t).constructor):e.apply(t,r))}function xx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(xx=function(){return!!t})()}function Cx(){return Cx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Cx.apply(this,arguments)}function Dx(t){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Dx(t)}function Rx(t,e){return Rx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Rx(t,e)}var Ix=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ax(this,e,[t])).arrowView=r._createArrowView(),r.extendTemplate({attributes:{"aria-haspopup":!0,"aria-expanded":r.bindTemplate.to("isOn",(function(t){return String(t)}))}}),r.delegate("execute").to(r,"open"),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rx(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){Cx(Dx(e.prototype),"render",this).call(this),this.children.add(this.arrowView)}},{key:"_createArrowView",value:function(){var t=new tA;return t.content=Sx,t.extendTemplate({attributes:{class:"ck-dropdown__arrow"}}),t}}])&&Ex(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(bA);function Bx(t){return Bx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bx(t)}function Fx(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Lx(n.key),n)}}function Lx(t){var e=function(t,e){if("object"!=Bx(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Bx(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Bx(e)?e:e+""}function Nx(t,e,r){return e=zx(e),function(t,e){if(e&&("object"===Bx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Vx()?Reflect.construct(e,r||[],zx(t).constructor):e.apply(t,r))}function Vx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Vx=function(){return!!t})()}function zx(t){return zx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},zx(t)}function $x(t,e){return $x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},$x(t,e)}var qx=function(t){function e(t){var r;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Nx(this,e)).focusables=t.focusables,r.focusTracker=t.focusTracker,r.keystrokeHandler=t.keystrokeHandler,r.actions=t.actions,t.actions&&t.keystrokeHandler){var n=function(e){var n=t.actions[e];"string"==typeof n&&(n=[n]);var o,i=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Fx(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fx(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(n);try{for(i.s();!(o=i.n()).done;){var a=o.value;t.keystrokeHandler.set(a,(function(t,n){r[e](),n()}))}}catch(t){i.e(t)}finally{i.f()}};for(var o in t.actions)n(o)}return r.on("forwardCycle",(function(){return r.focusFirst()}),{priority:"low"}),r.on("backwardCycle",(function(){return r.focusLast()}),{priority:"low"}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$x(t,e)}(e,t),r=e,(n=[{key:"first",get:function(){return this.focusables.find(Ux)||null}},{key:"last",get:function(){return this.focusables.filter(Ux).slice(-1)[0]||null}},{key:"next",get:function(){return this._getDomFocusableItem(1)}},{key:"previous",get:function(){return this._getDomFocusableItem(-1)}},{key:"current",get:function(){var t=this,e=null;return null===this.focusTracker.focusedElement?null:(this.focusables.find((function(r,n){var o=r.element===t.focusTracker.focusedElement;return o&&(e=n),o})),e)}},{key:"focusFirst",value:function(){this._focus(this.first,1)}},{key:"focusLast",value:function(){this._focus(this.last,-1)}},{key:"focusNext",value:function(){var t=this.next;t&&this.focusables.getIndex(t)===this.current||t===this.first?this.fire("forwardCycle"):this._focus(t,1)}},{key:"focusPrevious",value:function(){var t=this.previous;t&&this.focusables.getIndex(t)===this.current||t===this.last?this.fire("backwardCycle"):this._focus(t,-1)}},{key:"_focus",value:function(t,e){t&&this.focusTracker.focusedElement!==t.element&&t.focus(e)}},{key:"_getDomFocusableItem",value:function(t){var e=this.focusables.length;if(!e)return null;var r=this.current;if(null===r)return this[1===t?"first":"last"];var n=this.focusables.get(r),o=(r+e+t)%e;do{var i=this.focusables.get(o);if(Ux(i)){n=i;break}o=(o+e+t)%e}while(o!==r);return n}}])&&Mx(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(H());function Ux(t){return Wx(t)&&mo(t.element)}function Wx(t){return!(!("focus"in t)||"function"!=typeof t.focus)}function Gx(t){return Gx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gx(t)}function Kx(t,e,r){return e=Jx(e),function(t,e){if(e&&("object"===Gx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Hx()?Reflect.construct(e,r||[],Jx(t).constructor):e.apply(t,r))}function Hx(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Hx=function(){return!!t})()}function Jx(t){return Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jx(t)}function Yx(t,e){return Yx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yx(t,e)}var Zx=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Kx(this,e,[t])).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__separator"]}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yx(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT);function Xx(t){return Xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(t)}function Qx(t,e,r){return e=eC(e),function(t,e){if(e&&("object"===Xx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tC()?Reflect.construct(e,r||[],eC(t).constructor):e.apply(t,r))}function tC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tC=function(){return!!t})()}function eC(t){return eC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},eC(t)}function rC(t,e){return rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},rC(t,e)}var nC=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Qx(this,e,[t])).setTemplate({tag:"span",attributes:{class:["ck","ck-toolbar__line-break"]}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rC(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT);function oC(t){return oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oC(t)}function iC(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function aC(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?iC(Object(r),!0).forEach((function(e){var n,o,i,a;n=t,o=e,i=r[e],a=function(t,e){if("object"!=oC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=oC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o),(o="symbol"==oC(a)?a:a+"")in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):iC(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function cC(t){if(Array.isArray(t))return{items:t,removeItems:[]};var e={items:[],removeItems:[]};return t?aC(aC({},e),t):e}var uC=r(6808);function sC(t){return sC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sC(t)}function lC(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return fC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fC(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function fC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pC(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yC(n.key),n)}}function hC(t,e,r){return e&&dC(t.prototype,e),r&&dC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yC(t){var e=function(t,e){if("object"!=sC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sC(e)?e:e+""}function bC(t,e,r){return e=gC(e),function(t,e){if(e&&("object"===sC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vC()?Reflect.construct(e,r||[],gC(t).constructor):e.apply(t,r))}function vC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vC=function(){return!!t})()}function mC(){return mC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},mC.apply(this,arguments)}function gC(t){return gC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gC(t)}function wC(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kC(t,e)}function kC(t,e){return kC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kC(t,e)}Da()(uC.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),uC.A.locals;var _C=Zj,OC={alignLeft:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M2 3.75c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 8c0 .414.336.75.75.75h14.5a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0 4c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75zm0-8c0 .414.336.75.75.75h9.929a.75.75 0 1 0 0-1.5H2.75a.75.75 0 0 0-.75.75z"/></svg>',bold:Jj,importExport:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M19 4.5 14 0H3v12.673l.868-1.041c.185-.222.4-.402.632-.54V1.5h8v5h5v7.626a2.24 2.24 0 0 1 1.5.822V4.5ZM14 5V2l3.3 3H14Zm-3.692 12.5c.062.105.133.206.213.303L11.52 19H8v-.876a2.243 2.243 0 0 0 1.82-.624h.488Zm7.518-.657a.75.75 0 0 0-1.152-.96L15.5 17.29V12H14v5.29l-1.174-1.408a.75.75 0 0 0-1.152.96l2.346 2.816a.95.95 0 0 0 1.46 0l2.346-2.815Zm-15.056-.38a.75.75 0 0 1-.096-1.056l2.346-2.815a.95.95 0 0 1 1.46 0l2.346 2.815a.75.75 0 1 1-1.152.96L6.5 14.96V20H5v-5.04l-1.174 1.408a.75.75 0 0 1-1.056.096Z"/></svg>',paragraph:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10.5 5.5H7v5h3.5a2.5 2.5 0 1 0 0-5zM5 3h6.5v.025a5 5 0 0 1 0 9.95V13H7v4a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1z"/></svg>',plus:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M10 2a1 1 0 0 0-1 1v6H3a1 1 0 1 0 0 2h6v6a1 1 0 1 0 2 0v-6h6a1 1 0 1 0 0-2h-6V3a1 1 0 0 0-1-1Z"/></svg>',text:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M9.816 11.5 7.038 4.785 4.261 11.5h5.555Zm.62 1.5H3.641l-1.666 4.028H.312l5.789-14h1.875l5.789 14h-1.663L10.436 13Z"/><path d="m12.09 17-.534-1.292.848-1.971.545 1.319L12.113 17h-.023Zm1.142-5.187.545 1.319L15.5 9.13l1.858 4.316h-3.45l.398.965h3.467L18.887 17H20l-3.873-9h-1.254l-1.641 3.813Z"/></svg>',threeVerticalDots:Zj,pilcrow:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M6.999 2H15a1 1 0 0 1 0 2h-1.004v13a1 1 0 1 1-2 0V4H8.999v13a1 1 0 1 1-2 0v-7A4 4 0 0 1 3 6a4 4 0 0 1 3.999-4z"/></svg>',dragIndicator:'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M5 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 3.25a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 10a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M5 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/><path d="M12 16.75a1.5 1.5 0 1 0 3 0 1.5 1.5 0 1 0-3 0"/></svg>'},PC=function(t){function e(t,r){var n;pC(this,e);var o=(n=bC(this,e,[t])).bindTemplate,i=n.t;n.options=r||{},n.set("ariaLabel",i("Editor toolbar")),n.set("maxWidth","auto"),n.items=n.createCollection(),n.focusTracker=new Di,n.keystrokes=new Fi,n.set("class",void 0),n.set("isCompact",!1),n.itemsView=new SC(t),n.children=n.createCollection(),n.children.add(n.itemsView),n.focusables=n.createCollection();var a="rtl"===t.uiLanguageDirection;n._focusCycler=new qx({focusables:n.focusables,focusTracker:n.focusTracker,keystrokeHandler:n.keystrokes,actions:{focusPrevious:[a?"arrowright":"arrowleft","arrowup"],focusNext:[a?"arrowleft":"arrowright","arrowdown"]}});var c,u=["ck","ck-toolbar",o.to("class"),o.if("isCompact","ck-toolbar_compact")];return n.options.shouldGroupWhenFull&&n.options.isFloating&&u.push("ck-toolbar_floating"),n.setTemplate({tag:"div",attributes:{class:u,role:"toolbar","aria-label":o.to("ariaLabel"),style:{maxWidth:o.to("maxWidth")},tabindex:-1},children:n.children,on:{mousedown:(c=n,c.bindTemplate.to((function(t){t.target===c.element&&t.preventDefault()})))}}),n._behavior=n.options.shouldGroupWhenFull?new EC(n):new jC(n),n}return wC(e,t),hC(e,[{key:"render",value:function(){var t=this;mC(gC(e.prototype),"render",this).call(this),this.focusTracker.add(this.element);var r,n=lC(this.items);try{for(n.s();!(r=n.n()).done;){var o=r.value;this.focusTracker.add(o.element)}}catch(t){n.e(t)}finally{n.f()}this.items.on("add",(function(e,r){t.focusTracker.add(r.element)})),this.items.on("remove",(function(e,r){t.focusTracker.remove(r.element)})),this.keystrokes.listenTo(this.element),this._behavior.render(this)}},{key:"destroy",value:function(){return this._behavior.destroy(),this.focusTracker.destroy(),this.keystrokes.destroy(),mC(gC(e.prototype),"destroy",this).call(this)}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"fillFromConfig",value:function(t,e,r){this.items.addMany(this._buildItemsFromConfig(t,e,r))}},{key:"_buildItemsFromConfig",value:function(t,e,r){var n=this,o=cC(t),i=r||o.removeItems;return this._cleanItemsConfiguration(o.items,e,i).map((function(t){return rt(t)?n._createNestedToolbarDropdown(t,e,i):"|"===t?new Zx:"-"===t?new nC:e.create(t)})).filter((function(t){return!!t}))}},{key:"_cleanItemsConfiguration",value:function(t,e,r){var n=this,o=t.filter((function(t,o,i){return"|"===t||-1===r.indexOf(t)&&("-"===t?!n.options.shouldGroupWhenFull||(x("toolbarview-line-break-ignored-when-grouping-items",i),!1):!(!rt(t)&&!e.has(t)&&(x("toolbarview-item-unavailable",{item:t}),1)))}));return this._cleanSeparatorsAndLineBreaks(o)}},{key:"_cleanSeparatorsAndLineBreaks",value:function(t){var e=function(t){return"-"!==t&&"|"!==t},r=t.length,n=t.findIndex(e);if(-1===n)return[];var o=r-t.slice().reverse().findIndex(e);return t.slice(n,o).filter((function(t,r,n){return!!e(t)||!(r>0&&n[r-1]===t)}))}},{key:"_createNestedToolbarDropdown",value:function(t,e,r){var n=t.label,o=t.icon,i=t.items,a=t.tooltip,c=void 0===a||a,u=t.withText,s=void 0!==u&&u;if(!(i=this._cleanItemsConfiguration(i,e,r)).length)return null;var l=kD(this.locale);return n||x("toolbarview-nested-toolbar-dropdown-missing-label",t),l.class="ck-toolbar__nested-toolbar-dropdown",l.buttonView.set({label:n,tooltip:c,withText:!!s}),!1!==o?l.buttonView.icon=OC[o]||o||_C:l.buttonView.withText=!0,_D(l,(function(){return l.toolbarView._buildItemsFromConfig(i,e,r)})),l}}])}(oT),SC=function(t){function e(t){var r;return pC(this,e),(r=bC(this,e,[t])).children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-toolbar__items"]},children:r.children}),r}return wC(e,t),hC(e)}(oT),jC=function(){return hC((function t(e){pC(this,t);var r=e.bindTemplate;e.set("isVertical",!1),e.itemsView.children.bindTo(e.items).using((function(t){return t})),e.focusables.bindTo(e.items).using((function(t){return Wx(t)?t:null})),e.extendTemplate({attributes:{class:[r.if("isVertical","ck-toolbar_vertical")]}})}),[{key:"render",value:function(){}},{key:"destroy",value:function(){}}])}(),EC=function(){return hC((function t(e){var r=this;pC(this,t),this.resizeObserver=null,this.cachedPadding=null,this.shouldUpdateGroupingOnNextResize=!1,this.view=e,this.viewChildren=e.children,this.viewFocusables=e.focusables,this.viewItemsView=e.itemsView,this.viewFocusTracker=e.focusTracker,this.viewLocale=e.locale,this.ungroupedItems=e.createCollection(),this.groupedItems=e.createCollection(),this.groupedItemsDropdown=this._createGroupedItemsDropdown(),e.itemsView.children.bindTo(this.ungroupedItems).using((function(t){return t})),this.ungroupedItems.on("change",this._updateFocusCyclableItems.bind(this)),e.children.on("change",this._updateFocusCyclableItems.bind(this)),e.items.on("change",(function(t,e){var n,o=e.index,i=Array.from(e.added),a=lC(e.removed);try{for(a.s();!(n=a.n()).done;){var c=n.value;o>=r.ungroupedItems.length?r.groupedItems.remove(c):r.ungroupedItems.remove(c)}}catch(t){a.e(t)}finally{a.f()}for(var u=o;u<o+i.length;u++){var s=i[u-o];u>r.ungroupedItems.length?r.groupedItems.add(s,u-r.ungroupedItems.length):r.ungroupedItems.add(s,u)}r._updateGrouping()})),e.extendTemplate({attributes:{class:["ck-toolbar_grouping"]}})}),[{key:"render",value:function(t){this.viewElement=t.element,this._enableGroupingOnResize(),this._enableGroupingOnMaxWidthChange(t)}},{key:"destroy",value:function(){this.groupedItemsDropdown.destroy(),this.resizeObserver.destroy()}},{key:"_updateGrouping",value:function(){if(this.viewElement.ownerDocument.body.contains(this.viewElement))if(mo(this.viewElement)){for(var t,e=this.groupedItems.length;this._areItemsOverflowing;)this._groupLastItem(),t=!0;if(!t&&this.groupedItems.length){for(;this.groupedItems.length&&!this._areItemsOverflowing;)this._ungroupFirstItem();this._areItemsOverflowing&&this._groupLastItem()}this.groupedItems.length!==e&&this.view.fire("groupedItemsUpdate")}else this.shouldUpdateGroupingOnNextResize=!0}},{key:"_areItemsOverflowing",get:function(){if(!this.ungroupedItems.length)return!1;var t=this.viewElement,e=this.viewLocale.uiLanguageDirection,r=new to(t.lastChild),n=new to(t);if(!this.cachedPadding){var o=qn.window.getComputedStyle(t),i="ltr"===e?"paddingRight":"paddingLeft";this.cachedPadding=Number.parseInt(o[i])}return"ltr"===e?r.right>n.right-this.cachedPadding:r.left<n.left+this.cachedPadding}},{key:"_enableGroupingOnResize",value:function(){var t,e=this;this.resizeObserver=new fo(this.viewElement,(function(r){t&&t===r.contentRect.width&&!e.shouldUpdateGroupingOnNextResize||(e.shouldUpdateGroupingOnNextResize=!1,e._updateGrouping(),t=r.contentRect.width)})),this._updateGrouping()}},{key:"_enableGroupingOnMaxWidthChange",value:function(t){var e=this;t.on("change:maxWidth",(function(){e._updateGrouping()}))}},{key:"_groupLastItem",value:function(){this.groupedItems.length||(this.viewChildren.add(new Zx),this.viewChildren.add(this.groupedItemsDropdown),this.viewFocusTracker.add(this.groupedItemsDropdown.element)),this.groupedItems.add(this.ungroupedItems.remove(this.ungroupedItems.last),0)}},{key:"_ungroupFirstItem",value:function(){this.ungroupedItems.add(this.groupedItems.remove(this.groupedItems.first)),this.groupedItems.length||(this.viewChildren.remove(this.groupedItemsDropdown),this.viewChildren.remove(this.viewChildren.last),this.viewFocusTracker.remove(this.groupedItemsDropdown.element))}},{key:"_createGroupedItemsDropdown",value:function(){var t=this.viewLocale,e=t.t,r=kD(t);return r.class="ck-toolbar__grouped-dropdown",r.panelPosition="ltr"===t.uiLanguageDirection?"sw":"se",_D(r,this.groupedItems),r.buttonView.set({label:e("Show more items"),tooltip:!0,tooltipPosition:"rtl"===t.uiLanguageDirection?"se":"sw",icon:_C}),r}},{key:"_updateFocusCyclableItems",value:function(){var t=this;this.viewFocusables.clear(),this.ungroupedItems.map((function(e){Wx(e)&&t.viewFocusables.add(e)})),this.groupedItems.length&&this.viewFocusables.add(this.groupedItemsDropdown)}}])}();function TC(t){return TC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},TC(t)}function AC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xC(n.key),n)}}function xC(t){var e=function(t,e){if("object"!=TC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=TC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==TC(e)?e:e+""}function CC(t,e,r){return e=RC(e),function(t,e){if(e&&("object"===TC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,DC()?Reflect.construct(e,r||[],RC(t).constructor):e.apply(t,r))}function DC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(DC=function(){return!!t})()}function RC(t){return RC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},RC(t)}function IC(t,e){return IC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},IC(t,e)}var BC=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(r=CC(this,e,[t])).bindTemplate;return r.set("isVisible",!0),r.children=r.createCollection(),r.setTemplate({tag:"li",attributes:{class:["ck","ck-list__item",n.if("isVisible","ck-hidden",(function(t){return!t}))],role:"presentation"},children:r.children}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IC(t,e)}(e,t),r=e,(n=[{key:"focus",value:function(){this.children.first&&this.children.first.focus()}}])&&AC(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function FC(t){return FC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FC(t)}function MC(t,e,r){return e=NC(e),function(t,e){if(e&&("object"===FC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,LC()?Reflect.construct(e,r||[],NC(t).constructor):e.apply(t,r))}function LC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(LC=function(){return!!t})()}function NC(t){return NC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},NC(t)}function VC(t,e){return VC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VC(t,e)}var zC=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=MC(this,e,[t])).setTemplate({tag:"li",attributes:{class:["ck","ck-list__separator"]}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VC(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT);function $C(t){return $C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$C(t)}function qC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UC(n.key),n)}}function UC(t){var e=function(t,e){if("object"!=$C(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$C(e)?e:e+""}function WC(t,e,r){return e=KC(e),function(t,e){if(e&&("object"===$C(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GC()?Reflect.construct(e,r||[],KC(t).constructor):e.apply(t,r))}function GC(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GC=function(){return!!t})()}function KC(t){return KC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KC(t)}function HC(t,e){return HC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},HC(t,e)}var JC=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new fT;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=(r=WC(this,e,[t])).bindTemplate,i=new cD(t);return r.set({label:"",isVisible:!0}),r.labelView=n,r.labelView.bind("text").to(r,"label"),r.children=r.createCollection(),r.children.addMany([r.labelView,i]),i.set({role:"group",ariaLabelledBy:n.id}),i.focusTracker.destroy(),i.keystrokes.destroy(),r.items=i.items,r.setTemplate({tag:"li",attributes:{role:"presentation",class:["ck","ck-list__group",o.if("isVisible","ck-hidden",(function(t){return!t}))]},children:r.children}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HC(t,e)}(e,t),r=e,(n=[{key:"focus",value:function(){if(this.items){var t=this.items.find((function(t){return!(t instanceof zC)}));t&&t.focus()}}}])&&qC(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),YC=r(9118);function ZC(t){return ZC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ZC(t)}function XC(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return QC(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?QC(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function QC(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function tD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eD(n.key),n)}}function eD(t){var e=function(t,e){if("object"!=ZC(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ZC(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ZC(e)?e:e+""}function rD(t,e,r){return e=iD(e),function(t,e){if(e&&("object"===ZC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nD()?Reflect.construct(e,r||[],iD(t).constructor):e.apply(t,r))}function nD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nD=function(){return!!t})()}function oD(){return oD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},oD.apply(this,arguments)}function iD(t){return iD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iD(t)}function aD(t,e){return aD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aD(t,e)}Da()(YC.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),YC.A.locals;var cD=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rD(this,e,[t]))._listItemGroupToChangeListeners=new WeakMap;var n=r.bindTemplate;return r.focusables=new lE,r.items=r.createCollection(),r.focusTracker=new Di,r.keystrokes=new Fi,r._focusCycler=new qx({focusables:r.focusables,focusTracker:r.focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"arrowup",focusNext:"arrowdown"}}),r.set("ariaLabel",void 0),r.set("ariaLabelledBy",void 0),r.set("role",void 0),r.setTemplate({tag:"ul",attributes:{class:["ck","ck-reset","ck-list"],role:n.to("role"),"aria-label":n.to("ariaLabel"),"aria-labelledby":n.to("ariaLabelledBy")},children:r.items}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aD(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;oD(iD(e.prototype),"render",this).call(this);var r,n=XC(this.items);try{for(n.s();!(r=n.n()).done;){var o=r.value;o instanceof JC?this._registerFocusableItemsGroup(o):o instanceof BC&&this._registerFocusableListItem(o)}}catch(t){n.e(t)}finally{n.f()}this.items.on("change",(function(e,r){var n,o=XC(r.removed);try{for(o.s();!(n=o.n()).done;){var i=n.value;i instanceof JC?t._deregisterFocusableItemsGroup(i):i instanceof BC&&t._deregisterFocusableListItem(i)}}catch(t){o.e(t)}finally{o.f()}var a,c=XC(Array.from(r.added).reverse());try{for(c.s();!(a=c.n()).done;){var u=a.value;u instanceof JC?t._registerFocusableItemsGroup(u,r.index):t._registerFocusableListItem(u,r.index)}}catch(t){c.e(t)}finally{c.f()}})),this.keystrokes.listenTo(this.element)}},{key:"destroy",value:function(){oD(iD(e.prototype),"destroy",this).call(this),this.focusTracker.destroy(),this.keystrokes.destroy()}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusFirst",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}},{key:"_registerFocusableListItem",value:function(t,e){this.focusTracker.add(t.element),this.focusables.add(t,e)}},{key:"_deregisterFocusableListItem",value:function(t){this.focusTracker.remove(t.element),this.focusables.remove(t)}},{key:"_getOnGroupItemsChangeCallback",value:function(t){var e=this;return function(r,n){var o,i=XC(n.removed);try{for(i.s();!(o=i.n()).done;){var a=o.value;e._deregisterFocusableListItem(a)}}catch(t){i.e(t)}finally{i.f()}var c,u=XC(Array.from(n.added).reverse());try{for(u.s();!(c=u.n()).done;){var s=c.value;e._registerFocusableListItem(s,e.items.getIndex(t)+n.index)}}catch(t){u.e(t)}finally{u.f()}}}},{key:"_registerFocusableItemsGroup",value:function(t,e){var r=this;Array.from(t.items).forEach((function(t,n){var o=void 0!==e?e+n:void 0;r._registerFocusableListItem(t,o)}));var n=this._getOnGroupItemsChangeCallback(t);this._listItemGroupToChangeListeners.set(t,n),t.items.on("change",n)}},{key:"_deregisterFocusableItemsGroup",value:function(t){var e,r=XC(t.items);try{for(r.s();!(e=r.n()).done;){var n=e.value;this._deregisterFocusableListItem(n)}}catch(t){r.e(t)}finally{r.f()}t.items.off("change",this._listItemGroupToChangeListeners.get(t)),this._listItemGroupToChangeListeners.delete(t)}}])&&tD(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),uD=r(4515);function sD(t){return sD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sD(t)}function lD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,fD(n.key),n)}}function fD(t){var e=function(t,e){if("object"!=sD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sD(e)?e:e+""}function pD(t,e,r){return e=yD(e),function(t,e){if(e&&("object"===sD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,dD()?Reflect.construct(e,r||[],yD(t).constructor):e.apply(t,r))}function dD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(dD=function(){return!!t})()}function hD(){return hD="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yD(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},hD.apply(this,arguments)}function yD(t){return yD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yD(t)}function bD(t,e){return bD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bD(t,e)}Da()(uD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),uD.A.locals;var vD=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=(n=pD(this,e,[t])).bindTemplate;return n.set("class",void 0),n.set("labelStyle",void 0),n.set("icon",void 0),n.set("isEnabled",!0),n.set("isOn",!1),n.set("isToggleable",!1),n.set("isVisible",!0),n.set("keystroke",void 0),n.set("withKeystroke",!1),n.set("label",void 0),n.set("tabindex",-1),n.set("tooltip",!1),n.set("tooltipPosition","s"),n.set("type","button"),n.set("withText",!1),n.children=n.createCollection(),n.actionView=n._createActionView(r),n.arrowView=n._createArrowView(),n.keystrokes=new Fi,n.focusTracker=new Di,n.setTemplate({tag:"div",attributes:{class:["ck","ck-splitbutton",o.to("class"),o.if("isVisible","ck-hidden",(function(t){return!t})),n.arrowView.bindTemplate.if("isOn","ck-splitbutton_open")]},children:n.children}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bD(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;hD(yD(e.prototype),"render",this).call(this),this.children.add(this.actionView),this.children.add(this.arrowView),this.focusTracker.add(this.actionView.element),this.focusTracker.add(this.arrowView.element),this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",(function(e,r){t.focusTracker.focusedElement===t.actionView.element&&(t.arrowView.focus(),r())})),this.keystrokes.set("arrowleft",(function(e,r){t.focusTracker.focusedElement===t.arrowView.element&&(t.actionView.focus(),r())}))}},{key:"destroy",value:function(){hD(yD(e.prototype),"destroy",this).call(this),this.focusTracker.destroy(),this.keystrokes.destroy()}},{key:"focus",value:function(){this.actionView.focus()}},{key:"_createActionView",value:function(t){var e=t||new bA;return t||e.bind("icon","isEnabled","isOn","isToggleable","keystroke","label","tabindex","tooltip","tooltipPosition","type","withText").to(this),e.extendTemplate({attributes:{class:"ck-splitbutton__action"}}),e.delegate("execute").to(this),e}},{key:"_createArrowView",value:function(){var t=new bA,e=t.bindTemplate;return t.icon=Sx,t.extendTemplate({attributes:{class:["ck-splitbutton__arrow"],"data-cke-tooltip-disabled":e.to("isOn"),"aria-haspopup":!0,"aria-expanded":e.to("isOn",(function(t){return String(t)}))}}),t.bind("isEnabled").to(this),t.bind("label").to(this),t.bind("tooltip").to(this),t.delegate("execute").to(this,"open"),t}}])&&lD(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),mD=r(4245);Da()(mD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),mD.A.locals;var gD=r(8424);function wD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kD(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ix,n="function"==typeof r?new r(t):r,o=new dx(t),i=new Px(t,n,o);return n.bind("isEnabled").to(i),n instanceof vD?n.arrowView.bind("isOn").to(i,"isOpen"):n.bind("isOn").to(i,"isOpen"),function(t){(function(t){t.on("render",(function(){e({emitter:t,activator:function(){return t.isOpen},callback:function(){t.isOpen=!1},contextElements:function(){return[t.element].concat(function(t){if(Array.isArray(t))return wD(t)}(e=t.focusTracker._elements)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return wD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wD(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var e}})}))})(t),function(t){t.on("execute",(function(e){e.source instanceof jA||(t.isOpen=!1)}))}(t),function(t){t.focusTracker.on("change:isFocused",(function(e,r,n){t.isOpen&&!n&&(t.isOpen=!1)}))}(t),function(t){t.keystrokes.set("arrowdown",(function(e,r){t.isOpen&&(t.panelView.focus(),r())})),t.keystrokes.set("arrowup",(function(e,r){t.isOpen&&(t.panelView.focusLast(),r())}))}(t),function(t){t.on("change:isOpen",(function(e,r,n){if(!n){var o=t.panelView.element;o&&o.contains(qn.document.activeElement)&&t.buttonView.focus()}}))}(t),function(t){t.on("change:isOpen",(function(e,r,n){n&&t.panelView.focus()}),{priority:"low"})}(t)}(i),i}function _D(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t.extendTemplate({attributes:{class:["ck-toolbar-dropdown"]}}),t.isOpen?OD(t,e,r):t.once("change:isOpen",(function(){return OD(t,e,r)}),{priority:"highest"}),r.enableActiveItemFocusOnDropdownOpen&&function(t,e){t.on("change:isOpen",(function(){if(t.isOpen){var r=e();r&&("function"==typeof r.focus?r.focus():x("ui-dropdown-focus-child-on-open-child-missing-focus",{view:r}))}}),{priority:m.low-10})}(t,(function(){return t.toolbarView.items.find((function(t){return t.isOn}))}))}function OD(t,e,r){var n=t.locale,o=n.t,i=t.toolbarView=new PC(n),a="function"==typeof e?e():e;i.ariaLabel=r.ariaLabel||o("Dropdown toolbar"),r.maxWidth&&(i.maxWidth=r.maxWidth),r.class&&(i.class=r.class),r.isCompact&&(i.isCompact=r.isCompact),r.isVertical&&(i.isVertical=!0),a instanceof lE?i.items.bindTo(a).using((function(t){return t})):i.items.addMany(a),t.panelView.children.add(i),i.items.delegate("execute").to(t)}Da()(gD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),gD.A.locals;var PD=function(t,e,r){var n=new ox(t.locale);return n.set({id:e,ariaDescribedById:r}),n.bind("isReadOnly").to(t,"isEnabled",(function(t){return!t})),n.bind("hasError").to(t,"errorText",(function(t){return!!t})),n.on("input",(function(){t.errorText=null})),t.bind("isEmpty","isFocused","placeholder").to(n),n},SD=r(3900);Da()(SD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),SD.A.locals,mt(Oi);var jD=r(9576);function ED(t){return ED="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ED(t)}function TD(){TD=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==ED(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(ED(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}function AD(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return xD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xD(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function xD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DD(n.key),n)}}function DD(t){var e=function(t,e){if("object"!=ED(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=ED(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ED(e)?e:e+""}Da()(jD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),jD.A.locals;var RD=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._components=new Map,this.editor=e},(e=[{key:"names",value:TD().mark((function t(){var e,r,n;return TD().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=AD(this._components.values()),t.prev=1,e.s();case 3:if((r=e.n()).done){t.next=9;break}return n=r.value,t.next=7,n.originalName;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"add",value:function(t,e){this._components.set(ID(t),{callback:e,originalName:t})}},{key:"create",value:function(t){if(!this.has(t))throw new A("componentfactory-item-missing",this,{name:t});return this._components.get(ID(t)).callback(this.editor.locale)}},{key:"has",value:function(t){return this._components.has(ID(t))}}])&&CD(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function ID(t){return String(t).toLowerCase()}var BD=r(3224);function FD(t){return FD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FD(t)}function MD(t,e,r){return e=ND(e),function(t,e){if(e&&("object"===FD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,LD()?Reflect.construct(e,r||[],ND(t).constructor):e.apply(t,r))}function LD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(LD=function(){return!!t})()}function ND(t){return ND=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ND(t)}function VD(t,e){return VD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},VD(t,e)}Da()(BD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),BD.A.locals;var zD=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=(r=MD(this,e,[t])).bindTemplate;r.set("label",n.label||""),r.set("class",n.class||null),r.children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-form__header",o.to("class")]},children:r.children}),n.icon&&(r.iconView=new tA,r.iconView.content=n.icon,r.children.add(r.iconView));var i=new oT(t);return i.setTemplate({tag:"h2",attributes:{class:["ck","ck-form__header__label"],role:"presentation"},children:[{text:o.to("label")}]}),r.children.add(i),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&VD(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT);function $D(t){return $D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$D(t)}function qD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UD(n.key),n)}}function UD(t){var e=function(t,e){if("object"!=$D(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$D(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$D(e)?e:e+""}function WD(t,e,r){return e=KD(e),function(t,e){if(e&&("object"===$D(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GD()?Reflect.construct(e,r||[],KD(t).constructor):e.apply(t,r))}function GD(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GD=function(){return!!t})()}function KD(t){return KD=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KD(t)}function HD(t,e){return HD=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},HD(t,e)}var JD=r(6533);function YD(t){return YD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YD(t)}function ZD(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function XD(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,QD(n.key),n)}}function QD(t){var e=function(t,e){if("object"!=YD(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=YD(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==YD(e)?e:e+""}function tR(t,e,r){return e=nR(e),function(t,e){if(e&&("object"===YD(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,eR()?Reflect.construct(e,r||[],nR(t).constructor):e.apply(t,r))}function eR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(eR=function(){return!!t})()}function rR(){return rR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},rR.apply(this,arguments)}function nR(t){return nR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nR(t)}function oR(t,e){return oR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oR(t,e)}Da()(JD.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),JD.A.locals;var iR=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=tR(this,e,[t])).children=r.createCollection(),r.keystrokes=new Fi,r._focusTracker=new Di,r._focusables=new lE,r.focusCycler=new qx({focusables:r._focusables,focusTracker:r._focusTracker,keystrokeHandler:r.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),r.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__actions"]},children:r.children}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oR(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){rR(nR(e.prototype),"render",this).call(this),this.keystrokes.listenTo(this.element)}},{key:"setButtons",value:function(t){var e,r=this,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ZD(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZD(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t);try{var o=function(){var t,n=e.value,o=new bA(r.locale);for(t in o.on("execute",(function(){return n.onExecute()})),n.onCreate&&n.onCreate(o),n)"onExecute"!=t&&"onCreate"!=t&&o.set(t,n[t]);r.children.add(o)};for(n.s();!(e=n.n()).done;)o()}catch(t){n.e(t)}finally{n.f()}this._updateFocusCyclableItems()}},{key:"focus",value:function(t){-1===t?this.focusCycler.focusLast():this.focusCycler.focusFirst()}},{key:"_updateFocusCyclableItems",value:function(){var t=this;Array.from(this.children).forEach((function(e){t._focusables.add(e),t._focusTracker.add(e.element)}))}}])&&XD(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function aR(t){return aR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aR(t)}function cR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,uR(n.key),n)}}function uR(t){var e=function(t,e){if("object"!=aR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=aR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==aR(e)?e:e+""}function sR(t,e,r){return e=fR(e),function(t,e){if(e&&("object"===aR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,lR()?Reflect.construct(e,r||[],fR(t).constructor):e.apply(t,r))}function lR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(lR=function(){return!!t})()}function fR(t){return fR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fR(t)}function pR(t,e){return pR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pR(t,e)}var dR=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=sR(this,e,[t])).children=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog__content"]},children:r.children}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pR(t,e)}(e,t),r=e,(n=[{key:"reset",value:function(){for(;this.children.length;)this.children.remove(0)}}])&&cR(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),hR=r(8390);function yR(t){return yR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yR(t)}function bR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mR(n.key),n)}}function mR(t){var e=function(t,e){if("object"!=yR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yR(e)?e:e+""}function gR(t,e,r){return e=_R(e),function(t,e){if(e&&("object"===yR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wR()?Reflect.construct(e,r||[],_R(t).constructor):e.apply(t,r))}function wR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wR=function(){return!!t})()}function kR(){return kR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_R(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},kR.apply(this,arguments)}function _R(t){return _R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_R(t)}function OR(t,e){return OR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},OR(t,e)}Da()(hR.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),hR.A.locals;var PR="screen-center",SR="editor-center",jR=ho("px"),ER=function(t){function e(t,r){var n,o=r.getCurrentDomRoot,i=r.getViewportOffset;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=gR(this,e,[t])).wasMoved=!1;var a=n.bindTemplate,c=t.t;return n.set("className",""),n.set("ariaLabel",c("Editor dialog")),n.set("isModal",!1),n.set("position",PR),n.set("_isVisible",!1),n.set("_isTransparent",!1),n.set("_top",0),n.set("_left",0),n._getCurrentDomRoot=o,n._getViewportOffset=i,n.decorate("moveTo"),n.parts=n.createCollection(),n.keystrokes=new Fi,n.focusTracker=new Di,n._focusables=new lE,n._focusCycler=new qx({focusables:n._focusables,focusTracker:n.focusTracker,keystrokeHandler:n.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),n.setTemplate({tag:"div",attributes:{class:["ck","ck-dialog-overlay",a.if("isModal","ck-dialog-overlay__transparent",(function(t){return!t})),a.if("_isVisible","ck-hidden",(function(t){return!t}))],tabindex:"-1"},children:[{tag:"div",attributes:{tabindex:"-1",class:["ck","ck-dialog",a.to("className")],role:"dialog","aria-label":a.to("ariaLabel"),style:{top:a.to("_top",(function(t){return jR(t)})),left:a.to("_left",(function(t){return jR(t)})),visibility:a.if("_isTransparent","hidden")}},children:n.parts}]}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OR(t,e)}(e,t),r=e,n=[{key:"render",value:function(){var t=this;kR(_R(e.prototype),"render",this).call(this),this.keystrokes.set("Esc",(function(e,r){t.fire("close",{source:"escKeyPress"}),r()})),this.on("drag",(function(e,r){var n=r.deltaX,o=r.deltaY;t.wasMoved=!0,t.moveBy(n,o)})),this.listenTo(qn.window,"resize",(function(){t._isVisible&&!t.wasMoved&&t.updatePosition()})),this.listenTo(qn.document,"scroll",(function(){t._isVisible&&!t.wasMoved&&t.updatePosition()})),this.on("change:_isVisible",(function(e,r,n){n&&(t._isTransparent=!0,setTimeout((function(){t.updatePosition(),t._isTransparent=!1,t.focus()}),10))})),this.keystrokes.listenTo(this.element)}},{key:"dragHandleElement",get:function(){return this.headerView?this.headerView.element:null}},{key:"setupParts",value:function(t){var e=t.icon,r=t.title,n=t.hasCloseButton,o=void 0===n||n,i=t.content,a=t.actionButtons;r&&(this.headerView=new zD(this.locale,{icon:e}),o&&(this.closeButtonView=this._createCloseButton(),this.headerView.children.add(this.closeButtonView)),this.headerView.label=r,this.ariaLabel=r,this.parts.add(this.headerView,0)),i&&(i instanceof oT&&(i=[i]),this.contentView=new dR(this.locale),this.contentView.children.addMany(i),this.parts.add(this.contentView)),a&&(this.actionsView=new iR(this.locale),this.actionsView.setButtons(a),this.parts.add(this.actionsView)),this._updateFocusCyclableItems()}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"moveTo",value:function(t,e){var r=this._getViewportRect(),n=this._getDialogRect();t+n.width>r.right&&(t=r.right-n.width),t<r.left&&(t=r.left),e<r.top&&(e=r.top),this._moveTo(t,e)}},{key:"_moveTo",value:function(t,e){this._left=t,this._top=e}},{key:"moveBy",value:function(t,e){this.moveTo(this._left+t,this._top+e)}},{key:"_moveOffScreen",value:function(){this._moveTo(-9999,-9999)}},{key:"updatePosition",value:function(){if(this.element&&this.element.parentNode){var t,r=this._getViewportRect(),n=this.position;this._getCurrentDomRoot()?t=this._getVisibleDomRootRect(r):n=PR;var o=e.defaultOffset,i=this._getDialogRect();switch(n){case"editor-top-side":if(t){var a="ltr"===this.locale.contentLanguageDirection?t.right-i.width-o:t.left+o;this.moveTo(a,t.top+o)}else this._moveOffScreen();break;case SR:t?this.moveTo(Math.round(t.left+t.width/2-i.width/2),Math.round(t.top+t.height/2-i.height/2)):this._moveOffScreen();break;case PR:this.moveTo(Math.round((r.width-i.width)/2),Math.round((r.height-i.height)/2));break;case"editor-top-center":t?this.moveTo(Math.round(t.left+t.width/2-i.width/2),t.top+o):this._moveOffScreen();break;case"editor-bottom-center":t?this.moveTo(Math.round(t.left+t.width/2-i.width/2),t.bottom-i.height-o):this._moveOffScreen();break;case"editor-above-center":t?this.moveTo(Math.round(t.left+t.width/2-i.width/2),t.top-i.height-o):this._moveOffScreen();break;case"editor-below-center":t?this.moveTo(Math.round(t.left+t.width/2-i.width/2),t.bottom+o):this._moveOffScreen()}}}},{key:"_getVisibleDomRootRect",value:function(t){var e=new to(this._getCurrentDomRoot()).getVisible();return e&&(e=t.getIntersection(e))?e:null}},{key:"_getDialogRect",value:function(){return new to(this.element.firstElementChild)}},{key:"_getViewportRect",value:function(){return function(t){t=Object.assign({top:0,bottom:0,left:0,right:0},t);var e=new to(qn.window);return e.top+=t.top,e.height-=t.top,e.bottom-=t.bottom,e.height-=t.bottom,e.left+=t.left,e.right-=t.right,e.width-=t.left+t.right,e}(this._getViewportOffset())}},{key:"_updateFocusCyclableItems",value:function(){var t=this,e=[];if(this.contentView){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return bR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.contentView.children);try{for(n.s();!(r=n.n()).done;){var o=r.value;Wx(o)&&e.push(o)}}catch(t){n.e(t)}finally{n.f()}}this.actionsView&&e.push(this.actionsView),this.closeButtonView&&e.push(this.closeButtonView),e.forEach((function(e){var r;t._focusables.add(e),t.focusTracker.add(e.element),Wx(r=e)&&"focusCycler"in r&&r.focusCycler instanceof qx&&(t.listenTo(e.focusCycler,"forwardCycle",(function(e){t._focusCycler.focusNext(),t._focusCycler.next!==t._focusCycler.focusables.get(t._focusCycler.current)&&e.stop()})),t.listenTo(e.focusCycler,"backwardCycle",(function(e){t._focusCycler.focusPrevious(),t._focusCycler.previous!==t._focusCycler.focusables.get(t._focusCycler.current)&&e.stop()})))}))}},{key:"_createCloseButton",value:function(){var t=this,e=new bA(this.locale),r=this.locale.t;return e.set({label:r("Close"),tooltip:!0,icon:Yj}),e.on("execute",(function(){return t.fire("close",{source:"closeButton"})})),e}}],n&&vR(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(t=WD(this,e,[].concat(n)))._onDragBound=t._onDrag.bind(t),t._onDragEndBound=t._onDragEnd.bind(t),t._lastDraggingCoordinates={x:0,y:0},t.on("render",(function(){t._attachListeners()})),t.set("isDragging",!1),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HD(t,e)}(e,t),r=e,(n=[{key:"_attachListeners",value:function(){this.listenTo(this.element,"mousedown",this._onDragStart.bind(this)),this.listenTo(this.element,"touchstart",this._onDragStart.bind(this))}},{key:"_attachDragListeners",value:function(){this.listenTo(qn.document,"mouseup",this._onDragEndBound),this.listenTo(qn.document,"touchend",this._onDragEndBound),this.listenTo(qn.document,"mousemove",this._onDragBound),this.listenTo(qn.document,"touchmove",this._onDragBound)}},{key:"_detachDragListeners",value:function(){this.stopListening(qn.document,"mouseup",this._onDragEndBound),this.stopListening(qn.document,"touchend",this._onDragEndBound),this.stopListening(qn.document,"mousemove",this._onDragBound),this.stopListening(qn.document,"touchmove",this._onDragBound)}},{key:"_onDragStart",value:function(t,e){if(this._isHandleElementPressed(e)){this._attachDragListeners();var r=0,n=0;e instanceof MouseEvent?(r=e.clientX,n=e.clientY):(r=e.touches[0].clientX,n=e.touches[0].clientY),this._lastDraggingCoordinates={x:r,y:n},this.isDragging=!0}}},{key:"_onDrag",value:function(t,e){if(this.isDragging){var r=0,n=0;e instanceof MouseEvent?(r=e.clientX,n=e.clientY):(r=e.touches[0].clientX,n=e.touches[0].clientY),e.preventDefault(),this.fire("drag",{deltaX:Math.round(r-this._lastDraggingCoordinates.x),deltaY:Math.round(n-this._lastDraggingCoordinates.y)}),this._lastDraggingCoordinates={x:r,y:n}}else this._detachDragListeners()}},{key:"_onDragEnd",value:function(){this._detachDragListeners(),this.isDragging=!1}},{key:"_isHandleElementPressed",value:function(t){return!!this.dragHandleElement&&(this.dragHandleElement===t.target||t.target instanceof HTMLElement&&this.dragHandleElement.contains(t.target))}}])&&qD(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT));ER.defaultOffset=15;const TR=ER;function AR(t){return AR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AR(t)}function xR(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function CR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DR(n.key),n)}}function DR(t){var e=function(t,e){if("object"!=AR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=AR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==AR(e)?e:e+""}function RR(t,e,r){return e=BR(e),function(t,e){if(e&&("object"===AR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IR()?Reflect.construct(e,r||[],BR(t).constructor):e.apply(t,r))}function IR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IR=function(){return!!t})()}function BR(t){return BR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BR(t)}function FR(t,e){return FR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FR(t,e)}var MR=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=RR(this,e,[t]);var n=t.t;return r._initShowHideListeners(),r._initFocusToggler(),r._initMultiRootIntegration(),r.set("id",null),t.accessibility.addKeystrokeInfos({categoryId:"navigation",keystrokes:[{label:n("Move focus in and out of an active dialog window"),keystroke:"Ctrl+F6",mayRequireFn:!0}]}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FR(t,e)}(e,t),r=e,n=[{key:"_initShowHideListeners",value:function(){var t=this;this.on("show",(function(e,r){t._show(r)})),this.on("show",(function(e,r){r.onShow&&r.onShow(t)}),{priority:"low"}),this.on("hide",(function(){e._visibleDialogPlugin&&e._visibleDialogPlugin._hide()})),this.on("hide",(function(){t._onHide&&(t._onHide(t),t._onHide=void 0)}),{priority:"low"})}},{key:"_initFocusToggler",value:function(){var t=this,e=this.editor;e.keystrokes.set("Ctrl+F6",(function(r,n){t.isOpen&&!t.view.isModal&&(t.view.focusTracker.isFocused?e.editing.view.focus():t.view.focus(),n())}))}},{key:"_initMultiRootIntegration",value:function(){var t=this,e=this.editor.model;e.document.on("change:data",(function(){if(t.view){var r,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return xR(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?xR(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e.document.differ.getChangedRoots());try{for(n.s();!(r=n.n()).done;)r.value.state&&t.view.updatePosition()}catch(t){n.e(t)}finally{n.f()}}}))}},{key:"show",value:function(t){this.hide(),this.fire("show:".concat(t.id),t)}},{key:"_show",value:function(t){var r=this,n=t.id,o=t.icon,i=t.title,a=t.hasCloseButton,c=void 0===a||a,u=t.content,s=t.actionButtons,l=t.className,f=t.isModal,p=t.position,d=t.onHide,h=this.editor;this.view=new TR(h.locale,{getCurrentDomRoot:function(){return h.editing.view.getDomRoot(h.model.document.selection.anchor.root.rootName)},getViewportOffset:function(){return h.ui.viewportOffset}});var y=this.view;y.on("close",(function(){r.hide()})),h.ui.view.body.add(y),h.ui.focusTracker.add(y.element),h.keystrokes.listenTo(y.element),p||(p=f?PR:SR),y.set({position:p,_isVisible:!0,className:l,isModal:f}),y.setupParts({icon:o,title:i,hasCloseButton:c,content:u,actionButtons:s}),this.id=n,d&&(this._onHide=d),this.isOpen=!0,e._visibleDialogPlugin=this}},{key:"hide",value:function(){e._visibleDialogPlugin&&e._visibleDialogPlugin.fire("hide:".concat(e._visibleDialogPlugin.id))}},{key:"_hide",value:function(){if(this.view){var t=this.editor,r=this.view;r.contentView&&r.contentView.reset(),t.ui.view.body.remove(r),t.ui.focusTracker.remove(r.element),t.keystrokes.stopListening(r.element),r.destroy(),t.editing.view.focus(),this.id=null,this.isOpen=!1,e._visibleDialogPlugin=null}}}],o=[{key:"pluginName",get:function(){return"Dialog"}}],n&&CR(r.prototype,n),o&&CR(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta),LR=r(3617);function NR(t){return NR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},NR(t)}function VR(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function zR(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?VR(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=qR(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):VR(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function $R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,qR(n.key),n)}}function qR(t){var e=function(t,e){if("object"!=NR(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=NR(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==NR(e)?e:e+""}function UR(t,e,r){return e=GR(e),function(t,e){if(e&&("object"===NR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,WR()?Reflect.construct(e,r||[],GR(t).constructor):e.apply(t,r))}function WR(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(WR=function(){return!!t})()}function GR(t){return GR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GR(t)}function KR(t,e){return KR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},KR(t,e)}Da()(LR.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),LR.A.locals;var HR=ho("px"),JR=qn.document.body,YR={top:-99999,left:-99999,name:"arrowless",config:{withArrow:!1}},ZR=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(r=UR(this,e,[t])).bindTemplate;return r.set("top",0),r.set("left",0),r.set("position","arrow_nw"),r.set("isVisible",!1),r.set("withArrow",!0),r.set("class",void 0),r._pinWhenIsVisibleCallback=null,r.content=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-panel",n.to("position",(function(t){return"ck-balloon-panel_".concat(t)})),n.if("isVisible","ck-balloon-panel_visible"),n.if("withArrow","ck-balloon-panel_with-arrow"),n.to("class")],style:{top:n.to("top",HR),left:n.to("left",HR)}},children:r.content}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KR(t,e)}(e,t),r=e,n=[{key:"show",value:function(){this.isVisible=!0}},{key:"hide",value:function(){this.isVisible=!1}},{key:"attachTo",value:function(t){this.show();var r=e.defaultPositions,n=Object.assign({},{element:this.element,positions:[r.southArrowNorth,r.southArrowNorthMiddleWest,r.southArrowNorthMiddleEast,r.southArrowNorthWest,r.southArrowNorthEast,r.northArrowSouth,r.northArrowSouthMiddleWest,r.northArrowSouthMiddleEast,r.northArrowSouthWest,r.northArrowSouthEast,r.viewportStickyNorth],limiter:JR,fitInViewport:!0},t),o=e._getOptimalPosition(n)||YR,i=parseInt(o.left),a=parseInt(o.top),c=o.name,u=(o.config||{}).withArrow,s=void 0===u||u;this.top=a,this.left=i,this.position=c,this.withArrow=s}},{key:"pin",value:function(t){var e=this;this.unpin(),this._pinWhenIsVisibleCallback=function(){e.isVisible?e._startPinning(t):e._stopPinning()},this._startPinning(t),this.listenTo(this,"change:isVisible",this._pinWhenIsVisibleCallback)}},{key:"unpin",value:function(){this._pinWhenIsVisibleCallback&&(this._stopPinning(),this.stopListening(this,"change:isVisible",this._pinWhenIsVisibleCallback),this._pinWhenIsVisibleCallback=null,this.hide())}},{key:"_startPinning",value:function(t){var e=this;this.attachTo(t);var r=QR(t.target),n=t.limiter?QR(t.limiter):JR;this.listenTo(qn.document,"scroll",(function(o,i){var a=i.target,c=r&&a.contains(r),u=n&&a.contains(n);!c&&!u&&r&&n||e.attachTo(t)}),{useCapture:!0}),this.listenTo(qn.window,"resize",(function(){e.attachTo(t)}))}},{key:"_stopPinning",value:function(){this.stopListening(qn.document,"scroll"),this.stopListening(qn.window,"resize")}}],n&&$R(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);ZR.arrowSideOffset=25,ZR.arrowHeightOffset=10,ZR.stickyVerticalOffset=20,ZR._getOptimalPosition=Oo,ZR.defaultPositions=tI();const XR=ZR;function QR(t){return dn(t)?t:Wn(t)?t.commonAncestorContainer:"function"==typeof t?QR(t()):null}function tI(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.sideOffset,r=void 0===e?ZR.arrowSideOffset:e,n=t.heightOffset,o=void 0===n?ZR.arrowHeightOffset:n,i=t.stickyVerticalOffset,a=void 0===i?ZR.stickyVerticalOffset:i,c=t.config;return{northWestArrowSouthWest:function(t,e){return zR({top:u(t,e),left:t.left-r,name:"arrow_sw"},c&&{config:c})},northWestArrowSouthMiddleWest:function(t,e){return zR({top:u(t,e),left:t.left-.25*e.width-r,name:"arrow_smw"},c&&{config:c})},northWestArrowSouth:function(t,e){return zR({top:u(t,e),left:t.left-e.width/2,name:"arrow_s"},c&&{config:c})},northWestArrowSouthMiddleEast:function(t,e){return zR({top:u(t,e),left:t.left-.75*e.width+r,name:"arrow_sme"},c&&{config:c})},northWestArrowSouthEast:function(t,e){return zR({top:u(t,e),left:t.left-e.width+r,name:"arrow_se"},c&&{config:c})},northArrowSouthWest:function(t,e){return zR({top:u(t,e),left:t.left+t.width/2-r,name:"arrow_sw"},c&&{config:c})},northArrowSouthMiddleWest:function(t,e){return zR({top:u(t,e),left:t.left+t.width/2-.25*e.width-r,name:"arrow_smw"},c&&{config:c})},northArrowSouth:function(t,e){return zR({top:u(t,e),left:t.left+t.width/2-e.width/2,name:"arrow_s"},c&&{config:c})},northArrowSouthMiddleEast:function(t,e){return zR({top:u(t,e),left:t.left+t.width/2-.75*e.width+r,name:"arrow_sme"},c&&{config:c})},northArrowSouthEast:function(t,e){return zR({top:u(t,e),left:t.left+t.width/2-e.width+r,name:"arrow_se"},c&&{config:c})},northEastArrowSouthWest:function(t,e){return zR({top:u(t,e),left:t.right-r,name:"arrow_sw"},c&&{config:c})},northEastArrowSouthMiddleWest:function(t,e){return zR({top:u(t,e),left:t.right-.25*e.width-r,name:"arrow_smw"},c&&{config:c})},northEastArrowSouth:function(t,e){return zR({top:u(t,e),left:t.right-e.width/2,name:"arrow_s"},c&&{config:c})},northEastArrowSouthMiddleEast:function(t,e){return zR({top:u(t,e),left:t.right-.75*e.width+r,name:"arrow_sme"},c&&{config:c})},northEastArrowSouthEast:function(t,e){return zR({top:u(t,e),left:t.right-e.width+r,name:"arrow_se"},c&&{config:c})},southWestArrowNorthWest:function(t){return zR({top:s(t),left:t.left-r,name:"arrow_nw"},c&&{config:c})},southWestArrowNorthMiddleWest:function(t,e){return zR({top:s(t),left:t.left-.25*e.width-r,name:"arrow_nmw"},c&&{config:c})},southWestArrowNorth:function(t,e){return zR({top:s(t),left:t.left-e.width/2,name:"arrow_n"},c&&{config:c})},southWestArrowNorthMiddleEast:function(t,e){return zR({top:s(t),left:t.left-.75*e.width+r,name:"arrow_nme"},c&&{config:c})},southWestArrowNorthEast:function(t,e){return zR({top:s(t),left:t.left-e.width+r,name:"arrow_ne"},c&&{config:c})},southArrowNorthWest:function(t){return zR({top:s(t),left:t.left+t.width/2-r,name:"arrow_nw"},c&&{config:c})},southArrowNorthMiddleWest:function(t,e){return zR({top:s(t),left:t.left+t.width/2-.25*e.width-r,name:"arrow_nmw"},c&&{config:c})},southArrowNorth:function(t,e){return zR({top:s(t),left:t.left+t.width/2-e.width/2,name:"arrow_n"},c&&{config:c})},southArrowNorthMiddleEast:function(t,e){return zR({top:s(t),left:t.left+t.width/2-.75*e.width+r,name:"arrow_nme"},c&&{config:c})},southArrowNorthEast:function(t,e){return zR({top:s(t),left:t.left+t.width/2-e.width+r,name:"arrow_ne"},c&&{config:c})},southEastArrowNorthWest:function(t){return zR({top:s(t),left:t.right-r,name:"arrow_nw"},c&&{config:c})},southEastArrowNorthMiddleWest:function(t,e){return zR({top:s(t),left:t.right-.25*e.width-r,name:"arrow_nmw"},c&&{config:c})},southEastArrowNorth:function(t,e){return zR({top:s(t),left:t.right-e.width/2,name:"arrow_n"},c&&{config:c})},southEastArrowNorthMiddleEast:function(t,e){return zR({top:s(t),left:t.right-.75*e.width+r,name:"arrow_nme"},c&&{config:c})},southEastArrowNorthEast:function(t,e){return zR({top:s(t),left:t.right-e.width+r,name:"arrow_ne"},c&&{config:c})},westArrowEast:function(t,e){return zR({top:t.top+t.height/2-e.height/2,left:t.left-e.width-o,name:"arrow_e"},c&&{config:c})},eastArrowWest:function(t,e){return zR({top:t.top+t.height/2-e.height/2,left:t.right+o,name:"arrow_w"},c&&{config:c})},viewportStickyNorth:function(t,e,r,n){var o=n||r;return t.getIntersection(o)?o.height-t.height>a?null:{top:o.top+a,left:t.left+t.width/2-e.width/2,name:"arrowless",config:zR({withArrow:!1},c)}:null}};function u(t,e){return t.top-e.height-o}function s(t){return t.bottom+o}}var eI=r(2424);function rI(t){return rI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rI(t)}function nI(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return oI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oI(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function oI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aI(n.key),n)}}function aI(t){var e=function(t,e){if("object"!=rI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rI(e)?e:e+""}function cI(t,e,r){return e=lI(e),uI(t,sI()?Reflect.construct(e,r||[],lI(t).constructor):e.apply(t,r))}function uI(t,e){if(e&&("object"===rI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function sI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sI=function(){return!!t})()}function lI(t){return lI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lI(t)}function fI(t,e){return fI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fI(t,e)}Da()(eI.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),eI.A.locals;var pI="ck-tooltip",dI=function(t){function e(t){var r,n,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=cI(this,e))._currentElementWithTooltip=null,r._currentTooltipPosition=null,r._resizeObserver=null,r._mutationObserver=null,e._editors.add(t),e._instance?uI(r,e._instance):(e._instance=r,r.tooltipTextView=new oT(t.locale),r.tooltipTextView.set("text",""),r.tooltipTextView.setTemplate({tag:"span",attributes:{class:["ck","ck-tooltip__text"]},children:[{text:r.tooltipTextView.bindTemplate.to("text")}]}),r.balloonPanelView=new XR(t.locale),r.balloonPanelView.class=pI,r.balloonPanelView.content.add(r.tooltipTextView),r._mutationObserver=(n=function(){r._updateTooltipPosition()},o=new MutationObserver((function(){n()})),{attach:function(t){o.observe(t,{attributes:!0,attributeFilter:["data-cke-tooltip-text","data-cke-tooltip-position"]})},detach:function(){o.disconnect()}}),r._pinTooltipDebounced=ud(r._pinTooltip,600),r.listenTo(qn.document,"mouseenter",r._onEnterOrFocus.bind(r),{useCapture:!0}),r.listenTo(qn.document,"mouseleave",r._onLeaveOrBlur.bind(r),{useCapture:!0}),r.listenTo(qn.document,"focus",r._onEnterOrFocus.bind(r),{useCapture:!0}),r.listenTo(qn.document,"blur",r._onLeaveOrBlur.bind(r),{useCapture:!0}),r.listenTo(qn.document,"scroll",r._onScroll.bind(r),{useCapture:!0}),r._watchdogExcluded=!0,r)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fI(t,e)}(e,t),r=e,o=[{key:"getPositioningFunctions",value:function(t){var r=e.defaultBalloonPositions;return{s:[r.southArrowNorth,r.southArrowNorthEast,r.southArrowNorthWest],n:[r.northArrowSouth],e:[r.eastArrowWest],w:[r.westArrowEast],sw:[r.southArrowNorthEast],se:[r.southArrowNorthWest]}[t]}}],(n=[{key:"destroy",value:function(t){var r=t.ui.view&&t.ui.view.body;e._editors.delete(t),this.stopListening(t.ui),r&&r.has(this.balloonPanelView)&&r.remove(this.balloonPanelView),e._editors.size||(this._unpinTooltip(),this.balloonPanelView.destroy(),this.stopListening(),e._instance=null)}},{key:"_onEnterOrFocus",value:function(t,e){var r=yI(e.target);r&&r!==this._currentElementWithTooltip&&(this._unpinTooltip(),this._pinTooltipDebounced(r,bI(r)))}},{key:"_onLeaveOrBlur",value:function(t,e){var r=e.target,n=e.relatedTarget;if("mouseleave"===t.name){if(!dn(r))return;if(this._currentElementWithTooltip&&r!==this._currentElementWithTooltip)return;var o=yI(r),i=yI(n);o&&o!==i&&this._unpinTooltip()}else{if(this._currentElementWithTooltip&&r!==this._currentElementWithTooltip)return;this._unpinTooltip()}}},{key:"_onScroll",value:function(t,e){var r=e.target;this._currentElementWithTooltip&&(r.contains(this.balloonPanelView.element)&&r.contains(this._currentElementWithTooltip)||this._unpinTooltip())}},{key:"_pinTooltip",value:function(t,r){var n=this,o=r.text,i=r.position,a=r.cssClass,c=Pi(e._editors.values()).ui.view.body;c.has(this.balloonPanelView)||c.add(this.balloonPanelView),this.tooltipTextView.text=o,this.balloonPanelView.pin({target:t,positions:e.getPositioningFunctions(i)}),this._resizeObserver=new fo(t,(function(){mo(t)||n._unpinTooltip()})),this._mutationObserver.attach(t),this.balloonPanelView.class=[pI,a].filter((function(t){return t})).join(" ");var u,s=nI(e._editors);try{for(s.s();!(u=s.n()).done;){var l=u.value;this.listenTo(l.ui,"update",this._updateTooltipPosition.bind(this),{priority:"low"})}}catch(t){s.e(t)}finally{s.f()}this._currentElementWithTooltip=t,this._currentTooltipPosition=i}},{key:"_unpinTooltip",value:function(){this._pinTooltipDebounced.cancel(),this.balloonPanelView.unpin();var t,r=nI(e._editors);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.stopListening(n.ui,"update")}}catch(t){r.e(t)}finally{r.f()}this._currentElementWithTooltip=null,this._currentTooltipPosition=null,this._resizeObserver&&this._resizeObserver.destroy(),this._mutationObserver.detach()}},{key:"_updateTooltipPosition",value:function(){var t=bI(this._currentElementWithTooltip);mo(this._currentElementWithTooltip)&&t.text?this.balloonPanelView.pin({target:this._currentElementWithTooltip,positions:e.getPositioningFunctions(t.position)}):this._unpinTooltip()}}])&&iI(r.prototype,n),o&&iI(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Nn());dI.defaultBalloonPositions=tI({heightOffset:5,sideOffset:13}),dI._editors=new Set,dI._instance=null;const hI=dI;function yI(t){return dn(t)?t.closest("[data-cke-tooltip-text]:not([data-cke-tooltip-disabled])"):null}function bI(t){return{text:t.dataset.ckeTooltipText,position:t.dataset.ckeTooltipPosition||"s",cssClass:t.dataset.ckeTooltipClass||""}}const vI=function(t,e,r){var n=!0,o=!0;if("function"!=typeof t)throw new TypeError("Expected a function");return rt(r)&&(n="leading"in r?!!r.leading:n,o="trailing"in r?!!r.trailing:o),ud(t,e,{leading:n,maxWait:e,trailing:o})};function mI(t){return mI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mI(t)}function gI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function wI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function kI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PI(n.key),n)}}function OI(t,e,r){return e&&_I(t.prototype,e),r&&_I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function PI(t){var e=function(t,e){if("object"!=mI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mI(e)?e:e+""}function SI(t,e,r){return e=EI(e),function(t,e){if(e&&("object"===mI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jI()?Reflect.construct(e,r||[],EI(t).constructor):e.apply(t,r))}function jI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jI=function(){return!!t})()}function EI(t){return EI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EI(t)}function TI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AI(t,e)}function AI(t,e){return AI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},AI(t,e)}var xI=function(t){function e(t){var r;return kI(this,e),(r=SI(this,e)).editor=t,r._balloonView=null,r._lastFocusedEditableElement=null,r._showBalloonThrottled=vI(r._showBalloon.bind(r),50,{leading:!0}),t.on("ready",r._handleEditorReady.bind(r)),r}return TI(e,t),OI(e,[{key:"destroy",value:function(){var t=this._balloonView;t&&(t.unpin(),this._balloonView=null),this._showBalloonThrottled.cancel(),this.stopListening()}},{key:"_handleEditorReady",value:function(){var t=this,e=this.editor;(e.config.get("ui.poweredBy.forceVisible")||"VALID"!==function(t){function e(t){return t.length>=40&&t.length<=255?"VALID":"INVALID"}if(!t)return"INVALID";var r="";try{r=atob(t)}catch(t){return"INVALID"}var n=r.split("-"),o=n[0],i=n[1];if(!i)return e(t);try{atob(i)}catch(r){try{if(atob(o),!atob(o).length)return e(t)}catch(r){return e(t)}}if(o.length<40||o.length>255)return"INVALID";var a="";try{atob(o),a=atob(i)}catch(t){return"INVALID"}if(8!==a.length)return"INVALID";var c=Number(a.substring(0,4)),u=Number(a.substring(4,6))-1,s=Number(a.substring(6,8)),l=new Date(c,u,s);return l<R||isNaN(Number(l))?"INVALID":"VALID"}(e.config.get("licenseKey")))&&e.ui.view&&(e.ui.focusTracker.on("change:isFocused",(function(e,r,n){t._updateLastFocusedEditableElement(),n?t._showBalloon():t._hideBalloon()})),e.ui.focusTracker.on("change:focusedElement",(function(e,r,n){t._updateLastFocusedEditableElement(),n&&t._showBalloon()})),e.ui.on("update",(function(){t._showBalloonThrottled()})))}},{key:"_createBalloonView",value:function(){var t=this.editor,e=this._balloonView=new XR,r=RI(t),n=new CI(t.locale,r.label);e.content.add(n),e.set({class:"ck-powered-by-balloon"}),t.ui.view.body.add(e),t.ui.focusTracker.add(e.element),this._balloonView=e}},{key:"_showBalloon",value:function(){if(this._lastFocusedEditableElement){var t,e,r,n,o=(t=this.editor,e=this._lastFocusedEditableElement,n="right"===(r=RI(t)).side?function(t,e){return DI(t,e,(function(t,r){return t.left+t.width-r.width-e.horizontalOffset}))}(e,r):function(t,e){return DI(t,e,(function(t){return t.left+e.horizontalOffset}))}(e,r),{target:e,positions:[n]});o&&(this._balloonView||this._createBalloonView(),this._balloonView.pin(o))}}},{key:"_hideBalloon",value:function(){this._balloonView&&this._balloonView.unpin()}},{key:"_updateLastFocusedEditableElement",value:function(){var t=this.editor,e=t.ui.focusTracker.isFocused,r=t.ui.focusTracker.focusedElement;if(e&&r){var n=Array.from(t.ui.getEditableElementsNames()).map((function(e){return t.ui.getEditableElement(e)}));n.includes(r)?this._lastFocusedEditableElement=r:this._lastFocusedEditableElement=n[0]}else this._lastFocusedEditableElement=null}}])}(Nn()),CI=function(t){function e(t,r){var n;kI(this,e),n=SI(this,e,[t]);var o,i=new tA,a=n.bindTemplate;return i.set({content:'<svg xmlns="http://www.w3.org/2000/svg" width="53" height="10" viewBox="0 0 53 10"><path fill="#1C2331" d="M31.724 1.492a15.139 15.139 0 0 0 .045 1.16 2.434 2.434 0 0 0-.687-.34 3.68 3.68 0 0 0-1.103-.166 2.332 2.332 0 0 0-1.14.255 1.549 1.549 0 0 0-.686.87c-.15.41-.225.98-.225 1.712 0 .939.148 1.659.444 2.161.297.503.792.754 1.487.754.452.015.9-.094 1.294-.316.296-.174.557-.4.771-.669l.14.852h1.282V.007h-1.623v1.485ZM31 6.496a1.77 1.77 0 0 1-.494.061.964.964 0 0 1-.521-.127.758.758 0 0 1-.296-.466 3.984 3.984 0 0 1-.093-.992 4.208 4.208 0 0 1 .098-1.052.753.753 0 0 1 .307-.477 1.08 1.08 0 0 1 .55-.122c.233-.004.466.026.69.089l.483.144v2.553c-.11.076-.213.143-.307.2a1.73 1.73 0 0 1-.417.189ZM35.68 0l-.702.004c-.322.002-.482.168-.48.497l.004.581c.002.33.164.493.486.49l.702-.004c.322-.002.481-.167.48-.496L36.165.49c-.002-.33-.164-.493-.486-.491ZM36.145 2.313l-1.612.01.034 5.482 1.613-.01-.035-5.482ZM39.623.79 37.989.8 38 2.306l-.946.056.006 1.009.949-.006.024 2.983c.003.476.143.844.419 1.106.275.26.658.39 1.148.387.132 0 .293-.01.483-.03.19-.02.38-.046.57-.08.163-.028.324-.068.482-.119l-.183-1.095-.702.004a.664.664 0 0 1-.456-.123.553.553 0 0 1-.14-.422l-.016-2.621 1.513-.01-.006-1.064-1.514.01-.01-1.503ZM46.226 2.388c-.41-.184-.956-.274-1.636-.27-.673.004-1.215.101-1.627.29-.402.179-.72.505-.888.91-.18.419-.268.979-.264 1.68.004.688.1 1.24.285 1.655.172.404.495.724.9.894.414.18.957.268 1.63.264.68-.004 1.224-.099 1.632-.284.4-.176.714-.501.878-.905.176-.418.263-.971.258-1.658-.004-.702-.097-1.261-.28-1.677a1.696 1.696 0 0 0-.888-.9Zm-.613 3.607a.77.77 0 0 1-.337.501 1.649 1.649 0 0 1-1.317.009.776.776 0 0 1-.343-.497 4.066 4.066 0 0 1-.105-1.02 4.136 4.136 0 0 1 .092-1.03.786.786 0 0 1 .337-.507 1.59 1.59 0 0 1 1.316-.008.79.79 0 0 1 .344.502c.078.337.113.683.105 1.03.012.343-.019.685-.092 1.02ZM52.114 2.07a2.67 2.67 0 0 0-1.128.278c-.39.191-.752.437-1.072.73l-.157-.846-1.273.008.036 5.572 1.623-.01-.024-3.78c.35-.124.646-.22.887-.286.26-.075.53-.114.8-.118l.45-.003.144-1.546-.286.001ZM22.083 7.426l-1.576-2.532a2.137 2.137 0 0 0-.172-.253 1.95 1.95 0 0 0-.304-.29.138.138 0 0 1 .042-.04 1.7 1.7 0 0 0 .328-.374l1.75-2.71c.01-.015.025-.028.024-.048-.01-.01-.021-.007-.031-.007L20.49 1.17a.078.078 0 0 0-.075.045l-.868 1.384c-.23.366-.46.732-.688 1.099a.108.108 0 0 1-.112.06c-.098-.005-.196-.001-.294-.002-.018 0-.038.006-.055-.007.002-.02.002-.039.005-.058a4.6 4.6 0 0 0 .046-.701V1.203c0-.02-.009-.032-.03-.03h-.033L16.93 1.17c-.084 0-.073-.01-.073.076v6.491c-.001.018.006.028.025.027h1.494c.083 0 .072.007.072-.071v-2.19c0-.055-.003-.11-.004-.166a3.366 3.366 0 0 0-.05-.417h.06c.104 0 .209.002.313-.002a.082.082 0 0 1 .084.05c.535.913 1.07 1.824 1.607 2.736a.104.104 0 0 0 .103.062c.554-.003 1.107-.002 1.66-.002l.069-.003-.019-.032-.188-.304ZM27.112 6.555c-.005-.08-.004-.08-.082-.08h-2.414c-.053 0-.106-.003-.159-.011a.279.279 0 0 1-.246-.209.558.558 0 0 1-.022-.15c0-.382 0-.762-.002-1.143 0-.032.007-.049.042-.044h2.504c.029.003.037-.012.034-.038V3.814c0-.089.013-.078-.076-.078h-2.44c-.07 0-.062.003-.062-.06v-.837c0-.047.004-.093.013-.14a.283.283 0 0 1 .241-.246.717.717 0 0 1 .146-.011h2.484c.024.002.035-.009.036-.033l.003-.038.03-.496c.01-.183.024-.365.034-.548.005-.085.003-.087-.082-.094-.218-.018-.437-.038-.655-.05a17.845 17.845 0 0 0-.657-.026 72.994 72.994 0 0 0-1.756-.016 1.7 1.7 0 0 0-.471.064 1.286 1.286 0 0 0-.817.655c-.099.196-.149.413-.145.633v3.875c0 .072.003.144.011.216a1.27 1.27 0 0 0 .711 1.029c.228.113.48.167.734.158.757-.005 1.515.002 2.272-.042.274-.016.548-.034.82-.053.03-.002.043-.008.04-.041-.008-.104-.012-.208-.019-.312a69.964 69.964 0 0 1-.05-.768ZM16.14 7.415l-.127-1.075c-.004-.03-.014-.04-.044-.037a13.125 13.125 0 0 1-.998.073c-.336.01-.672.02-1.008.016-.116-.001-.233-.014-.347-.039a.746.746 0 0 1-.45-.262c-.075-.1-.132-.211-.167-.33a3.324 3.324 0 0 1-.126-.773 9.113 9.113 0 0 1-.015-.749c0-.285.022-.57.065-.852.023-.158.066-.312.127-.46a.728.728 0 0 1 .518-.443 1.64 1.64 0 0 1 .397-.048c.628-.001 1.255.003 1.882.05.022.001.033-.006.036-.026l.003-.031.06-.55c.019-.177.036-.355.057-.532.004-.034-.005-.046-.04-.056a5.595 5.595 0 0 0-1.213-.21 10.783 10.783 0 0 0-.708-.02c-.24-.003-.48.01-.719.041a3.477 3.477 0 0 0-.625.14 1.912 1.912 0 0 0-.807.497c-.185.2-.33.433-.424.688a4.311 4.311 0 0 0-.24 1.096c-.031.286-.045.572-.042.86-.006.43.024.86.091 1.286.04.25.104.497.193.734.098.279.26.53.473.734.214.205.473.358.756.446.344.11.702.17 1.063.177a8.505 8.505 0 0 0 1.578-.083 6.11 6.11 0 0 0 .766-.18c.03-.008.047-.023.037-.057a.157.157 0 0 1-.003-.025Z"/><path fill="#AFE229" d="M6.016 6.69a1.592 1.592 0 0 0-.614.21c-.23.132-.422.32-.56.546-.044.072-.287.539-.287.539l-.836 1.528.009.006c.038.025.08.046.123.063.127.046.26.07.395.073.505.023 1.011-.007 1.517-.003.29.009.58.002.869-.022a.886.886 0 0 0 .395-.116.962.962 0 0 0 .312-.286c.056-.083.114-.163.164-.249.24-.408.48-.816.718-1.226.075-.128.148-.257.222-.386l.112-.192a1.07 1.07 0 0 0 .153-.518l-1.304.023s-1.258-.005-1.388.01Z"/><path fill="#771BFF" d="m2.848 9.044.76-1.39.184-.352c-.124-.067-.245-.14-.367-.21-.346-.204-.706-.384-1.045-.6a.984.984 0 0 1-.244-.207c-.108-.134-.136-.294-.144-.46-.021-.409-.002-.818-.009-1.227-.003-.195 0-.39.003-.585.004-.322.153-.553.427-.713l.833-.488c.22-.13.44-.257.662-.385.05-.029.105-.052.158-.077.272-.128.519-.047.76.085l.044.028c.123.06.242.125.358.196.318.178.635.357.952.537.095.056.187.117.275.184.194.144.254.35.266.578.016.284.007.569.006.853-.001.28.004.558 0 .838.592-.003 1.259 0 1.259 0l.723-.013c-.003-.292-.007-.584-.007-.876 0-.524.015-1.048-.016-1.571-.024-.42-.135-.8-.492-1.067a5.02 5.02 0 0 0-.506-.339A400.52 400.52 0 0 0 5.94.787C5.722.664 5.513.524 5.282.423 5.255.406 5.228.388 5.2.373 4.758.126 4.305-.026 3.807.21c-.097.046-.197.087-.29.14A699.896 699.896 0 0 0 .783 1.948c-.501.294-.773.717-.778 1.31-.004.36-.009.718-.001 1.077.016.754-.017 1.508.024 2.261.016.304.07.6.269.848.127.15.279.28.448.382.622.4 1.283.734 1.92 1.11l.183.109Z"/></svg>\n',isColorInherited:!1}),i.extendTemplate({attributes:{style:{width:"53px",height:"10px"}}}),n.setTemplate({tag:"div",attributes:{class:["ck","ck-powered-by"],"aria-hidden":!0},children:[{tag:"a",attributes:{href:"https://ckeditor.com/?utm_source=ckeditor&utm_medium=referral&utm_campaign=701Dn000000hVgmIAE_powered_by_ckeditor_logo",target:"_blank",tabindex:"-1"},children:[].concat((o=r?[{tag:"span",attributes:{class:["ck","ck-powered-by__label"]},children:[r]}]:[],function(t){if(Array.isArray(t))return wI(t)}(o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(o)||function(t,e){if(t){if("string"==typeof t)return wI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?wI(t,e):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[i]),on:{dragstart:a.to((function(t){return t.preventDefault()}))}}]}),n}return TI(e,t),OI(e)}(oT);function DI(t,e,r){return function(n,o){var i,a=new to(t);if(a.width<350||a.height<50)return null;i="inside"===e.position?a.bottom-o.height:a.bottom-o.height/2,i-=e.verticalOffset;var c=r(a,o),u=n.clone().moveTo(c,i).getIntersection(o.clone().moveTo(c,i)).getVisible();return!u||u.getArea()<o.getArea()?null:{top:i,left:c,name:"position_".concat(e.position,"-side_").concat(e.side),config:{withArrow:!1}}}}function RI(t){var e=t.config.get("ui.poweredBy"),r=e&&e.position||"border";return function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?gI(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=PI(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gI(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({position:r,label:"Powered by",verticalOffset:"inside"===r?5:0,horizontalOffset:5,side:"ltr"===t.locale.contentLanguageDirection?"right":"left"},e)}var II=r(1836);function BI(t,e,r){return e=MI(e),function(t,e){if(e&&("object"===VI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FI()?Reflect.construct(e,r||[],MI(t).constructor):e.apply(t,r))}function FI(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FI=function(){return!!t})()}function MI(t){return MI=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},MI(t)}function LI(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NI(t,e)}function NI(t,e){return NI=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NI(t,e)}function VI(t){return VI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VI(t)}function zI(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $I(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UI(n.key),n)}}function qI(t,e,r){return e&&$I(t.prototype,e),r&&$I(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function UI(t){var e=function(t,e){if("object"!=VI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=VI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==VI(e)?e:e+""}Da()(II.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),II.A.locals;var WI="polite",GI=function(){return qI((function t(e){zI(this,t),this.editor=e}),[{key:"announce",value:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:WI,n=this.editor;this.view||(this.view=new KI(n.locale),n.ui.view.body.add(this.view));var o=this.view.regionViews.find((function(e){return e.regionName===t}));o||(o=new HI(this.view.locale),this.view.regionViews.add(o)),o.set({regionName:t,text:e,politeness:r})}}])}(),KI=function(t){function e(t){var r;return zI(this,e),(r=BI(this,e,[t])).regionViews=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-aria-live-announcer"]},children:r.regionViews}),r}return LI(e,t),qI(e)}(oT),HI=function(t){function e(t){var r;zI(this,e);var n=(r=BI(this,e,[t])).bindTemplate;return r.set("regionName",""),r.set("text",""),r.set("politeness",WI),r.setTemplate({tag:"div",attributes:{role:"region","data-region":n.to("regionName"),"aria-live":n.to("politeness")},children:[{text:n.to("text")}]}),r}return LI(e,t),qI(e)}(oT);function JI(t){return JI="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JI(t)}function YI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ZI(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return XI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XI(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function XI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,tB(n.key),n)}}function tB(t){var e=function(t,e){if("object"!=JI(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=JI(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JI(e)?e:e+""}function eB(t,e,r){return e=nB(e),function(t,e){if(e&&("object"===JI(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,rB()?Reflect.construct(e,r||[],nB(t).constructor):e.apply(t,r))}function rB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(rB=function(){return!!t})()}function nB(t){return nB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},nB(t)}function oB(t,e){return oB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},oB(t,e)}var iB=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=eB(this,e)).isReady=!1,r._editableElementsMap=new Map,r._focusableToolbarDefinitions=[];var n=t.editing.view;return r.editor=t,r.componentFactory=new RD(t),r.focusTracker=new Di,r.tooltipManager=new hI(t),r.poweredBy=new xI(t),r.ariaLiveAnnouncer=new GI(t),r.set("viewportOffset",r._readViewportOffsetFromConfig()),r.once("ready",(function(){r.isReady=!0})),r.listenTo(n.document,"layoutChanged",r.update.bind(r)),r.listenTo(n,"scrollToTheSelection",r._handleScrollToTheSelection.bind(r)),r._initFocusTracking(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oB(t,e)}(e,t),r=e,n=[{key:"element",get:function(){return null}},{key:"update",value:function(){this.fire("update")}},{key:"destroy",value:function(){this.stopListening(),this.focusTracker.destroy(),this.tooltipManager.destroy(this.editor),this.poweredBy.destroy();var t,e=ZI(this._editableElementsMap.values());try{for(e.s();!(t=e.n()).done;){var r=t.value;r.ckeditorInstance=null,this.editor.keystrokes.stopListening(r)}}catch(t){e.e(t)}finally{e.f()}this._editableElementsMap=new Map,this._focusableToolbarDefinitions=[]}},{key:"setEditableElement",value:function(t,e){var r=this;this._editableElementsMap.set(t,e),e.ckeditorInstance||(e.ckeditorInstance=this.editor),this.focusTracker.add(e);var n=function(){r.editor.editing.view.getDomRoot(t)||r.editor.keystrokes.listenTo(e)};this.isReady?n():this.once("ready",n)}},{key:"removeEditableElement",value:function(t){var e=this._editableElementsMap.get(t);e&&(this._editableElementsMap.delete(t),this.editor.keystrokes.stopListening(e),this.focusTracker.remove(e),e.ckeditorInstance=null)}},{key:"getEditableElement",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"main";return this._editableElementsMap.get(t)}},{key:"getEditableElementsNames",value:function(){return this._editableElementsMap.keys()}},{key:"addToolbar",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.isRendered?(this.focusTracker.add(t.element),this.editor.keystrokes.listenTo(t.element)):t.once("render",(function(){e.focusTracker.add(t.element),e.editor.keystrokes.listenTo(t.element)})),this._focusableToolbarDefinitions.push({toolbarView:t,options:r})}},{key:"_editableElements",get:function(){return console.warn("editor-ui-deprecated-editable-elements: The EditorUI#_editableElements property has been deprecated and will be removed in the near future.",{editorUI:this}),this._editableElementsMap}},{key:"_readViewportOffsetFromConfig",value:function(){var t=this.editor,e=t.config.get("ui.viewportOffset");if(e)return e;var r=t.config.get("toolbar.viewportTopOffset");return r?(console.warn("editor-ui-deprecated-viewport-offset-config: The `toolbar.vieportTopOffset` configuration option is deprecated. It will be removed from future CKEditor versions. Use `ui.viewportOffset.top` instead."),{top:r}):{top:0}}},{key:"_initFocusTracking",value:function(){var t,e,r=this,n=this.editor,o=n.editing.view;n.keystrokes.set("Alt+F10",(function(n,i){var a=r.focusTracker.focusedElement;Array.from(r._editableElementsMap.values()).includes(a)&&!Array.from(o.domRoots.values()).includes(a)&&(t=a);var c=r._getCurrentFocusedToolbarDefinition();c&&e||(e=r._getFocusableCandidateToolbarDefinitions());for(var u=0;u<e.length;u++){var s=e.shift();if(e.push(s),s!==c&&r._focusFocusableCandidateToolbar(s)){c&&c.options.afterBlur&&c.options.afterBlur();break}}i()})),n.keystrokes.set("Esc",(function(e,o){var i=r._getCurrentFocusedToolbarDefinition();i&&(t?(t.focus(),t=null):n.editing.view.focus(),i.options.afterBlur&&i.options.afterBlur(),o())}))}},{key:"_getFocusableCandidateToolbarDefinitions",value:function(){var t,e=[],r=ZI(this._focusableToolbarDefinitions);try{for(r.s();!(t=r.n()).done;){var n=t.value,o=n.toolbarView,i=n.options;(mo(o.element)||i.beforeFocus)&&e.push(n)}}catch(t){r.e(t)}finally{r.f()}return e.sort((function(t,e){return aB(t)-aB(e)})),e}},{key:"_getCurrentFocusedToolbarDefinition",value:function(){var t,e=ZI(this._focusableToolbarDefinitions);try{for(e.s();!(t=e.n()).done;){var r=t.value;if(r.toolbarView.element&&r.toolbarView.element.contains(this.focusTracker.focusedElement))return r}}catch(t){e.e(t)}finally{e.f()}return null}},{key:"_focusFocusableCandidateToolbar",value:function(t){var e=t.toolbarView,r=t.options.beforeFocus;return r&&r(),!!mo(e.element)&&(e.focus(),!0)}},{key:"_handleScrollToTheSelection",value:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?YI(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=tB(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):YI(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({top:0,bottom:0,left:0,right:0},this.viewportOffset);e.viewportOffset.top+=r.top,e.viewportOffset.bottom+=r.bottom,e.viewportOffset.left+=r.left,e.viewportOffset.right+=r.right}}],n&&QI(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function aB(t){var e=t.toolbarView,r=t.options,n=10;return mo(e.element)&&n--,r.isContextual&&n--,n}var cB=r(6888);function uB(t){return uB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uB(t)}function sB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lB(n.key),n)}}function lB(t){var e=function(t,e){if("object"!=uB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uB(e)?e:e+""}function fB(t,e,r){return e=hB(e),function(t,e){if(e&&("object"===uB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pB()?Reflect.construct(e,r||[],hB(t).constructor):e.apply(t,r))}function pB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pB=function(){return!!t})()}function dB(){return dB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},dB.apply(this,arguments)}function hB(t){return hB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},hB(t)}function yB(t,e){return yB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},yB(t,e)}function bB(t){return bB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bB(t)}function vB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mB(n.key),n)}}function mB(t){var e=function(t,e){if("object"!=bB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bB(e)?e:e+""}function gB(t,e,r){return e=kB(e),function(t,e){if(e&&("object"===bB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wB()?Reflect.construct(e,r||[],kB(t).constructor):e.apply(t,r))}function wB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wB=function(){return!!t})()}function kB(t){return kB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kB(t)}function _B(t,e){return _B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_B(t,e)}Da()(cB.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),cB.A.locals;var OB=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gB(this,e,[t])).top=r.createCollection(),r.main=r.createCollection(),r._voiceLabelView=r._createVoiceLabel(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-reset","ck-editor","ck-rounded-corners"],role:"application",dir:t.uiLanguageDirection,lang:t.uiLanguage,"aria-labelledby":r._voiceLabelView.id},children:[r._voiceLabelView,{tag:"div",attributes:{class:["ck","ck-editor__top","ck-reset_all"],role:"presentation"},children:r.top},{tag:"div",attributes:{class:["ck","ck-editor__main"],role:"presentation"},children:r.main}]}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_B(t,e)}(e,t),r=e,(n=[{key:"_createVoiceLabel",value:function(){var t=this.t,e=new fT;return e.text=t("Rich Text Editor"),e.extendTemplate({attributes:{class:"ck-voice-label"}}),e}}])&&vB(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=fB(this,e,[t])).body=new qT(t),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yB(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){dB(hB(e.prototype),"render",this).call(this),this.body.attachToDom()}},{key:"destroy",value:function(){return this.body.detachFromDom(),dB(hB(e.prototype),"destroy",this).call(this)}}])&&sB(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT));function PB(t){return PB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},PB(t)}function SB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jB(n.key),n)}}function jB(t){var e=function(t,e){if("object"!=PB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=PB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==PB(e)?e:e+""}function EB(t,e,r){return e=xB(e),function(t,e){if(e&&("object"===PB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,TB()?Reflect.construct(e,r||[],xB(t).constructor):e.apply(t,r))}function TB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(TB=function(){return!!t})()}function AB(){return AB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},AB.apply(this,arguments)}function xB(t){return xB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xB(t)}function CB(t,e){return CB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},CB(t,e)}function DB(t){return DB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DB(t)}function RB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IB(n.key),n)}}function IB(t){var e=function(t,e){if("object"!=DB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=DB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==DB(e)?e:e+""}function BB(t,e,r){return e=LB(e),function(t,e){if(e&&("object"===DB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FB()?Reflect.construct(e,r||[],LB(t).constructor):e.apply(t,r))}function FB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FB=function(){return!!t})()}function MB(){return MB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},MB.apply(this,arguments)}function LB(t){return LB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LB(t)}function NB(t,e){return NB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NB(t,e)}var VB=function(t){function e(t,r,n){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),o=BB(this,e,[t,r,n]);var a=t.t;return o.extendTemplate({attributes:{role:"textbox",class:"ck-editor__editable_inline"}}),o._generateLabel=i.label||function(){return a("Editor editing area: %0",o.name)},o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NB(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;MB(LB(e.prototype),"render",this).call(this);var r=this._editingView;r.change((function(e){var n=r.document.getRoot(t.name);e.setAttribute("aria-label",t._generateLabel(t),n)}))}}])&&RB(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(function(t){function e(t,r,n){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=EB(this,e,[t])).name=null,o.setTemplate({tag:"div",attributes:{class:["ck","ck-content","ck-editor__editable","ck-rounded-corners"],lang:t.contentLanguage,dir:t.contentLanguageDirection}}),o.set("isFocused",!1),o._editableElement=n,o._hasExternalElement=!!o._editableElement,o._editingView=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CB(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;AB(xB(e.prototype),"render",this).call(this),this._hasExternalElement?this.template.apply(this.element=this._editableElement):this._editableElement=this.element,this.on("change:isFocused",(function(){return t._updateIsFocusedClasses()})),this._updateIsFocusedClasses()}},{key:"destroy",value:function(){this._hasExternalElement&&this.template.revert(this._editableElement),AB(xB(e.prototype),"destroy",this).call(this)}},{key:"hasExternalElement",get:function(){return this._hasExternalElement}},{key:"_updateIsFocusedClasses",value:function(){var t=this._editingView;function e(e){t.change((function(r){var n=t.document.getRoot(e.name);r.addClass(e.isFocused?"ck-focused":"ck-blurred",n),r.removeClass(e.isFocused?"ck-blurred":"ck-focused",n)}))}t.isRenderingInProgress?function r(n){t.once("change:isRenderingInProgress",(function(t,o,i){i?r(n):e(n)}))}(this):e(this)}}])&&SB(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT));mt();var zB=r(9432);Da()(zB.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),zB.A.locals;var $B=r(3449);function qB(t){return qB="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qB(t)}function UB(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function WB(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,KB(n.key),n)}}function GB(t,e,r){return e&&WB(t.prototype,e),r&&WB(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function KB(t){var e=function(t,e){if("object"!=qB(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qB(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qB(e)?e:e+""}function HB(t,e,r){return e=ZB(e),function(t,e){if(e&&("object"===qB(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,JB()?Reflect.construct(e,r||[],ZB(t).constructor):e.apply(t,r))}function JB(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(JB=function(){return!!t})()}function YB(){return YB="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZB(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},YB.apply(this,arguments)}function ZB(t){return ZB=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZB(t)}function XB(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QB(t,e)}function QB(t,e){return QB=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QB(t,e)}Da()($B.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),$B.A.locals;var tF=ho("px"),eF=function(t){function e(t){var r;return UB(this,e),(r=HB(this,e,[t]))._viewToStack=new Map,r._idToStack=new Map,r._view=null,r._rotatorView=null,r._fakePanelsView=null,r.positionLimiter=function(){var t=r.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null},r.set("visibleView",null),r.set("_numberOfStacks",0),r.set("_singleViewMode",!1),r}return XB(e,t),GB(e,[{key:"destroy",value:function(){YB(ZB(e.prototype),"destroy",this).call(this),this._view&&this._view.destroy(),this._rotatorView&&this._rotatorView.destroy(),this._fakePanelsView&&this._fakePanelsView.destroy()}},{key:"view",get:function(){return this._view||this._createPanelView(),this._view}},{key:"hasView",value:function(t){return Array.from(this._viewToStack.keys()).includes(t)}},{key:"add",value:function(t){if(this._view||this._createPanelView(),this.hasView(t.view))throw new A("contextualballoon-add-view-exist",[this,t]);var e=t.stackId||"main";if(!this._idToStack.has(e))return this._idToStack.set(e,new Map([[t.view,t]])),this._viewToStack.set(t.view,this._idToStack.get(e)),this._numberOfStacks=this._idToStack.size,void(this._visibleStack&&!t.singleViewMode||this.showStack(e));var r=this._idToStack.get(e);t.singleViewMode&&this.showStack(e),r.set(t.view,t),this._viewToStack.set(t.view,r),r===this._visibleStack&&this._showView(t)}},{key:"remove",value:function(t){if(!this.hasView(t))throw new A("contextualballoon-remove-view-not-exist",[this,t]);var e=this._viewToStack.get(t);this._singleViewMode&&this.visibleView===t&&(this._singleViewMode=!1),this.visibleView===t&&(1===e.size?this._idToStack.size>1?this._showNextStack():(this.view.hide(),this.visibleView=null,this._rotatorView.hideView()):this._showView(Array.from(e.values())[e.size-2])),1===e.size?(this._idToStack.delete(this._getStackId(e)),this._numberOfStacks=this._idToStack.size):e.delete(t),this._viewToStack.delete(t)}},{key:"updatePosition",value:function(t){t&&(this._visibleStack.get(this.visibleView).position=t),this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition()}},{key:"showStack",value:function(t){this.visibleStack=t;var e=this._idToStack.get(t);if(!e)throw new A("contextualballoon-showstack-stack-not-exist",this);this._visibleStack!==e&&this._showView(Array.from(e.values()).pop())}},{key:"_createPanelView",value:function(){this._view=new XR(this.editor.locale),this.editor.ui.view.body.add(this._view),this.editor.ui.focusTracker.add(this._view.element),this._rotatorView=this._createRotatorView(),this._fakePanelsView=this._createFakePanelsView()}},{key:"_visibleStack",get:function(){return this._viewToStack.get(this.visibleView)}},{key:"_getStackId",value:function(t){return Array.from(this._idToStack.entries()).find((function(e){return e[1]===t}))[0]}},{key:"_showNextStack",value:function(){var t=Array.from(this._idToStack.values()),e=t.indexOf(this._visibleStack)+1;t[e]||(e=0),this.showStack(this._getStackId(t[e]))}},{key:"_showPrevStack",value:function(){var t=Array.from(this._idToStack.values()),e=t.indexOf(this._visibleStack)-1;t[e]||(e=t.length-1),this.showStack(this._getStackId(t[e]))}},{key:"_createRotatorView",value:function(){var t=this,e=new rF(this.editor.locale),r=this.editor.locale.t;return this.view.content.add(e),e.bind("isNavigationVisible").to(this,"_numberOfStacks",this,"_singleViewMode",(function(t,e){return!e&&t>1})),e.on("change:isNavigationVisible",(function(){return t.updatePosition()}),{priority:"low"}),e.bind("counter").to(this,"visibleView",this,"_numberOfStacks",(function(e,n){if(n<2)return"";var o=Array.from(t._idToStack.values()).indexOf(t._visibleStack)+1;return r("%0 of %1",[o,n])})),e.buttonNextView.on("execute",(function(){e.focusTracker.isFocused&&t.editor.editing.view.focus(),t._showNextStack()})),e.buttonPrevView.on("execute",(function(){e.focusTracker.isFocused&&t.editor.editing.view.focus(),t._showPrevStack()})),e}},{key:"_createFakePanelsView",value:function(){var t=new nF(this.editor.locale,this.view);return t.bind("numberOfPanels").to(this,"_numberOfStacks",this,"_singleViewMode",(function(t,e){return!e&&t>=2?Math.min(t-1,2):0})),t.listenTo(this.view,"change:top",(function(){return t.updatePosition()})),t.listenTo(this.view,"change:left",(function(){return t.updatePosition()})),this.editor.ui.view.body.add(t),t}},{key:"_showView",value:function(t){var e=t.view,r=t.balloonClassName,n=void 0===r?"":r,o=t.withArrow,i=void 0===o||o,a=t.singleViewMode,c=void 0!==a&&a;this.view.class=n,this.view.withArrow=i,this._rotatorView.showView(e),this.visibleView=e,this.view.pin(this._getBalloonPosition()),this._fakePanelsView.updatePosition(),c&&(this._singleViewMode=!0)}},{key:"_getBalloonPosition",value:function(){var t=Array.from(this._visibleStack.values()).pop().position;return t&&(t.limiter||(t=Object.assign({},t,{limiter:this.positionLimiter})),t=Object.assign({},t,{viewportOffsetConfig:this.editor.ui.viewportOffset})),t}}],[{key:"pluginName",get:function(){return"ContextualBalloon"}}])}(ta),rF=function(t){function e(t){var r;UB(this,e),r=HB(this,e,[t]);var n=t.t,o=r.bindTemplate;return r.set("isNavigationVisible",!0),r.focusTracker=new Di,r.buttonPrevView=r._createButtonView(n("Previous"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M11.463 5.187a.888.888 0 1 1 1.254 1.255L9.16 10l3.557 3.557a.888.888 0 1 1-1.254 1.255L7.26 10.61a.888.888 0 0 1 .16-1.382l4.043-4.042z"/></svg>'),r.buttonNextView=r._createButtonView(n("Next"),'<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M8.537 14.813a.888.888 0 1 1-1.254-1.255L10.84 10 7.283 6.442a.888.888 0 1 1 1.254-1.255L12.74 9.39a.888.888 0 0 1-.16 1.382l-4.043 4.042z"/></svg>'),r.content=r.createCollection(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-balloon-rotator"],"z-index":"-1"},children:[{tag:"div",attributes:{class:["ck-balloon-rotator__navigation",o.to("isNavigationVisible",(function(t){return t?"":"ck-hidden"}))]},children:[r.buttonPrevView,{tag:"span",attributes:{class:["ck-balloon-rotator__counter"]},children:[{text:o.to("counter")}]},r.buttonNextView]},{tag:"div",attributes:{class:"ck-balloon-rotator__content"},children:r.content}]}),r}return XB(e,t),GB(e,[{key:"render",value:function(){YB(ZB(e.prototype),"render",this).call(this),this.focusTracker.add(this.element)}},{key:"destroy",value:function(){YB(ZB(e.prototype),"destroy",this).call(this),this.focusTracker.destroy()}},{key:"showView",value:function(t){this.hideView(),this.content.add(t)}},{key:"hideView",value:function(){this.content.clear()}},{key:"_createButtonView",value:function(t,e){var r=new bA(this.locale);return r.set({label:t,icon:e,tooltip:!0}),r}}])}(oT),nF=function(t){function e(t,r){var n;UB(this,e);var o=(n=HB(this,e,[t])).bindTemplate;return n.set("top",0),n.set("left",0),n.set("height",0),n.set("width",0),n.set("numberOfPanels",0),n.content=n.createCollection(),n._balloonPanelView=r,n.setTemplate({tag:"div",attributes:{class:["ck-fake-panel",o.to("numberOfPanels",(function(t){return t?"":"ck-hidden"}))],style:{top:o.to("top",tF),left:o.to("left",tF),width:o.to("width",tF),height:o.to("height",tF)}},children:n.content}),n.on("change:numberOfPanels",(function(t,e,r,o){r>o?n._addPanels(r-o):n._removePanels(o-r),n.updatePosition()})),n}return XB(e,t),GB(e,[{key:"_addPanels",value:function(t){for(;t--;){var e=new oT;e.setTemplate({tag:"div"}),this.content.add(e),this.registerChild(e)}}},{key:"_removePanels",value:function(t){for(;t--;){var e=this.content.last;this.content.remove(e),this.deregisterChild(e),e.destroy()}}},{key:"updatePosition",value:function(){if(this.numberOfPanels){var t=this._balloonPanelView,e=t.top,r=t.left,n=new to(this._balloonPanelView.element),o=n.width,i=n.height;Object.assign(this,{top:e,left:r,width:o,height:i})}}}])}(oT),oF=r(4315);function iF(t){return iF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iF(t)}function aF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cF(n.key),n)}}function cF(t){var e=function(t,e){if("object"!=iF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=iF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==iF(e)?e:e+""}function uF(t,e,r){return e=fF(e),function(t,e){if(e&&("object"===iF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sF()?Reflect.construct(e,r||[],fF(t).constructor):e.apply(t,r))}function sF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sF=function(){return!!t})()}function lF(){return lF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},lF.apply(this,arguments)}function fF(t){return fF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},fF(t)}function pF(t,e){return pF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},pF(t,e)}Da()(oF.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),oF.A.locals;var dF=ho("px"),hF=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(r=uF(this,e,[t])).bindTemplate;return r.set("isActive",!1),r.set("isSticky",!1),r.set("limiterElement",null),r.set("limiterBottomOffset",50),r.set("viewportTopOffset",0),r.set("_marginLeft",null),r.set("_isStickyToTheBottomOfLimiter",!1),r.set("_stickyTopOffset",null),r.set("_stickyBottomOffset",null),r.content=r.createCollection(),r._contentPanelPlaceholder=new EE({tag:"div",attributes:{class:["ck","ck-sticky-panel__placeholder"],style:{display:n.to("isSticky",(function(t){return t?"block":"none"})),height:n.to("isSticky",(function(t){return t?dF(r._contentPanelRect.height):null}))}}}).render(),r.contentPanelElement=new EE({tag:"div",attributes:{class:["ck","ck-sticky-panel__content",n.if("isSticky","ck-sticky-panel__content_sticky"),n.if("_isStickyToTheBottomOfLimiter","ck-sticky-panel__content_sticky_bottom-limit")],style:{width:n.to("isSticky",(function(t){return t?dF(r._contentPanelPlaceholder.getBoundingClientRect().width):null})),top:n.to("_stickyTopOffset",(function(t){return t?dF(t):t})),bottom:n.to("_stickyBottomOffset",(function(t){return t?dF(t):t})),marginLeft:n.to("_marginLeft")}},children:r.content}).render(),r.setTemplate({tag:"div",attributes:{class:["ck","ck-sticky-panel"]},children:[r._contentPanelPlaceholder,r.contentPanelElement]}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pF(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){var t=this;lF(fF(e.prototype),"render",this).call(this),this.checkIfShouldBeSticky(),this.listenTo(qn.document,"scroll",(function(){t.checkIfShouldBeSticky()}),{useCapture:!0}),this.listenTo(this,"change:isActive",(function(){t.checkIfShouldBeSticky()}))}},{key:"checkIfShouldBeSticky",value:function(){if(this.limiterElement&&this.isActive){var t=new to(this.limiterElement),e=t.getVisible();if(e){var r=new to(qn.window);r.top+=this.viewportTopOffset,r.height-=this.viewportTopOffset,e=e.getIntersection(r)}if(e&&t.top<e.top){var n=e.top;if(n+this._contentPanelRect.height+this.limiterBottomOffset>e.bottom){var o=Math.max(t.bottom-e.bottom,0)+this.limiterBottomOffset;t.bottom-o>t.top+this._contentPanelRect.height?this._stickToBottomOfLimiter(o):this._unstick()}else this._contentPanelRect.height+this.limiterBottomOffset<t.height?this._stickToTopOfAncestors(n):this._unstick()}else this._unstick()}else this._unstick()}},{key:"_stickToTopOfAncestors",value:function(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=t,this._stickyBottomOffset=null,this._marginLeft=dF(-qn.window.scrollX)}},{key:"_stickToBottomOfLimiter",value:function(t){this.isSticky=!0,this._isStickyToTheBottomOfLimiter=!0,this._stickyTopOffset=null,this._stickyBottomOffset=t,this._marginLeft=dF(-qn.window.scrollX)}},{key:"_unstick",value:function(){this.isSticky=!1,this._isStickyToTheBottomOfLimiter=!1,this._stickyTopOffset=null,this._stickyBottomOffset=null,this._marginLeft=null}},{key:"_contentPanelRect",get:function(){return new to(this.contentPanelElement)}}])&&aF(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function yF(t){return yF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yF(t)}function bF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,vF(n.key),n)}}function vF(t){var e=function(t,e){if("object"!=yF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=yF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yF(e)?e:e+""}function mF(t,e,r){return e=wF(e),function(t,e){if(e&&("object"===yF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,gF()?Reflect.construct(e,r||[],wF(t).constructor):e.apply(t,r))}function gF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(gF=function(){return!!t})()}function wF(t){return wF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},wF(t)}function kF(t,e){return kF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},kF(t,e)}var _F=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=t.t,i=Object.assign({},{showResetButton:!0,showIcon:!0,creator:PD},r);return(n=mF(this,e,[t,i.creator])).label=r.label,n._viewConfig=i,n._viewConfig.showIcon&&(n.iconView=new tA,n.iconView.content='<svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path d="M12.68 13.74h-.001l4.209 4.208a1 1 0 1 0 1.414-1.414l-4.267-4.268a6 6 0 1 0-1.355 1.474ZM13 9a4 4 0 1 1-8 0 4 4 0 0 1 8 0Z"/></svg>',n.fieldWrapperChildren.add(n.iconView,0),n.extendTemplate({attributes:{class:"ck-search__query_with-icon"}})),n._viewConfig.showResetButton&&(n.resetButtonView=new bA(t),n.resetButtonView.set({label:o("Clear"),icon:Yj,class:"ck-search__reset",isVisible:!1,tooltip:!0}),n.resetButtonView.on("execute",(function(){n.reset(),n.focus(),n.fire("reset")})),n.resetButtonView.bind("isVisible").to(n.fieldView,"isEmpty",(function(t){return!t})),n.fieldWrapperChildren.add(n.resetButtonView),n.extendTemplate({attributes:{class:"ck-search__query_with-reset"}})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kF(t,e)}(e,t),r=e,(n=[{key:"reset",value:function(){this.fieldView.reset(),this._viewConfig.showResetButton&&(this.resetButtonView.isVisible=!1)}}])&&bF(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(MA);function OF(t){return OF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OF(t)}function PF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SF(n.key),n)}}function SF(t){var e=function(t,e){if("object"!=OF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=OF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==OF(e)?e:e+""}function jF(t,e,r){return e=TF(e),function(t,e){if(e&&("object"===OF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,EF()?Reflect.construct(e,r||[],TF(t).constructor):e.apply(t,r))}function EF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EF=function(){return!!t})()}function TF(t){return TF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TF(t)}function AF(t,e){return AF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},AF(t,e)}var xF=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(t=jF(this,e)).bindTemplate;return t.set({isVisible:!1,primaryText:"",secondaryText:""}),t.setTemplate({tag:"div",attributes:{class:["ck","ck-search__info",r.if("isVisible","ck-hidden",(function(t){return!t}))],tabindex:-1},children:[{tag:"span",children:[{text:[r.to("primaryText")]}]},{tag:"span",children:[{text:[r.to("secondaryText")]}]}]}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AF(t,e)}(e,t),r=e,(n=[{key:"focus",value:function(){this.element.focus()}}])&&PF(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function CF(t){return CF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CF(t)}function DF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,IF(n.key),n)}}function IF(t){var e=function(t,e){if("object"!=CF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=CF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==CF(e)?e:e+""}function BF(t,e,r){return e=LF(e),function(t,e){if(e&&("object"===CF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,FF()?Reflect.construct(e,r||[],LF(t).constructor):e.apply(t,r))}function FF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(FF=function(){return!!t})()}function MF(){return MF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},MF.apply(this,arguments)}function LF(t){return LF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LF(t)}function NF(t,e){return NF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NF(t,e)}var VF=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=BF(this,e,[t])).children=r.createCollection(),r.focusTracker=new Di,r.setTemplate({tag:"div",attributes:{class:["ck","ck-search__results"],tabindex:-1},children:r.children}),r._focusCycler=new qx({focusables:r.children,focusTracker:r.focusTracker}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NF(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){MF(LF(e.prototype),"render",this).call(this);var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return DF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?DF(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.children);try{for(r.s();!(t=r.n()).done;){var n=t.value;this.focusTracker.add(n.element)}}catch(t){r.e(t)}finally{r.f()}}},{key:"focus",value:function(){this._focusCycler.focusFirst()}},{key:"focusFirst",value:function(){this._focusCycler.focusFirst()}},{key:"focusLast",value:function(){this._focusCycler.focusLast()}}])&&RF(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),zF=/[\\^$.*+?()[\]{}|]/g,$F=RegExp(zF.source);var qF=r(610);function UF(t){return UF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},UF(t)}function WF(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function GF(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function KF(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HF(n.key),n)}}function HF(t){var e=function(t,e){if("object"!=UF(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=UF(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==UF(e)?e:e+""}function JF(t,e,r){return e=XF(e),function(t,e){if(e&&("object"===UF(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YF()?Reflect.construct(e,r||[],XF(t).constructor):e.apply(t,r))}function YF(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YF=function(){return!!t})()}function ZF(){return ZF="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XF(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},ZF.apply(this,arguments)}function XF(t){return XF=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},XF(t)}function QF(t,e){return QF=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QF(t,e)}Da()(qF.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),qF.A.locals;var tM=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=JF(this,e,[t]))._config=r,n.filteredView=r.filteredView,n.queryView=n._createSearchTextQueryView(),n.focusTracker=new Di,n.keystrokes=new Fi,n.resultsView=new VF(t),n.children=n.createCollection(),n.focusableChildren=n.createCollection([n.queryView,n.resultsView]),n.set("isEnabled",!0),n.set("resultsCount",0),n.set("totalItemsCount",0),r.infoView&&r.infoView.instance?n.infoView=r.infoView.instance:(n.infoView=new xF,n._enableDefaultInfoViewBehavior(),n.on("render",(function(){n.search("")}))),n.resultsView.children.addMany([n.infoView,n.filteredView]),n.focusCycler=new qx({focusables:n.focusableChildren,focusTracker:n.focusTracker,keystrokeHandler:n.keystrokes,actions:{focusPrevious:"shift + tab",focusNext:"tab"}}),n.on("search",(function(t,e){var r=e.resultsCount,o=e.totalItemsCount;n.resultsCount=r,n.totalItemsCount=o})),n.setTemplate({tag:"div",attributes:{class:["ck","ck-search",r.class||null],tabindex:"-1"},children:n.children}),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QF(t,e)}(e,t),r=e,n=[{key:"render",value:function(){ZF(XF(e.prototype),"render",this).call(this),this.children.addMany([this.queryView,this.resultsView]);var t,r=function(t){return t.stopPropagation()},n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return GF(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?GF(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this.focusableChildren);try{for(n.s();!(t=n.n()).done;){var o=t.value;this.focusTracker.add(o.element)}}catch(t){n.e(t)}finally{n.f()}this.keystrokes.listenTo(this.element),this.keystrokes.set("arrowright",r),this.keystrokes.set("arrowleft",r),this.keystrokes.set("arrowup",r),this.keystrokes.set("arrowdown",r)}},{key:"focus",value:function(){this.queryView.focus()}},{key:"reset",value:function(){this.queryView.reset(),this.search("")}},{key:"search",value:function(t){var e,r=t?new RegExp((e=Vc(e=t))&&$F.test(e)?e.replace(zF,"\\$&"):e,"ig"):null,n=this.filteredView.filter(r);this.fire("search",function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?WF(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=HF(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):WF(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({query:t},n))}},{key:"_createSearchTextQueryView",value:function(){var t=this,e=new _F(this.locale,this._config.queryView);return this.listenTo(e.fieldView,"input",(function(){t.search(e.fieldView.element.value)})),e.on("reset",(function(){return t.reset()})),e.bind("isEnabled").to(this),e}},{key:"_enableDefaultInfoViewBehavior",value:function(){var t=this,e=this.locale.t,r=this.infoView;function n(t,e){var r=e.query,n=e.resultsCount,o=e.totalItemsCount;return"function"==typeof t?t(r,n,o):t}this.on("search",(function(o,i){if(i.resultsCount)r.set({isVisible:!1});else{var a,c,u=t._config.infoView&&t._config.infoView.text;i.totalItemsCount?u&&u.notFound?(a=u.notFound.primary,c=u.notFound.secondary):(a=e("No results found"),c=""):u&&u.noSearchableItems?(a=u.noSearchableItems.primary,c=u.noSearchableItems.secondary):(a=e("No searchable items"),c=""),r.set({primaryText:n(a,i),secondaryText:n(c,i),isVisible:!0})}}))}}],n&&KF(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT),eM=r(5558);function rM(t){return rM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rM(t)}function nM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,oM(n.key),n)}}function oM(t){var e=function(t,e){if("object"!=rM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=rM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==rM(e)?e:e+""}function iM(t,e,r){return e=cM(e),function(t,e){if(e&&("object"===rM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,aM()?Reflect.construct(e,r||[],cM(t).constructor):e.apply(t,r))}function aM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(aM=function(){return!!t})()}function cM(t){return cM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},cM(t)}function uM(t,e){return uM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},uM(t,e)}Da()(eM.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),eM.A.locals;var sM=function(t){function e(t,r){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=iM(this,e,[t,r]))._config=r;var o=ho("px");n.extendTemplate({attributes:{class:["ck-autocomplete"]}});var i=n.resultsView.bindTemplate;return n.resultsView.set("isVisible",!1),n.resultsView.set("_position","s"),n.resultsView.set("_width",0),n.resultsView.extendTemplate({attributes:{class:[i.if("isVisible","ck-hidden",(function(t){return!t})),i.to("_position",(function(t){return"ck-search__results_".concat(t)}))],style:{width:i.to("_width",o)}}}),n.focusTracker.on("change:isFocused",(function(t,e,o){n._updateResultsVisibility(),o?n.resultsView.element.scrollTop=0:r.resetOnBlur&&n.queryView.reset()})),n.on("search",(function(){n._updateResultsVisibility(),n._updateResultsViewWidthAndPosition()})),n.keystrokes.set("esc",(function(t,e){n.resultsView.isVisible&&(n.queryView.focus(),n.resultsView.isVisible=!1,e())})),n.listenTo(qn.document,"scroll",(function(){n._updateResultsViewWidthAndPosition()})),n.on("change:isEnabled",(function(){n._updateResultsVisibility()})),n.filteredView.on("execute",(function(t,e){var r=e.value;n.focus(),n.reset(),n.queryView.fieldView.value=n.queryView.fieldView.element.value=r,n.resultsView.isVisible=!1})),n.resultsView.on("change:isVisible",(function(){n._updateResultsViewWidthAndPosition()})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uM(t,e)}(e,t),r=e,(n=[{key:"_updateResultsViewWidthAndPosition",value:function(){if(this.resultsView.isVisible){this.resultsView._width=new to(this.queryView.fieldView.element).width;var t=e._getOptimalPosition({element:this.resultsView.element,target:this.queryView.element,fitInViewport:!0,positions:e.defaultResultsPositions});this.resultsView._position=t?t.name:"s"}}},{key:"_updateResultsVisibility",value:function(){var t=void 0===this._config.queryMinChars?0:this._config.queryMinChars,e=this.queryView.fieldView.element.value.length;this.resultsView.isVisible=this.focusTracker.isFocused&&this.isEnabled&&e>=t}}])&&nM(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(tM);sM.defaultResultsPositions=[function(t){return{top:t.bottom,left:t.left,name:"s"}},function(t,e){return{top:t.top-e.height,left:t.left,name:"n"}}],sM._getOptimalPosition=Oo;var lM=r(6580);Da()(lM.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),lM.A.locals;var fM=r(4944);Da()(fM.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),fM.A.locals,ho("px");var pM=r(4893);function dM(t){return dM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dM(t)}function hM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yM(n.key),n)}}function yM(t){var e=function(t,e){if("object"!=dM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dM(e)?e:e+""}function bM(t,e,r){return e=gM(e),function(t,e){if(e&&("object"===dM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vM()?Reflect.construct(e,r||[],gM(t).constructor):e.apply(t,r))}function vM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vM=function(){return!!t})()}function mM(){return mM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},mM.apply(this,arguments)}function gM(t){return gM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gM(t)}function wM(t,e){return wM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wM(t,e)}Da()(pM.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),pM.A.locals,ho("px"),ho("px");var kM=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bM(this,e,[t])).view=r,n._toolbarConfig=cC(t.config.get("toolbar")),n._elementReplacer=new Tt,n.listenTo(t.editing.view,"scrollToTheSelection",n._handleScrollToTheSelectionWithStickyPanel.bind(n)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wM(t,e)}(e,t),r=e,n=[{key:"element",get:function(){return this.view.element}},{key:"init",value:function(t){var e=this.editor,r=this.view,n=e.editing.view,o=r.editable,i=n.document.getRoot();o.name=i.rootName,r.render();var a=o.element;this.setEditableElement(o.name,a),r.editable.bind("isFocused").to(this.focusTracker),n.attachDomRoot(a),t&&this._elementReplacer.replace(t,this.element),this._initPlaceholder(),this._initToolbar(),this._initDialogPluginIntegration(),this.fire("ready")}},{key:"destroy",value:function(){mM(gM(e.prototype),"destroy",this).call(this);var t=this.view,r=this.editor.editing.view;this._elementReplacer.restore(),r.detachDomRoot(t.editable.name),t.destroy()}},{key:"_initToolbar",value:function(){var t=this.view;t.stickyPanel.bind("isActive").to(this.focusTracker,"isFocused"),t.stickyPanel.limiterElement=t.element,t.stickyPanel.bind("viewportTopOffset").to(this,"viewportOffset",(function(t){return t.top||0})),t.toolbar.fillFromConfig(this._toolbarConfig,this.componentFactory),this.addToolbar(t.toolbar)}},{key:"_initPlaceholder",value:function(){var t,e=this.editor,r=e.editing.view,n=r.document.getRoot(),o=e.sourceElement,i=e.config.get("placeholder");i&&(t="string"==typeof i?i:i[this.view.editable.name]),!t&&o&&"textarea"===o.tagName.toLowerCase()&&(t=o.getAttribute("placeholder")),t&&(n.placeholder=t),function(t){var e=t.view,r=t.element,n=t.text,o=t.isDirectHost,i=void 0===o||o,a=t.keepOnFocus,c=void 0!==a&&a,u=e.document;function s(t){La.get(u).set(r,{text:t,isDirectHost:i,keepOnFocus:c,hostElement:i?r:null}),e.change((function(t){return Va(u,t)}))}La.has(u)||(La.set(u,new Map),u.registerPostFixer((function(t){return Va(u,t)})),u.on("change:isComposing",(function(){e.change((function(t){return Va(u,t)}))}),{priority:"high"})),r.is("editableElement")&&r.on("change:placeholder",(function(t,e,r){s(r)})),r.placeholder?s(r.placeholder):n&&s(n),n&&(Na||x("enableplaceholder-deprecated-text-option"),Na=!0)}({view:r,element:n,isDirectHost:!1,keepOnFocus:!0})}},{key:"_handleScrollToTheSelectionWithStickyPanel",value:function(t,e,r){var n=this,o=this.view.stickyPanel;if(o.isSticky){var i=new to(o.element).height;e.viewportOffset.top+=i}else{var a=function(){n.editor.editing.view.scrollToTheSelection(r)};this.listenTo(o,"change:isSticky",a),setTimeout((function(){n.stopListening(o,"change:isSticky",a)}),20)}}},{key:"_initDialogPluginIntegration",value:function(){if(this.editor.plugins.has("Dialog")){var t=this.view.stickyPanel,e=this.editor.plugins.get("Dialog");e.on("show",(function(){var r=e.view;r.on("moveTo",(function(e,n){if(t.isSticky&&!r.wasMoved){var o=new to(t.contentPanelElement);n[1]<o.bottom+TR.defaultOffset&&(n[1]=o.bottom+TR.defaultOffset)}}),{priority:"high"})}),{priority:"low"})}}}],n&&hM(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(iB),_M=r(2515);function OM(t){return OM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},OM(t)}function PM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,SM(n.key),n)}}function SM(t){var e=function(t,e){if("object"!=OM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=OM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==OM(e)?e:e+""}function jM(t,e,r){return e=AM(e),function(t,e){if(e&&("object"===OM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,EM()?Reflect.construct(e,r||[],AM(t).constructor):e.apply(t,r))}function EM(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(EM=function(){return!!t})()}function TM(){return TM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=AM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},TM.apply(this,arguments)}function AM(t){return AM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},AM(t)}function xM(t,e){return xM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xM(t,e)}Da()(_M.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),_M.A.locals;var CM=function(t){function e(t,r){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=jM(this,e,[t])).stickyPanel=new hF(t),n.toolbar=new PC(t,{shouldGroupWhenFull:o.shouldToolbarGroupWhenFull}),n.editable=new VB(t,r),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xM(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){TM(AM(e.prototype),"render",this).call(this),this.stickyPanel.content.add(this.toolbar),this.top.add(this.stickyPanel),this.main.add(this.editable)}}])&&PM(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(OB);function DM(t){return DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},DM(t)}function RM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function IM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BM(n.key),n)}}function BM(t){var e=function(t,e){if("object"!=DM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=DM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==DM(e)?e:e+""}var FM=function(){return t=function t(e){var r=this;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.crashes=[],this.state="initializing",this._now=Date.now,this.crashes=[],this._crashNumberLimit="number"==typeof e.crashNumberLimit?e.crashNumberLimit:3,this._minimumNonErrorTimePeriod="number"==typeof e.minimumNonErrorTimePeriod?e.minimumNonErrorTimePeriod:5e3,this._boundErrorHandler=function(t){var e="error"in t?t.error:t.reason;e instanceof Error&&r._handleError(e,t)},this._listeners={},!this._restart)throw new Error("The Watchdog class was split into the abstract `Watchdog` class and the `EditorWatchdog` class. Please, use `EditorWatchdog` if you have used the `Watchdog` class previously.")},e=[{key:"destroy",value:function(){this._stopErrorHandling(),this._listeners={}}},{key:"on",value:function(t,e){this._listeners[t]||(this._listeners[t]=[]),this._listeners[t].push(e)}},{key:"off",value:function(t,e){this._listeners[t]=this._listeners[t].filter((function(t){return t!==e}))}},{key:"_fire",value:function(t){for(var e=this._listeners[t]||[],r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];var i,a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return RM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?RM(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(e);try{for(a.s();!(i=a.n()).done;)i.value.apply(this,[null].concat(n))}catch(t){a.e(t)}finally{a.f()}}},{key:"_startErrorHandling",value:function(){window.addEventListener("error",this._boundErrorHandler),window.addEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_stopErrorHandling",value:function(){window.removeEventListener("error",this._boundErrorHandler),window.removeEventListener("unhandledrejection",this._boundErrorHandler)}},{key:"_handleError",value:function(t,e){if(this._shouldReactToError(t)){this.crashes.push({message:t.message,stack:t.stack,filename:e instanceof ErrorEvent?e.filename:void 0,lineno:e instanceof ErrorEvent?e.lineno:void 0,colno:e instanceof ErrorEvent?e.colno:void 0,date:this._now()});var r=this._shouldRestart();this.state="crashed",this._fire("stateChange"),this._fire("error",{error:t,causesRestart:r}),r?this._restart():(this.state="crashedPermanently",this._fire("stateChange"))}}},{key:"_shouldReactToError",value:function(t){return t.is&&t.is("CKEditorError")&&void 0!==t.context&&null!==t.context&&"ready"===this.state&&this._isErrorComingFromThisItem(t)}},{key:"_shouldRestart",value:function(){return this.crashes.length<=this._crashNumberLimit||(this.crashes[this.crashes.length-1].date-this.crashes[this.crashes.length-1-this._crashNumberLimit].date)/this._crashNumberLimit>this._minimumNonErrorTimePeriod}}],e&&IM(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function MM(t){return MM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},MM(t)}function LM(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return NM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?NM(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function NM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function VM(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,r=[t],n=new Set,o=0;r.length>o;){var i=r[o++];if(!n.has(i)&&zM(i)&&!e.has(i))if(n.add(i),Symbol.iterator in i)try{var a,c=LM(i);try{for(c.s();!(a=c.n()).done;){var u=a.value;r.push(u)}}catch(t){c.e(t)}finally{c.f()}}catch(t){}else for(var s in i)"defaultValue"!==s&&r.push(i[s])}return n}function zM(t){var e=Object.prototype.toString.call(t),r=MM(t);return!("number"===r||"boolean"===r||"string"===r||"symbol"===r||"function"===r||"[object Date]"===e||"[object RegExp]"===e||"[object Module]"===e||null==t||t._watchdogExcluded||t instanceof EventTarget||t instanceof Event)}function $M(t){return $M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$M(t)}function qM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function UM(t,e){var r,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;if(t===e&&"object"===$M(r=t)&&null!==r)return!0;var o,i=VM(t,n),a=VM(e,n),c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return qM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qM(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(i);try{for(c.s();!(o=c.n()).done;){var u=o.value;if(a.has(u))return!0}}catch(t){c.e(t)}finally{c.f()}return!1}function WM(t){return WM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},WM(t)}var GM=["rangeJSON"];function KM(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=ZM(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function HM(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function JM(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?HM(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=rL(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):HM(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function YM(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||ZM(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZM(t,e){if(t){if("string"==typeof t)return XM(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?XM(t,e):void 0}}function XM(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QM(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rL(n.key),n)}}function eL(t,e,r){return e&&tL(t.prototype,e),r&&tL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function rL(t){var e=function(t,e){if("object"!=WM(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=WM(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==WM(e)?e:e+""}function nL(t,e,r){return e=aL(e),function(t,e){if(e&&("object"===WM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oL()?Reflect.construct(e,r||[],aL(t).constructor):e.apply(t,r))}function oL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oL=function(){return!!t})()}function iL(){return iL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=aL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},iL.apply(this,arguments)}function aL(t){return aL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aL(t)}function cL(t,e){return cL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cL(t,e)}var uL=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return QM(this,e),(r=nL(this,e,[n]))._editor=null,r._initUsingData=!0,r._editables={},r._throttledSave=vI(r._save.bind(r),"number"==typeof n.saveInterval?n.saveInterval:5e3),t&&(r._creator=function(e,r){return t.create(e,r)}),r._destructor=function(t){return t.destroy()},r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cL(t,e)}(e,t),eL(e,[{key:"editor",get:function(){return this._editor}},{key:"_item",get:function(){return this._editor}},{key:"setCreator",value:function(t){this._creator=t}},{key:"setDestructor",value:function(t){this._destructor=t}},{key:"_restart",value:function(){var t=this;return Promise.resolve().then((function(){return t.state="initializing",t._fire("stateChange"),t._destroy()})).catch((function(t){console.error("An error happened during the editor destroying.",t)})).then((function(){for(var e={},r=[],n=t._config.rootsAttributes||{},o={},i=0,a=Object.entries(t._data.roots);i<a.length;i++){var c=YM(a[i],2),u=c[0];c[1].isLoaded?(e[u]="",o[u]=n[u]||{}):r.push(u)}var s=JM(JM({},t._config),{},{extraPlugins:t._config.extraPlugins||[],lazyRoots:r,rootsAttributes:o,_watchdogInitialData:t._data});return delete s.initialData,s.extraPlugins.push(sL),t._initUsingData?t.create(e,s,s.context):dn(t._elementOrData)?t.create(t._elementOrData,s,s.context):t.create(t._editables,s,s.context)})).then((function(){t._fire("restart")}))}},{key:"create",value:function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._elementOrData,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._config,o=arguments.length>2?arguments[2]:void 0;return Promise.resolve().then((function(){return iL(aL(e.prototype),"_startErrorHandling",t).call(t),t._elementOrData=r,t._initUsingData="string"==typeof r||Object.keys(r).length>0&&"string"==typeof Object.values(r)[0],t._config=t._cloneEditorConfiguration(n)||{},t._config.context=o,t._creator(r,t._config)})).then((function(e){t._editor=e,e.model.document.on("change:data",t._throttledSave),t._lastDocumentVersion=e.model.document.version,t._data=t._getData(),t._initUsingData||(t._editables=t._getEditables()),t.state="ready",t._fire("stateChange")}))}},{key:"destroy",value:function(){var t=this;return Promise.resolve().then((function(){return t.state="destroyed",t._fire("stateChange"),iL(aL(e.prototype),"destroy",t).call(t),t._destroy()}))}},{key:"_destroy",value:function(){var t=this;return Promise.resolve().then((function(){t._stopErrorHandling(),t._throttledSave.cancel();var e=t._editor;return t._editor=null,e.model.document.off("change:data",t._throttledSave),t._destructor(e)}))}},{key:"_save",value:function(){var t=this._editor.model.document.version;try{this._data=this._getData(),this._initUsingData||(this._editables=this._getEditables()),this._lastDocumentVersion=t}catch(t){console.error(t,"An error happened during restoring editor data. Editor will be restored from the previously saved data.")}}},{key:"_setExcludedProperties",value:function(t){this._excludedProps=t}},{key:"_getData",value:function(){var t=this._editor,e=t.model.document.roots.filter((function(t){return t.isAttached()&&"$graveyard"!=t.rootName})),r=t.plugins,n=r.has("CommentsRepository")&&r.get("CommentsRepository"),o=r.has("TrackChanges")&&r.get("TrackChanges"),i={roots:{},markers:{},commentThreads:JSON.stringify([]),suggestions:JSON.stringify([])};e.forEach((function(t){i.roots[t.rootName]={content:JSON.stringify(Array.from(t.getChildren())),attributes:JSON.stringify(Array.from(t.getAttributes())),isLoaded:t._isLoaded}}));var a,c=KM(t.model.markers);try{for(c.s();!(a=c.n()).done;){var u=a.value;u._affectsData&&(i.markers[u.name]={rangeJSON:u.getRange().toJSON(),usingOperation:u._managedUsingOperations,affectsData:u._affectsData})}}catch(t){c.e(t)}finally{c.f()}return n&&(i.commentThreads=JSON.stringify(n.getCommentThreads({toJSON:!0,skipNotAttached:!0}))),o&&(i.suggestions=JSON.stringify(o.getSuggestions({toJSON:!0,skipNotAttached:!0}))),i}},{key:"_getEditables",value:function(){var t,e={},r=KM(this.editor.model.document.getRootNames());try{for(r.s();!(t=r.n()).done;){var n=t.value,o=this.editor.ui.getEditableElement(n);o&&(e[n]=o)}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"_isErrorComingFromThisItem",value:function(t){return UM(this._editor,t.context,this._excludedProps)}},{key:"_cloneEditorConfiguration",value:function(t){return pn(t,(function(t,e){return dn(t)||"context"===e?t:void 0}))}}])}(FM),sL=function(){return eL((function t(e){QM(this,t),this.editor=e,this._data=e.config.get("_watchdogInitialData")}),[{key:"init",value:function(){var t=this;this.editor.data.on("init",(function(e){e.stop(),t.editor.model.enqueueChange({isUndoable:!1},(function(e){t._restoreCollaborationData(),t._restoreEditorData(e)})),t.editor.data.fire("ready")}),{priority:999})}},{key:"_createNode",value:function(t,e){if("name"in e){var r=t.createElement(e.name,e.attributes);if(e.children){var n,o=KM(e.children);try{for(o.s();!(n=o.n()).done;){var i=n.value;r._appendChild(this._createNode(t,i))}}catch(t){o.e(t)}finally{o.f()}}return r}return t.createText(e.data,e.attributes)}},{key:"_restoreEditorData",value:function(t){var e=this,r=this.editor;Object.entries(this._data.roots).forEach((function(n){var o,i=YM(n,2),a=i[0],c=i[1],u=c.content,s=c.attributes,l=JSON.parse(u),f=JSON.parse(s),p=r.model.document.getRoot(a),d=KM(f);try{for(d.s();!(o=d.n()).done;){var h=YM(o.value,2),y=h[0],b=h[1];t.setAttribute(y,b,p)}}catch(t){d.e(t)}finally{d.f()}var v,m=KM(l);try{for(m.s();!(v=m.n()).done;){var g=v.value,w=e._createNode(t,g);t.insert(w,p,"end")}}catch(t){m.e(t)}finally{m.f()}})),Object.entries(this._data.markers).forEach((function(e){var n=YM(e,2),o=n[0],i=n[1],a=r.model.document,c=i.rangeJSON,u=c.start,s=c.end,l=function(t,e){if(null==t)return{};var r,n,o=function(t,e){if(null==t)return{};var r,n,o={},i=Object.keys(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||(o[r]=t[r]);return o}(t,e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)r=i[n],e.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(t,r)&&(o[r]=t[r])}return o}(i,GM),f=a.getRoot(u.root),p=t.createPositionFromPath(f,u.path,u.stickiness),d=t.createPositionFromPath(f,s.path,s.stickiness),h=t.createRange(p,d);t.addMarker(o,JM({range:h},l))}))}},{key:"_restoreCollaborationData",value:function(){var t=this,e=JSON.parse(this._data.commentThreads),r=JSON.parse(this._data.suggestions);e.forEach((function(e){var r=t.editor.config.get("collaboration.channelId"),n=t.editor.plugins.get("CommentsRepository");n.hasCommentThread(e.threadId)&&n.getCommentThread(e.threadId).remove(),n.addCommentThread(JM({channelId:r},e))})),r.forEach((function(e){var r=t.editor.plugins.get("TrackChangesEditing");r.hasSuggestion(e.id)?r.getSuggestion(e.id).attributes=e.attributes:r.addSuggestionData(e)}))}}])}();function lL(t){return lL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lL(t)}function fL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function dL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yL(n.key),n)}}function hL(t,e,r){return e&&dL(t.prototype,e),r&&dL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function yL(t){var e=function(t,e){if("object"!=lL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lL(e)?e:e+""}function bL(t,e,r){return e=gL(e),function(t,e){if(e&&("object"===lL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vL()?Reflect.construct(e,r||[],gL(t).constructor):e.apply(t,r))}function vL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vL=function(){return!!t})()}function mL(){return mL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},mL.apply(this,arguments)}function gL(t){return gL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},gL(t)}function wL(t,e){return wL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},wL(t,e)}var kL=Symbol("MainQueueId"),_L=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return pL(this,e),(r=bL(this,e,[n]))._watchdogs=new Map,r._context=null,r._contextProps=new Set,r._actionQueues=new OL,r._watchdogConfig=n,r._creator=function(e){return t.create(e)},r._destructor=function(t){return t.destroy()},r._actionQueues.onEmpty((function(){"initializing"===r.state&&(r.state="ready",r._fire("stateChange"))})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wL(t,e)}(e,t),hL(e,[{key:"setCreator",value:function(t){this._creator=t}},{key:"setDestructor",value:function(t){this._destructor=t}},{key:"context",get:function(){return this._context}},{key:"create",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._actionQueues.enqueue(kL,(function(){return t._contextConfig=e,t._create()}))}},{key:"getItem",value:function(t){return this._getWatchdog(t)._item}},{key:"getItemState",value:function(t){return this._getWatchdog(t).state}},{key:"add",value:function(t){var e=this,r=PL(t);return Promise.all(r.map((function(t){return e._actionQueues.enqueue(t.id,(function(){if("destroyed"===e.state)throw new Error("Cannot add items to destroyed watchdog.");if(!e._context)throw new Error("Context was not created yet. You should call the `ContextWatchdog#create()` method first.");var r;if(e._watchdogs.has(t.id))throw new Error("Item with the given id is already added: '".concat(t.id,"'."));if("editor"===t.type)return(r=new uL(null,e._watchdogConfig)).setCreator(t.creator),r._setExcludedProperties(e._contextProps),t.destructor&&r.setDestructor(t.destructor),e._watchdogs.set(t.id,r),r.on("error",(function(n,o){var i=o.error,a=o.causesRestart;e._fire("itemError",{itemId:t.id,error:i}),a&&e._actionQueues.enqueue(t.id,(function(){return new Promise((function(n){r.on("restart",(function o(){r.off("restart",o),e._fire("itemRestart",{itemId:t.id}),n()}))}))}))})),r.create(t.sourceElementOrData,t.config,e._context);throw new Error("Not supported item type: '".concat(t.type,"'."))}))})))}},{key:"remove",value:function(t){var e=this,r=PL(t);return Promise.all(r.map((function(t){return e._actionQueues.enqueue(t,(function(){var r=e._getWatchdog(t);return e._watchdogs.delete(t),r.destroy()}))})))}},{key:"destroy",value:function(){var t=this;return this._actionQueues.enqueue(kL,(function(){return t.state="destroyed",t._fire("stateChange"),mL(gL(e.prototype),"destroy",t).call(t),t._destroy()}))}},{key:"_restart",value:function(){var t=this;return this._actionQueues.enqueue(kL,(function(){return t.state="initializing",t._fire("stateChange"),t._destroy().catch((function(t){console.error("An error happened during destroying the context or items.",t)})).then((function(){return t._create()})).then((function(){return t._fire("restart")}))}))}},{key:"_create",value:function(){var t=this;return Promise.resolve().then((function(){return t._startErrorHandling(),t._creator(t._contextConfig)})).then((function(e){return t._context=e,t._contextProps=VM(t._context),Promise.all(Array.from(t._watchdogs.values()).map((function(e){return e._setExcludedProperties(t._contextProps),e.create(void 0,void 0,t._context)})))}))}},{key:"_destroy",value:function(){var t=this;return Promise.resolve().then((function(){t._stopErrorHandling();var e=t._context;return t._context=null,t._contextProps=new Set,Promise.all(Array.from(t._watchdogs.values()).map((function(t){return t.destroy()}))).then((function(){return t._destructor(e)}))}))}},{key:"_getWatchdog",value:function(t){var e=this._watchdogs.get(t);if(!e)throw new Error("Item with the given id was not registered: ".concat(t,"."));return e}},{key:"_isErrorComingFromThisItem",value:function(t){var e,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return fL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fL(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this._watchdogs.values());try{for(r.s();!(e=r.n()).done;)if(e.value._isErrorComingFromThisItem(t))return!1}catch(t){r.e(t)}finally{r.f()}return UM(this._context,t.context)}}])}(FM),OL=function(){return hL((function t(){pL(this,t),this._onEmptyCallbacks=[],this._queues=new Map,this._activeActions=0}),[{key:"onEmpty",value:function(t){this._onEmptyCallbacks.push(t)}},{key:"enqueue",value:function(t,e){var r=this,n=t===kL;this._activeActions++,this._queues.get(t)||this._queues.set(t,Promise.resolve());var o=(n?Promise.all(this._queues.values()):Promise.all([this._queues.get(kL),this._queues.get(t)])).then(e),i=o.catch((function(){}));return this._queues.set(t,i),o.finally((function(){r._activeActions--,r._queues.get(t)===i&&0===r._activeActions&&r._onEmptyCallbacks.forEach((function(t){return t()}))}))}}])}();function PL(t){return Array.isArray(t)?t:[t]}function SL(t){return SL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SL(t)}function jL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EL(n.key),n)}}function EL(t){var e=function(t,e){if("object"!=SL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=SL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==SL(e)?e:e+""}function TL(t,e,r){return e=CL(e),function(t,e){if(e&&("object"===SL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AL()?Reflect.construct(e,r||[],CL(t).constructor):e.apply(t,r))}function AL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AL=function(){return!!t})()}function xL(){return xL="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CL(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},xL.apply(this,arguments)}function CL(t){return CL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},CL(t)}function DL(t,e){return DL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},DL(t,e)}var RL=function(t){function e(t){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),!BL(t)&&void 0!==n.initialData)throw new A("editor-create-initial-data",null);void 0===(r=TL(this,e,[n])).config.get("initialData")&&r.config.set("initialData",function(t){return BL(t)?(e=t)instanceof HTMLTextAreaElement?e.value:e.innerHTML:t;var e}(t)),BL(t)&&(r.sourceElement=t),r.model.document.createRoot();var o=!r.config.get("toolbar.shouldNotGroupWhenFull"),i=new CM(r.locale,r.editing.view,{shouldToolbarGroupWhenFull:o});return r.ui=new kM(r,i),function(t){if(!ue(t.updateSourceElement))throw new A("attachtoform-missing-elementapi-interface",t);var e=t.sourceElement;if(function(t){return!!t&&"textarea"===t.tagName.toLowerCase()}(e)&&e.form){var r,n=e.form,o=function(){return t.updateSourceElement()};ue(n.submit)&&(r=n.submit,n.submit=function(){o(),r.apply(n)}),n.addEventListener("submit",o),t.on("destroy",(function(){n.removeEventListener("submit",o),r&&(n.submit=r)}))}}(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&DL(t,e)}(e,t),r=e,o=[{key:"create",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){var o=new e(t,r);n(o.initPlugins().then((function(){return o.ui.init(BL(t)?t:null)})).then((function(){return o.data.init(o.config.get("initialData"))})).then((function(){return o.fire("ready")})).then((function(){return o})))}))}}],(n=[{key:"destroy",value:function(){return this.sourceElement&&this.updateSourceElement(),this.ui.destroy(),xL(CL(e.prototype),"destroy",this).call(this)}}])&&jL(r.prototype,n),o&&jL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(Hj(zj));RL.Context=xa,RL.EditorWatchdog=uL,RL.ContextWatchdog=_L;const IL=RL;function BL(t){return dn(t)}function FL(t){return FL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},FL(t)}function ML(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return LL(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?LL(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function LL(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function NL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VL(n.key),n)}}function VL(t){var e=function(t,e){if("object"!=FL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=FL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==FL(e)?e:e+""}function zL(t,e,r){return e=qL(e),function(t,e){if(e&&("object"===FL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$L()?Reflect.construct(e,r||[],qL(t).constructor):e.apply(t,r))}function $L(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($L=function(){return!!t})()}function qL(t){return qL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qL(t)}function UL(t,e){return UL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UL(t,e)}var WL=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=zL(this,e,[t])).attributeKey=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UL(t,e)}(e,t),r=e,n=[{key:"refresh",value:function(){var t=this.editor.model,e=t.document;this.value=this._getValueFromFirstAllowedNode(),this.isEnabled=t.schema.checkAttributeInSelection(e.selection,this.attributeKey)}},{key:"execute",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.model,n=r.document.selection,o=void 0===e.forceValue?!this.value:e.forceValue;r.change((function(e){if(n.isCollapsed)o?e.setSelectionAttribute(t.attributeKey,!0):e.removeSelectionAttribute(t.attributeKey);else{var i,a=ML(r.schema.getValidRanges(n.getRanges(),t.attributeKey));try{for(a.s();!(i=a.n()).done;){var c=i.value;o?e.setAttribute(t.attributeKey,o,c):e.removeAttribute(t.attributeKey,c)}}catch(t){a.e(t)}finally{a.f()}}}))}},{key:"_getValueFromFirstAllowedNode",value:function(){var t=this.editor.model,e=t.schema,r=t.document.selection;if(r.isCollapsed)return r.hasAttribute(this.attributeKey);var n,o=ML(r.getRanges());try{for(o.s();!(n=o.n()).done;){var i,a=ML(n.value.getItems());try{for(a.s();!(i=a.n()).done;){var c=i.value;if(e.checkAttribute(c,this.attributeKey))return c.hasAttribute(this.attributeKey)}}catch(t){a.e(t)}finally{a.f()}}}catch(t){o.e(t)}finally{o.f()}return!1}}],n&&NL(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function GL(t){return GL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GL(t)}function KL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HL(n.key),n)}}function HL(t){var e=function(t,e){if("object"!=GL(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=GL(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==GL(e)?e:e+""}function JL(t,e,r){return e=ZL(e),function(t,e){if(e&&("object"===GL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YL()?Reflect.construct(e,r||[],ZL(t).constructor):e.apply(t,r))}function YL(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YL=function(){return!!t})()}function ZL(t){return ZL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZL(t)}function XL(t,e){return XL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XL(t,e)}var QL="bold",tN=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),JL(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XL(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"BoldEditing"}}],(n=[{key:"init",value:function(){var t=this.editor,e=this.editor.t;t.model.schema.extend("$text",{allowAttributes:QL}),t.model.schema.setAttributeProperties(QL,{isFormatting:!0,copyOnEnter:!0}),t.conversion.attributeToElement({model:QL,view:"strong",upcastAlso:["b",function(t){var e=t.getStyle("font-weight");return e&&("bold"==e||Number(e)>=600)?{name:!0,styles:["font-weight"]}:null}]}),t.commands.add(QL,new WL(t,QL)),t.keystrokes.set("CTRL+B",QL),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Bold text"),keystroke:"CTRL+B"}]})}}])&&KL(r.prototype,n),o&&KL(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function eN(t){return eN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eN(t)}function rN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nN(n.key),n)}}function nN(t){var e=function(t,e){if("object"!=eN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=eN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eN(e)?e:e+""}function oN(t,e,r){return e=aN(e),function(t,e){if(e&&("object"===eN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iN()?Reflect.construct(e,r||[],aN(t).constructor):e.apply(t,r))}function iN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iN=function(){return!!t})()}function aN(t){return aN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aN(t)}function cN(t,e){return cN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cN(t,e)}var uN="bold",sN=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oN(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cN(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"BoldUI"}}],(n=[{key:"init",value:function(){var t=this,e=this.editor,r=e.t;e.ui.componentFactory.add(uN,(function(n){var o=e.commands.get(uN),i=new bA(n);return i.set({label:r("Bold"),icon:Jj,keystroke:"CTRL+B",tooltip:!0,isToggleable:!0}),i.bind("isOn","isEnabled").to(o,"value","isEnabled"),t.listenTo(i,"execute",(function(){e.execute(uN),e.editing.view.focus()})),i}))}}])&&rN(r.prototype,n),o&&rN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function lN(t){return lN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},lN(t)}function fN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,pN(n.key),n)}}function pN(t){var e=function(t,e){if("object"!=lN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=lN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==lN(e)?e:e+""}function dN(t,e,r){return e=yN(e),function(t,e){if(e&&("object"===lN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,hN()?Reflect.construct(e,r||[],yN(t).constructor):e.apply(t,r))}function hN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(hN=function(){return!!t})()}function yN(t){return yN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},yN(t)}function bN(t,e){return bN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},bN(t,e)}var vN=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dN(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bN(t,e)}(e,t),r=e,(n=[{key:"requires",get:function(){return[tN,sN]}},{key:"pluginName",get:function(){return"Bold"}}])&&fN(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ta);function mN(t){return mN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},mN(t)}function gN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,wN(n.key),n)}}function wN(t){var e=function(t,e){if("object"!=mN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=mN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==mN(e)?e:e+""}var kN=function(){return t=function t(e){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._batch=null,this.model=e,this._size=0,this.limit=n,this._isLocked=!1,this._changeCallback=function(t,e){e.isLocal&&e.isUndoable&&e!==r._batch&&r._reset(!0)},this._selectionChangeCallback=function(){r._reset()},this.model.document.on("change",this._changeCallback),this.model.document.selection.on("change:range",this._selectionChangeCallback),this.model.document.selection.on("change:attribute",this._selectionChangeCallback)},e=[{key:"batch",get:function(){return this._batch||(this._batch=this.model.createBatch({isTyping:!0})),this._batch}},{key:"size",get:function(){return this._size}},{key:"input",value:function(t){this._size+=t,this._size>=this.limit&&this._reset(!0)}},{key:"isLocked",get:function(){return this._isLocked}},{key:"lock",value:function(){this._isLocked=!0}},{key:"unlock",value:function(){this._isLocked=!1}},{key:"destroy",value:function(){this.model.document.off("change",this._changeCallback),this.model.document.selection.off("change:range",this._selectionChangeCallback),this.model.document.selection.off("change:attribute",this._selectionChangeCallback)}},{key:"_reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isLocked&&!t||(this._batch=null,this._size=0)}}],e&&gN(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}();function _N(t){return _N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_N(t)}function ON(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PN(n.key),n)}}function PN(t){var e=function(t,e){if("object"!=_N(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_N(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_N(e)?e:e+""}function SN(t,e,r){return e=TN(e),function(t,e){if(e&&("object"===_N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jN()?Reflect.construct(e,r||[],TN(t).constructor):e.apply(t,r))}function jN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jN=function(){return!!t})()}function EN(){return EN="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=TN(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},EN.apply(this,arguments)}function TN(t){return TN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},TN(t)}function AN(t,e){return AN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},AN(t,e)}var xN=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=SN(this,e,[t]))._buffer=new kN(t.model,r),n._isEnabledBasedOnSelection=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AN(t,e)}(e,t),r=e,n=[{key:"buffer",get:function(){return this._buffer}},{key:"destroy",value:function(){EN(TN(e.prototype),"destroy",this).call(this),this._buffer.destroy()}},{key:"execute",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.model,n=r.document,o=e.text||"",i=o.length,a=n.selection;if(e.selection?a=e.selection:e.range&&(a=r.createSelection(e.range)),r.canEditAt(a)){var c=e.resultRange;r.enqueueChange(this._buffer.batch,(function(e){t._buffer.lock();var u=Array.from(n.selection.getAttributes());r.deleteContent(a),o&&r.insertContent(e.createText(o,u),a),c?e.setSelection(c):a.is("documentSelection")||e.setSelection(a),t._buffer.unlock(),t._buffer.input(i)}))}}}],n&&ON(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function CN(t){return CN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},CN(t)}function DN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,RN(n.key),n)}}function RN(t){var e=function(t,e){if("object"!=CN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=CN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==CN(e)?e:e+""}function IN(t,e,r){return e=FN(e),function(t,e){if(e&&("object"===CN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,BN()?Reflect.construct(e,r||[],FN(t).constructor):e.apply(t,r))}function BN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(BN=function(){return!!t})()}function FN(t){return FN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},FN(t)}function MN(t,e){return MN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},MN(t,e)}var LN=["insertText","insertReplacementText"],NN=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=IN(this,e,[t])).focusObserver=t.getObserver(eh),i.isAndroid&&LN.push("insertCompositionText");var n=t.document;return n.on("beforeinput",(function(e,o){if(r.isEnabled){var i=o.data,a=o.targetRanges,c=o.inputType,u=o.domEvent;if(LN.includes(c)){r.focusObserver.flush();var s=new y(n,"insertText");n.fire(s,new Ip(t,u,{text:i,selection:t.createSelection(a)})),s.stop.called&&e.stop()}}})),n.on("compositionend",(function(e,o){var a=o.data,c=o.domEvent;r.isEnabled&&!i.isAndroid&&a&&n.fire("insertText",new Ip(t,c,{text:a,selection:n.selection}))}),{priority:"lowest"}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&MN(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(){}},{key:"stopObserving",value:function(){}}])&&DN(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function VN(t){return VN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VN(t)}function zN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,$N(n.key),n)}}function $N(t){var e=function(t,e){if("object"!=VN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=VN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==VN(e)?e:e+""}function qN(t,e,r){return e=WN(e),function(t,e){if(e&&("object"===VN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,UN()?Reflect.construct(e,r||[],WN(t).constructor):e.apply(t,r))}function UN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(UN=function(){return!!t})()}function WN(t){return WN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},WN(t)}function GN(t,e){return GN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},GN(t,e)}var KN=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),qN(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GN(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"Input"}}],(n=[{key:"init",value:function(){var t=this.editor,e=t.model,r=t.editing.view,n=e.document.selection;r.addObserver(NN);var o=new xN(t,t.config.get("typing.undoStep")||20);t.commands.add("insertText",o),t.commands.add("input",o),this.listenTo(r.document,"insertText",(function(n,o){r.document.isComposing||o.preventDefault();var a=o.text,c=o.selection,u=o.resultRange,s=Array.from(c.getRanges()).map((function(e){return t.editing.mapper.toModelRange(e)})),l=a;if(i.isAndroid){var f=Array.from(s[0].getItems()).reduce((function(t,e){return t+(e.is("$textProxy")?e.data:"")}),"");f&&(f.length<=l.length?l.startsWith(f)&&(l=l.substring(f.length),s[0].start=s[0].start.getShiftedBy(f.length)):f.startsWith(l)&&(s[0].start=s[0].start.getShiftedBy(l.length),l=""))}var p={text:l,selection:e.createSelection(s)};u&&(p.resultRange=t.editing.mapper.toModelRange(u)),t.execute("insertText",p),r.scrollToTheSelection()})),i.isAndroid?this.listenTo(r.document,"keydown",(function(t,i){!n.isCollapsed&&229==i.keyCode&&r.document.isComposing&&HN(e,o)})):this.listenTo(r.document,"compositionstart",(function(){n.isCollapsed||HN(e,o)}))}}])&&zN(r.prototype,n),o&&zN(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function HN(t,e){if(e.isEnabled){var r=e.buffer;r.lock(),t.enqueueChange(r.batch,(function(){t.deleteContent(t.document.selection)})),r.unlock()}}function JN(t){return JN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},JN(t)}function YN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,ZN(n.key),n)}}function ZN(t){var e=function(t,e){if("object"!=JN(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=JN(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==JN(e)?e:e+""}function XN(t,e,r){return e=tV(e),function(t,e){if(e&&("object"===JN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,QN()?Reflect.construct(e,r||[],tV(t).constructor):e.apply(t,r))}function QN(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(QN=function(){return!!t})()}function tV(t){return tV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},tV(t)}function eV(t,e){return eV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},eV(t,e)}var rV=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=XN(this,e,[t])).direction=r,n._buffer=new kN(t.model,t.config.get("typing.undoStep")),n._isEnabledBasedOnSelection=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eV(t,e)}(e,t),r=e,n=[{key:"buffer",get:function(){return this._buffer}},{key:"execute",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=this.editor.model,n=r.document;r.enqueueChange(this._buffer.batch,(function(o){t._buffer.lock();var i=o.createSelection(e.selection||n.selection);if(r.canEditAt(i)){var a=e.sequence||1,c=i.isCollapsed;if(i.isCollapsed&&r.modifySelection(i,{direction:t.direction,unit:e.unit,treatEmojiAsSingleUnit:!0}),t._shouldEntireContentBeReplacedWithParagraph(a))t._replaceEntireContentWithParagraph(o);else if(t._shouldReplaceFirstBlockWithParagraph(i,a))t.editor.execute("paragraph",{selection:i});else if(!i.isCollapsed){var u=0;i.getFirstRange().getMinimalFlatRanges().forEach((function(t){u+=xt(t.getWalker({singleCharacters:!0,ignoreElementEnd:!0,shallow:!0}))})),r.deleteContent(i,{doNotResetEntireContent:c,direction:t.direction}),t._buffer.input(u),o.setSelection(i),t._buffer.unlock()}}}))}},{key:"_shouldEntireContentBeReplacedWithParagraph",value:function(t){if(t>1)return!1;var e=this.editor.model,r=e.document.selection,n=e.schema.getLimitElement(r);if(!r.isCollapsed||!r.containsEntireContent(n))return!1;if(!e.schema.checkChild(n,"paragraph"))return!1;var o=n.getChild(0);return!o||!o.is("element","paragraph")}},{key:"_replaceEntireContentWithParagraph",value:function(t){var e=this.editor.model,r=e.document.selection,n=e.schema.getLimitElement(r),o=t.createElement("paragraph");t.remove(t.createRangeIn(n)),t.insert(o,n),t.setSelection(o,0)}},{key:"_shouldReplaceFirstBlockWithParagraph",value:function(t,e){var r=this.editor.model;if(e>1||"backward"!=this.direction)return!1;if(!t.isCollapsed)return!1;var n=t.getFirstPosition(),o=r.schema.getLimitElement(n),i=o.getChild(0);return n.parent==i&&!!t.containsEntireContent(i)&&!!r.schema.checkChild(o,"paragraph")&&"paragraph"!=i.name}}],n&&YN(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function nV(t){return nV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},nV(t)}function oV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function iV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,aV(n.key),n)}}function aV(t){var e=function(t,e){if("object"!=nV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=nV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==nV(e)?e:e+""}function cV(t,e,r){return e=sV(e),function(t,e){if(e&&("object"===nV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,uV()?Reflect.construct(e,r||[],sV(t).constructor):e.apply(t,r))}function uV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(uV=function(){return!!t})()}function sV(t){return sV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},sV(t)}function lV(t,e){return lV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},lV(t,e)}var fV="word",pV="selection",dV="backward",hV="forward",yV={deleteContent:{unit:pV,direction:dV},deleteContentBackward:{unit:"codePoint",direction:dV},deleteWordBackward:{unit:fV,direction:dV},deleteHardLineBackward:{unit:pV,direction:dV},deleteSoftLineBackward:{unit:pV,direction:dV},deleteContentForward:{unit:"character",direction:hV},deleteWordForward:{unit:fV,direction:hV},deleteHardLineForward:{unit:pV,direction:hV},deleteSoftLineForward:{unit:pV,direction:hV}},bV=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=cV(this,e,[t]);var n=t.document,o=0;return n.on("keydown",(function(){o++})),n.on("keyup",(function(){o=0})),n.on("beforeinput",(function(e,a){if(r.isEnabled){var c=a.targetRanges,u=a.domEvent,s=a.inputType,l=yV[s];if(l){var f={direction:l.direction,unit:l.unit,sequence:o};f.unit==pV&&(f.selectionToRemove=t.createSelection(c[0])),"deleteContentBackward"===s&&(i.isAndroid&&(f.sequence=1),function(t){if(1!=t.length||t[0].isCollapsed)return!1;var e,r=0,n=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return oV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?oV(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t[0].getWalker({direction:"backward",singleCharacters:!0,ignoreElementEnd:!0}));try{for(n.s();!(e=n.n()).done;){var o=e.value.nextPosition;if(o.parent.is("$text")){var i=o.parent.data,a=o.offset;if(Vi(i,a)||zi(i,a)||Gi(i,a))continue;r++}else r++;if(r>1)return!0}}catch(t){n.e(t)}finally{n.f()}return!1}(c)&&(f.unit=pV,f.selectionToRemove=t.createSelection(c)));var p=new Us(n,"delete",c[0]);n.fire(p,new Ip(t,u,f)),p.stop.called&&e.stop()}}})),i.isBlink&&function(t){var e=t.view,r=e.document,n=null,o=!1;function i(t){return t==zo.backspace||t==zo.delete}function a(t){return t==zo.backspace?dV:hV}r.on("keydown",(function(t,e){var r=e.keyCode;n=r,o=!1})),r.on("keyup",(function(c,u){var s=u.keyCode,l=u.domEvent,f=r.selection,p=t.isEnabled&&s==n&&i(s)&&!f.isCollapsed&&!o;if(n=null,p){var d=f.getFirstRange(),h=new Us(r,"delete",d),y={unit:pV,direction:a(s),selectionToRemove:f};r.fire(h,new Ip(e,l,y))}})),r.on("beforeinput",(function(t,e){var r=e.inputType,c=yV[r];i(n)&&c&&c.direction==a(n)&&(o=!0)}),{priority:"high"}),r.on("beforeinput",(function(t,e){var r=e.inputType,o=e.data;n==zo.delete&&"insertText"==r&&""==o&&t.stop()}),{priority:"high"})}(r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lV(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(){}},{key:"stopObserving",value:function(){}}])&&iV(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function vV(t){return vV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vV(t)}function mV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gV(n.key),n)}}function gV(t){var e=function(t,e){if("object"!=vV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=vV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==vV(e)?e:e+""}function wV(t,e,r){return e=_V(e),function(t,e){if(e&&("object"===vV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kV()?Reflect.construct(e,r||[],_V(t).constructor):e.apply(t,r))}function kV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kV=function(){return!!t})()}function _V(t){return _V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_V(t)}function OV(t,e){return OV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},OV(t,e)}var PV=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wV(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&OV(t,e)}(e,t),r=e,n=[{key:"init",value:function(){var t=this,e=this.editor,r=e.editing.view,n=r.document,o=e.model.document;r.addObserver(bV),this._undoOnBackspace=!1;var i=new rV(e,"forward");e.commands.add("deleteForward",i),e.commands.add("forwardDelete",i),e.commands.add("delete",new rV(e,"backward")),this.listenTo(n,"delete",(function(t,o){n.isComposing||o.preventDefault();var i=o.direction,a=o.sequence,c=o.selectionToRemove,u=o.unit,s="forward"===i?"deleteForward":"delete",l={sequence:a};if("selection"==u){var f=Array.from(c.getRanges()).map((function(t){return e.editing.mapper.toModelRange(t)}));l.selection=e.model.createSelection(f)}else l.unit=u;e.execute(s,l),r.scrollToTheSelection()}),{priority:"low"}),this.editor.plugins.has("UndoEditing")&&(this.listenTo(n,"delete",(function(r,n){t._undoOnBackspace&&"backward"==n.direction&&1==n.sequence&&"codePoint"==n.unit&&(t._undoOnBackspace=!1,e.execute("undo"),n.preventDefault(),r.stop())}),{context:"$capture"}),this.listenTo(o,"change",(function(){t._undoOnBackspace=!1})))}},{key:"requestUndoOnBackspace",value:function(){this.editor.plugins.has("UndoEditing")&&(this._undoOnBackspace=!0)}}],o=[{key:"pluginName",get:function(){return"Delete"}}],n&&mV(r.prototype,n),o&&mV(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function SV(t){return SV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SV(t)}function jV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,EV(n.key),n)}}function EV(t){var e=function(t,e){if("object"!=SV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=SV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==SV(e)?e:e+""}function TV(t,e,r){return e=xV(e),function(t,e){if(e&&("object"===SV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,AV()?Reflect.construct(e,r||[],xV(t).constructor):e.apply(t,r))}function AV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(AV=function(){return!!t})()}function xV(t){return xV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},xV(t)}function CV(t,e){return CV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},CV(t,e)}var DV=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),TV(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CV(t,e)}(e,t),r=e,(n=[{key:"requires",get:function(){return[KN,PV]}},{key:"pluginName",get:function(){return"Typing"}}])&&jV(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ta);function RV(t){return RV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RV(t)}function IV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,BV(n.key),n)}}function BV(t){var e=function(t,e){if("object"!=RV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=RV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==RV(e)?e:e+""}function FV(t,e,r){return e=LV(e),function(t,e){if(e&&("object"===RV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,MV()?Reflect.construct(e,r||[],LV(t).constructor):e.apply(t,r))}function MV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(MV=function(){return!!t})()}function LV(t){return LV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},LV(t)}function NV(t,e){return NV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},NV(t,e)}var VV=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=FV(this,e)).model=t,n.testCallback=r,n._hasMatch=!1,n.set("isEnabled",!0),n.on("change:isEnabled",(function(){n.isEnabled?n._startListening():(n.stopListening(t.document.selection),n.stopListening(t.document))})),n._startListening(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NV(t,e)}(e,t),r=e,n=[{key:"hasMatch",get:function(){return this._hasMatch}},{key:"_startListening",value:function(){var t=this,e=this.model.document;this.listenTo(e.selection,"change:range",(function(r,n){n.directChange&&(e.selection.isCollapsed?t._evaluateTextBeforeSelection("selection"):t.hasMatch&&(t.fire("unmatched"),t._hasMatch=!1))})),this.listenTo(e,"change:data",(function(e,r){!r.isUndo&&r.isLocal&&t._evaluateTextBeforeSelection("data",{batch:r})}))}},{key:"_evaluateTextBeforeSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.model,n=r.document.selection,o=function(t,e){var r=t.start;return{text:Array.from(t.getWalker({ignoreElementEnd:!1})).reduce((function(t,n){var o=n.item;return o.is("$text")||o.is("$textProxy")?t+o.data:(r=e.createPositionAfter(o),"")}),""),range:e.createRange(r,t.end)}}(r.createRange(r.createPositionAt(n.focus.parent,0),n.focus),r),i=o.text,a=o.range,c=this.testCallback(i);if(!c&&this.hasMatch&&this.fire("unmatched"),this._hasMatch=!!c,c){var u=Object.assign(e,{text:i,range:a});"object"==RV(c)&&Object.assign(u,c),this.fire("matched:".concat(t),u)}}}],n&&IV(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(mt());function zV(t){return new RegExp("(^|\\s)(".concat(t,")([^").concat(t,"]*)(").concat(t,")$"))}zV('"'),zV("'"),zV("'"),zV('"'),zV('"'),zV("'");var $V=r(7930);function qV(t){return qV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qV(t)}function UV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,WV(n.key),n)}}function WV(t){var e=function(t,e){if("object"!=qV(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qV(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qV(e)?e:e+""}function GV(t,e,r){return e=HV(e),function(t,e){if(e&&("object"===qV(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,KV()?Reflect.construct(e,r||[],HV(t).constructor):e.apply(t,r))}function KV(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(KV=function(){return!!t})()}function HV(t){return HV=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},HV(t)}function JV(t,e){return JV=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},JV(t,e)}Da()($V.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),$V.A.locals;var YV=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=GV(this,e,[t])).domEventType=["paste","copy","cut","drop","dragover","dragstart","dragend","dragenter","dragleave"];var n=r.document;function o(t){return function(e,r){r.preventDefault();var o=r.dropRange?[r.dropRange]:null,i=new y(n,t);n.fire(i,{dataTransfer:r.dataTransfer,method:e.name,targetRanges:o,target:r.target,domEvent:r.domEvent}),i.stop.called&&r.stopPropagation()}}return r.listenTo(n,"paste",o("clipboardInput"),{priority:"low"}),r.listenTo(n,"drop",o("clipboardInput"),{priority:"low"}),r.listenTo(n,"dragover",o("dragging"),{priority:"low"}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&JV(t,e)}(e,t),r=e,(n=[{key:"onDomEvent",value:function(t){var e="clipboardData"in t?t.clipboardData:t.dataTransfer,r="drop"==t.type||"paste"==t.type,n={dataTransfer:new _h(e,{cacheFiles:r})};"drop"!=t.type&&"dragover"!=t.type||(n.dropRange=function(t,e){var r,n=e.target.ownerDocument,o=e.clientX,i=e.clientY;return n.caretRangeFromPoint&&n.caretRangeFromPoint(o,i)?r=n.caretRangeFromPoint(o,i):e.rangeParent&&((r=n.createRange()).setStart(e.rangeParent,e.rangeOffset),r.collapse(!0)),r?t.domConverter.domRangeToView(r):null}(this.view,t)),this.fire(t.type,t,n)}}])&&UV(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}($p);function ZV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var XV=["figcaption","li"],QV=["ol","ul"];function tz(t){if(t.is("$text")||t.is("$textProxy"))return t.data;if(t.is("element","img")&&t.hasAttribute("alt"))return t.getAttribute("alt");if(t.is("element","br"))return"\n";var e,r,n,o="",i=null,a=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return ZV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ZV(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t.getChildren());try{for(a.s();!(e=a.n()).done;){var c=e.value;o+=(r=c,((n=i)?r.is("element","li")&&!r.isEmpty&&r.getChild(0).is("containerElement")||QV.includes(r.name)&&QV.includes(n.name)?"\n\n":r.is("containerElement")||n.is("containerElement")?XV.includes(r.name)||XV.includes(n.name)?"\n":"\n\n":"":"")+tz(c)),i=c}}catch(t){a.e(t)}finally{a.f()}return o}const ez=function(t){return t==t&&!rt(t)},rz=function(t,e){return function(r){return null!=r&&r[t]===e&&(void 0!==e||t in Object(r))}},nz=function(t){var e=function(t){for(var e=lr(t),r=e.length;r--;){var n=e[r],o=t[n];e[r]=[n,o,ez(o)]}return e}(t);return 1==e.length&&e[0][2]?rz(e[0][0],e[0][1]):function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var c=r[o];if(a&&c[2]?c[1]!==t[c[0]]:!(c[0]in t))return!1}for(;++o<i;){var u=(c=r[o])[0],s=t[u],l=c[1];if(a&&c[2]){if(void 0===s&&!(u in t))return!1}else{var f=new Ce;if(n)var p=n(s,l,u,t,e,f);if(!(void 0===p?Rd(l,s,3,n,f):p))return!1}}return!0}(r,t,e)}},oz=function(t,e){return null!=t&&e in Object(t)},iz=function(t,e){return null!=t&&function(t,e,r){for(var n=-1,o=(e=zc(e,t)).length,i=!1;++n<o;){var a=$c(e[n]);if(!(i=null!=t&&r(t,a)))break;t=t[a]}return i||++n!=o?i:!!(o=null==t?0:t.length)&&He(o)&&Ke(a,o)&&(Ut(t)||ze(t))}(t,e,oz)},az=function(t){return xc(t)?(e=$c(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return qc(e,t)}}(t);var e},cz=function(t){return"function"==typeof t?t:null==t?Qo:"object"==typeof t?Ut(t)?(e=t[0],r=t[1],xc(e)&&ez(r)?rz($c(e),r):function(t){var n=Gc(t,e);return void 0===n&&n===r?iz(t,e):Rd(r,n,3)}):nz(t):az(t);var e,r},uz=function(t,e){var r={};return e=cz(e),function(t,e){t&&Jo(t,e,lr)}(t,(function(t,n,o){Re(r,n,e(t,n,o))})),r};function sz(t){return sz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sz(t)}function lz(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function fz(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?lz(Object(r),!0).forEach((function(e){pz(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function pz(t,e,r){return(e=mz(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function dz(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=yz(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function hz(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||yz(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yz(t,e){if(t){if("string"==typeof t)return bz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?bz(t,e):void 0}}function bz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function vz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mz(n.key),n)}}function mz(t){var e=function(t,e){if("object"!=sz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sz(e)?e:e+""}function gz(t,e,r){return e=kz(e),function(t,e){if(e&&("object"===sz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wz()?Reflect.construct(e,r||[],kz(t).constructor):e.apply(t,r))}function wz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wz=function(){return!!t})()}function kz(t){return kz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kz(t)}function _z(t,e){return _z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_z(t,e)}var Oz=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=gz(this,e,arguments))._markersToCopy=new Map,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_z(t,e)}(e,t),r=e,n=[{key:"_registerMarkerToCopy",value:function(t,e){var r=Array.isArray(e)?e:this._mapRestrictionPresetToActions(e);r.length&&this._markersToCopy.set(t,r)}},{key:"_mapRestrictionPresetToActions",value:function(t){switch(t){case"always":return["copy","cut","dragstart"];case"default":return["cut","dragstart"];default:return[]}}},{key:"_copySelectedFragmentWithMarkers",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(t){return t.model.getSelectedContent(t.model.document.selection)};return this.editor.model.change((function(o){var i=o.model.document.selection;o.setSelection(e);for(var a=r._insertFakeMarkersIntoSelection(o,o.model.document.selection,t),c=n(o),u=r._removeFakeMarkersInsideElement(o,c),s=0,l=Object.entries(a);s<l.length;s++){var f=hz(l[s],2),p=f[0],d=f[1];u[p]||(u[p]=o.createRangeIn(c));var h,y=dz(d);try{for(y.s();!(h=y.n()).done;){var b=h.value;o.remove(b)}}catch(t){y.e(t)}finally{y.f()}}c.markers.clear();for(var v=0,m=Object.entries(u);v<m.length;v++){var g=hz(m[v],2),w=g[0],k=g[1];c.markers.set(w,k)}return o.setSelection(i),c}))}},{key:"_pasteMarkersIntoTransformedElement",value:function(t,e){var r=this,n=this._getCopyableMarkersFromRangeMap(t);return this.editor.model.change((function(t){var o,i=r._insertFakeMarkersElements(t,n),a=e(t),c=r._removeFakeMarkersInsideElement(t,a),u=dz(Object.values(i).flat());try{for(u.s();!(o=u.n()).done;){var s=o.value;t.remove(s)}}catch(t){u.e(t)}finally{u.f()}for(var l=0,f=Object.entries(c);l<f.length;l++){var p=hz(f[l],2),d=p[0],h=p[1],y=t.model.markers.has(d)?r._getUniqueMarkerName(d):d;t.addMarker(y,{usingOperation:!0,affectsData:!0,range:h})}return a}))}},{key:"_forceMarkersCopy",value:function(t,e){var r=this._markersToCopy.get(t);this._markersToCopy.set(t,this._mapRestrictionPresetToActions("always")),e(),r?this._markersToCopy.set(t,r):this._markersToCopy.delete(t)}},{key:"_canPerformMarkerClipboardAction",value:function(t,e){var r=hz(t.split(":"),1)[0];return e?(this._markersToCopy.get(r)||[]).includes(e):this._markersToCopy.has(r)}},{key:"_setUniqueMarkerNamesInFragment",value:function(t){var e=Array.from(t.markers);t.markers.clear();for(var r=0,n=e;r<n.length;r++){var o=hz(n[r],2),i=o[0],a=o[1],c=this._canPerformMarkerClipboardAction(i,null)?this._getUniqueMarkerName(i):i;t.markers.set(c,a)}}},{key:"_insertFakeMarkersIntoSelection",value:function(t,e,r){var n=this._getCopyableMarkersFromSelection(t,e,r);return this._insertFakeMarkersElements(t,n)}},{key:"_getCopyableMarkersFromSelection",value:function(t,e,r){var n=this;return Array.from(e.getRanges()).flatMap((function(e){return Array.from(t.model.markers.getMarkersIntersectingRange(e))})).filter((function(t){return n._canPerformMarkerClipboardAction(t.name,r)})).map((function(t){return{name:t.name,range:t.getRange()}}))}},{key:"_getCopyableMarkersFromRangeMap",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return(t instanceof Map?Array.from(t.entries()):Object.entries(t)).map((function(t){var e=hz(t,2);return{name:e[0],range:e[1]}})).filter((function(t){return e._canPerformMarkerClipboardAction(t.name,r)}))}},{key:"_insertFakeMarkersElements",value:function(t,e){var r,n={},o=e.flatMap((function(t){var e=t.range;return[{position:e.start,marker:t,type:"start"},{position:e.end,marker:t,type:"end"}]})).sort((function(t,e){var r=t.position,n=e.position;return r.isBefore(n)?1:-1})),i=dz(o);try{for(i.s();!(r=i.n()).done;){var a=r.value,c=a.position,u=a.marker,s=a.type,l=t.createElement("$marker",{"data-name":u.name,"data-type":s});n[u.name]||(n[u.name]=[]),n[u.name].push(l),t.insert(l,c)}}catch(t){i.e(t)}finally{i.f()}return n}},{key:"_removeFakeMarkersInsideElement",value:function(t,e){var r=this,n=this._getAllFakeMarkersFromElement(t,e).reduce((function(e,n){var o=n.markerElement&&t.createPositionBefore(n.markerElement),i=e[n.name];return i&&i.start&&i.end&&(e[r._getUniqueMarkerName(n.name)]=e[n.name],i=null),e[n.name]=fz(fz({},i),{},pz({},n.type,o)),n.markerElement&&t.remove(n.markerElement),e}),{});return uz(n,(function(r){return new Tb(r.start||t.createPositionFromPath(e,[0]),r.end||t.createPositionAt(e,"end"))}))}},{key:"_getAllFakeMarkersFromElement",value:function(t,e){var r,n,o=Array.from(t.createRangeIn(e)).flatMap((function(t){var e=t.item;if(!e.is("element","$marker"))return[];var r=e.getAttribute("data-name"),n=e.getAttribute("data-type");return[{markerElement:e,name:r,type:n}]})),i=[],a=[],c=dz(o);try{var u=function(){var t=r.value;"end"===t.type&&(o.some((function(e){return e.name===t.name&&"start"===e.type}))||i.push({markerElement:null,name:t.name,type:"start"})),"start"===t.type&&(o.some((function(e){return e.name===t.name&&"end"===e.type}))||a.unshift({markerElement:null,name:t.name,type:"end"}))};for(c.s();!(r=c.n()).done;)u()}catch(t){c.e(t)}finally{c.f()}return[].concat(i,function(t){if(Array.isArray(t))return bz(t)}(n=o)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||yz(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),a)}},{key:"_getUniqueMarkerName",value:function(t){var e=t.split(":"),r=v().substring(1,6);return 3===e.length?"".concat(e.slice(0,2).join(":"),":").concat(r):"".concat(e.join(":"),":").concat(r)}}],o=[{key:"pluginName",get:function(){return"ClipboardMarkersUtils"}}],n&&vz(r.prototype,n),o&&vz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function Pz(t){return Pz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pz(t)}function Sz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,jz(n.key),n)}}function jz(t){var e=function(t,e){if("object"!=Pz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Pz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pz(e)?e:e+""}function Ez(t,e,r){return e=Az(e),function(t,e){if(e&&("object"===Pz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Tz()?Reflect.construct(e,r||[],Az(t).constructor):e.apply(t,r))}function Tz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Tz=function(){return!!t})()}function Az(t){return Az=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Az(t)}function xz(t,e){return xz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},xz(t,e)}var Cz=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ez(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xz(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"ClipboardPipeline"}},{key:"requires",get:function(){return[Oz]}}],(n=[{key:"init",value:function(){this.editor.editing.view.addObserver(YV),this._setupPasteDrop(),this._setupCopyCut()}},{key:"_fireOutputTransformationEvent",value:function(t,e,r){var n=this.editor.plugins.get("ClipboardMarkersUtils")._copySelectedFragmentWithMarkers(r,e);this.fire("outputTransformation",{dataTransfer:t,content:n,method:r})}},{key:"_setupPasteDrop",value:function(){var t=this,e=this.editor,r=e.model,n=e.editing.view,o=n.document,i=this.editor.plugins.get("ClipboardMarkersUtils");this.listenTo(o,"clipboardInput",(function(t,r){"paste"!=r.method||e.model.canEditAt(e.model.document.selection)||t.stop()}),{priority:"highest"}),this.listenTo(o,"clipboardInput",(function(e,r){var o,i,a=r.dataTransfer;if(r.content)o=r.content;else{var c="";a.getData("text/html")?c=function(t){return t.replace(/<span(?: class="Apple-converted-space"|)>(\s+)<\/span>/g,(function(t,e){return 1==e.length?" ":e})).replace(/<!--[\s\S]*?-->/g,"")}(a.getData("text/html")):a.getData("text/plain")&&(((i=(i=a.getData("text/plain")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\r?\n\r?\n/g,"</p><p>").replace(/\r?\n/g,"<br>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/^\s/,"&nbsp;").replace(/\s$/,"&nbsp;").replace(/\s\s/g," &nbsp;")).includes("</p><p>")||i.includes("<br>"))&&(i="<p>".concat(i,"</p>")),c=i),o=t.editor.data.htmlProcessor.toView(c)}var u=new y(t,"inputTransformation");t.fire(u,{content:o,dataTransfer:a,targetRanges:r.targetRanges,method:r.method}),u.stop.called&&e.stop(),n.scrollToTheSelection()}),{priority:"low"}),this.listenTo(this,"inputTransformation",(function(e,n){if(!n.content.isEmpty){var o=t.editor.data.toModel(n.content,"$clipboardHolder");0!=o.childCount&&(e.stop(),r.change((function(){t.fire("contentInsertion",{content:o,method:n.method,dataTransfer:n.dataTransfer,targetRanges:n.targetRanges})})))}}),{priority:"low"}),this.listenTo(this,"contentInsertion",(function(t,e){i._setUniqueMarkerNamesInFragment(e.content)}),{priority:"highest"}),this.listenTo(this,"contentInsertion",(function(t,e){e.resultRange=r.insertContent(e.content)}),{priority:"low"})}},{key:"_setupCopyCut",value:function(){var t=this,e=this.editor,r=e.model.document,n=e.editing.view.document,o=function(e,n){var o=n.dataTransfer;n.preventDefault(),t._fireOutputTransformationEvent(o,r.selection,e.name)};this.listenTo(n,"copy",o,{priority:"low"}),this.listenTo(n,"cut",(function(t,r){e.model.canEditAt(e.model.document.selection)?o(t,r):r.preventDefault()}),{priority:"low"}),this.listenTo(this,"outputTransformation",(function(t,r){var o=e.data.toView(r.content);n.fire("clipboardOutput",{dataTransfer:r.dataTransfer,content:o,method:r.method})}),{priority:"low"}),this.listenTo(n,"clipboardOutput",(function(n,o){o.content.isEmpty||(o.dataTransfer.setData("text/html",t.editor.data.htmlProcessor.toData(o.content)),o.dataTransfer.setData("text/plain",tz(o.content))),"cut"==o.method&&e.model.deleteContent(r.selection)}),{priority:"low"})}}])&&Sz(r.prototype,n),o&&Sz(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function Dz(t){return Dz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dz(t)}function Rz(){Rz=function(){return e};var t,e={},r=Object.prototype,n=r.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var i=e&&e.prototype instanceof v?e:v,a=Object.create(i.prototype),c=new x(n||[]);return o(a,"_invoke",{value:j(t,r,c)}),a}function f(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}e.wrap=l;var p="suspendedStart",d="suspendedYield",h="executing",y="completed",b={};function v(){}function m(){}function g(){}var w={};s(w,a,(function(){return this}));var k=Object.getPrototypeOf,_=k&&k(k(C([])));_&&_!==r&&n.call(_,a)&&(w=_);var O=g.prototype=v.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,a,c){var u=f(t[o],t,i);if("throw"!==u.type){var s=u.arg,l=s.value;return l&&"object"==Dz(l)&&n.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,a,c)}),(function(t){r("throw",t,a,c)})):e.resolve(l).then((function(t){s.value=t,a(s)}),(function(t){return r("throw",t,a,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,n){function o(){return new e((function(e,o){r(t,n,e,o)}))}return i=i?i.then(o,o):o()}})}function j(e,r,n){var o=p;return function(i,a){if(o===h)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:t,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=E(c,n);if(u){if(u===b)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===p)throw o=y,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=h;var s=f(e,r,n);if("normal"===s.type){if(o=n.done?y:d,s.arg===b)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=y,n.method="throw",n.arg=s.arg)}}}function E(e,r){var n=r.method,o=e.iterator[n];if(o===t)return r.delegate=null,"throw"===n&&e.iterator.return&&(r.method="return",r.arg=t,E(e,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),b;var i=f(o,e.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,b;var a=i.arg;return a?a.done?(r[e.resultName]=a.value,r.next=e.nextLoc,"return"!==r.method&&(r.method="next",r.arg=t),r.delegate=null,b):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,b)}function T(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(T,this),this.reset(!0)}function C(e){if(e||""===e){var r=e[a];if(r)return r.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function r(){for(;++o<e.length;)if(n.call(e,o))return r.value=e[o],r.done=!1,r;return r.value=t,r.done=!0,r};return i.next=i}}throw new TypeError(Dz(e)+" is not iterable")}return m.prototype=g,o(O,"constructor",{value:g,configurable:!0}),o(g,"constructor",{value:m,configurable:!0}),m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},e.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,s(t,u,"GeneratorFunction")),t.prototype=Object.create(O),t},e.awrap=function(t){return{__await:t}},P(S.prototype),s(S.prototype,c,(function(){return this})),e.AsyncIterator=S,e.async=function(t,r,n,o,i){void 0===i&&(i=Promise);var a=new S(l(t,r,n,o),i);return e.isGeneratorFunction(r)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(O),s(O,u,"Generator"),s(O,a,(function(){return this})),s(O,"toString",(function(){return"[object Generator]"})),e.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},e.values=C,x.prototype={constructor:x,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(A),!e)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=t)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var r=this;function o(n,o){return c.type="throw",c.arg=e,r.next=n,o&&(r.method="next",r.arg=t),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,b):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),A(r),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;A(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(e,r,n){return this.delegate={iterator:C(e),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=t),b}},e}var Iz=Rz().mark(Mz);function Bz(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Fz(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Fz(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Fz(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Mz(t,e){var r,n,o;return Rz().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=Bz(e),i.prev=1,r.s();case 3:if((n=r.n()).done){i.next=10;break}if(!(o=n.value)||!t.getAttributeProperties(o[0]).copyOnEnter){i.next=8;break}return i.next=8,o;case 8:i.next=3;break;case 10:i.next=15;break;case 12:i.prev=12,i.t0=i.catch(1),r.e(i.t0);case 15:return i.prev=15,r.f(),i.finish(15);case 18:case"end":return i.stop()}}),Iz,null,[[1,12,15,18]])}function Lz(t){return Lz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lz(t)}function Nz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Vz(n.key),n)}}function Vz(t){var e=function(t,e){if("object"!=Lz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Lz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Lz(e)?e:e+""}function zz(t,e,r){return e=qz(e),function(t,e){if(e&&("object"===Lz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$z()?Reflect.construct(e,r||[],qz(t).constructor):e.apply(t,r))}function $z(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($z=function(){return!!t})()}function qz(t){return qz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qz(t)}function Uz(t,e){return Uz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Uz(t,e)}var Wz=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zz(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Uz(t,e)}(e,t),r=e,(n=[{key:"execute",value:function(){var t=this;this.editor.model.change((function(e){t.enterBlock(e),t.fire("afterExecute",{writer:e})}))}},{key:"enterBlock",value:function(t){var e=this.editor.model,r=e.document.selection,n=e.schema,o=r.isCollapsed,i=r.getFirstRange(),a=i.start.parent,c=i.end.parent;if(n.isLimit(a)||n.isLimit(c))return o||a!=c||e.deleteContent(r),!1;if(o){var u=Mz(t.model.schema,r.getAttributes());return Gz(t,i.start),t.setSelectionAttribute(u),!0}var s=!(i.start.isAtStart&&i.end.isAtEnd),l=a==c;if(e.deleteContent(r,{leaveUnmerged:s}),s){if(l)return Gz(t,r.focus),!0;t.setSelection(c,0)}return!1}}])&&Nz(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function Gz(t,e){t.split(e),t.setSelection(e.parent.nextSibling,0)}function Kz(t){return Kz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kz(t)}function Hz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Jz(n.key),n)}}function Jz(t){var e=function(t,e){if("object"!=Kz(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Kz(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Kz(e)?e:e+""}function Yz(t,e,r){return e=Xz(e),function(t,e){if(e&&("object"===Kz(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Zz()?Reflect.construct(e,r||[],Xz(t).constructor):e.apply(t,r))}function Zz(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Zz=function(){return!!t})()}function Xz(t){return Xz=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Xz(t)}function Qz(t,e){return Qz=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Qz(t,e)}var t$={insertParagraph:{isSoft:!1},insertLineBreak:{isSoft:!0}},e$=function(t){function e(t){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=(r=Yz(this,e,[t])).document,o=!1;return n.on("keydown",(function(t,e){o=e.shiftKey})),n.on("beforeinput",(function(e,a){if(r.isEnabled){var c=a.inputType;i.isSafari&&o&&"insertParagraph"==c&&(c="insertLineBreak");var u=a.domEvent,s=t$[c];if(s){var l=new Us(n,"enter",a.targetRanges[0]);n.fire(l,new Ip(t,u,{isSoft:s.isSoft})),l.stop.called&&e.stop()}}})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qz(t,e)}(e,t),r=e,(n=[{key:"observe",value:function(){}},{key:"stopObserving",value:function(){}}])&&Hz(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(Ap);function r$(t){return r$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r$(t)}function n$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,o$(n.key),n)}}function o$(t){var e=function(t,e){if("object"!=r$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=r$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==r$(e)?e:e+""}function i$(t,e,r){return e=c$(e),function(t,e){if(e&&("object"===r$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,a$()?Reflect.construct(e,r||[],c$(t).constructor):e.apply(t,r))}function a$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(a$=function(){return!!t})()}function c$(t){return c$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},c$(t)}function u$(t,e){return u$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},u$(t,e)}var s$=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),i$(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&u$(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"Enter"}}],(n=[{key:"init",value:function(){var t=this.editor,e=t.editing.view,r=e.document,n=this.editor.t;e.addObserver(e$),t.commands.add("enter",new Wz(t)),this.listenTo(r,"enter",(function(n,o){r.isComposing||o.preventDefault(),o.isSoft||(t.execute("enter"),e.scrollToTheSelection())}),{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:n("Insert a hard break (a new paragraph)"),keystroke:"Enter"}]})}}])&&n$(r.prototype,n),o&&n$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function l$(t){return l$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l$(t)}function f$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,p$(n.key),n)}}function p$(t){var e=function(t,e){if("object"!=l$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=l$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==l$(e)?e:e+""}function d$(t,e,r){return e=y$(e),function(t,e){if(e&&("object"===l$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,h$()?Reflect.construct(e,r||[],y$(t).constructor):e.apply(t,r))}function h$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(h$=function(){return!!t})()}function y$(t){return y$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},y$(t)}function b$(t,e){return b$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},b$(t,e)}var v$=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),d$(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&b$(t,e)}(e,t),r=e,(n=[{key:"execute",value:function(){var t=this,e=this.editor.model,r=e.document;e.change((function(n){!function(t,e,r){var n=r.isCollapsed,o=r.getFirstRange(),i=o.start.parent,a=o.end.parent,c=i==a;if(n){var u=Mz(t.schema,r.getAttributes());m$(t,e,o.end),e.removeSelectionAttribute(r.getAttributeKeys()),e.setSelectionAttribute(u)}else{var s=!(o.start.isAtStart&&o.end.isAtEnd);t.deleteContent(r,{leaveUnmerged:s}),c?m$(t,e,r.focus):s&&e.setSelection(a,0)}}(e,n,r.selection),t.fire("afterExecute",{writer:n})}))}},{key:"refresh",value:function(){var t=this.editor.model,e=t.document;this.isEnabled=function(t,e){if(e.rangeCount>1)return!1;var r=e.anchor;if(!r||!t.checkChild(r,"softBreak"))return!1;var n=e.getFirstRange(),o=n.start.parent,i=n.end.parent;return!g$(o,t)&&!g$(i,t)||o===i}(t.schema,e.selection)}}])&&f$(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function m$(t,e,r){var n=e.createElement("softBreak");t.insertContent(n,r),e.setSelection(n,"after")}function g$(t,e){return!t.is("rootElement")&&(e.isLimit(t)||g$(t.parent,e))}function w$(t){return w$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},w$(t)}function k$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,_$(n.key),n)}}function _$(t){var e=function(t,e){if("object"!=w$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=w$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==w$(e)?e:e+""}function O$(t,e,r){return e=S$(e),function(t,e){if(e&&("object"===w$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,P$()?Reflect.construct(e,r||[],S$(t).constructor):e.apply(t,r))}function P$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(P$=function(){return!!t})()}function S$(t){return S$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},S$(t)}function j$(t,e){return j$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},j$(t,e)}var E$=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),O$(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&j$(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"ShiftEnter"}}],(n=[{key:"init",value:function(){var t=this.editor,e=t.model.schema,r=t.conversion,n=t.editing.view,o=n.document,i=this.editor.t;e.register("softBreak",{allowWhere:"$text",isInline:!0}),r.for("upcast").elementToElement({model:"softBreak",view:"br"}),r.for("downcast").elementToElement({model:"softBreak",view:function(t,e){return e.writer.createEmptyElement("br")}}),n.addObserver(e$),t.commands.add("shiftEnter",new v$(t)),this.listenTo(o,"enter",(function(e,r){o.isComposing||r.preventDefault(),r.isSoft&&(t.execute("shiftEnter"),n.scrollToTheSelection())}),{priority:"low"}),t.accessibility.addKeystrokeInfos({keystrokes:[{label:i("Insert a soft break (a <code>&lt;br&gt;</code> element)"),keystroke:"Shift+Enter"}]})}}])&&k$(r.prototype,n),o&&k$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);H();var T$="ck-widget_selected";function A$(t){return!!t.is("element")&&!!t.getCustomProperty("widget")}var x$="widget-type-around";function C$(t,e,r){return!!t&&A$(t)&&!r.isInline(e)}function D$(t){return t.getAttribute(x$)}var R$=r(6021);function I$(t){return I$="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},I$(t)}function B$(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(t,e)||M$(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F$(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=M$(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function M$(t,e){if(t){if("string"==typeof t)return L$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?L$(t,e):void 0}}function L$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function N$(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,V$(n.key),n)}}function V$(t){var e=function(t,e){if("object"!=I$(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=I$(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==I$(e)?e:e+""}function z$(t,e,r){return e=U$(e),function(t,e){if(e&&("object"===I$(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$$()?Reflect.construct(e,r||[],U$(t).constructor):e.apply(t,r))}function $$(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($$=function(){return!!t})()}function q$(){return q$="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=U$(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},q$.apply(this,arguments)}function U$(t){return U$=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},U$(t)}function W$(t,e){return W$=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},W$(t,e)}Da()(R$.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),R$.A.locals;var G$=["before","after"],K$=(new DOMParser).parseFromString('<svg viewBox="0 0 10 8" xmlns="http://www.w3.org/2000/svg"><path d="M9.055.263v3.972h-6.77M1 4.216l2-2.038m-2 2 2 2.038"/></svg>',"image/svg+xml").firstChild,H$="ck-widget__type-around_disabled",J$=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=z$(this,e,arguments))._currentFakeCaretModelElement=null,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&W$(t,e)}(e,t),r=e,n=[{key:"init",value:function(){var t=this.editor,e=t.editing.view;this.on("change:isEnabled",(function(r,n,o){e.change((function(t){var r,n=F$(e.document.roots);try{for(n.s();!(r=n.n()).done;){var i=r.value;o?t.removeClass(H$,i):t.addClass(H$,i)}}catch(t){n.e(t)}finally{n.f()}})),o||t.model.change((function(t){t.removeSelectionAttribute(x$)}))})),this._enableTypeAroundUIInjection(),this._enableInsertingParagraphsOnButtonClick(),this._enableInsertingParagraphsOnEnterKeypress(),this._enableInsertingParagraphsOnTypingKeystroke(),this._enableTypeAroundFakeCaretActivationUsingKeyboardArrows(),this._enableDeleteIntegration(),this._enableInsertContentIntegration(),this._enableInsertObjectIntegration(),this._enableDeleteContentIntegration()}},{key:"destroy",value:function(){q$(U$(e.prototype),"destroy",this).call(this),this._currentFakeCaretModelElement=null}},{key:"_insertParagraph",value:function(t,e){var r=this.editor,n=r.editing.view,o=r.model.schema.getAttributesWithProperty(t,"copyOnReplace",!0);r.execute("insertParagraph",{position:r.model.createPositionAt(t,e),attributes:o}),n.focus(),n.scrollToTheSelection()}},{key:"_listenToIfEnabled",value:function(t,e,r,n){var o=this;this.listenTo(t,e,(function(){o.isEnabled&&r.apply(void 0,arguments)}),n)}},{key:"_insertParagraphAccordingToFakeCaretPosition",value:function(){var t=this.editor.model.document.selection,e=D$(t);if(!e)return!1;var r=t.getSelectedElement();return this._insertParagraph(r,e),!0}},{key:"_enableTypeAroundUIInjection",value:function(){var t=this,e=this.editor,r=e.model.schema,n=e.locale.t,o={before:n("Insert paragraph before block"),after:n("Insert paragraph after block")};e.editing.downcastDispatcher.on("insert",(function(e,i,a){var c=a.mapper.toViewElement(i.item);c&&C$(c,i.item,r)&&(function(t,e,r){var n=t.createUIElement("div",{class:"ck ck-reset_all ck-widget__type-around"},(function(t){var r=this.toDomElement(t);return function(t,e){for(var r=0,n=G$;r<n.length;r++){var o=n[r],i=new EE({tag:"div",attributes:{class:["ck","ck-widget__type-around__button","ck-widget__type-around__button_".concat(o)],title:e[o],"aria-hidden":"true"},children:[t.ownerDocument.importNode(K$,!0)]});t.appendChild(i.render())}}(r,e),function(t){var e=new EE({tag:"div",attributes:{class:["ck","ck-widget__type-around__fake-caret"]}});t.appendChild(e.render())}(r),r}));t.insert(t.createPositionAt(r,"end"),n)}(a.writer,o,c),c.getCustomProperty("widgetLabel").push((function(){return t.isEnabled?n("Press Enter to type after or press Shift + Enter to type before the widget"):""})))}),{priority:"low"})}},{key:"_enableTypeAroundFakeCaretActivationUsingKeyboardArrows",value:function(){var t=this,e=this.editor,r=e.model,n=r.document.selection,o=r.schema,i=e.editing.view;function a(t){return"ck-widget_type-around_show-fake-caret_".concat(t)}this._listenToIfEnabled(i.document,"arrowKey",(function(e,r){t._handleArrowKeyPress(e,r)}),{context:[A$,"$text"],priority:"high"}),this._listenToIfEnabled(n,"change:range",(function(t,r){r.directChange&&e.model.change((function(t){t.removeSelectionAttribute(x$)}))})),this._listenToIfEnabled(r.document,"change:data",(function(){var t=n.getSelectedElement();t&&C$(e.editing.mapper.toViewElement(t),t,o)||e.model.change((function(t){t.removeSelectionAttribute(x$)}))})),this._listenToIfEnabled(e.editing.downcastDispatcher,"selection",(function(e,r,n){var i=n.writer;if(t._currentFakeCaretModelElement){var c=n.mapper.toViewElement(t._currentFakeCaretModelElement);c&&(i.removeClass(G$.map(a),c),t._currentFakeCaretModelElement=null)}var u=r.selection.getSelectedElement();if(u){var s=n.mapper.toViewElement(u);if(C$(s,u,o)){var l=D$(r.selection);l&&(i.addClass(a(l),s),t._currentFakeCaretModelElement=u)}}})),this._listenToIfEnabled(e.ui.focusTracker,"change:isFocused",(function(t,r,n){n||e.model.change((function(t){t.removeSelectionAttribute(x$)}))}))}},{key:"_handleArrowKeyPress",value:function(t,e){var r,n,o,i,a=this.editor,c=a.model,u=c.document.selection,s=c.schema,l=a.editing.view,f=(n=e.keyCode,o=a.locale.contentLanguageDirection,"down"===(i=Go(n,o))||"right"===i),p=l.document.selection.getSelectedElement();C$(p,a.editing.mapper.toModelElement(p),s)?r=this._handleArrowKeyPressOnSelectedWidget(f):u.isCollapsed?r=this._handleArrowKeyPressWhenSelectionNextToAWidget(f):e.shiftKey||(r=this._handleArrowKeyPressWhenNonCollapsedSelection(f)),r&&(e.preventDefault(),t.stop())}},{key:"_handleArrowKeyPressOnSelectedWidget",value:function(t){var e=this.editor.model,r=D$(e.document.selection);return e.change((function(e){return r?r!==(t?"after":"before")&&(e.removeSelectionAttribute(x$),!0):(e.setSelectionAttribute(x$,t?"after":"before"),!0)}))}},{key:"_handleArrowKeyPressWhenSelectionNextToAWidget",value:function(t){var e=this.editor,r=e.model,n=r.schema,o=e.plugins.get("Widget"),i=o._getObjectElementNextToSelection(t);return!!C$(e.editing.mapper.toViewElement(i),i,n)&&(r.change((function(e){o._setSelectionOverElement(i),e.setSelectionAttribute(x$,t?"before":"after")})),!0)}},{key:"_handleArrowKeyPressWhenNonCollapsedSelection",value:function(t){var e=this.editor,r=e.model,n=r.schema,o=e.editing.mapper,i=r.document.selection,a=t?i.getLastPosition().nodeBefore:i.getFirstPosition().nodeAfter;return!!C$(o.toViewElement(a),a,n)&&(r.change((function(e){e.setSelection(a,"on"),e.setSelectionAttribute(x$,t?"after":"before")})),!0)}},{key:"_enableInsertingParagraphsOnButtonClick",value:function(){var t=this,e=this.editor,r=e.editing.view;this._listenToIfEnabled(r.document,"mousedown",(function(n,o){var i=o.domTarget.closest(".ck-widget__type-around__button");if(i){var a=i.classList.contains("ck-widget__type-around__button_before")?"before":"after",c=function(t,e){var r=t.closest(".ck-widget");return e.mapDomToView(r)}(i,r.domConverter),u=e.editing.mapper.toModelElement(c);t._insertParagraph(u,a),o.preventDefault(),n.stop()}}))}},{key:"_enableInsertingParagraphsOnEnterKeypress",value:function(){var t=this,e=this.editor,r=e.model.document.selection,n=e.editing.view;this._listenToIfEnabled(n.document,"enter",(function(n,o){if("atTarget"==n.eventPhase){var i,a=r.getSelectedElement(),c=e.editing.mapper.toViewElement(a),u=e.model.schema;t._insertParagraphAccordingToFakeCaretPosition()?i=!0:C$(c,a,u)&&(t._insertParagraph(a,o.isSoft?"before":"after"),i=!0),i&&(o.preventDefault(),n.stop())}}),{context:A$})}},{key:"_enableInsertingParagraphsOnTypingKeystroke",value:function(){var t=this,e=this.editor.editing.view.document;this._listenToIfEnabled(e,"insertText",(function(r,n){t._insertParagraphAccordingToFakeCaretPosition()&&(n.selection=e.selection)}),{priority:"high"}),i.isAndroid?this._listenToIfEnabled(e,"keydown",(function(e,r){229==r.keyCode&&t._insertParagraphAccordingToFakeCaretPosition()})):this._listenToIfEnabled(e,"compositionstart",(function(){t._insertParagraphAccordingToFakeCaretPosition()}),{priority:"high"})}},{key:"_enableDeleteIntegration",value:function(){var t=this.editor,e=t.editing.view,r=t.model,n=r.schema;this._listenToIfEnabled(e.document,"delete",(function(e,o){if("atTarget"==e.eventPhase){var i=D$(r.document.selection);if(i){var a=o.direction,c=r.document.selection.getSelectedElement(),u="forward"==a;if("before"===i===u)t.execute("delete",{selection:r.createSelection(c,"on")});else{var s=n.getNearestSelectionRange(r.createPositionAt(c,i),a);if(s)if(s.isCollapsed){var l=r.createSelection(s.start);if(r.modifySelection(l,{direction:a}),l.focus.isEqual(s.start)){var f=function(t,e){var r,n=e,o=F$(e.getAncestors({parentFirst:!0}));try{for(o.s();!(r=o.n()).done;){var i=r.value;if(i.childCount>1||t.isLimit(i))break;n=i}}catch(t){o.e(t)}finally{o.f()}return n}(n,s.start.parent);r.deleteContent(r.createSelection(f,"on"),{doNotAutoparagraph:!0})}else r.change((function(e){e.setSelection(s),t.execute(u?"deleteForward":"delete")}))}else r.change((function(e){e.setSelection(s),t.execute(u?"deleteForward":"delete")}))}o.preventDefault(),e.stop()}}}),{context:A$})}},{key:"_enableInsertContentIntegration",value:function(){var t=this.editor,e=this.editor.model,r=e.document.selection;this._listenToIfEnabled(t.model,"insertContent",(function(t,n){var o=B$(n,2),i=o[0],a=o[1];if(!a||a.is("documentSelection")){var c=D$(r);if(c)return t.stop(),e.change((function(t){var n=r.getSelectedElement(),o=e.createPositionAt(n,c),a=t.createSelection(o),u=e.insertContent(i,a);return t.setSelection(a),u}))}}),{priority:"high"})}},{key:"_enableInsertObjectIntegration",value:function(){var t=this.editor,e=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"insertObject",(function(t,r){var n=B$(r,3),o=n[1],i=n[2],a=void 0===i?{}:i;if(!o||o.is("documentSelection")){var c=D$(e);c&&(a.findOptimalPosition=c,r[3]=a)}}),{priority:"high"})}},{key:"_enableDeleteContentIntegration",value:function(){var t=this.editor,e=this.editor.model.document.selection;this._listenToIfEnabled(t.model,"deleteContent",(function(t,r){var n=B$(r,1)[0];n&&!n.is("documentSelection")||D$(e)&&t.stop()}),{priority:"high"})}}],o=[{key:"pluginName",get:function(){return"WidgetTypeAround"}},{key:"requires",get:function(){return[s$,PV]}}],n&&N$(r.prototype,n),o&&N$(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function Y$(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Z$(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z$(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function Z$(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function X$(t,e,r){var n,o=t.schema,i="forward"==r?"elementStart":"elementEnd",a=Y$(t.createRangeIn(e.root).getWalker({startPosition:e,direction:r}));try{for(a.s();!(n=a.n()).done;){var c=n.value,u=c.previousPosition,s=c.item,l=c.type;if(o.isLimit(s)&&!o.isInline(s))return u;if(l==i&&o.isBlock(s))return null}}catch(t){a.e(t)}finally{a.f()}return null}function Q$(t,e,r){var n="backward"==r?e.end:e.start;if(t.checkChild(n,"$text"))return n;var o,i=Y$(e.getWalker({direction:r}));try{for(i.s();!(o=i.n()).done;){var a=o.value.nextPosition;if(t.checkChild(a,"$text"))return a}}catch(t){i.e(t)}finally{i.f()}return null}var tq=r(9974);function eq(t){return eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eq(t)}function rq(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return nq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?nq(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function nq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function oq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,iq(n.key),n)}}function iq(t){var e=function(t,e){if("object"!=eq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=eq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eq(e)?e:e+""}function aq(t,e,r){return e=uq(e),function(t,e){if(e&&("object"===eq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,cq()?Reflect.construct(e,r||[],uq(t).constructor):e.apply(t,r))}function cq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(cq=function(){return!!t})()}function uq(t){return uq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},uq(t)}function sq(t,e){return sq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},sq(t,e)}Da()(tq.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),tq.A.locals;var lq=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=aq(this,e,arguments))._previouslySelected=new Set,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sq(t,e)}(e,t),r=e,n=[{key:"init",value:function(){var t,e,r=this,n=this.editor,o=n.editing.view,i=o.document,a=n.t;this.editor.editing.downcastDispatcher.on("selection",(function(t,e,r){var o=r.writer,i=e.selection;if(!i.isCollapsed){var a=i.getSelectedElement();if(a){var c,u=n.editing.mapper.toViewElement(a);A$(u)&&r.consumable.consume(i,"selection")&&o.setSelection(o.createRangeOn(u),{fake:!0,label:(c=u,c.getCustomProperty("widgetLabel").reduce((function(t,e){return"function"==typeof e?t?t+". "+e():e():t?t+". "+e:e}),""))})}}})),this.editor.editing.downcastDispatcher.on("selection",(function(t,e,n){r._clearPreviouslySelectedWidgets(n.writer);var o,i,a,c=n.writer,u=null,s=rq(c.document.selection.getRanges());try{for(s.s();!(o=s.n()).done;){var l,f=rq(o.value);try{for(f.s();!(l=f.n()).done;){var p=l.value.item;A$(p)&&(i=p,!(a=u)||!Array.from(i.getAncestors()).includes(a))&&(c.addClass(T$,p),r._previouslySelected.add(p),u=p)}}catch(t){f.e(t)}finally{f.f()}}}catch(t){s.e(t)}finally{s.f()}}),{priority:"low"}),o.addObserver(cj),this.listenTo(i,"mousedown",(function(){return r._onMousedown.apply(r,arguments)})),this.listenTo(i,"arrowKey",(function(){r._handleSelectionChangeOnArrowKeyPress.apply(r,arguments)}),{context:[A$,"$text"]}),this.listenTo(i,"arrowKey",(function(){r._preventDefaultOnArrowKeyPress.apply(r,arguments)}),{context:"$root"}),this.listenTo(i,"arrowKey",(t=this.editor.editing,e=t.model,function(r,n){var o=n.keyCode==zo.arrowup,i=n.keyCode==zo.arrowdown,a=n.shiftKey,c=e.document.selection;if(o||i){var u=i;if(!a||!function(t,e){return!t.isCollapsed&&t.isBackward==e}(c,u)){var s=function(t,e,r){var n=t.model;if(r){var o=e.isCollapsed?e.focus:e.getLastPosition(),i=X$(n,o,"forward");if(!i)return null;var a=n.createRange(o,i),c=Q$(n.schema,a,"backward");return c?n.createRange(o,c):null}var u=e.isCollapsed?e.focus:e.getFirstPosition(),s=X$(n,u,"backward");if(!s)return null;var l=n.createRange(s,u),f=Q$(n.schema,l,"forward");return f?n.createRange(f,u):null}(t,c,u);if(s){if(s.isCollapsed){if(c.isCollapsed)return;if(a)return}(s.isCollapsed||function(t,e,r){var n=t.model,o=t.view.domConverter;if(r){var i=n.createSelection(e.start);n.modifySelection(i),i.focus.isAtEnd||e.start.isEqual(i.focus)||(e=n.createRange(i.focus,e.end))}var a,c,u=t.mapper.toViewRange(e),s=o.viewRangeToDom(u),l=Y$(to.getDomRangeRects(s));try{for(l.s();!(c=l.n()).done;){var f=c.value;if(void 0!==a){if(Math.round(f.top)>=a)return!1;a=Math.max(a,Math.round(f.bottom))}else a=Math.round(f.bottom)}}catch(t){l.e(t)}finally{l.f()}return!0}(t,s,u))&&(e.change((function(t){var r=u?s.end:s.start;if(a){var n=e.createSelection(c.anchor);n.setFocus(r),t.setSelection(n)}else t.setSelection(r)})),r.stop(),n.preventDefault(),n.stopPropagation())}}}}),{context:"$text"}),this.listenTo(i,"delete",(function(t,e){r._handleDelete("forward"==e.direction)&&(e.preventDefault(),t.stop())}),{context:"$root"}),n.accessibility.addKeystrokeInfoGroup({id:"widget",label:a("Keystrokes that can be used when a widget is selected (for example: image, table, etc.)"),keystrokes:[{label:a("Insert a new paragraph directly after a widget"),keystroke:"Enter"},{label:a("Insert a new paragraph directly before a widget"),keystroke:"Shift+Enter"},{label:a("Move the caret to allow typing directly before a widget"),keystroke:[["arrowup"],["arrowleft"]]},{label:a("Move the caret to allow typing directly after a widget"),keystroke:[["arrowdown"],["arrowright"]]}]})}},{key:"_onMousedown",value:function(t,e){var r=this.editor,n=r.editing.view,o=n.document,a=e.target;if(e.domEvent.detail>=3)this._selectBlockContent(a)&&e.preventDefault();else if(!function(t){for(var e=t;e;){if(e.is("editableElement")&&!e.is("rootElement"))return!0;if(A$(e))return!1;e=e.parent}return!1}(a)&&(A$(a)||(a=a.findAncestor(A$)))){i.isAndroid&&e.preventDefault(),o.isFocused||n.focus();var c=r.editing.mapper.toModelElement(a);this._setSelectionOverElement(c)}}},{key:"_selectBlockContent",value:function(t){var e=this.editor,r=e.model,n=e.editing.mapper,o=r.schema,i=n.findMappedViewAncestor(this.editor.editing.view.createPositionAt(t,0)),a=function(t,e){var r,n=rq(t.getAncestors({includeSelf:!0,parentFirst:!0}));try{for(n.s();!(r=n.n()).done;){var o=r.value;if(e.checkChild(o,"$text"))return o;if(e.isLimit(o)&&!e.isObject(o))break}}catch(t){n.e(t)}finally{n.f()}return null}(n.toModelElement(i),r.schema);return!!a&&(r.change((function(t){var e=o.isLimit(a)?null:function(t,e){var r,n=rq(new tb({startPosition:t}));try{for(n.s();!(r=n.n()).done;){var o=r.value.item;if(e.isLimit(o)||!o.is("element"))return null;if(e.checkChild(o,"$text"))return o}}catch(t){n.e(t)}finally{n.f()}return null}(t.createPositionAfter(a),o),r=t.createPositionAt(a,0),n=e?t.createPositionAt(e,0):t.createPositionAt(a,"end");t.setSelection(t.createRange(r,n))})),!0)}},{key:"_handleSelectionChangeOnArrowKeyPress",value:function(t,e){var r=e.keyCode,n=this.editor.model,o=n.schema,i=n.document.selection,a=i.getSelectedElement(),c=Go(r,this.editor.locale.contentLanguageDirection),u="down"==c||"right"==c,s="up"==c||"down"==c;if(a&&o.isObject(a)){var l=u?i.getLastPosition():i.getFirstPosition(),f=o.getNearestSelectionRange(l,u?"forward":"backward");f&&(n.change((function(t){t.setSelection(f)})),e.preventDefault(),t.stop())}else if(i.isCollapsed||e.shiftKey){if(i.isCollapsed){var p=this._getObjectElementNextToSelection(u);if(p&&o.isObject(p)){if(o.isInline(p)&&s)return;this._setSelectionOverElement(p),e.preventDefault(),t.stop()}}}else{var d=i.getFirstPosition(),h=i.getLastPosition(),y=d.nodeAfter,b=h.nodeBefore;(y&&o.isObject(y)||b&&o.isObject(b))&&(n.change((function(t){t.setSelection(u?h:d)})),e.preventDefault(),t.stop())}}},{key:"_preventDefaultOnArrowKeyPress",value:function(t,e){var r=this.editor.model,n=r.schema,o=r.document.selection.getSelectedElement();o&&n.isObject(o)&&(e.preventDefault(),t.stop())}},{key:"_handleDelete",value:function(t){var e=this,r=this.editor.model.document.selection;if(this.editor.model.canEditAt(r)&&r.isCollapsed){var n=this._getObjectElementNextToSelection(t);return n?(this.editor.model.change((function(t){for(var o=r.anchor.parent;o.isEmpty;){var i=o;o=i.parent,t.remove(i)}e._setSelectionOverElement(n)})),!0):void 0}}},{key:"_setSelectionOverElement",value:function(t){this.editor.model.change((function(e){e.setSelection(e.createRangeOn(t))}))}},{key:"_getObjectElementNextToSelection",value:function(t){var e=this.editor.model,r=e.schema,n=e.document.selection,o=e.createSelection(n);if(e.modifySelection(o,{direction:t?"forward":"backward"}),o.isEqual(n))return null;var i=t?o.focus.nodeBefore:o.focus.nodeAfter;return i&&r.isObject(i)?i:null}},{key:"_clearPreviouslySelectedWidgets",value:function(t){var e,r=rq(this._previouslySelected);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.removeClass(T$,n)}}catch(t){r.e(t)}finally{r.f()}this._previouslySelected.clear()}}],o=[{key:"pluginName",get:function(){return"Widget"}},{key:"requires",get:function(){return[J$,PV]}}],n&&oq(r.prototype,n),o&&oq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function fq(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fq(t)}function pq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,dq(n.key),n)}}function dq(t){var e=function(t,e){if("object"!=fq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fq(e)?e:e+""}function hq(t,e,r){return bq(e),function(t,e){if(e&&("object"===fq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,yq()?Reflect.construct(e,r||[],bq(t).constructor):e.apply(t,r))}function yq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return function(){return!!t}()}function bq(t){return Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},bq(t)}function vq(t,e){return Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},vq(t,e)}mt();function mq(t){return"ck-widget__resizer__handle-".concat(t)}mt();var gq=r(6926);function wq(t){return wq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wq(t)}function kq(t,e,r){return e=Oq(e),function(t,e){if(e&&("object"===wq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,_q()?Reflect.construct(e,r||[],Oq(t).constructor):e.apply(t,r))}function _q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(_q=function(){return!!t})()}function Oq(t){return Oq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Oq(t)}function Pq(t,e){return Pq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Pq(t,e)}Da()(gq.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),gq.A.locals;var Sq=ho("px"),jq=function(t){function e(){var t;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=(t=kq(this,e)).bindTemplate;return t.set({isVisible:!1,left:null,top:null,width:null}),t.setTemplate({tag:"div",attributes:{class:["ck","ck-clipboard-drop-target-line",r.if("isVisible","ck-hidden",(function(t){return!t}))],style:{left:r.to("left",(function(t){return Sq(t)})),top:r.to("top",(function(t){return Sq(t)})),width:r.to("width",(function(t){return Sq(t)}))}}}),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pq(t,e)}(e,t),r=e,Object.defineProperty(r,"prototype",{writable:!1}),r;var r}(oT);function Eq(t){return Eq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eq(t)}function Tq(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Aq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,xq(n.key),n)}}function xq(t){var e=function(t,e){if("object"!=Eq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Eq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Eq(e)?e:e+""}function Cq(t,e,r){return e=Iq(e),function(t,e){if(e&&("object"===Eq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Dq()?Reflect.construct(e,r||[],Iq(t).constructor):e.apply(t,r))}function Dq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Dq=function(){return!!t})()}function Rq(){return Rq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Iq(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Rq.apply(this,arguments)}function Iq(t){return Iq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Iq(t)}function Bq(t,e){return Bq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Bq(t,e)}var Fq=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Cq(this,e,arguments)).removeDropMarkerDelayed=Ni((function(){return t.removeDropMarker()}),40),t._updateDropMarkerThrottled=vI((function(e){return t._updateDropMarker(e)}),40),t._reconvertMarkerThrottled=vI((function(){t.editor.model.markers.has("drop-target")&&t.editor.editing.reconvertMarker("drop-target")}),0),t._dropTargetLineView=new jq,t._domEmitter=new(Nn()),t._scrollables=new Map,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bq(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"DragDropTarget"}}],(n=[{key:"init",value:function(){this._setupDropMarker()}},{key:"destroy",value:function(){this._domEmitter.stopListening();var t,r=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return Tq(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Tq(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(this._scrollables.values());try{for(r.s();!(t=r.n()).done;)t.value.resizeObserver.destroy()}catch(t){r.e(t)}finally{r.f()}return this._updateDropMarkerThrottled.cancel(),this.removeDropMarkerDelayed.cancel(),this._reconvertMarkerThrottled.cancel(),Rq(Iq(e.prototype),"destroy",this).call(this)}},{key:"updateDropMarker",value:function(t,e,r,n,o,i){this.removeDropMarkerDelayed.cancel();var a=Mq(this.editor,t,e,r,n,o,i);if(a)return i&&i.containsRange(a)?this.removeDropMarker():void this._updateDropMarkerThrottled(a)}},{key:"getFinalDropRange",value:function(t,e,r,n,o,i){var a=Mq(this.editor,t,e,r,n,o,i);return this.removeDropMarker(),a}},{key:"removeDropMarker",value:function(){var t=this.editor.model;this.removeDropMarkerDelayed.cancel(),this._updateDropMarkerThrottled.cancel(),this._dropTargetLineView.isVisible=!1,t.markers.has("drop-target")&&t.change((function(t){t.removeMarker("drop-target")}))}},{key:"_setupDropMarker",value:function(){var t=this,e=this.editor;e.ui.view.body.add(this._dropTargetLineView),e.conversion.for("editingDowncast").markerToHighlight({model:"drop-target",view:{classes:["ck-clipboard-drop-target-range"]}}),e.conversion.for("editingDowncast").markerToElement({model:"drop-target",view:function(r,n){var o=n.writer;if(e.model.schema.checkChild(r.markerRange.start,"$text"))return t._dropTargetLineView.isVisible=!1,t._createDropTargetPosition(o);r.markerRange.isCollapsed?t._updateDropTargetLine(r.markerRange):t._dropTargetLineView.isVisible=!1}})}},{key:"_updateDropMarker",value:function(t){var e=this.editor,r=e.model.markers;e.model.change((function(e){r.has("drop-target")?r.get("drop-target").getRange().isEqual(t)||e.updateMarker("drop-target",{range:t}):e.addMarker("drop-target",{range:t,usingOperation:!1,affectsData:!1})}))}},{key:"_createDropTargetPosition",value:function(t){return t.createUIElement("span",{class:"ck ck-clipboard-drop-target-position"},(function(t){var e=this.toDomElement(t);return e.append("⁠",t.createElement("span"),"⁠"),e}))}},{key:"_updateDropTargetLine",value:function(t){var e=this.editor.editing,r=t.start.nodeBefore,n=t.start.nodeAfter,o=t.start.parent,i=r?e.mapper.toViewElement(r):null,a=i?e.view.domConverter.mapViewToDom(i):null,c=n?e.mapper.toViewElement(n):null,u=c?e.view.domConverter.mapViewToDom(c):null,s=e.mapper.toViewElement(o);if(s){var l=e.view.domConverter.mapViewToDom(s),f=this._getScrollableRect(s),p=qn.window,d=p.scrollX,h=p.scrollY,y=a?new to(a):null,b=u?new to(u):null,v=new to(l).excludeScrollbarsAndBorders(),m=y?y.bottom:v.top,g=b?b.top:v.bottom,w=qn.window.getComputedStyle(l),k=m<=g?(m+g)/2:g;if(f.top<k&&k<f.bottom){var _=v.left+parseFloat(w.paddingLeft),O=v.right-parseFloat(w.paddingRight),P=Math.max(_+d,f.left),S=Math.min(O+d,f.right);this._dropTargetLineView.set({isVisible:!0,left:P,top:k+h,width:S-P})}else this._dropTargetLineView.isVisible=!1}}},{key:"_getScrollableRect",value:function(t){var e,r=t.root.rootName;if(this._scrollables.has(r))e=this._scrollables.get(r).domElement;else{e=function(t){var e=t;do{e=e.parentElement;var r=qn.window.getComputedStyle(e).overflowY;if("auto"==r||"scroll"==r)break}while("BODY"!=e.tagName);return e}(this.editor.editing.view.domConverter.mapViewToDom(t)),this._domEmitter.listenTo(e,"scroll",this._reconvertMarkerThrottled,{usePassive:!0});var n=new fo(e,this._reconvertMarkerThrottled);this._scrollables.set(r,{domElement:e,resizeObserver:n})}return new to(e).excludeScrollbarsAndBorders()}}])&&Aq(r.prototype,n),o&&Aq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function Mq(t,e,r,n,o,i,a){for(var c,u=t.model,s=t.editing.mapper,l=Vq(t,e),f=function(){if(!i)if(u.schema.checkChild(l,"$text")){if(r){var e=r[0].start,c=s.toModelPosition(e);if(!a||Array.from(a.getItems()).every((function(t){return u.schema.checkChild(c,t)}))){if(u.schema.checkChild(c,"$text"))return{v:u.createRange(c)};if(e)return{v:Lq(t,Vq(t,e.parent),n,o)}}}}else if(u.schema.isInline(l))return{v:Lq(t,l,n,o)};if(u.schema.isBlock(l))return{v:Lq(t,l,n,o)};if(u.schema.checkChild(l,"$block")){var f=Array.from(l.getChildren()).filter((function(e){return e.is("element")&&!function(t,e){var r=t.editing.mapper,n=t.editing.view.domConverter,o=r.toViewElement(e);if(!o)return!0;var i=n.mapViewToDom(o);return"none"!=qn.window.getComputedStyle(i).float}(t,e)})),p=0,d=f.length;if(0==d)return{v:u.createRange(u.createPositionAt(l,"end"))};for(;p<d-1;){var h=Math.floor((p+d)/2);"before"==Nq(t,f[h],n,o)?d=h:p=h}return{v:Lq(t,f[p],n,o)}}l=l.parent};l;)if(c=f())return c.v;return null}function Lq(t,e,r,n){var o=t.model;return o.createRange(o.createPositionAt(e,Nq(t,e,r,n)))}function Nq(t,e,r,n){var o=t.editing.mapper,i=t.editing.view.domConverter,a=o.toViewElement(e),c=i.mapViewToDom(a),u=new to(c);return t.model.schema.isInline(e)?r<(u.left+u.right)/2?"before":"after":n<(u.top+u.bottom)/2?"before":"after"}function Vq(t,e){var r=t.editing.mapper,n=t.editing.view,o=r.toModelElement(e);if(o)return o;var i=n.createPositionBefore(e),a=r.findMappedViewAncestor(i);return r.toModelElement(a)}function zq(t){return zq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zq(t)}function $q(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function qq(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?$q(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=Wq(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$q(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function Uq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Wq(n.key),n)}}function Wq(t){var e=function(t,e){if("object"!=zq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=zq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==zq(e)?e:e+""}function Gq(t,e,r){return e=Jq(e),function(t,e){if(e&&("object"===zq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,Kq()?Reflect.construct(e,r||[],Jq(t).constructor):e.apply(t,r))}function Kq(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(Kq=function(){return!!t})()}function Hq(){return Hq="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jq(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},Hq.apply(this,arguments)}function Jq(t){return Jq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Jq(t)}function Yq(t,e){return Yq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Yq(t,e)}var Zq=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Gq(this,e,arguments))._isBlockDragging=!1,t._domEmitter=new(Nn()),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yq(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"DragDropBlockToolbar"}}],(n=[{key:"init",value:function(){var t=this,e=this.editor;if(this.listenTo(e,"change:isReadOnly",(function(e,r,n){n?(t.forceDisabled("readOnlyMode"),t._isBlockDragging=!1):t.clearForceDisabled("readOnlyMode")})),i.isAndroid&&this.forceDisabled("noAndroidSupport"),e.plugins.has("BlockToolbar")){var r=e.plugins.get("BlockToolbar").buttonView.element;this._domEmitter.listenTo(r,"dragstart",(function(e,r){return t._handleBlockDragStart(r)})),this._domEmitter.listenTo(qn.document,"dragover",(function(e,r){return t._handleBlockDragging(r)})),this._domEmitter.listenTo(qn.document,"drop",(function(e,r){return t._handleBlockDragging(r)})),this._domEmitter.listenTo(qn.document,"dragend",(function(){return t._handleBlockDragEnd()}),{useCapture:!0}),this.isEnabled&&r.setAttribute("draggable","true"),this.on("change:isEnabled",(function(t,e,n){r.setAttribute("draggable",n?"true":"false")}))}}},{key:"destroy",value:function(){return this._domEmitter.stopListening(),Hq(Jq(e.prototype),"destroy",this).call(this)}},{key:"_handleBlockDragStart",value:function(t){if(this.isEnabled){var e=this.editor.model,r=e.document.selection,n=this.editor.editing.view,o=Array.from(r.getSelectedBlocks()),i=e.createRange(e.createPositionBefore(o[0]),e.createPositionAfter(o[o.length-1]));e.change((function(t){return t.setSelection(i)})),this._isBlockDragging=!0,n.focus(),n.getObserver(YV).onDomEvent(t)}}},{key:"_handleBlockDragging",value:function(t){if(this.isEnabled&&this._isBlockDragging){var e=t.clientX+("ltr"==this.editor.locale.contentLanguageDirection?100:-100),r=t.clientY,n=document.elementFromPoint(e,r),o=this.editor.editing.view;n&&n.closest(".ck-editor__editable")&&o.getObserver(YV).onDomEvent(qq(qq({},t),{},{type:t.type,dataTransfer:t.dataTransfer,target:n,clientX:e,clientY:r,preventDefault:function(){return t.preventDefault()},stopPropagation:function(){return t.stopPropagation()}}))}}},{key:"_handleBlockDragEnd",value:function(){this._isBlockDragging=!1}}])&&Uq(r.prototype,n),o&&Uq(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta),Xq=r(6356);function Qq(t){return Qq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qq(t)}function tU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eU(n.key),n)}}function eU(t){var e=function(t,e){if("object"!=Qq(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=Qq(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Qq(e)?e:e+""}function rU(t,e,r){return e=iU(e),function(t,e){if(e&&("object"===Qq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nU()?Reflect.construct(e,r||[],iU(t).constructor):e.apply(t,r))}function nU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nU=function(){return!!t})()}function oU(){return oU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},oU.apply(this,arguments)}function iU(t){return iU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iU(t)}function aU(t,e){return aU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aU(t,e)}Da()(Xq.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),Xq.A.locals;var cU=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=rU(this,e,arguments))._clearDraggableAttributesDelayed=Ni((function(){return t._clearDraggableAttributes()}),40),t._blockMode=!1,t._domEmitter=new(Nn()),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aU(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"DragDrop"}},{key:"requires",get:function(){return[Cz,lq,Fq,Zq]}}],(n=[{key:"init",value:function(){var t=this,e=this.editor,r=e.editing.view;this._draggedRange=null,this._draggingUid="",this._draggableElement=null,r.addObserver(YV),r.addObserver(cj),this._setupDragging(),this._setupContentInsertionIntegration(),this._setupClipboardInputIntegration(),this._setupDraggableAttributeHandling(),this.listenTo(e,"change:isReadOnly",(function(e,r,n){n?t.forceDisabled("readOnlyMode"):t.clearForceDisabled("readOnlyMode")})),this.on("change:isEnabled",(function(e,r,n){n||t._finalizeDragging(!1)})),i.isAndroid&&this.forceDisabled("noAndroidSupport")}},{key:"destroy",value:function(){return this._draggedRange&&(this._draggedRange.detach(),this._draggedRange=null),this._previewContainer&&this._previewContainer.remove(),this._domEmitter.stopListening(),this._clearDraggableAttributesDelayed.cancel(),oU(iU(e.prototype),"destroy",this).call(this)}},{key:"_setupDragging",value:function(){var t=this,e=this.editor,r=e.model,n=e.editing.view,o=n.document,a=e.plugins.get(Fq);this.listenTo(o,"dragstart",(function(e,n){if(n.target&&n.target.is("editableElement"))n.preventDefault();else if(t._prepareDraggedRange(n.target),t._draggedRange){t._draggingUid=v(),n.dataTransfer.effectAllowed=t.isEnabled?"copyMove":"copy",n.dataTransfer.setData("application/ckeditor5-dragging-uid",t._draggingUid);var o=r.createSelection(t._draggedRange.toRange());t.editor.plugins.get("ClipboardPipeline")._fireOutputTransformationEvent(n.dataTransfer,o,"dragstart");var i=n.dataTransfer,a=n.domTarget,c=n.domEvent.clientX;t._updatePreview({dataTransfer:i,domTarget:a,clientX:c}),n.stopPropagation(),t.isEnabled||(t._draggedRange.detach(),t._draggedRange=null,t._draggingUid="")}else n.preventDefault()}),{priority:"low"}),this.listenTo(o,"dragend",(function(e,r){t._finalizeDragging(!r.dataTransfer.isCanceled&&"move"==r.dataTransfer.dropEffect)}),{priority:"low"}),this._domEmitter.listenTo(qn.document,"dragend",(function(){t._blockMode=!1}),{useCapture:!0}),this.listenTo(o,"dragenter",(function(){t.isEnabled&&n.focus()})),this.listenTo(o,"dragleave",(function(){a.removeDropMarkerDelayed()})),this.listenTo(o,"dragging",(function(e,r){if(t.isEnabled){var n=r.domEvent,o=n.clientX,c=n.clientY;a.updateDropMarker(r.target,r.targetRanges,o,c,t._blockMode,t._draggedRange),t._draggedRange||(r.dataTransfer.dropEffect="copy"),i.isGecko||("copy"==r.dataTransfer.effectAllowed?r.dataTransfer.dropEffect="copy":["all","copyMove"].includes(r.dataTransfer.effectAllowed)&&(r.dataTransfer.dropEffect="move")),e.stop()}else r.dataTransfer.dropEffect="none"}),{priority:"low"})}},{key:"_setupClipboardInputIntegration",value:function(){var t=this,e=this.editor,r=e.editing.view.document,n=e.plugins.get(Fq);this.listenTo(r,"clipboardInput",(function(r,o){if("drop"==o.method){var i=o.domEvent,a=i.clientX,c=i.clientY,u=n.getFinalDropRange(o.target,o.targetRanges,a,c,t._blockMode,t._draggedRange);if(!u)return t._finalizeDragging(!1),void r.stop();if(t._draggedRange&&t._draggingUid!=o.dataTransfer.getData("application/ckeditor5-dragging-uid")&&(t._draggedRange.detach(),t._draggedRange=null,t._draggingUid=""),"move"==uU(o.dataTransfer)&&t._draggedRange&&t._draggedRange.containsRange(u,!0))return t._finalizeDragging(!1),void r.stop();o.targetRanges=[e.editing.mapper.toViewRange(u)]}}),{priority:"high"})}},{key:"_setupContentInsertionIntegration",value:function(){var t=this,e=this.editor.plugins.get(Cz);e.on("contentInsertion",(function(e,r){if(t.isEnabled&&"drop"===r.method){var n=r.targetRanges.map((function(e){return t.editor.editing.mapper.toModelRange(e)}));t.editor.model.change((function(t){return t.setSelection(n)}))}}),{priority:"high"}),e.on("contentInsertion",(function(e,r){if(t.isEnabled&&"drop"===r.method){var n="move"==uU(r.dataTransfer),o=!r.resultRange||!r.resultRange.isCollapsed;t._finalizeDragging(o&&n)}}),{priority:"lowest"})}},{key:"_setupDraggableAttributeHandling",value:function(){var t=this,e=this.editor,r=e.editing.view,n=r.document;this.listenTo(n,"mousedown",(function(o,a){if(!i.isAndroid&&a){t._clearDraggableAttributesDelayed.cancel();var c=sU(a.target);if(i.isBlink&&!e.isReadOnly&&!c&&!n.selection.isCollapsed){var u=n.selection.getSelectedElement();u&&A$(u)||(c=n.selection.editableElement)}c&&(r.change((function(t){t.setAttribute("draggable","true",c)})),t._draggableElement=e.editing.mapper.toModelElement(c))}})),this.listenTo(n,"mouseup",(function(){i.isAndroid||t._clearDraggableAttributesDelayed()}))}},{key:"_clearDraggableAttributes",value:function(){var t=this,e=this.editor.editing;e.view.change((function(r){t._draggableElement&&"$graveyard"!=t._draggableElement.root.rootName&&r.removeAttribute("draggable",e.mapper.toViewElement(t._draggableElement)),t._draggableElement=null}))}},{key:"_finalizeDragging",value:function(t){var e=this,r=this.editor,n=r.model;r.plugins.get(Fq).removeDropMarker(),this._clearDraggableAttributes(),r.plugins.has("WidgetToolbarRepository")&&r.plugins.get("WidgetToolbarRepository").clearForceDisabled("dragDrop"),this._draggingUid="",this._previewContainer&&(this._previewContainer.remove(),this._previewContainer=void 0),this._draggedRange&&(t&&this.isEnabled&&n.change((function(t){var r=n.createSelection(e._draggedRange);n.deleteContent(r,{doNotAutoparagraph:!0});var o=r.getFirstPosition().parent;o.isEmpty&&!n.schema.checkChild(o,"$text")&&n.schema.checkChild(o,"paragraph")&&t.insertElement("paragraph",o,0)})),this._draggedRange.detach(),this._draggedRange=null)}},{key:"_prepareDraggedRange",value:function(t){var e=this,r=this.editor,n=r.model,o=n.document.selection,i=t?sU(t):null;if(i){var a=r.editing.mapper.toModelElement(i);this._draggedRange=Iv.fromRange(n.createRangeOn(a)),this._blockMode=n.schema.isBlock(a),r.plugins.has("WidgetToolbarRepository")&&r.plugins.get("WidgetToolbarRepository").forceDisabled("dragDrop")}else if(!o.isCollapsed||o.getFirstPosition().parent.isEmpty){var c=Array.from(o.getSelectedBlocks()),u=o.getFirstRange();if(0!=c.length){var s=lU(n,c);if(c.length>1)this._draggedRange=Iv.fromRange(s),this._blockMode=!0;else if(1==c.length){var l=u.start.isTouching(s.start)&&u.end.isTouching(s.end);this._draggedRange=Iv.fromRange(l?s:u),this._blockMode=l}n.change((function(t){return t.setSelection(e._draggedRange.toRange())}))}else this._draggedRange=Iv.fromRange(u)}}},{key:"_updatePreview",value:function(t){var e=t.dataTransfer,r=t.domTarget,n=t.clientX,o=this.editor.editing.view,a=o.document.selection.editableElement,c=o.domConverter.mapViewToDom(a),u=qn.window.getComputedStyle(c);this._previewContainer?this._previewContainer.firstElementChild&&this._previewContainer.removeChild(this._previewContainer.firstElementChild):(this._previewContainer=Ht(qn.document,"div",{style:"position: fixed; left: -999999px;"}),qn.document.body.appendChild(this._previewContainer));var s=new to(c);if(!c.contains(r)){var l=parseFloat(u.paddingLeft),f=Ht(qn.document,"div");f.className="ck ck-content",f.style.width=u.width,f.style.paddingLeft="".concat(s.left-n+l,"px"),i.isiOS&&(f.style.backgroundColor="white"),f.innerHTML=e.getData("text/html"),e.setDragImage(f,0,0),this._previewContainer.appendChild(f)}}}])&&tU(r.prototype,n),o&&tU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function uU(t){return i.isGecko?t.dropEffect:["all","copyMove"].includes(t.effectAllowed)?"move":"copy"}function sU(t){if(t.is("editableElement"))return null;if(t.hasClass("ck-widget__selection-handle"))return t.findAncestor(A$);if(A$(t))return t;var e=t.findAncestor((function(t){return A$(t)||t.is("editableElement")}));return A$(e)?e:null}function lU(t,e){var r=e[0],n=e[e.length-1],o=r.getCommonAncestor(n),i=t.createPositionBefore(r),a=t.createPositionAfter(n);if(o&&o.is("element")&&!t.schema.isLimit(o)){var c=t.createRangeOn(o),u=i.isTouching(c.start),s=a.isTouching(c.end);if(u&&s)return lU(t,[o])}return t.createRange(i,a)}function fU(t){return fU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fU(t)}function pU(t,e){if(t){if("string"==typeof t)return dU(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?dU(t,e):void 0}}function dU(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function hU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,yU(n.key),n)}}function yU(t){var e=function(t,e){if("object"!=fU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=fU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==fU(e)?e:e+""}function bU(t,e,r){return e=mU(e),function(t,e){if(e&&("object"===fU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,vU()?Reflect.construct(e,r||[],mU(t).constructor):e.apply(t,r))}function vU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(vU=function(){return!!t})()}function mU(t){return mU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},mU(t)}function gU(t,e){return gU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},gU(t,e)}var wU=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bU(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gU(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"PastePlainText"}},{key:"requires",get:function(){return[Cz]}}],(n=[{key:"init",value:function(){var t=this.editor,e=t.model,r=t.editing.view,n=r.document,o=e.document.selection,i=!1;r.addObserver(YV),this.listenTo(n,"keydown",(function(t,e){i=e.shiftKey})),t.plugins.get(Cz).on("contentInsertion",(function(t,r){(i||function(t,e){if(t.childCount>1)return!1;var r=t.getChild(0);return!e.isObject(r)&&0==Array.from(r.getAttributeKeys()).length}(r.content,e.schema))&&e.change((function(t){var n,i=Array.from(o.getAttributes()).filter((function(t){var r,n,o=(r=t,n=1,function(t){if(Array.isArray(t))return t}(r)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=r){var n,o,i,a,c=[],u=!0,s=!1;try{if(i=(r=r.call(t)).next,0===e){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(c.push(n.value),c.length!==e);u=!0);}catch(t){s=!0,o=t}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(s)throw o}}return c}}(r,n)||pU(r,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0];return e.schema.getAttributeProperties(o).isFormatting}));o.isCollapsed||e.deleteContent(o,{doNotAutoparagraph:!0}),i.push.apply(i,function(t){if(Array.isArray(t))return dU(t)}(n=o.getAttributes())||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(n)||pU(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var a,c=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=pU(t))){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(t.createRangeIn(r.content).getItems());try{for(c.s();!(a=c.n()).done;){var u=a.value;u.is("$textProxy")&&t.setAttributes(i,u)}}catch(t){c.e(t)}finally{c.f()}}))}))}}])&&hU(r.prototype,n),o&&hU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function kU(t){return kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kU(t)}function _U(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,OU(n.key),n)}}function OU(t){var e=function(t,e){if("object"!=kU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=kU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==kU(e)?e:e+""}function PU(t,e,r){return e=jU(e),function(t,e){if(e&&("object"===kU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,SU()?Reflect.construct(e,r||[],jU(t).constructor):e.apply(t,r))}function SU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(SU=function(){return!!t})()}function jU(t){return jU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},jU(t)}function EU(t,e){return EU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},EU(t,e)}var TU=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),PU(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EU(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"Clipboard"}},{key:"requires",get:function(){return[Oz,Cz,cU,wU]}}],(n=[{key:"init",value:function(){var t=this.editor,e=this.editor.t;t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Copy selected content"),keystroke:"CTRL+C"},{label:e("Paste content"),keystroke:"CTRL+V"},{label:e("Paste content as plain text"),keystroke:"CTRL+SHIFT+V"}]})}}])&&_U(r.prototype,n),o&&_U(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function AU(t){return AU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},AU(t)}function xU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,CU(n.key),n)}}function CU(t){var e=function(t,e){if("object"!=AU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=AU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==AU(e)?e:e+""}function DU(t,e,r){return e=IU(e),function(t,e){if(e&&("object"===AU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,RU()?Reflect.construct(e,r||[],IU(t).constructor):e.apply(t,r))}function RU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(RU=function(){return!!t})()}function IU(t){return IU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},IU(t)}function BU(t,e){return BU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},BU(t,e)}var FU=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=DU(this,e,[t])).affectsData=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&BU(t,e)}(e,t),r=e,(n=[{key:"execute",value:function(){var t=this.editor.model,e=t.document.selection,r=t.schema.getLimitElement(e);if(e.containsEntireContent(r)||!MU(t.schema,r))do{if(!(r=r.parent))return}while(!MU(t.schema,r));t.change((function(t){t.setSelection(r,"in")}))}}])&&xU(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function MU(t,e){return t.isLimit(e)&&(t.checkChild(e,"$text")||t.checkChild(e,"paragraph"))}function LU(t){return LU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LU(t)}function NU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VU(n.key),n)}}function VU(t){var e=function(t,e){if("object"!=LU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=LU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==LU(e)?e:e+""}function zU(t,e,r){return e=qU(e),function(t,e){if(e&&("object"===LU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$U()?Reflect.construct(e,r||[],qU(t).constructor):e.apply(t,r))}function $U(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($U=function(){return!!t})()}function qU(t){return qU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qU(t)}function UU(t,e){return UU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UU(t,e)}var WU=Uo("Ctrl+A"),GU=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),zU(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UU(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"SelectAllEditing"}}],(n=[{key:"init",value:function(){var t=this.editor,e=t.t,r=t.editing.view.document;t.commands.add("selectAll",new FU(t)),this.listenTo(r,"keydown",(function(e,r){qo(r)===WU&&(t.execute("selectAll"),r.preventDefault())})),t.accessibility.addKeystrokeInfos({keystrokes:[{label:e("Select all"),keystroke:"CTRL+A"}]})}}])&&NU(r.prototype,n),o&&NU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function KU(t){return KU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},KU(t)}function HU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,JU(n.key),n)}}function JU(t){var e=function(t,e){if("object"!=KU(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=KU(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==KU(e)?e:e+""}function YU(t,e,r){return e=XU(e),function(t,e){if(e&&("object"===KU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,ZU()?Reflect.construct(e,r||[],XU(t).constructor):e.apply(t,r))}function ZU(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(ZU=function(){return!!t})()}function XU(t){return XU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},XU(t)}function QU(t,e){return QU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},QU(t,e)}var tW=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),YU(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&QU(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"SelectAllUI"}}],(n=[{key:"init",value:function(){var t=this,e=this.editor;e.ui.componentFactory.add("selectAll",(function(r){var n=e.commands.get("selectAll"),o=new bA(r),i=r.t;return o.set({label:i("Select all"),icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M.75 15.5a.75.75 0 0 1 .75.75V18l.008.09A.5.5 0 0 0 2 18.5h1.75a.75.75 0 1 1 0 1.5H1.5l-.144-.007a1.5 1.5 0 0 1-1.35-1.349L0 18.5v-2.25a.75.75 0 0 1 .75-.75zm18.5 0a.75.75 0 0 1 .75.75v2.25l-.007.144a1.5 1.5 0 0 1-1.349 1.35L18.5 20h-2.25a.75.75 0 1 1 0-1.5H18a.5.5 0 0 0 .492-.41L18.5 18v-1.75a.75.75 0 0 1 .75-.75zm-10.45 3c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2v-1.1c0-.11.09-.2.2-.2h1.6zm.45-5.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zM1.3 11c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2v-1.6c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5H4.75a.75.75 0 1 1 0-1.5h10.5zM1.3 7c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2H.2a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm18.5 0c.11 0 .2.09.2.2v1.6a.2.2 0 0 1-.2.2h-1.1a.2.2 0 0 1-.2-.2V7.2c0-.11.09-.2.2-.2h1.1zm-4.55-2a.75.75 0 1 1 0 1.5h-2.5a.75.75 0 1 1 0-1.5h2.5zm-5 0a.75.75 0 1 1 0 1.5h-5.5a.75.75 0 0 1 0-1.5h5.5zm-6.5-5a.75.75 0 0 1 0 1.5H2a.5.5 0 0 0-.492.41L1.5 2v1.75a.75.75 0 0 1-1.5 0V1.5l.007-.144A1.5 1.5 0 0 1 1.356.006L1.5 0h2.25zM18.5 0l.144.007a1.5 1.5 0 0 1 1.35 1.349L20 1.5v2.25a.75.75 0 1 1-1.5 0V2l-.008-.09A.5.5 0 0 0 18 1.5h-1.75a.75.75 0 1 1 0-1.5h2.25zM8.8 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2H7.2a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6zm4 0c.11 0 .2.09.2.2v1.1a.2.2 0 0 1-.2.2h-1.6a.2.2 0 0 1-.2-.2V.2c0-.11.09-.2.2-.2h1.6z"/></svg>',keystroke:"Ctrl+A",tooltip:!0}),o.bind("isEnabled").to(n,"isEnabled"),t.listenTo(o,"execute",(function(){e.execute("selectAll"),e.editing.view.focus()})),o}))}}])&&HU(r.prototype,n),o&&HU(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function eW(t){return eW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eW(t)}function rW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,nW(n.key),n)}}function nW(t){var e=function(t,e){if("object"!=eW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=eW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==eW(e)?e:e+""}function oW(t,e,r){return e=aW(e),function(t,e){if(e&&("object"===eW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,iW()?Reflect.construct(e,r||[],aW(t).constructor):e.apply(t,r))}function iW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(iW=function(){return!!t})()}function aW(t){return aW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},aW(t)}function cW(t,e){return cW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},cW(t,e)}var uW=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),oW(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cW(t,e)}(e,t),r=e,(n=[{key:"requires",get:function(){return[GU,tW]}},{key:"pluginName",get:function(){return"SelectAll"}}])&&rW(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ta);function sW(t){return sW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sW(t)}function lW(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return fW(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?fW(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function fW(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pW(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,hW(n.key),n)}}function hW(t){var e=function(t,e){if("object"!=sW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=sW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==sW(e)?e:e+""}function yW(t,e,r){return e=vW(e),function(t,e){if(e&&("object"===sW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,bW()?Reflect.construct(e,r||[],vW(t).constructor):e.apply(t,r))}function bW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(bW=function(){return!!t})()}function vW(t){return vW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},vW(t)}function mW(t,e){return mW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},mW(t,e)}var gW=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=yW(this,e,[t]))._stack=[],r._createdBatches=new WeakSet,r.refresh(),r._isEnabledBasedOnSelection=!1,r.listenTo(t.data,"set",(function(t,e){e[1]=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?pW(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=hW(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):pW(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},e[1]);var r=e[1];r.batchType||(r.batchType={isUndoable:!1})}),{priority:"high"}),r.listenTo(t.data,"set",(function(t,e){e[1].batchType.isUndoable||r.clearStack()})),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mW(t,e)}(e,t),r=e,n=[{key:"refresh",value:function(){this.isEnabled=this._stack.length>0}},{key:"createdBatches",get:function(){return this._createdBatches}},{key:"addBatch",value:function(t){var e=this.editor.model.document.selection,r={ranges:e.hasOwnRange?Array.from(e.getRanges()):[],isBackward:e.isBackward};this._stack.push({batch:t,selection:r}),this.refresh()}},{key:"clearStack",value:function(){this._stack=[],this.refresh()}},{key:"_restoreSelection",value:function(t,e,r){var n,o=this.editor.model,i=o.document,a=[],c=t.map((function(t){return t.getTransformedByOperations(r)})),u=c.flat(),s=lW(c);try{for(s.s();!(n=s.n()).done;){var l=n.value.filter((function(t){return t.root!=i.graveyard})).filter((function(t){return!kW(t,u)}));l.length&&(wW(l),a.push(l[0]))}}catch(t){s.e(t)}finally{s.f()}a.length&&o.change((function(t){t.setSelection(a,{backward:e})}))}},{key:"_undo",value:function(t,e){var r=this.editor.model,n=r.document;this._createdBatches.add(e);var o=t.operations.slice().filter((function(t){return t.isDocumentOperation}));o.reverse();var i,a=lW(o);try{for(a.s();!(i=a.n()).done;){var c,u=i.value,s=u.baseVersion+1,l=Array.from(n.history.getOperations(s)),f=lW(hO([u.getReversed()],l,{useRelations:!0,document:this.editor.model.document,padWithNoOps:!1,forceWeakRemove:!0}).operationsA);try{for(f.s();!(c=f.n()).done;){var p=c.value,d=p.affectedSelectable;d&&!r.canEditAt(d)&&(p=new P_(p.baseVersion)),e.addOperation(p),r.applyOperation(p),n.history.setOperationAsUndone(u,p)}}catch(t){f.e(t)}finally{f.f()}}}catch(t){a.e(t)}finally{a.f()}}}],n&&dW(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function wW(t){t.sort((function(t,e){return t.start.isBefore(e.start)?-1:1}));for(var e=1;e<t.length;e++){var r=t[e-1].getJoined(t[e],!0);r&&(e--,t.splice(e,2,r))}}function kW(t,e){return e.some((function(e){return e!==t&&e.containsRange(t,!0)}))}function _W(t){return _W="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_W(t)}function OW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,PW(n.key),n)}}function PW(t){var e=function(t,e){if("object"!=_W(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=_W(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_W(e)?e:e+""}function SW(t,e,r){return e=EW(e),function(t,e){if(e&&("object"===_W(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,jW()?Reflect.construct(e,r||[],EW(t).constructor):e.apply(t,r))}function jW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(jW=function(){return!!t})()}function EW(t){return EW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},EW(t)}function TW(t,e){return TW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},TW(t,e)}var AW=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),SW(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TW(t,e)}(e,t),r=e,n=[{key:"execute",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=e?this._stack.findIndex((function(t){return t.batch==e})):this._stack.length-1,n=this._stack.splice(r,1)[0],o=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(o,(function(){t._undo(n.batch,o);var e=t.editor.model.document.history.getOperations(n.batch.baseVersion);t._restoreSelection(n.selection.ranges,n.selection.isBackward,e)})),this.fire("revert",n.batch,o),this.refresh()}}],n&&OW(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(gW);function xW(t){return xW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xW(t)}function CW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,DW(n.key),n)}}function DW(t){var e=function(t,e){if("object"!=xW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=xW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==xW(e)?e:e+""}function RW(t,e,r){return e=BW(e),function(t,e){if(e&&("object"===xW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,IW()?Reflect.construct(e,r||[],BW(t).constructor):e.apply(t,r))}function IW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(IW=function(){return!!t})()}function BW(t){return BW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},BW(t)}function FW(t,e){return FW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},FW(t,e)}var MW=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),RW(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FW(t,e)}(e,t),r=e,n=[{key:"execute",value:function(){var t=this,e=this._stack.pop(),r=this.editor.model.createBatch({isUndo:!0});this.editor.model.enqueueChange(r,(function(){var n=e.batch.operations[e.batch.operations.length-1].baseVersion+1,o=t.editor.model.document.history.getOperations(n);t._restoreSelection(e.selection.ranges,e.selection.isBackward,o),t._undo(e.batch,r)})),this.refresh()}}],n&&CW(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(gW);function LW(t){return LW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},LW(t)}function NW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,VW(n.key),n)}}function VW(t){var e=function(t,e){if("object"!=LW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=LW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==LW(e)?e:e+""}function zW(t,e,r){return e=qW(e),function(t,e){if(e&&("object"===LW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,$W()?Reflect.construct(e,r||[],qW(t).constructor):e.apply(t,r))}function $W(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return($W=function(){return!!t})()}function qW(t){return qW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},qW(t)}function UW(t,e){return UW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},UW(t,e)}var WW=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=zW(this,e,arguments))._batchRegistry=new WeakSet,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UW(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"UndoEditing"}}],(n=[{key:"init",value:function(){var t=this,e=this.editor,r=e.t;this._undoCommand=new AW(e),this._redoCommand=new MW(e),e.commands.add("undo",this._undoCommand),e.commands.add("redo",this._redoCommand),this.listenTo(e.model,"applyOperation",(function(e,r){var n=r[0];if(n.isDocumentOperation){var o=n.batch,i=t._redoCommand.createdBatches.has(o),a=t._undoCommand.createdBatches.has(o);t._batchRegistry.has(o)||(t._batchRegistry.add(o),o.isUndoable&&(i?t._undoCommand.addBatch(o):a||(t._undoCommand.addBatch(o),t._redoCommand.clearStack())))}}),{priority:"highest"}),this.listenTo(this._undoCommand,"revert",(function(e,r,n){t._redoCommand.addBatch(n)})),e.keystrokes.set("CTRL+Z","undo"),e.keystrokes.set("CTRL+Y","redo"),e.keystrokes.set("CTRL+SHIFT+Z","redo"),e.accessibility.addKeystrokeInfos({keystrokes:[{label:r("Undo"),keystroke:"CTRL+Z"},{label:r("Redo"),keystroke:[["CTRL+Y"],["CTRL+SHIFT+Z"]]}]})}}])&&NW(r.prototype,n),o&&NW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function GW(t){return GW="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},GW(t)}function KW(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,HW(n.key),n)}}function HW(t){var e=function(t,e){if("object"!=GW(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=GW(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==GW(e)?e:e+""}function JW(t,e,r){return e=ZW(e),function(t,e){if(e&&("object"===GW(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,YW()?Reflect.construct(e,r||[],ZW(t).constructor):e.apply(t,r))}function YW(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(YW=function(){return!!t})()}function ZW(t){return ZW=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},ZW(t)}function XW(t,e){return XW=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},XW(t,e)}var QW=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),JW(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XW(t,e)}(e,t),r=e,n=[{key:"init",value:function(){var t=this.editor,e=t.locale,r=t.t,n="ltr"==e.uiLanguageDirection?Qj:Xj,o="ltr"==e.uiLanguageDirection?Xj:Qj;this._addButton("undo",r("Undo"),"CTRL+Z",n),this._addButton("redo",r("Redo"),"CTRL+Y",o)}},{key:"_addButton",value:function(t,e,r,n){var o=this,i=this.editor;i.ui.componentFactory.add(t,(function(a){var c=i.commands.get(t),u=new bA(a);return u.set({label:e,icon:n,keystroke:r,tooltip:!0}),u.bind("isEnabled").to(c,"isEnabled"),o.listenTo(u,"execute",(function(){i.execute(t),i.editing.view.focus()})),u}))}}],o=[{key:"pluginName",get:function(){return"UndoUI"}}],n&&KW(r.prototype,n),o&&KW(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function tG(t){return tG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tG(t)}function eG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,rG(n.key),n)}}function rG(t){var e=function(t,e){if("object"!=tG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=tG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==tG(e)?e:e+""}function nG(t,e,r){return e=iG(e),function(t,e){if(e&&("object"===tG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,oG()?Reflect.construct(e,r||[],iG(t).constructor):e.apply(t,r))}function oG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(oG=function(){return!!t})()}function iG(t){return iG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},iG(t)}function aG(t,e){return aG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},aG(t,e)}var cG=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),nG(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aG(t,e)}(e,t),r=e,(n=[{key:"requires",get:function(){return[WW,QW]}},{key:"pluginName",get:function(){return"Undo"}}])&&eG(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ta);function uG(t){return uG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uG(t)}function sG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,lG(n.key),n)}}function lG(t){var e=function(t,e){if("object"!=uG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=uG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==uG(e)?e:e+""}function fG(t,e,r){return e=dG(e),function(t,e){if(e&&("object"===uG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,pG()?Reflect.construct(e,r||[],dG(t).constructor):e.apply(t,r))}function pG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(pG=function(){return!!t})()}function dG(t){return dG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},dG(t)}function hG(t,e){return hG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},hG(t,e)}var yG=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),fG(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hG(t,e)}(e,t),r=e,(n=[{key:"requires",get:function(){return[IT,TU,s$,uW,E$,DV,cG]}},{key:"pluginName",get:function(){return"Essentials"}}])&&sG(r,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(ta);function bG(t){return bG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bG(t)}function vG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,mG(n.key),n)}}function mG(t){var e=function(t,e){if("object"!=bG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=bG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==bG(e)?e:e+""}function gG(t,e,r){return e=kG(e),function(t,e){if(e&&("object"===bG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,wG()?Reflect.construct(e,r||[],kG(t).constructor):e.apply(t,r))}function wG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(wG=function(){return!!t})()}function kG(t){return kG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},kG(t)}function _G(t,e){return _G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},_G(t,e)}var OG={"(":")","[":"]","{":"}"},PG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=gG(this,e,[t]))._isEnabledBasedOnSelection=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_G(t,e)}(e,t),r=e,n=[{key:"refresh",value:function(){var t=this.editor.model,e=t.document;this.isEnabled=t.schema.checkAttributeInSelection(e.selection,"mention")}},{key:"execute",value:function(t){var e=this.editor.model,r=e.document.selection,n="string"==typeof t.mention?{id:t.mention}:t.mention,o=n.id,i=t.range||r.getFirstRange();if(e.canEditAt(i)){var a=t.text||o,c=BG({_text:a,id:o},n);if(1!=t.marker.length)throw new A("mentioncommand-incorrect-marker",this);if(o.charAt(0)!=t.marker)throw new A("mentioncommand-incorrect-id",this);e.change((function(t){var n=Mi(r.getAttributes()),o=new Map(n.entries());o.set("mention",c);var u=e.insertContent(t.createText(a,o),i),s=u.start.nodeBefore,l=u.end.nodeAfter,f=l&&l.is("$text")&&l.data.startsWith(" "),p=!1;if(s&&l&&s.is("$text")&&l.is("$text")){var d=s.data.slice(-1),h=d in OG,y=h&&l.data.startsWith(OG[d]);p=h&&y}p||f||e.insertContent(t.createText(" ",n),i.start.getShiftedBy(a.length))}))}}}],n&&vG(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function SG(t){return SG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},SG(t)}function jG(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return EG(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?EG(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function EG(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function TG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,AG(n.key),n)}}function AG(t){var e=function(t,e){if("object"!=SG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=SG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==SG(e)?e:e+""}function xG(t,e,r){return e=DG(e),function(t,e){if(e&&("object"===SG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,CG()?Reflect.construct(e,r||[],DG(t).constructor):e.apply(t,r))}function CG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(CG=function(){return!!t})()}function DG(t){return DG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},DG(t)}function RG(t,e){return RG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},RG(t,e)}var IG=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xG(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RG(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"MentionEditing"}}],(n=[{key:"init",value:function(){var t=this.editor,e=t.model,r=e.document;e.schema.extend("$text",{allowAttributes:"mention"}),t.conversion.for("upcast").elementToAttribute({view:{name:"span",key:"data-mention",classes:"mention"},model:{key:"mention",value:function(t){return FG(t)}}}),t.conversion.for("downcast").attributeToElement({model:"mention",view:LG}),t.conversion.for("downcast").add(MG),r.registerPostFixer((function(t){return function(t,e,r){var n,o=!1,i=jG(e.differ.getChanges());try{for(i.s();!(n=i.n()).done;){var a=n.value;if("attribute"!=a.type){var c=a.position;if("$text"==a.name){var u=c.textNode&&c.textNode.nextSibling;o=VG(c.textNode,t)||o,o=VG(u,t)||o,o=VG(c.nodeBefore,t)||o,o=VG(c.nodeAfter,t)||o}if("$text"!=a.name&&"insert"==a.type){var s,l=c.nodeAfter,f=jG(t.createRangeIn(l).getItems());try{for(f.s();!(s=f.n()).done;)o=VG(s.value,t)||o}catch(t){f.e(t)}finally{f.f()}}if("insert"==a.type&&r.isInline(a.name)){var p=c.nodeAfter&&c.nodeAfter.nextSibling;o=VG(c.nodeBefore,t)||o,o=VG(p,t)||o}}}}catch(t){i.e(t)}finally{i.f()}return o}(t,r,e.schema)})),r.registerPostFixer((function(t){return function(t,e){var r,n=!1,o=jG(e.differ.getChanges());try{for(o.s();!(r=o.n()).done;){var i=r.value;if("attribute"===i.type&&"mention"!=i.attributeKey)for(var a=i.range.start.nodeBefore,c=i.range.end.nodeAfter,u=0,s=[a,c];u<s.length;u++){var l=s[u];NG(l)&&l.getAttribute(i.attributeKey)!=i.attributeNewValue&&(t.setAttribute(i.attributeKey,i.attributeNewValue,l),n=!0)}}}catch(t){o.e(t)}finally{o.f()}return n}(t,r)})),r.registerPostFixer((function(t){return function(t,e){var r,n,o=e.selection,i=o.focus;return!!(o.isCollapsed&&o.hasAttribute("mention")&&(r=i,n=r.isAtStart,r.nodeBefore&&r.nodeBefore.is("$text")||n))&&(t.removeSelectionAttribute("mention"),!0)}(t,r)})),t.commands.add("mention",new PG(t))}}])&&TG(r.prototype,n),o&&TG(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function BG(t,e){return Object.assign({uid:v()},t,e||{})}function FG(t,e){var r=t.getAttribute("data-mention"),n=t.getChild(0);if(n)return BG({id:r,_text:n.data},e)}function MG(t){t.on("attribute:mention",(function(t,e,r){var n=e.attributeNewValue;if(e.item.is("$textProxy")&&n){var o=e.range.start;(o.textNode||o.nodeAfter).data!=n._text&&r.consumable.consume(e.item,t.name)}}),{priority:"highest"})}function LG(t,e){var r=e.writer;if(t){var n={class:"mention","data-mention":t.id},o={id:t.uid,priority:20};return r.createAttributeElement("span",n,o)}}function NG(t){return!(!t||!t.is("$text")&&!t.is("$textProxy")||!t.hasAttribute("mention"))&&t.data!=t.getAttribute("mention")._text}function VG(t,e){return!!NG(t)&&(e.removeAttribute("mention",t),!0)}var zG=r(7790);function $G(t){return $G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$G(t)}function qG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,UG(n.key),n)}}function UG(t){var e=function(t,e){if("object"!=$G(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=$G(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==$G(e)?e:e+""}function WG(t,e,r){return e=KG(e),function(t,e){if(e&&("object"===$G(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,GG()?Reflect.construct(e,r||[],KG(t).constructor):e.apply(t,r))}function GG(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(GG=function(){return!!t})()}function KG(t){return KG=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},KG(t)}function HG(t,e){return HG=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},HG(t,e)}Da()(zG.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),zG.A.locals;var JG=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=WG(this,e,[t])).extendTemplate({attributes:{class:["ck-mentions"],tabindex:"-1"}}),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&HG(t,e)}(e,t),r=e,(n=[{key:"selectFirst",value:function(){this.select(0)}},{key:"selectNext",value:function(){var t=this.selected,e=this.items.getIndex(t);this.select(e+1)}},{key:"selectPrevious",value:function(){var t=this.selected,e=this.items.getIndex(t);this.select(e-1)}},{key:"select",value:function(t){var e=0;t>0&&t<this.items.length?e=t:t<0&&(e=this.items.length-1);var r=this.items.get(e);this.selected!==r&&(this.selected&&this.selected.removeHighlight(),r.highlight(),this.selected=r,this._isItemVisibleInScrolledArea(r)||(this.element.scrollTop=r.element.offsetTop))}},{key:"executeSelected",value:function(){this.selected.fire("execute")}},{key:"_isItemVisibleInScrolledArea",value:function(t){return new to(this.element).contains(new to(t.element))}}])&&qG(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(cD);function YG(t){return YG="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},YG(t)}function ZG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,XG(n.key),n)}}function XG(t){var e=function(t,e){if("object"!=YG(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=YG(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==YG(e)?e:e+""}function QG(t,e,r){return e=rK(e),function(t,e){if(e&&("object"===YG(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,tK()?Reflect.construct(e,r||[],rK(t).constructor):e.apply(t,r))}function tK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(tK=function(){return!!t})()}function eK(){return eK="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},eK.apply(this,arguments)}function rK(t){return rK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},rK(t)}function nK(t,e){return nK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},nK(t,e)}var oK=function(t){function e(t,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=QG(this,e,[t])).template=void 0,n.domElement=r,n.domElement.classList.add("ck-button"),n.set("isOn",!1),n.on("change:isOn",(function(t,e,r){r?(n.domElement.classList.add("ck-on"),n.domElement.classList.remove("ck-off")):(n.domElement.classList.add("ck-off"),n.domElement.classList.remove("ck-on"))})),n.listenTo(n.domElement,"click",(function(){n.fire("execute")})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nK(t,e)}(e,t),r=e,(n=[{key:"render",value:function(){eK(rK(e.prototype),"render",this).call(this),this.element=this.domElement}},{key:"focus",value:function(){this.domElement.focus()}}])&&ZG(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(oT);function iK(t){return iK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iK(t)}function aK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,cK(n.key),n)}}function cK(t){var e=function(t,e){if("object"!=iK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=iK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==iK(e)?e:e+""}function uK(t,e,r){return e=lK(e),function(t,e){if(e&&("object"===iK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,sK()?Reflect.construct(e,r||[],lK(t).constructor):e.apply(t,r))}function sK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(sK=function(){return!!t})()}function lK(t){return lK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},lK(t)}function fK(t,e){return fK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},fK(t,e)}var pK=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),uK(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fK(t,e)}(e,t),r=e,(n=[{key:"highlight",value:function(){this.children.first.isOn=!0}},{key:"removeHighlight",value:function(){this.children.first.isOn=!1}}])&&aK(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(BC);function dK(t){return dK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dK(t)}function hK(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function yK(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?hK(Object(r),!0).forEach((function(e){var n,o,i;n=t,o=e,i=r[e],(o=gK(o))in n?Object.defineProperty(n,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[o]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hK(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function bK(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return vK(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?vK(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}function vK(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function mK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gK(n.key),n)}}function gK(t){var e=function(t,e){if("object"!=dK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=dK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==dK(e)?e:e+""}function wK(t,e,r){return e=OK(e),function(t,e){if(e&&("object"===dK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,kK()?Reflect.construct(e,r||[],OK(t).constructor):e.apply(t,r))}function kK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(kK=function(){return!!t})()}function _K(){return _K="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OK(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}},_K.apply(this,arguments)}function OK(t){return OK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},OK(t)}function PK(t,e){return PK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},PK(t,e)}var SK=[zo.arrowup,zo.arrowdown,zo.esc],jK=[zo.enter,zo.tab],EK=function(t){function r(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),(e=wK(this,r,[t]))._items=new Oi,e._mentionsView=e._createMentionView(),e._mentionsConfigurations=new Map,e._requestFeedDebounced=ud(e._requestFeed,100),t.config.define("mention",{feeds:[]}),e}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PK(t,e)}(r,t),n=r,o=[{key:"init",value:function(){var t=this,r=this.editor,n=r.config.get("mention.commitKeys")||jK,o=SK.concat(n);this._balloon=r.plugins.get(eF),r.editing.view.document.on("keydown",(function(e,r){var i;i=r.keyCode,o.includes(i)&&t._isUIVisible&&(r.preventDefault(),e.stop(),r.keyCode==zo.arrowdown&&t._mentionsView.selectNext(),r.keyCode==zo.arrowup&&t._mentionsView.selectPrevious(),n.includes(r.keyCode)&&t._mentionsView.executeSelected(),r.keyCode==zo.esc&&t._hideUIAndRemoveMarker())}),{priority:"highest"}),e({emitter:this._mentionsView,activator:function(){return t._isUIVisible},contextElements:function(){return[t._balloon.view.element]},callback:function(){return t._hideUIAndRemoveMarker()}});var i,a=r.config.get("mention.feeds"),c=bK(a);try{for(c.s();!(i=c.n()).done;){var u=i.value,s=u.feed,l=u.marker,f=u.dropdownLimit;if(!DK(l))throw new A("mentionconfig-incorrect-marker",null,{marker:l});var p={marker:l,feedCallback:"function"==typeof s?s.bind(this.editor):CK(s),itemRenderer:u.itemRenderer,dropdownLimit:f};this._mentionsConfigurations.set(l,p)}}catch(t){c.e(t)}finally{c.f()}this._setupTextWatcher(a),this.listenTo(r,"change:isReadOnly",(function(){t._hideUIAndRemoveMarker()})),this.on("requestFeed:response",(function(e,r){return t._handleFeedResponse(r)})),this.on("requestFeed:error",(function(){return t._hideUIAndRemoveMarker()}))}},{key:"destroy",value:function(){_K(OK(r.prototype),"destroy",this).call(this),this._mentionsView.destroy()}},{key:"_isUIVisible",get:function(){return this._balloon.visibleView===this._mentionsView}},{key:"_createMentionView",value:function(){var t=this,e=this.editor.locale,r=new JG(e);return r.items.bindTo(this._items).using((function(n){var o=n.item,i=n.marker,a=t._mentionsConfigurations.get(i).dropdownLimit||t.editor.config.get("mention.dropdownLimit")||10;if(r.items.length>=a)return null;var c=new pK(e),u=t._renderItem(o,i);return u.delegate("execute").to(c),c.children.add(u),c.item=o,c.marker=i,c.on("execute",(function(){r.fire("execute",{item:o,marker:i})})),c})),r.on("execute",(function(e,r){var n=t.editor,o=n.model,i=r.item,a=r.marker,c=n.model.markers.get("mention"),u=o.createPositionAt(o.document.selection.focus),s=o.createPositionAt(c.getStart()),l=o.createRange(s,u);t._hideUIAndRemoveMarker(),n.execute("mention",{mention:i,text:i.text,marker:a,range:l}),n.editing.view.focus()})),r}},{key:"_getItemRenderer",value:function(t){return this._mentionsConfigurations.get(t).itemRenderer}},{key:"_requestFeed",value:function(t,e){var r=this;this._lastRequested=e;var n=(0,this._mentionsConfigurations.get(t).feedCallback)(e);n instanceof Promise?n.then((function(n){r._lastRequested==e?r.fire("requestFeed:response",{feed:n,marker:t,feedText:e}):r.fire("requestFeed:discarded",{feed:n,marker:t,feedText:e})})).catch((function(e){r.fire("requestFeed:error",{error:e}),x("mention-feed-callback-error",{marker:t})})):this.fire("requestFeed:response",{feed:n,marker:t,feedText:e})}},{key:"_setupTextWatcher",value:function(t){var e=this,r=this.editor,n=t.map((function(t){return yK(yK({},t),{},{pattern:xK(t.marker,t.minimumCharacters||0)})})),o=new VV(r.model,function(t){return function(e){var r=AK(t,e);if(!r)return!1;var n=0;0!==r.position&&(n=r.position-1);var o=e.substring(n);return r.pattern.test(o)}}(n));o.on("matched",(function(t,o){var i=AK(n,o.text),a=r.model.document.selection.focus,c=r.model.createPositionAt(a.parent,i.position);if(s=(u=a).textNode&&u.textNode.hasAttribute("mention"),l=u.nodeBefore,s||l&&l.is("$text")&&l.hasAttribute("mention")||function(t){var e=t.nodeAfter;return e&&e.is("$text")&&e.hasAttribute("mention")}(c))e._hideUIAndRemoveMarker();else{var u,s,l,f=function(t,e){var r=0;0!==t.position&&(r=t.position-1);var n=xK(t.marker,0);return e.substring(r).match(n)[2]}(i,o.text),p=i.marker.length+f.length,d=a.getShiftedBy(-p),h=a.getShiftedBy(-f.length),y=r.model.createRange(d,h);if(RK(r)){var b=r.model.markers.get("mention");r.model.change((function(t){t.updateMarker(b,{range:y})}))}else r.model.change((function(t){t.addMarker("mention",{range:y,usingOperation:!1,affectsData:!1})}));e._requestFeedDebounced(i.marker,f)}})),o.on("unmatched",(function(){e._hideUIAndRemoveMarker()}));var i=r.commands.get("mention");return o.bind("isEnabled").to(i),o}},{key:"_handleFeedResponse",value:function(t){var e=t.feed,r=t.marker;if(RK(this.editor)){this._items.clear();var n,o=bK(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,a="object"!=dK(i)?{id:i,text:i}:i;this._items.add({item:a,marker:r})}}catch(t){o.e(t)}finally{o.f()}var c=this.editor.model.markers.get("mention");this._items.length?this._showOrUpdateUI(c):this._hideUIAndRemoveMarker()}}},{key:"_showOrUpdateUI",value:function(t){this._isUIVisible?this._balloon.updatePosition(this._getBalloonPanelPositionData(t,this._mentionsView.position)):this._balloon.add({view:this._mentionsView,position:this._getBalloonPanelPositionData(t,this._mentionsView.position),singleViewMode:!0}),this._mentionsView.position=this._balloon.view.position,this._mentionsView.selectFirst()}},{key:"_hideUIAndRemoveMarker",value:function(){this._balloon.hasView(this._mentionsView)&&this._balloon.remove(this._mentionsView),RK(this.editor)&&this.editor.model.change((function(t){return t.removeMarker("mention")})),this._mentionsView.position=void 0}},{key:"_renderItem",value:function(t,e){var r,n=this.editor,o=t.id,i=this._getItemRenderer(e);if(i){var a=i(t);"string"!=typeof a?r=new oK(n.locale,a):o=a}if(!r){var c=new bA(n.locale);c.label=o,c.withText=!0,r=c}return r}},{key:"_getBalloonPanelPositionData",value:function(t,e){var r=this,n=this.editor,o=n.editing,i=o.view.domConverter,a=o.mapper;return{target:function(){var e=t.getRange();"$graveyard"==e.start.root.rootName&&(e=n.model.document.selection.getFirstRange());var r=a.toViewRange(e);return to.getDomRangeRects(i.viewRangeToDom(r)).pop()},limiter:function(){var t=r.editor.editing.view,e=t.document.selection.editableElement;return e?t.domConverter.mapViewToDom(e.root):null},positions:TK(e,n.locale.uiLanguageDirection)}}}],i=[{key:"pluginName",get:function(){return"MentionUI"}},{key:"requires",get:function(){return[eF]}}],o&&mK(n.prototype,o),i&&mK(n,i),Object.defineProperty(n,"prototype",{writable:!1}),n;var n,o,i}(ta);function TK(t,e){var r={caret_se:function(t){return{top:t.bottom+3,left:t.right,name:"caret_se",config:{withArrow:!1}}},caret_ne:function(t,e){return{top:t.top-e.height-3,left:t.right,name:"caret_ne",config:{withArrow:!1}}},caret_sw:function(t,e){return{top:t.bottom+3,left:t.right-e.width,name:"caret_sw",config:{withArrow:!1}}},caret_nw:function(t,e){return{top:t.top-e.height-3,left:t.right-e.width,name:"caret_nw",config:{withArrow:!1}}}};return Object.prototype.hasOwnProperty.call(r,t)?[r[t]]:"rtl"!==e?[r.caret_se,r.caret_sw,r.caret_ne,r.caret_nw]:[r.caret_sw,r.caret_se,r.caret_nw,r.caret_ne]}function AK(t,e){var r,n,o=bK(t);try{for(o.s();!(n=o.n()).done;){var i=n.value,a=e.lastIndexOf(i.marker);a>0&&!e.substring(a-1).match(i.pattern)||(!r||a>=r.position)&&(r={marker:i.marker,position:a,minimumCharacters:i.minimumCharacters,pattern:i.pattern})}}catch(t){o.e(t)}finally{o.f()}return r}function xK(t,e){var r=0==e?"*":"{".concat(e,",}"),n=i.features.isRegExpUnicodePropertySupported?"\\p{Ps}\\p{Pi}\"'":"\\(\\[{\"'",o="(?:^|[ ".concat(n,"])([").concat(t,"])(").concat(".").concat(r,")$");return new RegExp(o,"u")}function CK(t){return function(e){return t.filter((function(t){return("string"==typeof t?t:String(t.id)).toLowerCase().includes(e.toLowerCase())}))}}function DK(t){return t&&1==t.length}function RK(t){return t.model.markers.has("mention")}var IK=r(7012);function BK(t){return BK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},BK(t)}function FK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,MK(n.key),n)}}function MK(t){var e=function(t,e){if("object"!=BK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=BK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==BK(e)?e:e+""}function LK(t,e,r){return e=VK(e),function(t,e){if(e&&("object"===BK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,NK()?Reflect.construct(e,r||[],VK(t).constructor):e.apply(t,r))}function NK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(NK=function(){return!!t})()}function VK(t){return VK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},VK(t)}function zK(t,e){return zK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},zK(t,e)}Da()(IK.A,{injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0}),IK.A.locals;var $K=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),LK(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zK(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"Mention"}},{key:"requires",get:function(){return[IG,EK]}}],(n=[{key:"toMentionAttribute",value:function(t,e){return FG(t,e)}}])&&FK(r.prototype,n),o&&FK(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);function qK(t){return qK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qK(t)}function UK(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WK(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,GK(n.key),n)}}function GK(t){var e=function(t,e){if("object"!=qK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=qK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==qK(e)?e:e+""}function KK(t,e,r){return e=JK(e),function(t,e){if(e&&("object"===qK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,HK()?Reflect.construct(e,r||[],JK(t).constructor):e.apply(t,r))}function HK(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(HK=function(){return!!t})()}function JK(t){return JK=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},JK(t)}function YK(t,e){return YK=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},YK(t,e)}var ZK=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=KK(this,e,[t]))._isEnabledBasedOnSelection=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YK(t,e)}(e,t),r=e,n=[{key:"refresh",value:function(){var t=this.editor.model,e=Pi(t.document.selection.getSelectedBlocks());this.value=!!e&&e.is("element","paragraph"),this.isEnabled=!!e&&XK(e,t.schema)}},{key:"execute",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.editor.model,r=e.document,n=t.selection||r.selection;e.canEditAt(n)&&e.change((function(t){var r,o=function(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return UK(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?UK(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){c=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(c)throw i}}}}(n.getSelectedBlocks());try{for(o.s();!(r=o.n()).done;){var i=r.value;!i.is("element","paragraph")&&XK(i,e.schema)&&t.rename(i,"paragraph")}}catch(t){o.e(t)}finally{o.f()}}))}}],n&&WK(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function XK(t,e){return e.checkChild(t.parent,"paragraph")&&!e.isObject(t)}function QK(t){return QK="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},QK(t)}function tH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,eH(n.key),n)}}function eH(t){var e=function(t,e){if("object"!=QK(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=QK(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==QK(e)?e:e+""}function rH(t,e,r){return e=oH(e),function(t,e){if(e&&("object"===QK(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,nH()?Reflect.construct(e,r||[],oH(t).constructor):e.apply(t,r))}function nH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(nH=function(){return!!t})()}function oH(t){return oH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},oH(t)}function iH(t,e){return iH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},iH(t,e)}var aH=function(t){function e(t){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rH(this,e,[t]))._isEnabledBasedOnSelection=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iH(t,e)}(e,t),r=e,n=[{key:"execute",value:function(t){var e=this,r=this.editor.model,n=t.attributes,o=t.position;r.canEditAt(o)&&r.change((function(t){if(o=e._findPositionToInsertParagraph(o,t)){var i=t.createElement("paragraph");n&&r.schema.setAllowedAttributes(i,n,t),r.insertContent(i,o),t.setSelection(i,"in")}}))}},{key:"_findPositionToInsertParagraph",value:function(t,e){var r=this.editor.model;if(r.schema.checkChild(t,"paragraph"))return t;var n=r.schema.findAllowedParent(t,"paragraph");if(!n)return null;var o=t.parent,i=r.schema.checkChild(o,"$text");return o.isEmpty||i&&t.isAtEnd?r.createPositionAfter(o):!o.isEmpty&&i&&t.isAtStart?r.createPositionBefore(o):e.split(t,n).position}}],n&&tH(r.prototype,n),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n}(sa);function cH(t){return cH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cH(t)}function uH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,sH(n.key),n)}}function sH(t){var e=function(t,e){if("object"!=cH(t)||!t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,"string");if("object"!=cH(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==cH(e)?e:e+""}function lH(t,e,r){return e=pH(e),function(t,e){if(e&&("object"===cH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(t,fH()?Reflect.construct(e,r||[],pH(t).constructor):e.apply(t,r))}function fH(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(fH=function(){return!!t})()}function pH(t){return pH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},pH(t)}function dH(t,e){return dH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},dH(t,e)}var hH=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),lH(this,e,arguments)}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&dH(t,e)}(e,t),r=e,o=[{key:"pluginName",get:function(){return"Paragraph"}}],(n=[{key:"init",value:function(){var t=this.editor,r=t.model;t.commands.add("paragraph",new ZK(t)),t.commands.add("insertParagraph",new aH(t)),r.schema.register("paragraph",{inheritAllFrom:"$block"}),t.conversion.elementToElement({model:"paragraph",view:"p"}),t.conversion.for("upcast").elementToElement({model:function(t,r){var n=r.writer;return e.paragraphLikeElements.has(t.name)?t.isEmpty?null:n.createElement("paragraph"):null},view:/.+/,converterPriority:"low"})}}])&&uH(r.prototype,n),o&&uH(r,o),Object.defineProperty(r,"prototype",{writable:!1}),r;var r,n,o}(ta);hH.paragraphLikeElements=new Set(["blockquote","dd","div","dt","h1","h2","h3","h4","h5","h6","li","p","td","th"]);const yH=hH;class bH extends IL{}bH.builtinPlugins=[vN,yG,$K,yH,cG],bH.defaultConfig={toolbar:{items:["|"]},mention:{feeds:[{marker:"@",feed:["@Barney","@Lily","@Marshall","@Robin","@Ted"]}]},language:"en"},bH.create(document.querySelector("#app")).then((t=>{console.log("Editor was initialized",t)})).catch((t=>{console.error(t.stack)}))})()})();